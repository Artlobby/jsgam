{"version":3,"file":"jsgam.umd.js","sources":["../src/loader.js","../src/class/scene.js","../src/class/text.js","../src/class/menu.js","../src/class/mainmenu.js","../src/class/options.js","../src/class/credits.js","../src/class/title.js","../src/class/gamescene.js","../src/collisions.js","../src/class/gameobject.js","../src/class/inventory.js","../src/class/puzzle.js","../src/class/character.js","../src/class/player.js","../src/game.js","../src/index.js"],"sourcesContent":["\n\nclass Loader extends PIXI.loaders.Loader{\n  constructor(){\n    super();\n    this.game=null;\n    this.onLoad.add(this.update.bind(this));\n    this.onError.add(this.error.bind(this));\n  }\n\n  //Add config files to loader\n  addJSON(files){\n    let i;\n    let arrayLength=files.length;\n\n    for(i=0;i<arrayLength;i++){\n      let name=files[i].slice(files[i].lastIndexOf(\"/\")+1,files[i].lastIndexOf(\".\"));\n      this.add(name,files[i]);\n    }\n  }\n\n  //Add resource files to loader and settings to game\n  addFiles(files){\n    let i;\n    let length=files.length\n    for(i=0;i<length;i++){\n\n      //Add config files to setup the game\n      if(files[i].data.Settings) this.game.settings=files[i].data.Settings;\n      if(files[i].data.Scenes) this.game.data.scenes=files[i].data.Scenes;\n      if(files[i].data.Cutscenes) this.game.data.cutscenes=files[i].data.Cutscenes;\n      if(files[i].data.Objects) this.game.data.objects=files[i].data.Objects;\n      if(files[i].data.Dialogues) this.game.data.dialogues=files[i].data.Dialogues;\n      if(files[i].data.Puzzles) this.game.data.puzzles=files[i].data.Puzzles;\n      if(files[i].data.Credits) this.game.data.credits=files[i].data.Credits;\n      if(files[i].data.Texts) this.game.data.texts=files[i].data.Texts;\n\n      //Look for sound files\n      if(files[i].data.Sounds){\n        let soundSrc=files[i].data.Sounds;\n        for(let j=0;j<soundSrc.length;j++){\n           let tmpSound=soundSrc[j].Src;\n           if(tmpSound!==null) this.add(soundSrc[j].Name,tmpSound);\n        }\n       }\n\n       //Look for video files\n       if(files[i].data.Vids)\n       {\n         //Fix for load correctly vids with pixi-sound\n         this.fixVidLoad();\n         let vidSrc=files[i].data.Vids;\n         for(let i=0;i<vidSrc.length;i++){\n           let tmpVid=vidSrc[i].Src;\n           if(tmpVid!==null) this.add(vidSrc[i].Name,tmpVid);\n         }\n       }\n\n       //Load Animations\n       if(files[i].data.Animations)\n       {\n         let animSrc=files[i].data.Animations;\n         for(let i=0;i<animSrc.length;i++){\n           let tmpAnim=animSrc[i].Src;\n           if(tmpAnim!==null) this.add(animSrc[i].Name,tmpAnim);\n         }\n       }\n\n       //Load Backgrounds if don't use texture atlas for backgrounds\n       if(files[i].data.Backgrounds){\n         let bgSrc=files[i].data.Animations;\n         for(let i=0;i<bgSrc.length;i++){\n           let tmpBg=bgSrc[i].Src;\n           if(tmpBg!==null) this.add(bgSrc[i].Name,tmpBg);\n         }\n       }\n\n       //Look for player files\n       if(files[i].data.Player){\n         this.add('playerTex', files[i].data.Player.Texture)\n             .add('playerJson', files[i].data.Player.Json)\n             .add('playerSkeleton', files[i].data.Player.Skeleton);\n         this.game.data.player=files[i].data.Player;\n       }\n\n       //Look for NPC files\n       if(files[i].data.Characters){\n         let npcSrc=files[i].data.Characters;\n         for(let i=0;i<npcSrc.length;i++){\n            this.add(npcSrc[i].Name+\"Tex\", npcSrc[i].Texture)\n            .add(npcSrc[i].Name+'Json', npcSrc[i].Json)\n            .add(npcSrc[i].Name+'Skeleton', npcSrc[i].Skeleton);\n          }\n          this.game.data.npc=files[i].data.Characters;\n        }\n    }\n  }\n\n  //Fix for load mp4 as videos instead as audio because of pixi-sound\n  fixVidLoad(){\n    PIXI.sound.utils.extensions.splice(PIXI.sound.utils.extensions.indexOf('mp4'), 1);\n    PIXI.loaders.Resource.setExtensionXhrType('mp4', undefined);\n    PIXI.loaders.Resource.setExtensionLoadType('mp4', PIXI.loaders.Resource.LOAD_TYPE.VIDEO);\n  }\n\n  //Loading progress\n  update(){\n    let percent=Math.floor(this.progress);\n    //console.log(percent);\n    this.game.loadinProgress.text=percent+ \"%\";\n  }\n\n  //File failed to load\n  error(resource){\n    console.log(resource);\n  }\n\n}\n\nexport default Loader;\n","class Scene{\n  constructor(){\n    this.container = new PIXI.Container();\n    this.game=null;\n  }\n\n  setup(config){\n    this.background=new PIXI.Sprite(PIXI.Texture.from(config.Background));\n    this.background.anchor.set(0);\n    this.container.addChild(this.background);\n    this.music=config.Music;\n    this.config=config;\n  }\n\n  update(dt) {\n\n  }\n}\n\nexport default Scene;\n","class Button extends PIXI.Text{\n    constructor(text,style){\n      super(text,style);\n      this.interactive=true;\n      this.buttonMode=true;\n    }\n}\n\nclass TextField{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.Background=null;\n    this.Text=null;\n    this.container.visible=false;\n  }\n\n  build(){\n    this.container.parentLayer = this.game.layerUI;\n    this.Background=new PIXI.Sprite(PIXI.Texture.WHITE);\n\n    let size=4;\n    if(this.game.settings.Text.Size!==undefined){\n      if(this.game.settings.Text.Size===\"fourth\") size=4;\n      else if(this.game.settings.Text.Size===\"half\") size=2;\n    }\n    this.Background.width=this.game.width;\n    this.Background.height=this.game.height/size;\n\n    this.Background.tint='black';\n    this.Background.alpha=0.5;\n\n    this.Text=new Button(\"\", this.game.settings.Text.Style);\n    this.Text.anchor.set(0.5,0);\n    this.Text.x=this.game.width/2;\n    this.Text.y=0;\n    this.Text.on('pointertap',this.skip.bind(this));\n\n    this.container.addChild(this.Background);\n    this.container.addChild(this.Text);\n    if(this.game.settings.Text.Position!==undefined) this.setPosition(this.game.settings.Text.Position);\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  skip(){\n    this.setText(\"\");\n    this.hide();\n    this.game.player.stop();\n  }\n\n  setPosition(position){\n    if(position===\"top\"){\n      this.container.x=0;\n      this.container.y=0;\n    }else if(position===\"bottom\"){\n      this.container.x=0;\n      this.container.y=this.game.height-this.container.height;\n    }\n  }\n\n  setText(newText){\n    this.Text.text=newText;\n    if(this.Text.width>this.container.width || this.Text.height>this.container.height){\n      this.adjustText();\n    }\n  }\n\n  adjustText(){\n    let ratio = Math.min( this.container.width/this.Text.width,  this.container.height/this.Text.height);\n    this.container.scale.set(ratio*0.95);\n  }\n\n  //Get words number of the text\n  countWords(str) {\n   return str.split(\" \").length;\n  }\n\n  //Calculate how many seconds we show the text\n  timeOut(){\n    let time;\n    if(this.game.settings.Text.Speed!==undefined) time=this.game.settings.Text.Speed;\n    else time=this.countWords(this.Text.text)/3;\n    return time*1000;\n  }\n\n  setColor(colour){\n    this.Text.tint=colour;\n  }\n}\n\nexport {Button,TextField};\n","import {Button} from './text.js'\n\nclass Menu{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.game=null;\n    this.buttons={};\n    }\n\n  addButton(name,text){\n    this.buttons[name]=new Button(text[this.game.activeLanguage],this.game.settings.Text.ButtonStyle);\n    this.container.addChild(this.buttons[name]);\n  }\n\n  modify(name,text){\n    this.buttons[name].text=text[this.game.activeLanguage];\n  }\n\n  disable(name){\n    this.buttons[name].alpha=0.5;\n    this.buttons[name].interactive=false;\n  }\n\n  enable(name){\n    this.buttons[name].alpha=1.0;\n    this.buttons[name].interactive=true;\n  }\n\n  sortMenu(){\n    let i;\n    let arrayButtons=Object.values(this.buttons);\n    let length=arrayButtons.length;\n    arrayButtons[0].y=0;\n    for(i=1;i<length;i++)\n    {\n      arrayButtons[i].y=arrayButtons[i-1].y+arrayButtons[i-1].height*1.5;\n      arrayButtons[i].x=this.container.width/2-arrayButtons[i].width/2;\n    }\n\n    this.center();\n  //  this.resize();\n  }\n\n  resize(){\n    let ratio = Math.min( this.game.width/this.container.width,  this.game.height/this.container.height);\n    console.log(ratio)\n    this.container.scale.set(ratio*0.95);\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n\n}\nexport default Menu;\n","import Menu from './menu.js';\n\nclass MainMenu extends Menu{\n  create(){\n      let gameTexts=this.game.data.texts;\n      this.addButton(\"New\",gameTexts.NewGame);\n      this.addButton(\"Continue\",gameTexts.Continue);\n      this.addButton(\"Options\",gameTexts.Options);\n      this.addButton(\"Help\",gameTexts.Help);\n      this.addButton(\"Credits\",gameTexts.Credits);\n\n      this.disable(\"Continue\");\n\n      this.sortMenu();\n    }\n\n  changeLanguage(){\n    this.modify(\"New\",this.game.data.texts.NewGame);\n    this.modify(\"Continue\",this.game.data.texts.Continue);\n    this.modify(\"Options\",this.game.data.texts.Options);\n    this.modify(\"Credits\",this.game.data.texts.Credits);\n\n    this.sortMenu();\n  }\n\n}\nexport default MainMenu;\n","import Menu from './menu.js';\nimport {Button} from './text.js';\n\nclass Options extends Menu{\n  create(){\n    this.container.visible=false;\n    let languages=this.game.settings.Languages\n    for(let i=0;i<languages.length;i++){\n      this.addLanguage(languages[i],);\n      this.buttons[languages[i]].on('pointerup', this.setLanguage);\n    }\n\n    let langArray=Object.values(this.buttons);\n    langArray[this.game.activeLanguage].tint=\"0xFF0000\";\n\n    this.addButton(\"Back\",this.game.data.texts.Back);\n    this.sortMenu();\n  }\n\n  addLanguage(name){\n    this.buttons[name]=new Button(name,this.game.settings.Text.ButtonStyle);\n    this.buttons[name].father=this;\n    this.container.addChild(this.buttons[name]);\n  }\n\n  setLanguage(){\n    this.father.change(this.text);\n  }\n\n  change(text){\n    let languages=this.game.settings.Languages\n    this.buttons[languages[this.game.activeLanguage]].tint=\"0xFFFFFF\";\n    this.game.activeLanguage=this.game.settings.Languages.indexOf(text);\n    this.buttons[languages[this.game.activeLanguage]].tint=\"0xFF0000\";\n    this.modify(\"Back\",this.game.data.texts.Back);\n    this.sortMenu();\n  }\n\n}\nexport default Options;\n","\nimport tweenManager from 'k8w-pixi-tween';\nimport MultiStyleText from \"pixi-multistyle-text\";\n\nclass Credits{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.container.visible=false;\n    this.container.interactive=true;\n    this.container.buttonMode=true;\n    }\n\n  create(){\n    let config=this.game.data.credits;\n\n    if(config.Background!==undefined) this.background=new PIXI.Sprite(PIXI.Texture.from(config.Background));\n\n    this.buildText();\n    this.structuredText = new MultiStyleText(this.text,config.Style);\n\n    this.container.addChild(this.structuredText);\n\n    this.container.x = this.game.width / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.y=this.game.height;\n    this.tween = PIXI.tweenManager.createTween(this.container);\n    this.tween\n      .from({ y: this.game.height})\n      .to({ y: 0 - this.container.height});\n    this.tween.time = 20000;\n    this.tween.expire=true;\n    this.tween.delay=500;\n    this.tween.on(\"end\", this.mainMenu.bind(this));\n\n    this.container.on('pointerup', this.mainMenu.bind(this));\n  }\n\n  show(){\n    this.container.visible=true;\n    this.tween.start();\n  }\n\n  hide(){\n    this.tween.stop().reset();\n    this.container.visible=false;\n  }\n\n\n  buildText(){\n    let credits=this.game.data.credits;\n\n    this.text=\"\";\n    let i;\n    for (i=0; i < credits.Lines.length; i++) {\n    this.text +=\"<title>\";\n    this.text += credits.Lines[i].Title[this.game.activeLanguage];\n    this.text +=\"</title>\";\n    this.text += \"\\n\";\n    let j;\n\n    for (j = 0; j < credits.Lines[i].Text.length; j++) {\n      this.text += credits.Lines[i].Text[j];\n      this.text += \"\\n\";\n    }\n    this.text += \"\\n\";\n    }\n  }\n\n  update(){\n    PIXI.tweenManager.update();\n  }\n\n  changeLanguage(){\n    this.buildText();\n    this.structuredText.text=this.text;\n  }\n\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n}\n\nexport default Credits;\n","import Scene from './scene.js';\nimport MainMenu from './mainmenu.js'\nimport Options from './options.js'\nimport Credits from './credits.js'\n\nimport 'pixi-sound';\n\nclass Title extends Scene{\n  build(){\n    this.states={};\n\n    //Add Menus\n    this.addState(\"MainMenu\", new MainMenu());\n    this.addState(\"Options\", new Options());\n    this.addState(\"Credits\", new Credits());\n\n    //Add actions to the menu buttons\n    this.addAction(\"MainMenu\",\"Options\",this.showOptions.bind(this));\n    this.addAction(\"MainMenu\",\"Credits\",this.showCredits.bind(this));\n    this.addAction(\"MainMenu\",\"New\",this.newAdventure.bind(this));\n\n    this.addAction(\"Options\", \"Back\",this.mainMenu.bind(this));\n\n  }\n\n  addAction(name,button,action){\n    this.states[name].buttons[button].on('pointerup',action)\n  }\n\n  addState(name, state, config) {\n      this.states[name] = state;\n\n      //Set game so state can access it\n      state.game = this.game;\n\n      //Create state\n      state.create();\n\n      this.container.addChild(this.states[name].container);\n  }\n\n  showOptions(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Options\"].show();\n  }\n\n  showCredits(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Credits\"].show();\n    this.game.activeState=this.states[\"Credits\"];\n  }\n\n  mainMenu(){\n    this.game.activeState=null;\n    this.states[\"Credits\"].hide();\n    this.states[\"Options\"].hide();\n\n    this.changeLanguage();\n    this.states[\"MainMenu\"].show();\n\n  }\n\n  changeLanguage(){\n    this.states[\"MainMenu\"].changeLanguage();\n    this.states[\"Credits\"].changeLanguage();\n    //game.titleScreen.warning.update();\n  }\n\n  newAdventure(){\n    this.game.start();\n  }\n\n}\n\nexport default Title;\n","//import * as PIXI from 'pixi.js';\nimport Scene from './scene.js';\n\nimport Walkable from 'walkable';\n\nclass GameScene extends Scene{\n  build(){\n    this.background.parentLayer = this.game.layer; //Z-order\n    this.background.interactive=true;\n    this.background.buttonMode=true;\n\n    this.background.on('pointertap',this.getPosition.bind(this));\n\n    this.walkable=new Walkable(this.game.width,this.game.height);\n      if(this.config.WalkArea!==undefined){\n        this.walkable.addPolygon(this.config.WalkArea);\n      }\n\n      if(this.config.Obstacles!==undefined){\n        let obstacles=Object.values(this.config.Obstacles);\n        this.config.Obstacles=obstacles;\n        for(let i=0;i<this.config.Obstacles.length;i++){\n          this.walkable.addPolygon(this.config.Obstacles[i]);\n        }\n      }\n\n      let sceneObjects=this.config.Objects;\n      if(sceneObjects){\n        for(let i=0;i<sceneObjects.length;i++){\n          if(this.game.objects[sceneObjects[i]]!==undefined){\n            this.container.addChild(this.game.objects[sceneObjects[i]].sprite);\n          }else{\n            console.log(\"Error:Game object \"+sceneObjects[i]+\" not found\");\n          }\n        }\n      }\n  }\n\n  getPosition(event){\n    let coord=event.data.getLocalPosition(this.game.app.stage);\n    if(!this.game.player.lock){\n      if(this.game.activeObject!==null) this.game.activeObject.cancel();\n      this.game.player.move(coord);\n    }\n  }\n\n  getPath(fromX,fromY,toX,toY){\n    return this.walkable.findPath(fromX, fromY, toX, toY, 0);\n  }\n\n}\n\nexport default GameScene;\n","import * as PolyK from 'polyk';\n\nfunction boxesIntersect(a, b)\n{\n  var ab = a.getBounds();\n  var bb = b.getBounds();\n  return ab.x + ab.width > bb.x && ab.x < bb.x + bb.width && ab.y + ab.height > bb.y && ab.y < bb.y + bb.height;\n}\n\nfunction collision(a, b)\n{\n  let result;\n  if(a!=undefined && b !=undefined){\n\n    if(b.hitArea) result=PolyK.ContainsPoint(b.hitArea.points,a.x,a.y);\n    else result=boxesIntersect(a,b);\n  }\n\n  return result;\n}\n\nfunction checkPath(coords,obstaclesPolys,walkPoly){\n  let coordX=Math.round(coords.x);\n  let coordY=Math.round(coords.y);\n  let changePosition;\n  let newPos;\n\n  if(!PolyK.ContainsPoint(walkPoly,coordX,coordY))\n  {\n    changePosition=PolyK.ClosestEdge(walkPoly,coordX,coordY).point;\n    newPos={x:Math.round(changePosition.x)+1,y:Math.round(changePosition.y)+1}\n  }else if(obstaclesPolys!==undefined){\n    for(let i=0;i<obstaclesPolys.length ;i++){\n      if(PolyK.ContainsPoint(obstaclesPolys[i],coordX,coordY)){\n        changePosition=PolyK.ClosestEdge(walkPoly,coordX,coordY).point;\n        newPos={x:Math.round(changePosition.x)+1,y:Math.round(changePosition.y)+1}\n        break;\n      }\n    }\n  }\n\n  return newPos;\n}\n\nexport {boxesIntersect,checkPath,collision};\n","import {boxesIntersect,collision} from '../collisions.js';\n\nclass GameObject{\n  constructor(){\n    this.sprite=null;\n    this.game=null;\n    this.action=null;\n  }\n\n  build(){\n    if(this.config.Texture){\n      //Generate a static object from a texture\n      this.sprite=new PIXI.Sprite.from(PIXI.Texture.from(this.config.Texture));\n\n    }else if(this.config.Area){\n\n      //For invisible objects\n      this.sprite=new PIXI.Sprite.from(PIXI.Texture.EMPTY);\n      this.sprite.hitArea=new PIXI.Polygon(this.config.Area);\n\n    }else if(this.config.Animation){\n\n      //Animated objects\n      let spritesheet=this.game.files.resources[this.config.Animation.Name].spritesheet;\n\n      let frames = [];\n      for (var i = 0; i < spritesheet._frameKeys.length; i++) {\n          frames.push(PIXI.Texture.from(spritesheet._frameKeys[i]));\n      }\n\n      this.sprite=new PIXI.extras.AnimatedSprite(frames);\n      this.animationSpeed=this.config.Animation.Speed;\n      this.play();\n    }\n\n    //Position of the object in the screen\n    if(this.config.Position){\n      this.sprite.x=this.config.Position[0];\n      this.sprite.y=this.config.Position[1];\n    }\n\n    if(this.config.Size){\n      this.sprite.scale.set(this.config.Size)\n    }\n\n    if(!this.config.Area)this.sprite.anchor.set(0.5,1);\n    if(this.config.Layer==\"Front\") this.sprite.parentLayer=this.game.layeronTop;\n    else this.sprite.parentLayer = this.game.layer;\n\n    this.sprite.interactive=true;\n    this.sprite.buttonMode=true;\n\n    this.sprite.on('pointerdown', this.touch.bind(this))\n        .on('pointermove', this.move.bind(this))\n        .on('pointerup', this.release.bind(this))\n        .on('pointerupoutside', this.release.bind(this));\n  }\n\n  hide(){\n    this.sprite.visible=false;\n  }\n\n  show(){\n    this.sprite.visible=true;\n  }\n\n  touch(event){\n    this.game.activeObject=this;\n    this.posX = this.sprite.x;\n    this.posY = this.sprite.y;\n    this.interaction = event.data;\n    this.sprite.alpha = 0.5;\n    this.dragging = true;\n    this.moved = 0;\n    this.oldParent=this.sprite.parent;\n    this.sprite.parentLayer = this.game.layerUI;\n  }\n\n  move(){\n    if (this.dragging && this.config.Area===undefined) {\n      this.game.player.lock=true;\n      this.moved++;\n      this.sprite.setParent(this.game.app.stage);\n      var newPosition = this.interaction.getLocalPosition(this.sprite.parent);\n      let bounds=this.sprite.getBounds();\n      //We can only move the object inside the stage\n      if(newPosition.x>bounds.width/2 && newPosition.x<this.game.width-bounds.width/2) this.sprite.x = newPosition.x;\n      if(newPosition.y>bounds.height && newPosition.y<this.game.height) this.sprite.y = newPosition.y;\n    }\n  }\n\n  release(event){\n    if(this.interaction){\n      //Check if we take it\n      if(collision(this.sprite,this.game.inventory.icon) && this.config.Take){\n        this.take();\n        //Check if we look it\n      }else if(this.moved<10){\n        this.action=this.game.player.look.bind(this.game.player);\n        this.game.player.tween.once('end',this.action);\n        let moveTo={x:this.sprite.x,y:this.sprite.y};\n        if(this.config.Area) moveTo=this.interaction.getLocalPosition(this.game.app.stage);\n        this.game.player.move(moveTo);\n      }else{\n      //  this.cancel();\n        this.game.player.lock=false;\n      }\n      if(!this.config.Area){\n        this.sprite.x = this.posX;\n        this.sprite.y = this.posY;\n        this.sprite.alpha = 1;\n        this.sprite.parentLayer = this.game.layer;\n        this.sprite.setParent(this.oldParent);\n      }\n      // set the interaction data to null\n      this.interaction = null;\n      this.dragging = false;\n      this.moved=0;\n\n    //Collision with other object\n    }else if(this){\n      let puzzleIndex=this.game.getPuzzle(this.config.Name,this.game.activeObject.config.Name);\n      if(puzzleIndex>=0){\n        this.game.activePuzzle=this.game.puzzles[puzzleIndex];\n      }\n      let moveTo={x:this.sprite.x,y:this.sprite.y};\n      if(this.config.Area) moveTo=event.data.getLocalPosition(this.game.app.stage);\n      this.use(moveTo);\n    //No collision\n    }else{\n      this.cancel();\n    }\n  }\n\n  take(){\n    this.action=this.game.player.take.bind(this.game.player);\n    this.game.player.tween.once('end',this.action);\n    this.game.player.move({x:this.posX,y:this.posY});\n  }\n\n  use(moveTo){\n    this.action=this.game.player.use.bind(this.game.player);\n    this.game.player.tween.once('end',this.action);\n    this.game.player.move(moveTo);\n  }\n\n  cancel(){\n    this.game.activeObject.action=null;\n    this.game.activeObject=null;\n\n  }\n}\n\nexport default GameObject;\n","import {boxesIntersect,collision} from '../collisions.js';\n\nclass Inventory{\n  constructor(){\n      this.container=new PIXI.Container();\n      this.container.visible=false;\n      this.game=null;\n      this.objects=[];\n\n    }\n\n    build(){\n      this.background=new PIXI.Sprite(PIXI.Texture.from(this.game.settings.Inventory.Background));\n      this.background.width=this.game.width/2;\n      this.background.height=this.game.height/2;\n      this.background.parentLayer = this.game.layerUI;\n      this.container.x = (this.game.width - this.background.width) / 2;\n      this.container.y = (this.game.height - this.background.height) / 2;\n      this.border=10;\n      this.icon=new PIXI.Sprite(PIXI.Texture.from(this.game.settings.Inventory.Icon));\n      this.icon.on('pointertap',this.click.bind(this));\n      this.icon.interactive=true;\n      this.icon.buttonMode=true;\n      this.setIcon(this.game.settings.Inventory.Position);\n      this.container.addChild(this.background);\n      this.icon.parentLayer = this.game.layerUI;\n    }\n\n    show(){\n      this.update();\n      this.container.visible=true;\n    }\n\n    hide(){\n      this.container.visible=false;\n\n    }\n\n    setIcon(position){\n      if(position==\"bottom-right\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=this.game.height - this.icon.height;\n      }else if(position==\"top-right\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=0;\n      }else if(position==\"top-left\"){\n        this.icon.x=0;\n        this.icon.y=this.game.height - this.icon.height;\n      }else if(position==\"bottom-top\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=0;\n      }\n    }\n\n    click(){\n      if (this.container.visible) this.hide();\n      else if(!this.game.player.lock) this.show();\n    }\n//Revisar eventos cuando el objeto está dentro del inventario\n    add(name){\n      this.objects.push(name);\n      this.game.objects[name].sprite.setParent(this.container);\n    //  this.game.objects[name].sprite.removeAllListeners();\n      this.game.objects[name].sprite.parentLayer=this.game.layerUI;\n      this.game.objects[name].sprite//.on('pointerdown', this.touch.bind(this.game.objects[name]))\n                                    .on('pointermove', this.move.bind(this.game.objects[name]))\n                                    //.on('pointerup', this.release.bind(this.game.objects[name]))\n                                  //  .on('pointerupoutside', this.release.bind(this.game.objects[name]));\n      this.update();\n    }\n\n    remove(name)\n    {\n      //Check if object is already in inventory\n      if(this.objects.includes(name)){\n        this.objects.splice(this.objects.indexOf(name),1);\n        this.update();\n      }\n    }\n\n    update(){\n      let i;\n      let numObjs=this.objects.length;\n      for(i=0;i<numObjs;i++){\n        let tmpObj=this.game.objects[this.objects[i]].sprite;\n\n        tmpObj.width=this.container.width/5-this.container.width*0.05;\n        tmpObj.height=this.container.height/5-this.container.height*0.05;\n        tmpObj.x = ((i % 5) * this.container.width/5+this.border-i)+tmpObj.width/2;\n        tmpObj.y = (Math.floor(i / 5) * this.container.height/5+this.border-i)+tmpObj.height;\n        this.container.width=this.background.width;\n        this.container.height=this.background.height;\n      }\n    }\n\n    touch(event){\n      this.game.activeObject=this;\n      this.posX = this.sprite.x;\n      this.posY = this.sprite.y;\n      this.interaction = event.data;\n      this.sprite.alpha = 0.5;\n      this.dragging = true;\n      this.moved = 0;\n\n    }\n\n    move(){\n      if(!boxesIntersect(this.sprite,this.game.inventory.container))\n        this.game.inventory.container.visible=false;\n    /*  if (this.dragging) {\n        this.moved++;\n        this.sprite.setParent(this.game.app.stage);\n        var newPosition = this.interaction.getLocalPosition(this.sprite.parent);\n        let bounds=this.sprite.getBounds();\n        //We can only move the object inside the stage\n        if(newPosition.x>bounds.width/2 && newPosition.x<this.game.width-bounds.width/2) this.sprite.x = newPosition.x;\n        if(newPosition.y>bounds.height && newPosition.y<this.game.height) this.sprite.y = newPosition.y;\n        if(!boxesIntersect(this.sprite,this.game.inventory.container)){\n          this.game.inventory.container.visible=false;\n        }\n\n      }*/\n    }\n\n    release(){\n        if(this.interaction){\n          // set the interaction data to null\n          if(this.moved<10){\n            let text=this.config.Description[this.game.activeLanguage];\n            this.game.player.say(text);\n          }\n          this.interaction = null;\n          this.dragging = false;\n          this.sprite.setParent(this.game.inventory.container);\n          this.sprite.x = this.posX;\n          this.sprite.y = this.posY;\n          this.sprite.alpha = 1;\n          this.moved=0;\n\n        }else if(this){\n          let puzzleIndex=this.game.getPuzzle(this.config.Name,this.game.activeObject.config.Name);\n          if(puzzleIndex>=0){\n            this.game.activePuzzle=this.game.puzzles[puzzleIndex];\n          }\n          let moveTo={x:this.sprite.x,y:this.sprite.y};\n          if(this.config.Area) moveTo=event.data.getLocalPosition(this.game.app.stage);\n          this.use(moveTo);\n        //No collision\n        }else{\n          this.cancel();\n        }\n    }\n}\n\nexport default Inventory;\n","import {boxesIntersect,collision} from '../collisions.js';\n\nclass Puzzle{\n  constructor(){\n    this.solved=false;\n  }\n\n  resolve(){\n    let source;\n    if(this.config.Combine) source=this.game.objects[this.config.Combine];\n  //  else if(this.config.Give) source=game.characters[this.config.Give];\n\n    let target=this.game.objects[this.config.Target];\n\n    if(this.config.Modify){\n      if(this.config.Modify.Description) target.config.Description=this.config.Modify.Description;\n      if(this.config.Modify.Door) this.createDoor(target)\n    }\n\n    if(this.config.Say && !this.game.silentMode){\n      if(this.game.player.sprite.visible) this.game.player.say(this.config.Say[this.game.activeLanguage]);\n    }\n\n    //If the Combine isn't in inventory and we don't destroy it, we add it to the inventory\n    if(this.config.Destroy===undefined && this.game.inventory.objects.includes(this.config.Combine)===false){\n      this.game.inventory.add(this.config.Combine);\n    }\n    /*else if(this.config.NPCSay && !game.silentMode){\n      game.selectedCharacter=game.searchCharacter(this.config.Give);\n      game.characters[game.selectedCharacter].talk(this.config.NPCSay[game.mainLanguage]);\n      if(game.player.sprite.visible) game.player.stand();\n    }\n\n    if(this.config.Destroy){\n      game.inventory.remove(this.config.Target);\n      target.hide();\n    }\n\n    if(this.config.DestroyAll){\n      game.inventory.remove(this.config.Target);\n      target.hide();\n      game.inventory.remove(this.config.Combine);\n      source.hide();\n    }\n\n    if(this.config.Get) this.createInventoryObject(this.config.Get);\n\n    if(this.config.Create){\n      let objectIndex=game.searchObject(this.config.Create);\n      if(objectIndex){\n        game.scenes[game.currentScene].container.addChild(game.objects[objectIndex]);}\n    }\n*/\n    this.solved=true;\n  }\n\n  createDoor(target){\n    target.door=true;\n    target.newScene=this.config.Modify.Door.To;\n    target.playerPos=this.config.Modify.Door.Player;\n    target.sprite.removeAllListeners();\n    target.sprite.on('pointertap',onDoorTouch);\n    target.use=ChangeRoom;\n  }\n\n  createInventoryObject(objectName){\n    this.game.objects[objectName].take();\n  }\n}\nfunction onDoorTouch(event){\n  if(!game.player.lock)\n  {\n    game.player.action=\"use\";\n    let moveTo={x:this.x,y:this.y};\n    if(this.config.Area) moveTo=event.data.getLocalPosition(game.app.stage);\n    game.player.lock=true;\n    game.selectedObject=game.searchObject(this.config.Name);\n    game.player.move(moveTo);\n  }\n}\n\nfunction ChangeRoom(){\n  game.changeScene(this.newScene,this.playerPos);\n}\n\nexport default Puzzle;\n","import dragonBones from 'dragonbones-pixi';\nimport tweenManager from 'k8w-pixi-tween';\nconst dbfactory=dragonBones.dragonBones.PixiFactory.factory;\nimport {checkPath} from '../collisions.js'\n\nclass Character{\n  constructor(){\n    this.game=null;\n    this.state=null;\n    this.lock=false;\n  }\n\n  setup(config){\n    dbfactory.parseDragonBonesData(config.Skeleton);\n    dbfactory.parseTextureAtlasData(config.Json,config.Texture);\n    this.sprite = dbfactory.buildArmatureDisplay(config.Armature);\n    this.tween=PIXI.tweenManager.createTween(this.sprite);\n    this.tween.on('end', this.stop.bind(this));\n    if(config.Animations!=undefined)\n      this.animations=config.Animations;\n    else\n      this.animations={\n        Stand:\"stand\",\n        Walk:\"walk\",\n        Take:\"take\",\n        Use:\"use\",\n        Say:\"speak\"\n      };\n    this.animate(this.animations.Stand);\n    this.state=\"stand\";\n    this.sprite.parentLayer = this.game.layer;//Z-order*/\n    this.sprite.x=500;\n    this.sprite.y=600;\n    this.config=config.data;\n  }\n\n  move(coords){\n    let obstacles=this.game.activeScene.config.Obstacles;\n    let walkingArea=this.game.activeScene.config.WalkArea;\n    let newPosition=coords;\n    let closestPosition=checkPath(coords,obstacles,walkingArea);\n\n    if(closestPosition){\n      newPosition=closestPosition;\n    }\n\n    let path = new PIXI.tween.TweenPath();\n    let findPath=this.game.activeScene.walkable.findPath(this.sprite.x,this.sprite.y,newPosition.x,newPosition.y,0);\n\n    if(findPath.length>0){\n      this.tween.stop().clear();\n      this.animate(this.animations.Walk);\n      if(this.sprite.x<newPosition.x) this.sprite.armature.flipX=false;\n      else this.sprite.armature.flipX=true;\n      path.drawShape(new PIXI.Polygon(findPath));\n      this.tween.path=path;\n\n      //Needs improvement\n      let animationTime=Math.abs(this.sprite.x-newPosition.x)*5+Math.abs(this.sprite.y-newPosition.y)*5+findPath.length*100;\n\n      this.tween.time = animationTime;\n      this.tween.speed = 1;\n      this.tween.delay=10;\n      this.tween.start();\n    }\n  }\n\n  update(){\n    PIXI.tweenManager.update();\n  }\n\n  stop(){\n    this.animate(this.animations.Stand);\n    this.game.activeState=null;\n  }\n\n  say(text){\n    //Lock the player\n    this.lock=true;\n\n    //Setup the text to show\n    this.game.textField.setText(text);\n    this.game.textField.setColor(this.config.Color);\n    this.game.textField.show();\n\n    //Animate the character\n    this.animate(this.animations.Say);\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    this.timeoutID=setTimeout(this.game.textField.skip.bind(this.game.textField), this.game.textField.timeOut());\n  }\n\n  animate(animation,times){\n    if(this.sprite.animation.lastAnimationName!==animation)\n      this.sprite.animation.fadeIn(animation,0.25,times);\n  }\n}\n\nexport default Character;\n","import Character from './character.js';\nimport dragonBones from 'dragonbones-pixi';\nconst dbEvents=dragonBones.dragonBones.EventObject;\n\nclass Player extends Character{\n  move(coords){\n    super.move(coords);\n    this.game.activeState=this;\n  }\n\n  stop(){\n    super.stop();\n  //  if(this.game.activeObject) this.game.activeObject.cancel();\n    if(this.lock) this.lock=false;\n  }\n\n  look(){\n    if(this.game.activeObject){\n      let text=this.game.activeObject.config.Description[this.game.activeLanguage];\n      this.say(text);\n      this.game.activeObject.cancel();\n    }\n  }\n\n  take(){\n    if(this.game.activeObject){\n      this.lock=true;\n      this.animate(this.animations.Take,1);\n      this.sprite.once(dbEvents.COMPLETE, this.takeEnd, this);\n    }\n  }\n\n  takeEnd(){\n    this.game.inventory.add(this.game.activeObject.config.Name);\n    if(this.game.activeObject) this.game.activeObject.cancel();\n    this.stop();\n  }\n\n  use(){\n    this.lock=true;\n    this.animate(this.animations.Use,1);\n    this.sprite.once(dbEvents.COMPLETE, this.useEnd, this);\n  }\n\n  useEnd(){\n    this.stop();\n    if(this.game.activePuzzle!==null) this.game.activePuzzle.resolve();\n    else this.say(this.game.data.texts.NotUsable[this.game.activeLanguage]);\n    if(this.game.activeObject) this.game.activeObject.cancel();\n    this.game.activePuzzle=null\n  }\n\n}\n\nexport default Player;\n","import * as PIXI from 'pixi.js';\nimport 'pixi-sound';\nimport 'pixi-layers';\n\nimport Loader from './loader.js';\nimport Title from './class/title.js';\nimport GameScene from './class/gamescene.js';\nimport GameObject from './class/gameobject.js';\nimport Inventory from './class/inventory.js';\nimport Puzzle from './class/puzzle.js';\nimport {TextField} from './class/text.js';\nimport Player from './class/player.js';\n\nclass Game {\n  constructor(config){\n    this.settings={};\n    this.data={};\n    this.width=config.width;\n    this.height=config.height;\n    this.playSounds = true;\n\n    //Setup the application\n    this.app = new PIXI.Application(config.width,config.height,{autoResize: true,resolution: devicePixelRatio});\n    this.app.renderer.autoResize=true;\n    this.app.stage = new PIXI.display.Stage();\n\n    //Change game size when window size changes\n    if(config.autoResize!==undefined) this.app.renderer.autoResize=config.autoResize;\n    else window.addEventListener('resize', this.resize.bind(this));\n\n\n    //We append it to a HTML element or Document body\n    if(config.parent){\n      document.getElementById(config.parent).appendChild(this.app.view)\n    }else{\n      document.body.appendChild(this.app.view);\n    }\n\n    //Load config files\n    this.preload(config.files);\n  }\n\n  //Read JSON configuration files\n  preload(files){\n    //Text to show progress\n    this.loadinProgress=new PIXI.Text(\"0 %\", {fill: 'white',\"fontSize\": 50});\n    this.loadinProgress.anchor.set(0.5);\n    this.loadinProgress.x=this.width/2;\n    this.loadinProgress.y=this.height/2;\n    this.app.stage.addChild(this.loadinProgress);\n\n    this.jsons=new Loader();\n    this.jsons.game=this;\n    this.jsons.addJSON(files);\n    this.jsons.load(this.load.bind(this)); //When all config files are loaded, load the game resources.\n  }\n\n  //Load game resources (images,sounds,vids...)\n  load(){\n    this.files=new Loader();\n    this.files.game=this;\n    this.files.addFiles(Object.values(this.jsons.resources));\n    this.files.load(this.setup.bind(this));\n  }\n\n  setup(){\n    this.app.stage.removeChild(this.loadinProgress);\n\n    //Z-Order\n    this.addZOrder();\n\n    //Adjust to window size\n    this.resize();\n\n    this.scenes={};\n    this.objects={};\n    this.puzzles=[];\n    this.activeLanguage=0;\n    this.activeScene=null;\n    this.activeObject=null;\n    this.activePuzzle=null;\n    this.activeState=null;\n\n    //Setup title screen\n    this.addScene(\"Title\",new Title(),this.settings.TitleScreen);\n\n    //Add game objects\n    let i;\n    let length=this.data.objects.length;\n    for(i=0;i<length;i++)\n    {\n      this.addObject(this.data.objects[i].Name,new GameObject(),this.data.objects[i]);\n    }\n\n    //Add game scenes\n    length=this.data.scenes.length;\n    for(i=0;i<length;i++)\n    {\n      this.addScene(this.data.scenes[i].Name,new GameScene(),this.data.scenes[i]);\n    }\n\n    //Set Title as the first scene to show\n    this.setScene(\"Title\");\n\n    //Puzzles\n    length=this.data.puzzles.length;\n    for(i=0;i<length;i++)\n    {\n      this.addPuzzle(this.data.puzzles[i].Name,new Puzzle(),this.data.puzzles[i]);\n    }\n\n    //Add Inventory\n    this.addInventory();\n\n    //Add Inventory\n    this.addTextField();\n\n    //Add player\n    this.addPlayer();\n\n    //Game's loop\n    this.app.ticker.add(this.loop.bind(this));\n  }\n\n  loop(dt){\n    // update current state\n    if (this.activeState != null) {\n        this.activeState.update(dt);\n    }\n  }\n\n  addObject(name, object, config) {\n      this.objects[name] = object;\n\n      //Config the object\n      object.config=config;\n\n      //Set game so object can access it\n      object.game = this;\n\n      //Build object\n      object.build();\n  }\n\n  addScene(name, scene, config) {\n      this.scenes[name] = scene;\n\n      //Config the scene\n      scene.setup(config);\n\n      //Set game so scene can access it\n      scene.game = this;\n\n      //Build scene\n      scene.build();\n  }\n\n  addPuzzle(name, puzzle, config) {\n    this.puzzles.push(puzzle);\n    puzzle.config=config;\n    puzzle.game = this;\n    /*  this.puzzles[name] = puzzle;\n\n      //Puzzle's config\n      puzzle.config=config;\n\n      //Set game so puzzle can access it\n      puzzle.game = this;*/\n  }\n//Comprobar los dos nombres\n  getPuzzle(name1,name2){\n    let found;\n    for(let i=0;i<this.puzzles.length;i++){\n      if(name1===this.puzzles[i].config.Target\n        && name2===this.puzzles[i].config.Combine\n        ||\n        name2===this.puzzles[i].config.Target\n        && name1===this.puzzles[i].config.Combine)\n//         nameObject==this.puzzles[i].config.Give)\n      {\n          found=i;\n           break;\n      }\n    }\n    return found;\n    //this.currentPuzzle=found;\n  }\n\n  setScene(name) {\n      //Remove current container\n      if (this.activeScene != null) {\n          this.app.stage.removeChild(this.activeScene.container);\n      }\n\n      //Set current container\n      this.activeScene = this.scenes[name];\n\n      //Add our new container\n      this.app.stage.addChild(this.activeScene.container);\n\n      // Play sounds\n    //  if(this.activeScreen.music!==null && this.playSounds) PIXI.sound.play(this.activeScreen.music,{loop:true});\n  }\n\n  addZOrder(){\n    this.sortGroup= new PIXI.display.Group(0, true);\n    this.sortGroup.on('sort', function (sprite) {\n      sprite.zOrder = -sprite.y;\n    });\n    this.onTopGroup = new PIXI.display.Group(1,false);\n    this.UIGroup = new PIXI.display.Group(2,false);\n\n    this.layer=new PIXI.display.Layer(this.sortGroup);\n    this.layeronTop=new PIXI.display.Layer(this.onTopGroup);\n    this.layerUI=new PIXI.display.Layer(this.UIGroup);\n    //this.layerUI.group.enableSort = true;\n    //this.layer.group.enableSort = true;\n    this.app.stage.group.enableSort = true;\n    this.app.stage.addChild(this.layer);//Z-order\n    this.app.stage.addChild(this.layeronTop);//Z-order\n    this.app.stage.addChild(this.layerUI);//Z-order\n  }\n\n  addInventory(){\n    this.inventory=new Inventory();\n    this.inventory.game=this;\n    this.inventory.build();\n  }\n\n  addPlayer(){\n    let playerConfig={\n      Skeleton:this.files.resources[\"playerSkeleton\"].data,\n      Json:this.files.resources[\"playerJson\"].data,\n      Texture:this.files.resources[\"playerTex\"].texture,\n      Armature:this.data.player.Armature,\n      Animations:this.data.player.Animations,\n      data:this.data.player\n    }\n\n    this.player=new Player();\n    this.player.game=this;\n    this.player.setup(playerConfig);\n  }\n\n  addTextField(){\n    this.textField=new TextField();\n    this.textField.game=this;\n    this.textField.build();\n  }\n\n  //Adjust game screen to the window\n  resize() {\n    var w = window.innerWidth * window.devicePixelRatio;\n    var h = window.innerHeight * window.devicePixelRatio;\n    var ratio = Math.min( w/this.width,  h/this.height);\n    this.app.renderer.resize(this.width*ratio,this.height*ratio);\n    this.app.stage.scale.set(ratio);\n  }\n\n  //The magic begins\n  start(){\n    this.setScene(this.settings.FirstScene);\n\n    //Show Inventory\n    this.app.stage.addChild(this.inventory.container);\n    this.app.stage.addChild(this.inventory.icon);\n\n    //Show Player\n    this.app.stage.addChild(this.player.sprite);\n\n    //Add Text Field\n    this.app.stage.addChild(this.textField.container);\n  }\n}\n\nexport default Game;\n","import Game from './game';\n\nconsole.log(\"JSGAM 5.0.0 https://github.com/kreezii/jsgam\");\n\nexport default Game;\n"],"names":["Loader","constructor","game","onLoad","add","this","update","bind","onError","error","addJSON","files","i","arrayLength","length","name","slice","lastIndexOf","addFiles","data","Settings","settings","Scenes","scenes","Cutscenes","cutscenes","Objects","objects","Dialogues","dialogues","Puzzles","puzzles","Credits","credits","Texts","texts","Sounds","soundSrc","j","tmpSound","Src","Name","Vids","fixVidLoad","vidSrc","tmpVid","Animations","animSrc","tmpAnim","Backgrounds","bgSrc","tmpBg","Player","Texture","Json","Skeleton","player","Characters","npcSrc","npc","PIXI","sound","utils","extensions","splice","indexOf","loaders","Resource","setExtensionXhrType","undefined","setExtensionLoadType","LOAD_TYPE","VIDEO","percent","Math","floor","progress","loadinProgress","text","resource","console","log","Scene","container","Container","setup","config","background","Sprite","from","Background","anchor","set","addChild","music","Music","dt","Button","style","interactive","buttonMode","Text","TextField","visible","build","parentLayer","layerUI","WHITE","size","Size","width","height","tint","alpha","Style","x","y","on","skip","Position","setPosition","show","hide","setText","stop","position","newText","adjustText","ratio","min","scale","countWords","str","split","timeOut","Speed","setColor","colour","Menu","buttons","addButton","activeLanguage","ButtonStyle","modify","disable","enable","sortMenu","arrayButtons","Object","values","center","resize","pivot","MainMenu","create","gameTexts","NewGame","Continue","Options","Help","changeLanguage","languages","Languages","addLanguage","setLanguage","Back","father","change","buildText","structuredText","MultiStyleText","tween","tweenManager","createTween","to","time","expire","delay","mainMenu","start","reset","Lines","Title","states","addState","addAction","showOptions","showCredits","newAdventure","button","action","state","activeState","GameScene","layer","getPosition","walkable","Walkable","WalkArea","addPolygon","Obstacles","obstacles","let","sceneObjects","sprite","event","coord","getLocalPosition","app","stage","lock","activeObject","cancel","move","getPath","fromX","fromY","toX","toY","findPath","boxesIntersect","a","b","ab","getBounds","bb","GameObject","Area","EMPTY","hitArea","Polygon","Animation","spritesheet","resources","frames","_frameKeys","push","extras","AnimatedSprite","animationSpeed","play","Layer","layeronTop","touch","release","posX","posY","interaction","dragging","moved","oldParent","parent","setParent","newPosition","bounds","inventory","icon","result","PolyK","points","Take","take","look","once","moveTo","puzzleIndex","getPuzzle","activePuzzle","use","Inventory","border","Icon","click","setIcon","remove","includes","numObjs","tmpObj","say","Description","Puzzle","solved","onDoorTouch","selectedObject","searchObject","ChangeRoom","changeScene","newScene","playerPos","resolve","target","Target","Modify","Door","createDoor","Say","silentMode","Destroy","Combine","door","To","removeAllListeners","createInventoryObject","objectName","const","dbfactory","dragonBones","PixiFactory","factory","Character","parseDragonBonesData","parseTextureAtlasData","buildArmatureDisplay","Armature","animations","animate","Stand","coords","closestPosition","obstaclesPolys","walkPoly","changePosition","newPos","coordX","round","coordY","point","checkPath","activeScene","path","TweenPath","clear","Walk","armature","flipX","drawShape","animationTime","abs","speed","textField","Color","timeoutID","clearTimeout","setTimeout","animation","times","lastAnimationName","fadeIn","dbEvents","EventObject","COMPLETE","takeEnd","Use","useEnd","NotUsable","Game","playSounds","devicePixelRatio","renderer","autoResize","Stage","window","addEventListener","document","getElementById","appendChild","view","body","preload","jsons","load","removeChild","addZOrder","addScene","TitleScreen","addObject","setScene","addPuzzle","addInventory","addTextField","addPlayer","ticker","loop","object","scene","puzzle","name1","name2","found","sortGroup","Group","zOrder","onTopGroup","UIGroup","group","enableSort","playerConfig","texture","w","innerWidth","h","innerHeight","FirstScene"],"mappings":"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"}