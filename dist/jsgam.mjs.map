{"version":3,"file":"jsgam.mjs","sources":["../src/loader.js","../src/storage.js","../src/soundmanager.js","../src/class/scene.js","../src/class/text.js","../src/class/menu.js","../src/class/mainmenu.js","../src/class/options.js","../src/class/help.js","../src/class/credits.js","../src/class/confirmation.js","../src/class/title.js","../src/class/gamescene.js","../src/class/cutscene.js","../src/collisions.js","../src/class/gameobject.js","../src/class/inventory.js","../src/class/puzzle.js","../src/class/character.js","../src/class/player.js","../src/class/npc.js","../src/class/dialogue.js","../src/class/logo.js","../src/game.js","../src/index.js"],"sourcesContent":["import {Howl} from 'howler';\n\nclass Loader extends PIXI.loaders.Loader{\n  constructor(){\n    super();\n    this.game=null;\n    this.onLoad.add(this.update.bind(this));\n    this.onError.add(this.error.bind(this));\n    this.use(this.howlerMiddleware.bind(this));\n  }\n\n  howlerMiddleware(resource,next){\n    if (resource && [\"wav\", \"ogg\", \"mp3\"].includes(resource.extension)) {\n      const options = JSON.parse(JSON.stringify(resource.metadata));\n      options.src = [resource.url];\n      resource.sound = new Howl(options);\n      next();\n    }else next();\n  }\n\n  //Add config files to loader\n  addJSON(files){\n    let i;\n    let arrayLength=files.length;\n\n    for(i=0;i<arrayLength;i++){\n      let name=files[i].slice(files[i].lastIndexOf(\"/\")+1,files[i].lastIndexOf(\".\"));\n      this.add(name,files[i]);\n    }\n  }\n\n  //Add resource files to loader and settings to game\n  addFiles(files){\n    let i;\n    let length=files.length\n    for(i=0;i<length;i++){\n      //Add config files to setup the game\n      if(files[i].data.Settings) this.game.settings=files[i].data.Settings;\n      if(files[i].data.Scenes) this.game.data.scenes=this.game.data.scenes.concat(files[i].data.Scenes);\n      if(files[i].data.Cutscenes) this.game.data.cutscenes=this.game.data.cutscenes.concat(files[i].data.Cutscenes);\n      if(files[i].data.Objects) this.game.data.objects=this.game.data.objects.concat(files[i].data.Objects);\n      if(files[i].data.Dialogues) this.game.data.dialogues=this.game.data.dialogues.concat(files[i].data.Dialogues);\n      if(files[i].data.Puzzles) this.game.data.puzzles=this.game.data.puzzles.concat(files[i].data.Puzzles);\n      if(files[i].data.Credits) this.game.data.credits=files[i].data.Credits;\n      if(files[i].data.Texts) this.game.data.texts=files[i].data.Texts;\n      if(files[i].data.Voices) this.game.data.voices=this.game.data.voices.concat(files[i].data.Voices);\n      if(files[i].data.Music) this.game.data.music=this.game.data.music.concat(files[i].data.Music);\n      if(files[i].data.Sounds) this.game.data.sounds=this.game.data.sounds.concat(files[i].data.Sounds);\n\n      //Look for sound files\n      if(files[i].data.Sounds){\n        let soundSrc=files[i].data.Sounds;\n        for(let j=0;j<soundSrc.length;j++){\n           let tmpSound=soundSrc[j].Src;\n           if(tmpSound!==null) this.add(soundSrc[j].Name,tmpSound);\n        }\n       }\n\n       //Look for music files\n       if(files[i].data.Music){\n         let musicSrc=files[i].data.Music;\n         for(let j=0;j<musicSrc.length;j++){\n            let tmpMusic=musicSrc[j].Src;\n            if(tmpMusic!==null) this.add(musicSrc[j].Name,tmpMusic);\n         }\n        }\n\n       //Look for voice files\n       if(files[i].data.Voices){\n         let voiceSrc=files[i].data.Voices;\n         for(let j=0;j<voiceSrc.length;j++){\n            let tmpVoice=voiceSrc[j].Src;\n            if(tmpVoice!==null) this.add(voiceSrc[j].Name,tmpVoice);\n         }\n        }\n\n       //Look for video files\n       if(files[i].data.Vids)\n       {\n         let vidSrc=files[i].data.Vids;\n         for(let i=0;i<vidSrc.length;i++){\n           let tmpVid=vidSrc[i].Src;\n           if(tmpVid!==null) this.add(vidSrc[i].Name,tmpVid);\n         }\n       }\n\n       //Load Animations\n       if(files[i].data.Animations)\n       {\n         let animSrc=files[i].data.Animations;\n         for(let i=0;i<animSrc.length;i++){\n           let tmpAnim=animSrc[i].Src;\n           if(tmpAnim!==null) this.add(animSrc[i].Name,tmpAnim);\n         }\n       }\n\n       //Load Backgrounds if don't use texture atlas for backgrounds\n       if(files[i].data.Backgrounds){\n         let bgSrc=files[i].data.Animations;\n         for(let i=0;i<bgSrc.length;i++){\n           let tmpBg=bgSrc[i].Src;\n           if(tmpBg!==null) this.add(bgSrc[i].Name,tmpBg);\n         }\n       }\n\n       //Look for player files\n       if(files[i].data.Player){\n         this.add('playerTex', files[i].data.Player.Texture)\n             .add('playerJson', files[i].data.Player.Json)\n             .add('playerSkeleton', files[i].data.Player.Skeleton);\n         this.game.data.player=files[i].data.Player;\n       }\n\n       //Look for NPC files\n       if(files[i].data.Characters){\n         let npcSrc=files[i].data.Characters;\n         for(let i=0;i<npcSrc.length;i++){\n            this.add(npcSrc[i].Name+\"Tex\", npcSrc[i].Texture)\n            .add(npcSrc[i].Name+'Json', npcSrc[i].Json)\n            .add(npcSrc[i].Name+'Skeleton', npcSrc[i].Skeleton);\n          }\n          this.game.data.npc=files[i].data.Characters;\n        }\n    }\n  }\n\n  //Loading progress\n  update(){\n    let percent=Math.floor(this.progress);\n    this.game.progressBar.width=(this.game.width/100)*percent;\n    //this.game.loadingTxt.text=\"Loading... \"+ percent+\"%\";\n  }\n\n  //File failed to load\n  error(resource){\n    console.log(resource);\n  }\n\n}\n\nexport default Loader;\n","import localForage from 'localforage';\n\nexport default class Storage{\n  constructor(game){\n    this.game=game;\n  }\n\n  //Save adventure progress\n  save(){\n    //Get solved puzzles\n    let puzzlesSolved=[];\n    let puzzleArray=Object.values(this.game.puzzles)\n\n    puzzleArray.forEach(function(puzzle){\n      if(puzzle.solved && !puzzlesSolved.includes(puzzle.config.Name))\n        puzzlesSolved.push(puzzle.config.Name)\n    });\n\n    //Get dialogues\n    let dialoguesDisabled=[];\n    let dialogueArray=Object.values(this.game.dialogues);\n\n\n    dialogueArray.forEach(function(dialogue){\n      let branches=Object.values(dialogue.branches);\n\n      branches.forEach(function(branch){\n\n        branch.Choices.forEach(function(choice,index){\n          if(choice.disabled){\n            let disabledOption={\n              Dialogue:dialogue.config.Name,\n              Branch:branch.Name,\n              Index:index\n            }\n            dialoguesDisabled.push(disabledOption);\n          }\n        });\n      });\n\n    });\n\n    //Get player cutscenes\n    let cutscenesPlayed=[];\n    let cutscenesArray=Object.values(this.game.cutscenes);\n    cutscenesArray.forEach(function(cutscene){\n      if(cutscene.played) cutscenesPlayed.push(cutscene.config.Name);\n    });\n\n    //Store the progress\n    this.progress={\n      language:this.game.activeLanguage,\n      latestScene:this.game.activeScene.config.Name,\n      playerPos:[this.game.player.sprite.x,this.game.player.sprite.y],\n      inventory:this.game.inventory.objects,\n      puzzles:puzzlesSolved,\n      dialogues:dialoguesDisabled,\n      cutscenes:cutscenesPlayed\n    }\n\n    //Save object to local storage\n    localForage.setItem('JSGAM_Storage', this.progress);\n  }\n\n  //Load adventure progress\n  load(){\n    let game=this.game;\n\n    //Disable dialogues finished\n    this.progress.dialogues.forEach(function(disable){\n      game.dialogues[disable.Dialogue].branches[disable.Branch].Choices[disable.Index].disabled=true;\n    });\n\n    //Disable cutscenes played\n    this.progress.cutscenes.forEach(function(name){\n      game.cutscenes[name].played=true;\n    });\n\n    this.game.silentMode=true;\n    //Resolve puzzles already done\n    this.progress.puzzles.forEach(function(name){\n      game.puzzles[name].resolve();\n    });\n    \n    //Load objects in inventory\n    this.progress.inventory.forEach(function(item){\n\n      //Add object to inventory\n      game.inventory.add(item);\n\n      //Remove objects from scenes configurations\n      let thisItem=item;\n      let sceneArray=Object.values(game.scenes);\n      sceneArray.forEach(function(scene){\n        if(scene.config.Objects!==undefined && scene.config.Objects.includes(thisItem)){\n          let tmpIndex=scene.config.Objects.indexOf(thisItem);\n          scene.config.Objects.splice(tmpIndex,1);\n        }\n      })\n\n    });\n    this.game.silentMode=false\n\n    //Add player to latest Position\n    this.game.player.sprite.x=this.progress.playerPos[0];\n    this.game.player.sprite.y=this.progress.playerPos[1];\n\n  }\n\n  //Clear local storage\n  delete(){\n    localForage.clear();\n  }\n\n  check(){\n    let storage=this;\n\n    localForage.getItem('JSGAM_Storage').then(function(value) {\n      // This code runs once the value has been loaded\n      // from the offline store.\n      if(value!==null){\n        storage.progress=value;\n        storage.game.activeLanguage=value.language;\n        storage.game.scenes[\"Title\"].changeLanguage();\n        storage.game.scenes[\"Title\"].states[\"MainMenu\"].enable(\"Continue\");\n      }\n    }).catch(function(err) {\n        // This code runs if there were any errors\n        console.log(err);\n    });\n  }\n}\n","export default class Sound{\n  constructor(){\n    this.game=null;\n    this.source=null;\n    this.sprite=null;\n  }\n\n  play(loop,src){\n    if(loop!==undefined && loop!==null) this.source.loop(true);\n    if(src!==undefined && src!==null) this.sprite=this.source.play(src);\n    else this.source.play();\n  }\n\n  stop(){\n    if(this.sprite!==null){\n      this.source.once('fade', this.onFade.bind(this),this.sprite);\n      this.source.fade(1,0,1000,this.sprite);\n    }\n    else{\n      this.source.on('fade', this.onFade.bind(this));\n      this.source.fade(1,0,1000);\n    }\n  }\n\n  onFade(){\n    if(this.sprite!==null){\n      this.source.stop(this.sprite);\n      this.source.volume(1,this.sprite);\n      this.sprite=null;\n    }else{\n      this.source.stop();\n      this.source.volume(1);\n    }\n  }\n\n  duration(){\n    let length=null;\n    if(this.sprite!==null) length=this.source.duration(this.sprite);\n    else length=this.source.duration();\n    return length;\n  }\n\n}\n","class Scene{\n  constructor(){\n    this.container = new PIXI.Container();\n    this.game=null;\n  }\n\n  setup(config){\n    this.background=new PIXI.Sprite(PIXI.Texture.from(config.Background));\n    this.background.anchor.set(0);\n    this.container.addChild(this.background);\n    if(config.Foreground!==undefined)\n    {\n      this.foreground=new PIXI.Sprite(PIXI.Texture.from(config.Foreground));\n      this.foreground.anchor.set(0);\n      this.container.addChild(this.foreground);\n    }\n    this.music=config.Music;\n    this.config=config;\n  }\n\n  update(dt) {\n\n  }\n  hide(){\n    this.container.visible=false;\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n}\n\nexport default Scene;\n","class Button extends PIXI.extras.BitmapText{\n    constructor(text,style){\n      super(text,style);\n      this.interactive=true;\n      this.buttonMode=true;\n    }\n}\n\nclass Infotxt extends PIXI.extras.BitmapText{\n    constructor(text,style){\n      super(text,style);\n    }\n}\n\n\nclass Phrases{\n  constructor(config){\n    this.container=new PIXI.Container();\n    this.hide();\n    this.game=config;\n    this.option=[];\n\n    for(let i=0;i<this.game.dialogueChoices;i++){\n      this.option[i]=new Button(\"Option\",this.game.settings.Text.ButtonStyle);\n      this.option[i].game=this.game;\n      this.option[i].anchor.set(0.5,0);\n      this.option[i].on('pointertap', this.onTap.bind(this.option[i]));\n      this.option[i].index=i;\n      this.container.addChild(this.option[i]);\n      this.option[i].x=this.container.width/2;\n      if(i>0)this.option[i].y=this.option[i-1].y+this.option[i-1].height;\n    }\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  onTap(){\n    let activeChoice=this.game.activeDialogue.currentBranch.Choices;\n\n    if(this.alpha==1){\n      this.game.activeDialogue.choice=this.index;\n      if(activeChoice[this.index].Repeat==false) activeChoice[this.index].disabled=true;\n      this.game.activeDialogue.next();\n    }\n  }\n\n  get(){\n    this.clear();\n    let options=this.game.activeDialogue.currentBranch.Choices;\n    for(let i=0;i<options.length;i++){\n      if(options[i].disabled){\n        this.option[i].alpha=0.5;\n      }else this.option[i].alpha=1;\n      this.option[i].visible=true;\n      this.option[i].text=options[i].Text[this.game.activeLanguage];\n    }\n    this.sort();\n    this.show();\n  }\n\n  clear(){\n    for(let i=0;i<this.option.length;i++){\n      this.option[i].visible=false;\n    }\n  }\n\n  sort(){\n    for(let i=0;i<this.option.length;i++){\n      this.option[i].x=this.container.width/2;\n    }\n    if(this.container.width>this.container.parent.width || this.container.height>this.container.parent.height){\n      this.scale();\n    }\n    this.center();\n  }\n\n  scale(){\n    let ratio = Math.min( this.game.width/this.container.width,  this.container.parent.height/this.container.height);\n    this.container.scale.set(ratio*0.95)\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n  //  this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n  //  this.container.pivot.y = this.container.height / 2;\n  }\n}\n\nclass TextField{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.Avatar=null;\n    this.Background=null;\n    this.Text=null;\n    this.container.visible=false;\n  }\n\n  build(){\n    this.container.parentLayer = this.game.layerUI;\n    this.Background=new PIXI.Sprite(PIXI.Texture.WHITE);\n\n    let size=4;\n    if(this.game.settings.Text.Size!==undefined){\n      if(this.game.settings.Text.Size===\"fourth\") size=4;\n      else if(this.game.settings.Text.Size===\"half\") size=2;\n    }\n    this.Background.width=this.game.width;\n    this.Background.height=this.game.height/size;\n\n    this.Background.tint='black';\n    this.Background.alpha=0.5;\n\n    this.Avatar=new PIXI.Sprite(PIXI.Texture.from(this.game.data.player.Avatar));\n    let ratio=this.Avatar.width / this.Avatar.height;\n    this.Avatar.height=this.Background.height;\n    this.Avatar.width=this.Avatar.height*ratio*0.95;\n\n    this.Text=new Button(\"\", this.game.settings.Text.Style);\n    this.Text.x=this.Avatar.width*1.05;\n  //  this.Text.anchor.set(0.5,0);\n    this.Text.maxWidth=this.game.width-this.Avatar.width;\n\n    this.Text.y=0;\n    this.Text.on('pointertap',this.skip.bind(this));\n\n    this.Choices=new Phrases(this.game);\n\n    this.container.addChild(this.Background);\n    this.container.addChild(this.Avatar);\n    this.container.addChild(this.Text);\n    this.container.addChild(this.Choices.container);\n\n    //this.Text.x=this.container.width/2;\n    this.Choices.sort();\n    if(this.game.settings.Text.Position!==undefined) this.setPosition(this.game.settings.Text.Position);\n  }\n\n  show(){\n    this.Text.visible=true;\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  end(){\n    if(this.game.activeDialogue!==null){\n      this.talker.shutup();\n      if(this.game.activeDialogue.choice!==null) this.game.activeDialogue.answer();\n      else{\n        this.Text.visible=false;\n        this.Avatar.visible=false;\n        this.Choices.get();\n      }\n\n    }else{\n      this.setText(\"\");\n      this.hide();\n      this.talker.shutup();\n      this.game.player.stop();\n      if(this.game.activeObject!==null) this.game.activeObject.cancel();\n    }\n  }\n\n  skip(){\n    this.end();\n    if(this.talker) clearTimeout(this.talker.timeoutID);\n  }\n\n  setPosition(position){\n    if(position===\"top\"){\n      this.container.x=0;\n      this.container.y=0;\n    }else if(position===\"bottom\"){\n      this.container.x=0;\n      this.container.y=this.game.height-this.container.height;\n    }\n  }\n\n  setText(newText){\n    this.Text.text=newText;\n    if(this.Text.width>this.container.width || this.Text.height>this.container.height){\n      this.adjustText();\n    }\n  }\n\n  adjustText(){\n    let ratio = Math.min( this.container.width/this.Text.width,  this.container.height/this.Text.height);\n    this.container.scale.set(ratio*0.95);\n  }\n\n  //Get words number of the text\n  countWords(str) {\n   return str.split(\" \").length;\n  }\n\n  //Calculate how many seconds we show the text\n  timeOut(){\n    let time;\n    if(this.game.activeVoice!==null) time=this.game.voices[this.game.activeVoice].duration();\n    else if(this.game.settings.Text.Speed!==undefined) time=this.game.settings.Text.Speed;\n    else time=this.countWords(this.Text.text)/3;\n\n    //Time must be at least 1 second\n    if(time<1) time=1;\n\n    return time*1000;\n  }\n\n  setColor(colour){\n    this.Text.tint=colour;\n  }\n\n  setFont(newFont){\n    this.Text.font=newFont;\n  }\n\n  setAvatar(newAvi){\n    this.Avatar.visible=true;\n    this.Avatar.texture=(PIXI.Texture.from(newAvi));\n  }\n\n  hideAvatar(){\n    this.Avatar.visible=false;\n  }\n\n}\n\nexport {Button,TextField,Infotxt};\n","import {Button} from './text.js'\n\nclass Menu{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.game=null;\n    this.buttons={};\n    }\n\n  addButton(name,text){\n    this.buttons[name]=new Button(text[this.game.activeLanguage],this.game.settings.Text.ButtonStyle);\n    this.container.addChild(this.buttons[name]);\n  }\n\n  modify(name,text){\n    this.buttons[name].text=text[this.game.activeLanguage];\n  }\n\n  disable(name){\n    this.buttons[name].alpha=0.5;\n    this.buttons[name].interactive=false;\n  }\n\n  enable(name){\n    this.buttons[name].alpha=1.0;\n    this.buttons[name].interactive=true;\n  }\n\n  sort(){\n    let i;\n    let arrayButtons=Object.values(this.buttons);\n    let length=arrayButtons.length;\n    arrayButtons[0].y=0;\n    for(i=1;i<length;i++)\n    {\n      arrayButtons[i].y=arrayButtons[i-1].y+arrayButtons[i-1].height*1.5;\n      arrayButtons[i].x=this.container.width/2-arrayButtons[i].width/2;\n    }\n\n    this.center();\n  //  this.resize();\n  }\n\n  resize(){\n    let ratio = Math.min( this.game.width/this.container.width,  this.game.height/this.container.height);\n    //console.log(ratio)\n    this.container.scale.set(ratio*0.95);\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n\n}\nexport default Menu;\n","import Menu from './menu.js';\n\nclass MainMenu extends Menu{\n  create(){\n      let gameTexts=this.game.data.texts;\n      this.addButton(\"New\",gameTexts.NewGame);\n      this.addButton(\"Continue\",gameTexts.Continue);\n      this.addButton(\"Options\",gameTexts.Options);\n      this.addButton(\"Help\",gameTexts.Help);\n      this.addButton(\"Credits\",gameTexts.Credits);\n\n      this.disable(\"Continue\");\n\n      this.sort();\n    }\n\n  changeLanguage(){\n    this.modify(\"New\",this.game.data.texts.NewGame);\n    this.modify(\"Continue\",this.game.data.texts.Continue);\n    this.modify(\"Options\",this.game.data.texts.Options);\n    this.modify(\"Help\",this.game.data.texts.Help);\n    this.modify(\"Credits\",this.game.data.texts.Credits);\n\n    this.sort();\n  }\n\n}\nexport default MainMenu;\n","import Menu from './menu.js';\nimport {Button} from './text.js';\n\nclass Options extends Menu{\n  create(){\n    this.container.visible=false;\n    let languages=this.game.settings.Languages\n    for(let i=0;i<languages.length;i++){\n      this.addLanguage(languages[i],);\n      this.buttons[languages[i]].on('pointerup', this.setLanguage);\n    }\n\n    let langArray=Object.values(this.buttons);\n    langArray[this.game.activeLanguage].tint=0xFF0000;\n\n    this.addButton(\"Back\",this.game.data.texts.Back);\n    this.sort();\n  }\n\n  addLanguage(name){\n    this.buttons[name]=new Button(name,this.game.settings.Text.ButtonStyle);\n    this.buttons[name].father=this;\n    this.container.addChild(this.buttons[name]);\n  }\n\n  setLanguage(){\n    this.father.change(this.text);\n  }\n\n  change(text){\n    let languages=this.game.settings.Languages\n    this.buttons[languages[this.game.activeLanguage]].tint=0xFFFFFF;\n    this.game.activeLanguage=this.game.settings.Languages.indexOf(text);\n    this.buttons[languages[this.game.activeLanguage]].tint=0xFF0000;\n    this.modify(\"Back\",this.game.data.texts.Back);\n    this.sort();\n  }\n\n}\nexport default Options;\n","class Help{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.container.visible=false;\n    this.container.interactive=true;\n    this.container.buttonMode=true;\n    }\n\n  create(){\n    let config=this.game.settings;\n\n    this.background=new PIXI.Sprite(PIXI.Texture.from(config.Help[this.game.activeLanguage]));\n    this.container.addChild(this.background);\n    this.center();\n    this.container.on('pointerup', this.mainMenu.bind(this));\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  changeLanguage(){\n    this.background.texture=PIXI.Texture.from(this.game.settings.Help[this.game.activeLanguage]);\n    this.center();\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n}\n\nexport default Help;\n","import { TweenMax } from \"gsap\";\nimport PixiPlugin from \"gsap/PixiPlugin\";\n\nclass Credits{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.container.visible=false;\n    this.container.interactive=true;\n    this.container.buttonMode=true;\n    }\n\n  create(){\n    let config=this.game.data.credits;\n\n    if(config.Background!==undefined){\n      this.background=new PIXI.Sprite(PIXI.Texture.from(config.Background));\n      this.container.addChild(this.background);\n    }\n\n    this.buildText();\n    this.speed=null;\n\n    if(this.game.data.credits.Time!==undefined){\n      this.speed=this.game.data.credits.Time;\n    }else{\n      this.speed=20;\n    }\n\n    this.structuredText = new PIXI.extras.BitmapText(this.text,config.Style);\n    this.tween=null;\n    this.container.addChild(this.structuredText);\n\n    this.container.x = this.game.width / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.y=this.game.height;\n    this.container.on('pointerup', this.mainMenu.bind(this));\n  }\n\n  show(){\n    this.container.visible=true;\n    this.animate();\n  }\n\n  animate(){\n    TweenMax.set(this.container,{y: this.game.height});\n    this.tween=TweenMax.to(this.container, 20, {y: 0 - this.container.height,onComplete:this.mainMenu.bind(this)});\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n\n  buildText(){\n    let credits=this.game.data.credits;\n\n    this.text=\"\";\n    let i;\n    for (i=0; i < credits.Lines.length; i++) {\n    this.text += credits.Lines[i].Title[this.game.activeLanguage];\n    this.text += \"\\n\";\n    let j;\n\n    for (j = 0; j < credits.Lines[i].Text.length; j++) {\n      this.text += credits.Lines[i].Text[j];\n      this.text += \"\\n\";\n    }\n    this.text += \"\\n\";\n    }\n  }\n\n  update(){\n    //PIXI.tweenManager.update();\n  }\n\n  changeLanguage(){\n    this.buildText();\n    this.structuredText.text=this.text;\n  }\n\n  mainMenu(){\n    this.tween.kill();\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n}\n\nexport default Credits;\n","import Menu from './menu.js';\nimport {Infotxt} from './text.js'\n\nclass Confirmation extends Menu{\n  create(){\n    this.hide();\n    let gameTexts=this.game.data.texts;\n    this.addText(\"Warning\",gameTexts.Warning);\n    this.addButton(\"Yes\",gameTexts.Yes);\n    this.addButton(\"No\",gameTexts.No);\n    this.sort();\n  }\n\n  changeLanguage(){\n    //this.modify(\"Warning\",this.game.data.texts.Warning);\n    this.text.text=this.game.data.texts.Warning[this.game.activeLanguage];\n    this.modify(\"Yes\",this.game.data.texts.Yes);\n    this.modify(\"No\",this.game.data.texts.No);\n    this.sort();\n  }\n\n  sort(){\n    this.text.y=0\n    this.text.x=this.game.width/2-this.text.width/2;\n    this.buttons[\"Yes\"].y=this.text.height*1.5;\n    this.buttons[\"Yes\"].x=this.buttons[\"Yes\"].width;\n    this.buttons[\"No\"].y=this.text.height*1.5;\n    this.buttons[\"No\"].x=this.game.width-this.buttons[\"No\"].width*2;\n    this.container.y=this.game.height/2-this.container.height/2;\n  }\n\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n\n  addText(name,text){\n    this.text=new Infotxt(text[this.game.activeLanguage],this.game.settings.Text.ButtonStyle);\n    this.container.addChild(this.text);\n  }\n}\n\nexport default Confirmation;\n","import Scene from './scene.js';\nimport MainMenu from './mainmenu.js'\nimport Options from './options.js'\nimport Help from './help.js'\nimport Credits from './credits.js'\nimport Confirmation from './confirmation.js'\n\nclass Title extends Scene{\n  build(){\n    this.states={};\n\n    //Add Menus\n    this.addState(\"MainMenu\", new MainMenu());\n    this.addState(\"Options\", new Options());\n    this.addState(\"Credits\", new Credits());\n    this.addState(\"Help\", new Help());\n    this.addState(\"Warning\", new Confirmation());\n\n    //Add actions to the menu buttons\n    this.addAction(\"MainMenu\",\"Options\",this.showOptions.bind(this));\n    this.addAction(\"MainMenu\",\"Help\",this.showHelp.bind(this));\n    this.addAction(\"MainMenu\",\"Credits\",this.showCredits.bind(this));\n\n    this.addAction(\"MainMenu\",\"New\",this.checkAdventure.bind(this));\n    this.addAction(\"MainMenu\",\"Continue\",this.loadAdventure.bind(this));\n\n    this.addAction(\"Warning\",\"Yes\",this.newAdventure.bind(this));\n    this.addAction(\"Warning\",\"No\",this.mainMenu.bind(this));\n\n    this.addAction(\"Options\", \"Back\",this.mainMenu.bind(this));\n\n  }\n\n  addAction(name,button,action){\n    this.states[name].buttons[button].on('pointerup',action)\n  }\n\n  addState(name, state, config) {\n      this.states[name] = state;\n\n      //Set game so state can access it\n      state.game = this.game;\n\n      //Create state\n      state.create();\n\n      this.container.addChild(this.states[name].container);\n  }\n\n  showOptions(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Options\"].show();\n  }\n\n  showHelp(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Help\"].show();\n  }\n\n  showCredits(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Credits\"].show();\n  }\n\n  mainMenu(){\n    this.states[\"Credits\"].hide();\n    this.states[\"Options\"].hide();\n    this.states[\"Help\"].hide();\n    this.states[\"Warning\"].hide();\n    this.changeLanguage();\n    this.states[\"MainMenu\"].show();\n\n  }\n\n  changeLanguage(){\n    this.states[\"MainMenu\"].changeLanguage();\n    this.states[\"Credits\"].changeLanguage();\n    this.states[\"Help\"].changeLanguage();\n    this.states[\"Warning\"].changeLanguage();\n  }\n\n  warning(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Warning\"].show();\n  }\n\n  checkAdventure(){\n    if(this.game.storage.progress!==undefined){\n      this.warning();\n    }else{\n      this.newAdventure();\n    }\n  }\n\n  newAdventure(){\n    //Delete any game progress\n    this.game.storage.delete();\n\n    //Set the first scene\n    this.game.changeScene(this.game.settings.FirstScene);\n\n    //Here we go\n    this.game.start();\n\n  }\n\n  loadAdventure(){\n    this.game.storage.load();\n    this.game.changeScene(this.game.storage.progress.latestScene);\n    this.game.start();\n  }\n}\n\nexport default Title;\n","//import * as PIXI from 'pixi.js';\nimport Scene from './scene.js';\n\nimport Walkable from 'walkable';\n\nclass GameScene extends Scene{\n  build(){\n    if(this.foreground!==undefined) this.foreground.parentLayer = this.game.layerTop; //Z-order\n    this.background.parentLayer = this.game.layerBottom; //Z-order\n    this.background.interactive=true;\n    this.background.buttonMode=true;\n\n    this.background.on('pointertap',this.getPosition.bind(this));\n\n    //Add obstacles to the scene\n    this.walkable=new Walkable(this.game.width,this.game.height);\n      if(this.config.WalkArea!==undefined){\n        this.walkable.addPolygon(this.config.WalkArea);\n      }\n\n      if(this.config.Obstacles!==undefined){\n        let obstacles=Object.values(this.config.Obstacles);\n        this.config.Obstacles=obstacles;\n        for(let i=0;i<this.config.Obstacles.length;i++){\n          this.walkable.addPolygon(this.config.Obstacles[i]);\n        }\n      }\n\n      //Add objects to the scene\n      let sceneObjects=this.config.Objects;\n      if(sceneObjects){\n        for(let i=0;i<sceneObjects.length;i++){\n          if(this.game.objects[sceneObjects[i]]!==undefined){\n            this.container.addChild(this.game.objects[sceneObjects[i]].sprite);\n          }else{\n            console.log(\"Error:Game object \"+sceneObjects[i]+\" not found\");\n          }\n        }\n      }\n\n      //Add NPCs (non-playable characters) to the scene\n      let sceneChars=this.config.Characters;\n      if(sceneChars){\n        for(let i=0;i<sceneChars.length;i++){\n          if(this.game.npcs[sceneChars[i]]!==undefined){\n            this.container.addChild(this.game.npcs[sceneChars[i]].sprite);\n          }else{\n            console.log(\"Error:Game character \"+sceneChars[i]+\" not found\");\n          }\n        }\n      }\n  }\n\n  getPosition(event){\n    let coord=event.data.getLocalPosition(this.game.app.stage);\n    if(!this.game.player.lock && this.game.activeObject===null){\n      this.game.player.move(coord);\n    }\n  }\n\n  getPath(fromX,fromY,toX,toY){\n    return this.walkable.findPath(fromX, fromY, toX, toY, 0);\n  }\n\n}\n\nexport default GameScene;\n","import { TweenMax } from \"gsap\";\nimport PixiPlugin from \"gsap/PixiPlugin\";\n\nclass CutScene{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.music=null;\n    this.sequenceIndex=0;\n    this.played=false;\n  }\n\n  build(){\n    if(this.config.Video){\n      this.videoData = this.game.files.resources[this.config.Video].data;\n      this.videoEnds=this.end.bind(this);\n      this.videoData.addEventListener('ended',this.videoEnds);\n    }else if(this.config.Sequence){\n      this.tween=null;\n      this.image=new PIXI.Sprite(PIXI.Texture.from(this.config.Sequence[this.sequenceIndex].Image));\n      this.image.anchor.set(0.5,0);\n      this.container.interactive=true;\n      this.container.buttonMode=true;\n      this.container.on('pointertap',this.next.bind(this));\n      this.container.addChild(this.image);\n      this.field=new PIXI.extras.BitmapText(this.config.Sequence[this.sequenceIndex].Text[this.game.activeLanguage],this.game.settings.Text.Style);\n      this.field.anchor.set(0.5,1);\n      this.field.maxWidth=this.game.width;\n      this.container.addChild(this.field);\n    }\n  }\n\n  show(){\n    if(this.config.Video) {\n      let videoTexture = PIXI.Texture.from(this.videoData);\n    \tthis.videoSprite = new PIXI.Sprite(videoTexture);\n      this.videoSprite.width = this.game.width;\n      this.videoSprite.height = this.game.height;\n      this.videoSprite.interactive=true;\n      this.videoSprite.buttonMode=true;\n      this.videoSprite.on('pointertap',this.end.bind(this));\n      this.container.addChild(this.videoSprite);\n    }else if(this.config.Sequence) {\n      this.adjust();z\n      this.setMusic();\n    }\n    this.game.app.stage.addChild(this.container);\n    this.fadeIn();\n\n  }\n\n  hide(){\n      this.container.parent.removeChild(this.container);\n  }\n\n  next(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    if(this.sequenceIndex<this.config.Sequence.length-1){\n      this.sequenceIndex+=1;\n      this.field.text=this.config.Sequence[this.sequenceIndex].Text[this.game.activeLanguage];\n      this.image.texture=(PIXI.Texture.from(this.config.Sequence[this.sequenceIndex].Image));\n      this.adjust();\n      this.fadeIn();\n      this.setMusic();\n    }else{\n      this.end();\n    }\n  }\n\n  fadeIn(){\n    if(this.tween) this.tween.kill();\n    this.tween=TweenMax.fromTo(this.container, 1, {alpha:0}, {alpha:1, onComplete:this.timer.bind(this)});\n  }\n\n  timer(){\n    this.timeoutID = setTimeout(this.fadeOut.bind(this), this.config.Sequence[this.sequenceIndex].Time*1000);\n  }\n\n  fadeOut(){\n    if(this.tween) this.tween.kill();\n    this.tween=TweenMax.fromTo(this.container, 1, {alpha:1}, {alpha:0, onComplete:this.next.bind(this)});\n  }\n\n  end(){\n    this.game.activeCutscene=null;\n    if(this.videoData){\n      this.videoData.pause();\n      this.videoData.removeEventListener('ended',this.videoEnds);\n    }\n\n    if(this.tween) this.tween.kill();\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n\n    if(this.music!==null){\n      //this.game.sound.stop(this.music);\n      this.game.music[this.music].stop();\n    }\n\n    this.played=true;\n    this.hide();\n\n    if(!this.game.finished)\n    {\n      this.game.resume();\n    }else{\n      this.game.home();\n    }\n  }\n\n  adjust(){\n    let ratio=this.image.width / this.image.height;\n    this.image.height=this.game.height-this.field.height;\n    this.image.width=this.image.height*ratio;\n\n    this.image.x=this.game.width/2;\n    this.field.x=this.game.width/2;\n    this.field.y=this.game.height;\n\n    if(this.container.width>this.game.width || this.container.height>this.game.height){\n      this.scale();\n    }\n    this.center();\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height  / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n\n  scale(){\n    let ratio = Math.min( this.game.width/this.container.width, this.game.height/this.container.height);\n    this.container.scale.set(ratio);\n  }\n\n  setMusic(){\n    if(this.config.Sequence[this.sequenceIndex].Music!==undefined && this.game.playSounds){\n      if(this.music!==null){\n        this.game.music[this.music].stop();\n      }\n\n      this.music=this.config.Sequence[this.sequenceIndex].Music;\n      this.game.music[this.music].play(true);\n    }\n  }\n\n}\n\nexport default CutScene;\n","import * as PolyK from 'polyk';\n\nfunction boxesIntersect(a, b)\n{\n  var ab = a.getBounds();\n  var bb = b.getBounds();\n  return ab.x + ab.width > bb.x && ab.x < bb.x + bb.width && ab.y + ab.height > bb.y && ab.y < bb.y + bb.height;\n}\n\nfunction collision(a, b)\n{\n  let result;\n  if(a!=undefined && b !=undefined){\n    if(a.hitArea) result=PolyK.ContainsPoint(a.hitArea.points,b.x,b.y);\n    else if(b.hitArea) result=PolyK.ContainsPoint(b.hitArea.points,a.x,a.y);\n    else result=boxesIntersect(a,b);\n  }\n\n  return result;\n}\n\nfunction closestPoint(area,coords){\n  let coordX=Math.round(coords.x);\n  let coordY=Math.round(coords.y);\n  let changePosition={};\n  let closestedge=PolyK.ClosestEdge(area,coordX,coordY);\n  changePosition.x=closestedge.point.x-closestedge.norm.x;\n  changePosition.y=closestedge.point.y-closestedge.norm.y;\n  return {x:Math.round(changePosition.x),y:Math.round(changePosition.y)}\n}\n\nfunction checkPath(coords,obstaclesPolys,walkPoly){\n  let coordX=Math.round(coords.x);\n  let coordY=Math.round(coords.y);\n  let changePosition={};\n  let newPos;\n\n  if(!PolyK.ContainsPoint(walkPoly,coordX,coordY))\n  {\n    let closestedge=PolyK.ClosestEdge(walkPoly,coordX,coordY);\n    changePosition.x=closestedge.point.x-closestedge.norm.x;\n    changePosition.y=closestedge.point.y-closestedge.norm.y;\n    newPos={x:Math.round(changePosition.x),y:Math.round(changePosition.y)}\n  }else if(obstaclesPolys!==undefined){\n\n    for(let i=0;i<obstaclesPolys.length ;i++){\n      if(PolyK.ContainsPoint(obstaclesPolys[i],coordX,coordY)){\n        let closestedge=PolyK.ClosestEdge(walkPoly,coordX,coordY);\n        changePosition.x=closestedge.point.x-closestedge.norm.x;\n        changePosition.y=closestedge.point.y-closestedge.norm.y;\n        newPos={x:Math.round(changePosition.x)+1,y:Math.round(changePosition.y)+1};\n        break;\n      }\n    }\n  }\n\n  return newPos;\n}\n\nexport {boxesIntersect,checkPath,collision,closestPoint};\n","import {boxesIntersect,collision,closestPoint} from '../collisions.js';\n\nclass GameObject{\n  constructor(){\n    this.sprite=null;\n    this.game=null;\n    this.action=null;\n  }\n\n  build(){\n    if(this.config.Description===undefined){\n      this.config.Description=this.game.data.texts.NoDescription;\n    }\n    //Configure the sprite's object\n    if(this.config.Texture){\n      //Generate a static object from a texture\n      this.sprite=new PIXI.Sprite.from(PIXI.Texture.from(this.config.Texture));\n\n    }else if(this.config.Area){\n\n      //For invisible objects\n      this.sprite=new PIXI.Sprite.from(PIXI.Texture.EMPTY);\n      this.sprite.hitArea=new PIXI.Polygon(this.config.Area);\n\n    }else if(this.config.Animation){\n\n      //Animated objects\n      let spritesheet=this.game.files.resources[this.config.Animation.Name].spritesheet;\n\n      let frames = [];\n      for (var i = 0; i < spritesheet._frameKeys.length; i++) {\n          frames.push(PIXI.Texture.from(spritesheet._frameKeys[i]));\n      }\n\n      this.sprite=new PIXI.extras.AnimatedSprite(frames);\n      this.animationSpeed=this.config.Animation.Speed;\n      this.play();\n    }\n\n    //Position of the object in the screen\n    if(this.config.Position){\n      this.sprite.x=this.config.Position[0];\n      this.sprite.y=this.config.Position[1];\n    }\n\n    //Size of the object\n    if(this.config.Size){\n      this.sprite.scale.set(this.config.Size)\n    }\n\n    if(this.config.Mirror){\n      this.flip();\n    }\n\n    //Configure the anchor (origin point of the object)\n    if(!this.config.Area)this.sprite.anchor.set(0.5,1);\n\n    //Configure the layer for the z-order\n    if(this.config.Layer===\"Top\") this.sprite.parentLayer=this.game.layerTop;\n    else if(this.config.Layer===\"Bottom\") this.sprite.parentLayer=this.game.layerBottom;\n    else this.sprite.parentLayer = this.game.layer;\n\n    //Is it a door?\n    if(this.config.Door){\n      this.door=true;\n      this.newScene=this.config.Door.To;\n      this.playerPos=this.config.Door.Player;\n    }\nthis.holding=false;\nthis.timeoutID;\n    if(this.config.Lock){\n      this.locked=true;\n    }\n    //Game object events\n    this.sprite.interactive=true;\n    this.sprite.buttonMode=true;\n\n    if(this.config.Area!==undefined){\n      this.sprite.on('pointerdown', this.touchArea.bind(this))\n          .on('pointerup', this.releaseArea.bind(this))\n          .on('pointerupoutside', this.releaseArea.bind(this));\n    }else{\n      this.sprite.on('pointerdown', this.touch.bind(this))\n          .on('pointermove', this.move.bind(this))\n          .on('pointerup', this.release.bind(this))\n          .on('pointerupoutside', this.release.bind(this));\n    }\n\n    if(this.config.Interactive!==undefined) this.setInteraction(this.config.Interactive);\n  }\n\n  hide(){\n    this.sprite.visible=false;\n  }\n\n  show(){\n    this.sprite.visible=true;\n  }\n\n  setpos(x,y){\n    this.sprite.x=x;\n    this.sprite.y=y;\n  }\n\n  flip(){\n    this.sprite.scale.x*=-1;\n  }\n\n  changeTexture(texture){\n    this.sprite.texture=new PIXI.Texture.from(texture)\n  }\n\n  hold(){\n    this.holding=true;\n  }\n  //Invisible object touch begins\n  touchArea(event){\n    if(this.game.activeObject===null && !this.game.player.lock){\n      this.game.activeObject=this;\n      this.interaction = event.data;\n      this.action=null;\n      if(this.timeoutID) clearTimeout(this.timeoutID);\n      this.timeoutID=setTimeout(this.hold.bind(this), this.game.holdTime);\n      this.touchedPos=this.interaction.getLocalPosition(this.game.app.stage);\n    }\n  }\n\n  //Invisible object touch ends\n  releaseArea(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n\n    if(this.interaction){\n      let moveTo=this.interaction.getLocalPosition(this.game.app.stage);\n      if(collision(moveTo,this.sprite)){\n        if(this.interaction.button===2 || this.holding){\n          if(this.door===true ){\n            let newPos=closestPoint(this.config.Area,moveTo);\n            moveTo=newPos;\n          }else if(this.config.Use!==undefined){\n            this.game.activePuzzle=this.game.puzzles[this.config.Use];\n          }\n          this.action=\"Use\";\n        }else{\n          this.action=\"Look\";\n       }\n      }\n\n      if(this.action!==null){\n        this.game.player.endAction=this.action;\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      if(this.game.player.touched) this.game.player.touched=false;\n      this.holding=false;\n      this.interaction = null;\n      this.touchedPos=null;\n    }\n  }\n\n  //Object touch begins\n  touch(event){\n    if(this.game.activeObject===null && !this.game.player.lock){\n      this.game.activeObject=this;\n      this.action=null;\n      this.posX = this.sprite.x;\n      this.posY = this.sprite.y;\n      this.interaction = event.data;\n      this.sprite.alpha = 0.5;\n      this.dragging = true;\n      if(this.timeoutID) clearTimeout(this.timeoutID);\n      this.timeoutID=setTimeout(this.hold.bind(this), 1000);\n      this.oldParent=this.sprite.parent;\n      this.depthGroup=this.sprite.parentLayer;\n      if(this.sprite.parentLayer !== this.game.layerUI) this.sprite.parentLayer = this.game.layerUI;\n    }\n  }\n\n  //Object is being dragged\n  move(){\n    if (this.dragging && !this.locked) {\n      this.sprite.setParent(this.game.app.stage);\n      var newPosition = this.interaction.getLocalPosition(this.sprite.parent);\n      let bounds=this.sprite.getBounds();\n      //We can only move the object inside the stage\n      if(newPosition.x>bounds.width/2 && newPosition.x<this.game.width-bounds.width/2) this.sprite.x = newPosition.x;\n      if(newPosition.y>bounds.height && newPosition.y<this.game.height) this.sprite.y = newPosition.y;\n    }\n  }\n\n  //Object drag/touch ends\n  release(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n\n    if(this.interaction){\n      let moveTo={x:this.posX,y:this.posY};\n      //Check if we take it\n      if(collision(this.sprite,this.game.inventory.icon) && this.config.Take){\n        this.action=\"Take\";\n        //Check if we look it\n      }else if(this.interaction.button===2  || this.holding){\n        if(this.config.Use!==undefined) this.game.activePuzzle=this.game.puzzles[this.config.Use];\n        this.action=\"Use\";\n      }else{\n        this.action=\"Look\";\n      }\n\n      if(this.action!==null){\n        this.game.player.endAction=this.action;\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      if(this.game.player.touched) this.game.player.touched=false;\n\n      this.sprite.x = this.posX;\n      this.sprite.y = this.posY;\n      this.sprite.alpha = 1;\n      this.sprite.parentLayer = this.depthGroup;\n      this.sprite.setParent(this.oldParent);\n\n      this.holding=false;\n      this.interaction = null;\n      this.dragging = false;\n    }\n  }\n\n  //Check collision between objects\n  hit(){\n    let found=null;\n    let i;\n\n    //First check the collision between active scene's objects\n    let objectsArray=this.game.activeScene.config.Objects;\n    if(objectsArray!==undefined){\n      for(i=0;i<objectsArray.length;i++){\n        if(collision(this.sprite,this.game.objects[objectsArray[i]].sprite)\n                     && this.config.Name!==objectsArray[i]){\n          found=objectsArray[i];\n          break;\n        }\n      }\n    }\n\n    //Check if the collision is between inventory objects\n    objectsArray=this.game.inventory.objects;\n\n    for(i=0;i<objectsArray.length;i++){\n      if(collision(this.sprite,this.game.objects[objectsArray[i]].sprite)\n                   && this.config.Name!==objectsArray[i]){\n        found=objectsArray[i];\n        break;\n      }\n    }\n\n    //Check the collision a character\n    let charsArray=this.game.activeScene.config.Characters;\n    if(charsArray!==undefined){\n      for(i=0;i<charsArray.length;i++){\n        if(collision(this.sprite,this.game.npcs[charsArray[i]].sprite)\n                     && this.config.Name!==charsArray[i]){\n          found=charsArray[i];\n          break;\n        }\n      }\n    }\n\n    return found;\n  }\n\n  //Object action is canceled or ended\n  cancel(){\n    this.game.activeObject.action=null;\n    this.game.activeObject=null;\n\n  }\n\n  setInteraction(value){\n    this.sprite.interactive=value;\n  }\n\n  //Add the object to a given scene\n  add(scene){\n    this.game.scenes[scene].container.addChild(this.sprite);\n    this.game.scenes[scene].config.Objects.push(this.config.Name);\n  }\n  //Remove objects from game\n  remove(){\n    this.sprite.parent.removeChild(this.sprite);\n\n    //Check if we remove an object which is in an scene\n    let scenesArray=Object.values(this.game.scenes)\n    let i;\n    let scenesLength=scenesArray.length;\n    for(i=0;i<scenesLength;i++){\n      if(scenesArray[i].config.Objects!==undefined && scenesArray[i].config.Objects.includes(this.config.Name)){\n        let tmpIndex=scenesArray[i].config.Objects.indexOf(this.config.Name);\n        scenesArray[i].config.Objects.splice(tmpIndex,1);\n      }\n    }\n\n    //Check if the object to remove is inside the inventory\n    if(this.game.inventory.objects.includes(this.config.Name)){\n      this.game.inventory.remove(this.config.Name)\n    }\n  }\n\n}\n\nexport default GameObject;\n","import {boxesIntersect,collision} from '../collisions.js';\n\nclass Inventory{\n  constructor(){\n      this.container=new PIXI.Container();\n      this.container.visible=false;\n      this.game=null;\n      this.objects=[];\n\n    }\n\n    build(){\n      this.background=new PIXI.Sprite(PIXI.Texture.from(this.game.settings.Inventory.Background));\n      this.background.width=this.game.width/2;\n      this.background.height=this.game.height/2;\n      this.background.parentLayer = this.game.layerUI;\n      this.container.x = (this.game.width - this.background.width) / 2;\n      this.container.y = (this.game.height - this.background.height) / 2;\n      this.border=10;\n      this.icon=new PIXI.Sprite(PIXI.Texture.from(this.game.settings.Inventory.Icon));\n      this.icon.on('pointertap',this.click.bind(this));\n      this.icon.interactive=true;\n      this.icon.buttonMode=true;\n      this.setIcon(this.game.settings.Inventory.Position);\n      this.container.addChild(this.background);\n      this.icon.parentLayer = this.game.layerUI;\n\n      //Hidden by default\n      this.hide();\n      this.hideIcon();\n    }\n\n    show(){\n      this.update();\n      this.container.visible=true;\n    }\n\n    hide(){\n      this.container.visible=false;\n\n    }\n\n    showIcon(){\n      this.icon.visible=true;\n    }\n\n    hideIcon(){\n      this.icon.visible=false;\n\n    }\n\n    setIcon(position){\n      if(position==\"bottom-right\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=this.game.height - this.icon.height;\n      }else if(position==\"top-right\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=0;\n      }else if(position==\"top-left\"){\n        this.icon.x=0;\n        this.icon.y=this.game.height - this.icon.height;\n      }else if(position==\"bottom-top\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=0;\n      }\n    }\n\n    click(){\n      if (this.container.visible) this.hide();\n      else if(!this.game.player.lock) this.show();\n    }\n\n    add(name){\n      this.objects.push(name);\n      this.game.objects[name].sprite.setParent(this.container);\n      this.game.objects[name].sprite.parentLayer=this.game.layerUI;\n      this.game.objects[name].sprite.on('pointermove', this.move.bind(this.game.objects[name]))\n                                    .off('pointerup')\n                                    .off('pointerupoutside')\n                                    .on('pointerup',this.release.bind(this.game.objects[name]))\n                                    .on('pointerupoutside',this.release.bind(this.game.objects[name]));\n      this.update();\n    }\n\n    remove(name)\n    {\n      //Check if object is already in inventory\n      if(this.objects.includes(name)){\n        this.objects.splice(this.objects.indexOf(name),1);\n        this.update();\n      }\n    }\n\n    update(){\n      //Inventory is limited to 25 objects\n      let i;\n      let numObjs=this.objects.length;\n      for(i=0;i<numObjs;i++){\n        let tmpObj=this.game.objects[this.objects[i]].sprite;\n\n        let desiredWidth=this.container.width/5-this.container.width*0.05;\n        let desiredHeight=this.container.height/5-this.container.height*0.05;\n        let ratio = Math.min( desiredWidth/tmpObj.width, desiredHeight/tmpObj.height);\n        tmpObj.width*=ratio;\n        tmpObj.height*=ratio;\n\n        tmpObj.x = ((i % 5) * this.container.width/5+this.border-i)+tmpObj.width/2;\n        tmpObj.y = (Math.floor(i / 5) * this.container.height/5+this.border-i)+tmpObj.height;\n        this.container.width=this.background.width;\n        this.container.height=this.background.height;\n      }\n    }\n\n    move(){\n      if(!boxesIntersect(this.sprite,this.game.inventory.container))\n        this.game.inventory.hide();\n    }\n\n    release(event){\n      if(this.timeoutID) clearTimeout(this.timeoutID);\n\n      if(this.interaction){\n        let objectHit=this.hit();\n\n        let moveTo={x:this.sprite.x,y:this.sprite.y};\n        //Check if we take it\n        if(!this.holding){\n          let voice=undefined;\n          if(this.config.VoiceDescription!==undefined){\n            voice=this.config.VoiceDescription[this.game.activeLanguage];\n          }\n          this.game.player.say(this.config.Description[this.game.activeLanguage],voice);\n\n        }else if(this.config.Combine!==undefined && objectHit!==null){\n          if(this.config.Combine.With===objectHit) {\n            this.game.activePuzzle=this.game.puzzles[this.config.Combine.Puzzle];\n          }\n          this.action=\"Use\";\n        }\n\n        if(this.action!==null){\n          this.game.player.endAction=this.action;\n          this.game.player.move(moveTo);\n        }else{\n          this.cancel();\n        }\n\n        this.sprite.x = this.posX;\n        this.sprite.y = this.posY;\n        this.sprite.alpha = 1;\n        this.sprite.setParent(this.oldParent);\n\n        this.interaction = null;\n        this.dragging = false;\n        this.holding=false;\n      }\n    }\n}\n\nexport default Inventory;\n","class Puzzle{\n  constructor(){\n    this.solved=false;\n  }\n\n  resolve(){\n    if(this.game.activeObject!==null) this.game.activeObject.cancel();\n\n    if(!this.solved){\n      if(this.config.ModifyObject){\n        let objectMod=this.game.objects[this.config.ModifyObject.Name];\n        if(this.config.ModifyObject.Description!==undefined) objectMod.config.Description=this.config.ModifyObject.Description;\n        if(this.config.ModifyObject.Door!==undefined) this.createDoor(objectMod)\n        if(this.config.ModifyObject.Position!==undefined) objectMod.setpos(this.config.ModifyObject.Position[0],this.config.ModifyObject.Position[1]);\n        if(this.config.ModifyObject.Mirror) objectMod.flip();\n        if(this.config.ModifyObject.Interactive!==undefined) this.setInteraction(this.config.ModifyObject.Interactive);\n        if(this.config.ModifyObject.Texture!==undefined) this.changeTexture(this.config.ModifyObject.Texture);\n        if(this.config.ModifyObject.Combine!==undefined) objectMod.config.Combine=this.config.ModifyObject.Combine;\n        if(this.config.ModifyObject.Use!==undefined) objectMod.config.Use=this.config.ModifyObject.Use;\n        if(this.config.ModifyObject.Lock!==undefined) objectMod.lock=this.config.ModifyObject.Lock;\n      }\n\n      if(this.config.GetObject!==undefined) this.game.inventory.add(this.config.GetObject);\n\n      if(this.config.AddObject!==undefined){\n        let objectAdd=this.game.objects[this.config.AddObject.Name];\n        objectAdd.add(this.config.AddObject.Scene);\n      }\n\n      if(this.config.RemoveObject!==undefined){\n        let objectRemove=this.game.objects[this.config.RemoveObject];\n        objectRemove.remove();\n\n      }\n\n      if(this.config.RemoveDoor!==undefined){\n        let objectDoor=this.game.objects[this.config.RemoveDoor];\n        objectDoor.door=false;\n      }\n\n      if(this.config.SetDialogue!==undefined){\n        this.game.npcs[this.config.SetDialogue.Character].config.Dialogue=this.config.SetDialogue.Dialogue;\n      }\n\n      if(this.config.Resolve!==undefined)this.game.puzzles[this.config.Resolve].resolve();\n\n      if(this.config.Say && !this.game.silentMode){\n        this.game.player.say(this.config.Say[this.game.activeLanguage]);\n      }else if(this.config.NPCSay && !this.game.silentMode){\n        this.game.npcs[this.config.NPCSay.Name].say(this.config.NPCSay.Text[this.game.activeLanguage]);\n      }else{\n        this.game.player.stop();\n      }\n\n      if(this.config.Sound!==undefined && !this.game.silentMode){\n          if(this.config.Sound.Source!==undefined) this.game.sounds[this.config.Sound.Name].play(null,this.config.Sound.Source);\n          else this.game.sounds[this.config.Sound.Name].play();\n      }\n\n      if(this.config.CutScene!==undefined && !this.game.silentMode && this.game.playSounds){\n        this.game.activeCutscene=this.game.cutscenes[this.config.CutScene];\n        this.game.pause();\n        this.game.activeCutscene.show();\n      }\n\n      if(this.config.EndGame!==undefined && !this.game.silentMode){\n        this.game.end();\n        if(this.config.EndGame.CutScene!==undefined){\n           this.game.activeCutscene=this.game.cutscenes[this.config.EndGame.CutScene];\n           this.game.pause();\n           this.game.activeCutscene.show();\n        }\n        else this.game.home();\n      }\n\n      this.solved=true;\n\n    }else{\n      this.game.player.stop();\n    }\n\n    this.game.activePuzzle=null;\n  }\n\n  createDoor(target){\n    target.door=true;\n    target.newScene=this.config.ModifyObject.Door.To;\n    target.playerPos=this.config.ModifyObject.Door.Player;\n  }\n}\n\nexport default Puzzle;\n","import dragonBones from 'pixi-dragonbones';\nconst dbfactory=dragonBones.PixiFactory.factory;\nimport {checkPath} from '../collisions.js'\n\nimport { TweenMax } from \"gsap\";\nimport PixiPlugin from \"gsap/PixiPlugin\";\n\nclass Character{\n  constructor(){\n    this.game=null;\n    this.state=null;\n    this.lock=false;\n    this.endAction=null;\n  }\n\n  setup(config){\n    dbfactory.parseDragonBonesData(this.game.files.resources[config.Name+\"Skeleton\"].data);\n    dbfactory.parseTextureAtlasData(this.game.files.resources[config.Name+\"Json\"].data,this.game.files.resources[config.Name+\"Tex\"].texture);\n    this.sprite = dbfactory.buildArmatureDisplay(config.Armature);\n    if(config.Size!==undefined){\n      this.size=config.Size;\n      this.sprite.scale.set(this.size);\n    }else{\n      this.size=1;\n    }\n    this.tween=null;\n    if(config.Animations!=undefined)\n      this.animations=config.Animations;\n    else\n      this.animations={\n        Stand:\"stand\",\n        Walk:\"walk\",\n        Take:\"take\",\n        Use:\"use\",\n        Say:\"speak\"\n      };\n    this.animate(this.animations.Stand);\n    this.state=\"stand\";\n    if(config.Position){\n      this.sprite.x=config.Position[0];\n      this.sprite.y=config.Position[1];\n    }\n    this.sprite.parentLayer = this.game.layer;//Z-order*/\n    this.config=config;\n  }\n\n  hide(){\n    this.sprite.visible=false;\n  }\n\n  show(){\n    this.sprite.visible=true;\n  }\n\n  position(coords){\n    this.sprite.x=coords[0];\n    this.sprite.y=coords[1];\n  }\n\n  move(coords){\n    let obstacles=this.game.activeScene.config.Obstacles;\n    let walkingArea=this.game.activeScene.config.WalkArea;\n    let newPosition=coords;\n    let closestPosition=checkPath(coords,obstacles,walkingArea);\n\n    if(closestPosition){\n      newPosition=closestPosition;\n    }\n\n    let findPath=this.game.activeScene.walkable.findPath(this.sprite.x,this.sprite.y,newPosition.x,newPosition.y,0);\n    let i;\n    let finalPath=[];\n    for(i=0;i<findPath.length;i++){\n      finalPath.push({x:findPath[i],y:findPath[i+1]})\n      i++;\n    }\n\n    if(finalPath.length>0){\n      let animationTime=Math.abs(this.sprite.x-newPosition.x)+Math.abs(this.sprite.y-newPosition.y);\n      animationTime=animationTime/(this.game.width+this.game.height);\n      animationTime*=10;\n      if(this.config.Speed!==undefined) animationTime/=this.config.Speed;\n\n      this.animate(this.animations.Walk);\n      if(this.sprite.x<newPosition.x) this.sprite.armature.flipX=false;\n      else this.sprite.armature.flipX=true;\n\n      this.game.activeState=this;\n\n      if(this.tween!==null) this.tween.kill();\n      this.tween=TweenMax.to(this.sprite, animationTime, {bezier:finalPath, ease:Linear.easeNone,onComplete:this.stop.bind(this)});\n    }\n  }\n\n  update(){\n    this.scale();\n  }\n\n  scale(){\n    let scaleChar=this.sprite.y/this.game.height*this.size;\n    if(scaleChar<this.game.activeScene.config.Depth) scaleChar=this.game.activeScene.config.Depth;\n    this.sprite.scale.set(scaleChar);\n  }\n\n  stop(){\n    this.animate(this.animations.Stand);\n    this.game.activeState=null;\n    this.lock=false;\n    if(this.endAction!==null){\n      if(this.endAction===\"Look\") this.look();\n      else if(this.endAction===\"Take\") this.take();\n      else if(this.endAction===\"Use\") this.use();\n      else if(this.endAction===\"Talk\") this.talk();\n      this.endAction=null;\n    }\n  }\n\n  say(text,voice){\n    this.game.textField.talker=this;\n    //Setup the text to show\n    this.game.textField.setText(text);\n    this.game.textField.setAvatar(this.config.Avatar);\n    if(this.config.Color!==undefined) this.game.textField.setColor(Number(this.config.Color));\n    if(this.config.Font!==undefined) this.game.textField.setFont(this.config.Font);\n    else this.game.textField.setFont(this.game.settings.Text.Style.font)\n\n    //Play voice if it's defined\n    if(voice!==undefined && this.config.Voice!=undefined){\n      this.game.activeVoice=this.config.Voice;\n      this.game.voices[this.config.Voice].play(null,voice);\n    }\n\n    this.game.textField.show();\n    //Animate the character\n    this.animate(this.animations.Say);\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    this.timeoutID=setTimeout(this.game.textField.end.bind(this.game.textField), this.game.textField.timeOut());\n  }\n\n  shutup(){\n    if(this.game.activeVoice!=null){\n      this.game.voices[this.config.Voice].stop();\n      this.game.activeVoice=null\n    }\n    this.animate(this.animations.Stand);\n  }\n\n  animate(animation,times){\n    if(this.sprite.animation.lastAnimationName!==animation)\n      this.sprite.animation.fadeIn(animation,0.25,times);\n  }\n}\n\nexport default Character;\n","import Character from './character.js';\nimport dragonBones from 'dragonbones-pixi';\nconst dbEvents=dragonBones.dragonBones.EventObject;\nimport {closestPoint} from '../collisions.js';\n\nclass Player extends Character{\n  setup(config){\n    super.setup(config);\n\n    //Hidden by default\n    this.hide();\n  }\n\n  checkDirection(target){\n    //Player must look in the right direction\n    if(target.config.Area===undefined){\n      if(this.sprite.x<target.sprite.x){\n        this.sprite.armature.flipX=false;\n      }else{\n        this.sprite.armature.flipX=true;\n      }\n    }\n  }\n\n  say(text,voice){\n    super.say(text,voice);\n    //Lock the player\n    this.lock=true;\n  }\n\n  look(){\n    if(this.game.activeObject!==null){\n      this.checkDirection(this.game.activeObject);\n      let text=this.game.activeObject.config.Description[this.game.activeLanguage];\n      let voice=undefined;\n      if(this.game.activeObject.config.VoiceDescription!==undefined){\n        voice=this.game.activeObject.config.VoiceDescription[this.game.activeLanguage];\n      }\n      this.say(text,voice);\n      this.game.activeObject.cancel();\n    }else if(this.game.activeNPC!==null){\n      this.checkDirection(this.game.activeNPC);\n          let text=this.game.activeNPC.config.Description[this.game.activeLanguage];\n          this.say(text);\n          this.game.activeNPC.cancel();\n    }\n  }\n\n  take(){\n    this.lock=true;\n    this.animate(this.animations.Take,1);\n    this.sprite.once(dbEvents.COMPLETE, this.takeEnd, this);\n  }\n\n  takeEnd(){\n    if(this.game.activeObject!==null){\n      let name=this.game.activeObject.config.Name;\n      if(this.game.activeScene!==null){\n        if(this.game.activeScene.config.Objects.includes(name)){\n          let tmpIndex=this.game.activeScene.config.Objects.indexOf(name);\n          this.game.activeScene.config.Objects.splice(tmpIndex,1);\n        }\n      }\n      this.game.inventory.add(name);\n      this.game.activeObject.cancel();\n      this.stop();\n    }\n  }\n\n  use(){\n    this.lock=true;\n    this.animate(this.animations.Use,1);\n    this.sprite.once(dbEvents.COMPLETE, this.useEnd, this);\n  }\n\n  useEnd(){\n    if(this.game.activePuzzle!==null){\n      this.game.activePuzzle.resolve();\n    }else if(this.game.activeObject!==null) {\n      if(this.game.activeObject.door){\n        this.game.changeScene(this.game.activeObject.newScene,\n          this.game.activeObject.playerPos);\n        this.stop();\n      }else{\n        this.say(this.game.data.texts.NotUsable[this.game.activeLanguage])\n      }\n      this.game.activeObject.cancel();\n    }\n  }\n\n  talk(){\n    //Player must look in the right direction\n    if(this.sprite.x<this.game.activeNPC.sprite.x){\n      this.sprite.armature.flipX=false;\n      if(this.game.activeNPC.config.Mirror!==undefined) this.game.activeNPC.sprite.armature.flipX=false;\n      else this.game.activeNPC.sprite.armature.flipX=true;\n    }else{\n      this.sprite.armature.flipX=true;\n      if(this.game.activeNPC.config.Mirror!==undefined) this.game.activeNPC.sprite.armature.flipX=true;\n      else this.game.activeNPC.sprite.armature.flipX=false;\n    }\n\n    //Let's talk\n    this.game.activeDialogue.start();\n  }\n\n}\n\nexport default Player;\n","import Character from './character.js';\n\nclass NPC extends Character{\n  build(){\n    if(this.config.Mirror!==undefined) this.sprite.armature.flipX=true;\n    this.holding=false;\n    this.pressTimeoutID;\n    this.sprite.interactive=true;\n    this.sprite.buttonMode=true;\n    this.sprite.on('pointerdown', this.touch.bind(this))\n        .on('pointerup', this.release.bind(this))\n        .on('pointerupoutside', this.release.bind(this));\n  }\n\n  hold(){\n    this.holding=true;\n  }\n\n  touch(event){\n    if(this.game.activeNPC===null && !this.game.player.lock){\n      this.game.activeNPC=this;\n      this.action=null;\n      this.interaction = event.data;\n      if(this.pressTimeoutID) clearTimeout(this.pressTimeoutID);\n      this.pressTimeoutID=setTimeout(this.hold.bind(this), this.game.holdTime);\n    }\n  }\n  //Object drag/touch ends\n  release(){\n    if(this.pressTimeoutID) clearTimeout(this.pressTimeoutID);\n    if(this.interaction){\n      let distance=0;\n      if(this.game.player.sprite.x<this.sprite.x) distance=this.sprite.getBounds().width*-1;\n      else distance=this.sprite.getBounds().width;\n      let moveTo={x:this.sprite.x+distance,y:this.sprite.y};\n\n      if(this.interaction.button===2  || this.holding){\n        //Check if we talk with the character\n        if(this.config.Dialogue!==undefined){\n          this.game.activeDialogue=this.game.dialogues[this.config.Dialogue];\n          this.action=\"Talk\";\n        }\n      }else{\n        this.action=\"Look\";\n      }\n\n      if(this.action!==null){\n        this.game.player.endAction=this.action;\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      if(this.game.player.touched) this.game.player.touched=false;\n\n      this.holding=false;\n      this.interaction = null;\n      this.dragging = false;\n      this.moved=0;\n    }\n  }\n\n  //Set player to look this object\n  look(){\n    this.action=this.game.player.look.bind(this.game.player);\n  }\n\n  //Object action is canceled or ended\n  cancel(){\n    this.game.activeNPC.action=null;\n    this.game.activeNPC=null;\n\n  }\n}\n\nexport default NPC;\n","import {Button} from './text.js'\n\n//Branches dialogue system\nclass Dialogue{\n  constructor(){\n    this.timeoutID=null;\n    this.firstTime=true;\n    this.choice=null;\n    this.branches={};\n  }\n\n  setup(config){\n    this.config=config;\n\n    //Get dialogue branches\n    let i;\n    length=this.config.Branches.length;\n    for(i=0;i<length;i++)\n    {\n      this.branches[this.config.Branches[i].Name]=this.config.Branches[i];\n    }\n\n    this.currentBranch=this.branches[this.config.DefaultBranch];\n  }\n\n  //Executed when we interact with a NPC\n  start(){\n    this.firstTime=false;\n    this.game.player.lock=true;\n    this.game.textField.show();\n    this.game.textField.hideAvatar();\n    this.game.textField.Choices.get();\n  }\n\n  //Executed everytime we choose an option\n  next(){\n    if(this.choice!==null){\n      let choiceSelected=this.currentBranch.Choices[this.choice];\n      this.game.textField.Choices.hide();\n      let voice=undefined;\n      if(choiceSelected.Voice!==undefined){\n        voice=choiceSelected.Voice[this.game.activeLanguage];\n      }\n      this.game.player.say(choiceSelected.Text[this.game.activeLanguage],voice);\n    }else{\n      this.game.textField.hideAvatar();\n      this.game.textField.Choices.get();\n    }\n  }\n\n  //Search for a branch with a given name\n  searchBranch(name){\n    let branchFound=-1;\n    let i;\n    let length=this.config.Branches.length\n    for(i=0;i<length;i++)\n         if(this.config.Branches[i].Name===name)\n         {\n             branchFound=i;\n             break;\n         }\n    return branchFound;\n  }\n\n  answer(){\n    let choiceSelected=this.currentBranch.Choices[this.choice];\n    let voice=undefined;\n    if(choiceSelected.AnswerVoice!==undefined){\n      voice=choiceSelected.AnswerVoice[this.game.activeLanguage];\n    }\n    this.game.activeNPC.say(choiceSelected.Answer[this.game.activeLanguage],voice);\n\n    if(choiceSelected.Link){\n      this.currentBranch=this.branches[choiceSelected.Link];\n    }else if(choiceSelected.Puzzle){\n      choiceSelected.Repeat=false;\n      this.end();\n      this.game.puzzles[choiceSelected.Puzzle].resolve();\n    }else if(choiceSelected.EndDialogue){\n      this.end();\n    }\n\n\n    this.choice=null;\n  }\n\n  //Ends the conversations\n  end(){\n    this.game.activeNPC=null;\n    this.game.activeDialogue=null;\n  }\n\n  timeOut(){\n    this.next();\n  }\n}\n\nexport default Dialogue;\n","import { TweenMax } from \"gsap\";\nimport PixiPlugin from \"gsap/PixiPlugin\";\n\nclass Logo{\n  constructor(game){\n    this.game=game;\n    this.index=0;\n    this.timeoutID=null;\n    this.tween=null;\n    this.image=new PIXI.Sprite(\n      PIXI.Texture.from(this.game.settings.Logos[this.index]));\n    this.image.anchor.set(0.5,0.5)\n    this.image.position.set(this.game.width/2,this.game.height/2)\n    this.image.interactive=true;\n    this.image.buttonMode=true;\n    this.image.on('pointertap',this.fadeOut.bind(this));\n    this.image.alpha=0;\n  }\n\n  show(){\n    this.game.app.stage.addChild(this.image);\n    this.fadeIn();\n  }\n\n  fadeIn(){\n    if(this.tween) this.tween.kill();\n    this.tween=TweenMax.set(this.image,{alpha:0});\n    this.tween=TweenMax.fromTo(this.image, 1, {alpha:0}, {alpha:1, onComplete:this.timer.bind(this)});\n  }\n\n  timer(){\n    this.timeoutID = setTimeout(this.fadeOut.bind(this), 3*1000);\n  }\n\n  fadeOut(){\n    this.image.interactive=false;\n    if(this.tween) this.tween.kill();\n    this.tween=TweenMax.fromTo(this.image, 1, {alpha:1}, {alpha:0, onComplete:this.next.bind(this)});\n  }\n\n  next(){\n    this.image.interactive=true;\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    this.index++;\n    if(this.game.settings.Logos[this.index]!==undefined)\n    {\n      this.image.texture=(PIXI.Texture.from\n        (this.game.settings.Logos[this.index]));\n      this.fadeIn();\n    }\n    else this.end();\n  }\n\n  end(){\n\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    if(this.tween) this.tween.kill();\n    this.game.app.stage.removeChild(this.image);\n\n    //Set Title as the first scene to show\n    this.game.setScene(this.game.titleLabel);\n    this.game.fadeIn();\n  }\n}\n\nexport default Logo;\n","import * as PIXI from 'pixi.js';\nimport 'pixi-layers';\nimport { TweenMax } from \"gsap\";\nimport PixiPlugin from \"gsap/PixiPlugin\";\n\nimport Loader from './loader.js';\nimport Storage from './storage.js';\nimport Sound from './soundmanager.js';\nimport Title from './class/title.js';\nimport GameScene from './class/gamescene.js';\nimport CutScene from './class/cutscene.js';\nimport GameObject from './class/gameobject.js';\nimport Inventory from './class/inventory.js';\nimport Puzzle from './class/puzzle.js';\nimport {TextField} from './class/text.js';\nimport Player from './class/player.js';\nimport NPC from './class/npc.js';\nimport Dialogue from './class/dialogue.js';\nimport Logo from './class/logo.js';\n\nclass Game {\n  constructor(config){\n    this.settings={};\n    this.data={\n      scenes:[],\n      cutscenes:[],\n      objects:[],\n      dialogues:[],\n      puzzles:[],\n      credits:[],\n      texts:[],\n      music:[],\n      voices:[],\n      sounds:[]\n    };\n    this.width=config.width;\n    this.height=config.height;\n    this.holdTime=500;\n    this.playSounds = true;\n\n    //Setup the application\n    this.app = new PIXI.Application(\n      config.width,config.height,{\n      antialias: true,\n      autoResize: true,\n      resolution: devicePixelRatio\n    });\n\n    this.app.stage = new PIXI.display.Stage();\n\n    //Change game size when window size changes\n    if(config.autoResize!==undefined) this.app.renderer.autoResize=config.autoResize;\n    else window.addEventListener('resize', this.resize.bind(this));\n\n    //Disable contextmenu for mouse interaction\n    document.addEventListener('contextmenu', e => {\n       e.preventDefault();\n    });\n\n    //We append it to a HTML element or Document body\n    if(config.parent){\n      document.getElementById(config.parent).appendChild(this.app.view)\n    }else{\n      document.body.appendChild(this.app.view);\n    }\n\n    //Load config files\n    this.preload(config.files);\n  }\n\n  //Read JSON configuration files\n  preload(files){\n    //Text to show progress\n    this.progressBar=new PIXI.Graphics();\n    this.progressBar.beginFill(0xDE3249);\n    this.progressBar.drawRect(0, 0, this.width, this.height/50);\n    this.progressBar.endFill();\n    this.progressBar.width=0;\n\n    this.loadingTxt=new PIXI.Text(\"Loading...\", {fill: 'white',\"fontSize\": 50});\n    this.loadingTxt.anchor.set(0.5);\n    this.loadingTxt.x=this.width/2;\n    this.loadingTxt.y=this.height/2;\n\n    this.progressBar.y=this.height-this.loadingTxt.height;\n\n    this.app.stage.addChild(this.loadingTxt);\n    this.app.stage.addChild(this.progressBar);\n    this.resize();\n    this.jsons=new Loader();\n    this.jsons.game=this;\n    this.jsons.addJSON(files);\n    this.jsons.load(this.load.bind(this)); //When all config files are loaded, load the game resources.\n  }\n\n  //Load game resources (images,sounds,vids...)\n  load(){\n    this.files=new Loader();\n    this.files.game=this;\n    this.files.addFiles(Object.values(this.jsons.resources));\n    this.files.load(this.setup.bind(this));\n  }\n\n  setup(){\n    this.app.stage.removeChild(this.loadingTxt);\n    this.app.stage.removeChild(this.progressBar);\n\n    //Z-Order\n    this.addZOrder();\n\n    //Adjust to window size\n    this.resize();\n\n    this.tween=null;\n    this.logo=null;\n    this.sounds=null;\n\n    this.scenes={};\n    this.cutscenes={};\n    this.objects={};\n    this.npcs={};\n    this.dialogues={};\n    this.puzzles={};\n    this.music={};\n    this.sounds={};\n    this.voices={};\n\n\n    this.activeLanguage=0;\n    this.activeScene=null;\n    this.activeObject=null;\n    this.activeNPC=null;\n    this.activePuzzle=null;\n    this.activeDialogue=null;\n    this.activeCutscene=null;\n    this.activeVoice=null;\n\n    this.activeState=null;\n\n    this.finished=false;\n\n    this.storage=new Storage(this);\n    this.logo=new Logo(this);\n  //  this.sound=new SoundManager(this);\n\n    this.titleLabel=\"Title\";\n\n\n    if(this.settings.HoldTime!==undefined) this.holdTime=this.settings.HoldTime*1000;\n    if(this.settings.dialogueChoices!==undefined) this.dialogueChoices=this.settings.dialogueChoices;\n    else this.dialogueChoices=3;\n\n    //Setup title screen\n    this.addScene(this.titleLabel,new Title(),this.settings.TitleScreen);\n\n    //Add sounds,music and voices\n    let i;\n    let length=this.data.music.length;\n    for(i=0;i<length;i++)\n    {\n      this.addMusic(this.data.music[i].Name,new Sound(),this.data.music[i]);\n    }\n\n    length=this.data.sounds.length;\n    for(i=0;i<length;i++)\n    {\n      this.addSound(this.data.sounds[i].Name,new Sound(),this.data.sounds[i]);\n    }\n\n    length=this.data.voices.length;\n    for(i=0;i<length;i++)\n    {\n      this.addVoice(this.data.voices[i].Name,new Sound(),this.data.voices[i]);\n    }\n\n\n    //Add game objects\n    length=this.data.objects.length;\n    for(i=0;i<length;i++)\n    {\n      this.addObject(this.data.objects[i].Name,new GameObject(),this.data.objects[i]);\n    }\n\n    //Non-playable characters\n    length=this.data.npc.length;\n    for(i=0;i<length;i++)\n    {\n      this.addNPC(this.data.npc[i].Name,new NPC(),this.data.npc[i]);\n    }\n\n    //Dialogues\n    length=this.data.dialogues.length;\n    for(i=0;i<length;i++)\n    {\n      this.addDialogue(this.data.dialogues[i].Name,new Dialogue(),this.data.dialogues[i]);\n    }\n\n    //Add game scenes\n    length=this.data.scenes.length;\n    for(i=0;i<length;i++)\n    {\n      this.addScene(this.data.scenes[i].Name,new GameScene(),this.data.scenes[i]);\n    }\n\n    //Add cutscenes\n    length=this.data.cutscenes.length;\n    for(i=0;i<length;i++)\n    {\n      this.addCutscene(this.data.cutscenes[i].Name,new CutScene(),this.data.cutscenes[i]);\n    }\n\n    //Puzzles\n    length=this.data.puzzles.length;\n    for(i=0;i<length;i++)\n    {\n      this.addPuzzle(this.data.puzzles[i].Name,new Puzzle(),this.data.puzzles[i]);\n    }\n\n    //Add Inventory\n    this.addInventory();\n\n    //Add text field\n    this.addTextField();\n\n    //Add player\n    this.addPlayer();\n\n    //Check if there is a saved game\n    this.storage.check();\n\n    this.addBlackScreen();\n\n    //Game's loop\n    this.app.ticker.add(this.loop.bind(this));\n\n    this.logo.show();\n\n  }\n\n  loop(dt){\n    // update current state\n    if (this.activeState != null) {\n        this.activeState.update(dt);\n    }\n  }\n\n  addMusic(name, music, config) {\n      this.music[name] = music;\n\n      //Music parameters\n      music.config=config;\n\n      //Set game so music can access it\n      music.game = this;\n\n      music.source=this.files.resources[name].sound;\n  }\n\n  addSound(name, sound, config) {\n      this.sounds[name] = sound;\n\n      //Music parameters\n      sound.config=config;\n\n      //Set game so music can access it\n      sound.game = this;\n\n      sound.source=this.files.resources[name].sound;\n  }\n\n  addVoice(name, voice, config) {\n      this.voices[name] = voice;\n\n      //Music parameters\n      voice.config=config;\n\n      //Set game so music can access it\n      voice.game = this;\n\n      voice.source=this.files.resources[name].sound;\n\n      voice.source._sprite=config.Sprites;\n  }\n\n  addObject(name, object, config) {\n      this.objects[name] = object;\n\n      //Config the object\n      object.config=config;\n\n      //Set game so object can access it\n      object.game = this;\n\n      //Build object\n      object.build();\n  }\n\n  addScene(name, scene, config) {\n      this.scenes[name] = scene;\n\n      //Config the scene\n      scene.setup(config);\n\n      //Set game so scene can access it\n      scene.game = this;\n\n      //Build scene\n      scene.build();\n  }\n\n  addCutscene(name, cutscene, config) {\n      this.cutscenes[name] = cutscene;\n\n      //Config the scene\n      cutscene.config=config;\n\n      //Set game so scene can access it\n      cutscene.game = this;\n\n      //Build scene\n      cutscene.build();\n  }\n\n  addPuzzle(name, puzzle, config) {\n      this.puzzles[name] = puzzle;\n\n      //Puzzle's config\n      puzzle.config=config;\n\n      //Set game so puzzle can access it\n      puzzle.game = this;\n  }\n\n  addZOrder(){\n    this.BottomGroup= new PIXI.display.Group(0,false);\n    this.sortGroup= new PIXI.display.Group(1, true);\n    this.sortGroup.on('sort', function (sprite) {\n      sprite.zOrder = -sprite.y;\n    });\n    this.TopGroup = new PIXI.display.Group(2,false);\n    this.UIGroup = new PIXI.display.Group(3,false);\n\n    this.layerBottom=new PIXI.display.Layer(this.BottomGroup);\n    this.layer=new PIXI.display.Layer(this.sortGroup);\n    this.layerTop=new PIXI.display.Layer(this.TopGroup);\n    this.layerUI=new PIXI.display.Layer(this.UIGroup);\n\n    this.app.stage.group.enableSort = true;\n    this.app.stage.addChild(this.layerBottom);//Z-order\n    this.app.stage.addChild(this.layer);//Z-order\n    this.app.stage.addChild(this.layerTop);//Z-order\n    this.app.stage.addChild(this.layerUI);//Z-order\n  }\n\n  addInventory(){\n    this.inventory=new Inventory();\n    this.inventory.game=this;\n    this.inventory.build();\n  }\n\n  addPlayer(){\n    this.player=new Player();\n    this.player.game=this;\n    this.data.player.Name=\"player\";\n    this.player.setup(this.data.player);\n  }\n\n  addNPC(name, char, config){\n    this.npcs[name] = char;\n\n    char.game = this;\n\n    char.setup(config);\n\n    char.build();\n  }\n\n  addDialogue(name, dialogue, config){\n    this.dialogues[name] = dialogue;\n\n    dialogue.game = this;\n\n    dialogue.setup(config);\n  }\n\n  addTextField(){\n    this.textField=new TextField();\n    this.textField.game=this;\n    this.textField.build();\n  }\n\n  //Used for fade between screens\n  addBlackScreen(){\n    this.blackScreen=new PIXI.Sprite(PIXI.Texture.WHITE);\n    this.blackScreen.width=this.width;\n    this.blackScreen.height=this.height;\n    this.blackScreen.tint=0x000000;\n    this.blackScreen.parentLayer = this.layerUI;\n  }\n\n  //Adjust game screen to the window\n  resize() {\n    var w = window.innerWidth;// * window.devicePixelRatio;\n    var h = window.innerHeight;// * window.devicePixelRatio;\n    var ratio = Math.min( w/this.width,  h/this.height);\n    this.app.renderer.resize(this.width*ratio,this.height*ratio);\n    this.app.stage.scale.set(ratio);\n\n  }\n\n  //The magic begins\n  start(){\n    //Show Inventory\n    this.app.stage.addChild(this.inventory.container);\n    this.app.stage.addChild(this.inventory.icon);\n\n    //Show Player\n    this.app.stage.addChild(this.player.sprite);\n\n    //Add Text Field\n    this.app.stage.addChild(this.textField.container);\n  }\n\n  pause(){\n    this.activeScene.hide();\n    this.inventory.hide();\n    this.inventory.hideIcon();\n    this.player.hide();\n    if(this.activeScene.music!==undefined){\n      this.music[this.activeScene.music].stop();\n    }\n  }\n\n  resume(){\n    this.inventory.showIcon();\n    this.player.show();\n    this.activeScene.show();\n    this.fadeIn();\n  }\n\n  end(){\n    this.finished=true;\n  }\n\n  home(){\n    location.reload();\n  }\n\n  setScene(name,playerCoords) {\n    //Remove current container\n    if (this.activeScene !== null) {\n        this.app.stage.removeChild(this.activeScene.container);\n    }\n\n    //Set current container\n    this.activeScene = this.scenes[name];\n\n    //Player parameters\n    if(playerCoords!==undefined){\n      this.player.sprite.x=playerCoords[0];\n      this.player.sprite.y=playerCoords[1];\n    }\n\n    if(this.activeScene.config.Player!==undefined){\n      if(this.activeScene.config.Player.Position!==undefined){\n        this.player.position(this.activeScene.config.Player.Position);\n      }\n      if(this.activeScene.config.Player.Size!==undefined){\n        this.player.size=this.activeScene.config.Player.Size;\n        this.player.scale();\n      }\n    }\n    //Save game progress\n    if(this.activeScene!==this.scenes[this.titleLabel])\n      this.storage.save();\n  }\n\n  changeScene(name,playerCoords){\n    //Music\n    if(this.activeScene.music!==undefined){\n      //this.sound.stop(this.activeScene.music);\n      this.music[this.activeScene.music].stop();\n    }\n    this.app.stage.addChild(this.blackScreen);\n    if(this.tween) this.tween.kill();\n    this.tween=TweenMax.set(this.blackScreen, {alpha:0});\n    this.tween=TweenMax.fromTo(this.blackScreen, 1,\n      {alpha:0},\n      {alpha:1, onComplete:this.fadeOutEnd.bind(this),\n        onCompleteParams:[name,playerCoords]});\n  }\n\n  fadeIn(){\n    //Add our new container\n    this.app.stage.addChild(this.activeScene.container);\n\n    this.app.stage.addChild(this.blackScreen);\n\n    if(this.tween) this.tween.kill();\n    this.tween=TweenMax.set(this.blackScreen, {alpha:1});\n    this.tween=TweenMax.fromTo(this.blackScreen, 1,\n      {alpha:1},\n      {alpha:0, onComplete:this.fadeInEnd.bind(this)}\n    );\n  }\n\n  fadeInEnd(){\n    this.app.stage.removeChild(this.blackScreen);\n    //Music\n    if(this.activeScene.music!==undefined && this.playSounds){\n      //this.sound.play(this.activeScene.music);\n      this.music[this.activeScene.music].play(true);\n    }\n  }\n\n  fadeOutEnd(name,playerCoords){\n    this.setScene(name,playerCoords);\n    //Check Cutscenes\n    if(this.activeScene.config.CutScene!==undefined &&\n      !this.cutscenes[this.activeScene.config.CutScene].played){\n        this.activeCutscene=this.cutscenes[this.activeScene.config.CutScene];\n      //  this.pause();\n        this.activeCutscene.show();\n    }else{\n      this.resume();\n    }\n\n    this.app.stage.removeChild(this.blackScreen);\n  }\n}\n\nexport default Game;\n","import Game from './game';\n\nconsole.log(\"JSGAM 5.0.0 https://github.com/kreezii/jsgam\");\n\n//export default Game;\nexport default Game;\n"],"names":["Loader","constructor","game","onLoad","add","this","update","bind","onError","error","use","howlerMiddleware","resource","next","includes","extension","options","JSON","parse","stringify","metadata","src","url","sound","Howl","addJSON","files","i","arrayLength","length","name","slice","lastIndexOf","addFiles","data","Settings","settings","Scenes","scenes","concat","Cutscenes","cutscenes","Objects","objects","Dialogues","dialogues","Puzzles","puzzles","Credits","credits","Texts","texts","Voices","voices","Music","music","Sounds","sounds","soundSrc","j","tmpSound","Src","Name","musicSrc","tmpMusic","voiceSrc","tmpVoice","Vids","vidSrc","tmpVid","Animations","animSrc","tmpAnim","Backgrounds","bgSrc","tmpBg","Player","Texture","Json","Skeleton","player","Characters","npcSrc","npc","percent","Math","floor","progress","progressBar","width","console","log","PIXI","loaders","Storage","save","puzzlesSolved","Object","values","forEach","puzzle","solved","config","push","dialoguesDisabled","dialogue","branches","branch","Choices","choice","index","disabled","Dialogue","Branch","cutscenesPlayed","cutscene","played","language","activeLanguage","activeScene","sprite","x","y","inventory","setItem","load","disable","Index","silentMode","resolve","item","thisItem","scene","undefined","tmpIndex","indexOf","splice","playerPos","delete","localForage","clear","check","storage","getItem","then","value","changeLanguage","states","enable","catch","err","Sound","source","play","loop","stop","once","onFade","fade","on","volume","duration","Scene","container","Container","setup","background","Sprite","from","Background","anchor","set","addChild","Foreground","foreground","dt","hide","visible","show","Button","text","style","interactive","buttonMode","extras","BitmapText","Infotxt","Phrases","option","let","dialogueChoices","Text","ButtonStyle","onTap","height","activeChoice","activeDialogue","currentBranch","alpha","Repeat","get","sort","parent","scale","center","ratio","min","pivot","TextField","Avatar","build","parentLayer","layerUI","WHITE","size","Size","tint","Style","maxWidth","skip","Position","setPosition","end","talker","shutup","answer","setText","activeObject","cancel","clearTimeout","timeoutID","position","newText","adjustText","countWords","str","split","timeOut","time","activeVoice","Speed","setColor","colour","setFont","newFont","font","setAvatar","newAvi","texture","hideAvatar","Menu","buttons","addButton","modify","arrayButtons","resize","MainMenu","create","gameTexts","NewGame","Continue","Options","Help","languages","Languages","addLanguage","setLanguage","Back","father","change","mainMenu","buildText","speed","Time","structuredText","tween","animate","TweenMax","to","Lines","Title","kill","Confirmation","addText","Warning","Yes","No","addState","addAction","showOptions","showHelp","showCredits","checkAdventure","loadAdventure","newAdventure","button","action","state","warning","changeScene","FirstScene","start","latestScene","GameScene","layerTop","layerBottom","getPosition","walkable","Walkable","WalkArea","addPolygon","Obstacles","obstacles","sceneObjects","sceneChars","npcs","event","coord","getLocalPosition","app","stage","lock","move","getPath","fromX","fromY","toX","toY","findPath","CutScene","sequenceIndex","boxesIntersect","a","b","ab","getBounds","bb","collision","result","hitArea","PolyK","points","Video","videoData","resources","videoEnds","addEventListener","Sequence","image","Image","field","videoTexture","videoSprite","adjust","setMusic","fadeIn","removeChild","fromTo","timer","setTimeout","fadeOut","activeCutscene","pause","removeEventListener","finished","home","resume","playSounds","GameObject","Description","NoDescription","Area","EMPTY","Polygon","Animation","spritesheet","frames","_frameKeys","AnimatedSprite","animationSpeed","Mirror","flip","Layer","layer","Door","door","newScene","To","holding","Lock","locked","touchArea","releaseArea","touch","release","Interactive","setInteraction","setpos","changeTexture","hold","interaction","holdTime","touchedPos","moveTo","area","coords","coordX","round","coordY","changePosition","closestedge","point","norm","Use","activePuzzle","endAction","touched","posX","posY","dragging","oldParent","depthGroup","setParent","newPosition","bounds","icon","Take","hit","found","objectsArray","charsArray","remove","scenesArray","scenesLength","Inventory","border","Icon","click","setIcon","hideIcon","showIcon","off","numObjs","tmpObj","objectHit","Combine","With","Puzzle","voice","VoiceDescription","say","ModifyObject","objectMod","createDoor","GetObject","AddObject","RemoveObject","RemoveDoor","SetDialogue","Character","Resolve","Say","NPCSay","Source","EndGame","target","const","dbfactory","dragonBones","PixiFactory","factory","parseDragonBonesData","parseTextureAtlasData","buildArmatureDisplay","Armature","animations","Stand","closestPosition","obstaclesPolys","walkPoly","newPos","checkPath","finalPath","animationTime","abs","Walk","armature","flipX","activeState","ease","Linear","easeNone","scaleChar","Depth","look","take","talk","textField","Color","Number","Font","Voice","animation","times","lastAnimationName","dbEvents","EventObject","checkDirection","activeNPC","COMPLETE","takeEnd","useEnd","NotUsable","NPC","pressTimeoutID","distance","moved","firstTime","Branches","DefaultBranch","choiceSelected","searchBranch","branchFound","AnswerVoice","Answer","Link","EndDialogue","Logo","Logos","setScene","titleLabel","Game","devicePixelRatio","Stage","autoResize","renderer","window","e","preventDefault","document","getElementById","appendChild","view","body","preload","beginFill","drawRect","endFill","loadingTxt","jsons","addZOrder","logo","HoldTime","addScene","TitleScreen","addMusic","addSound","addVoice","addObject","addNPC","addDialogue","addCutscene","addPuzzle","addInventory","addTextField","addPlayer","addBlackScreen","ticker","_sprite","Sprites","object","BottomGroup","Group","sortGroup","zOrder","TopGroup","UIGroup","group","enableSort","char","blackScreen","w","innerWidth","h","innerHeight","location","reload","playerCoords","fadeOutEnd","onCompleteParams","fadeInEnd"],"mappings":"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"}