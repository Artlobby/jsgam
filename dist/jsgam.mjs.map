{"version":3,"file":"jsgam.mjs","sources":["../src/loader.js","../src/storage.js","../src/class/scene.js","../src/class/text.js","../src/class/menu.js","../src/class/mainmenu.js","../src/class/options.js","../src/class/help.js","../src/class/credits.js","../src/class/confirmation.js","../src/class/title.js","../src/class/gamescene.js","../src/class/cutscene.js","../src/collisions.js","../src/class/gameobject.js","../src/class/inventory.js","../src/class/puzzle.js","../src/class/character.js","../src/class/player.js","../src/class/npc.js","../src/class/dialogue.js","../src/game.js","../src/index.js"],"sourcesContent":["\n\nclass Loader extends PIXI.loaders.Loader{\n  constructor(){\n    super();\n    this.game=null;\n    this.onLoad.add(this.update.bind(this));\n    this.onError.add(this.error.bind(this));\n  }\n\n  //Add config files to loader\n  addJSON(files){\n  /*  let thisLoader=this;\n    files.map(function(file){\n      thisLoader.add(file.slice(file.lastIndexOf(\"/\")+1,file.lastIndexOf(\".\")),file)\n    });*/\n    let i;\n    let arrayLength=files.length;\n\n    for(i=0;i<arrayLength;i++){\n      let name=files[i].slice(files[i].lastIndexOf(\"/\")+1,files[i].lastIndexOf(\".\"));\n      this.add(name,files[i]);\n    }\n  }\n\n  //Add resource files to loader and settings to game\n  addFiles(files){\n    let i;\n    let length=files.length\n    for(i=0;i<length;i++){\n      //Add config files to setup the game\n      if(files[i].data.Settings) this.game.settings=files[i].data.Settings;\n      if(files[i].data.Scenes) this.game.data.scenes=files[i].data.Scenes;\n      if(files[i].data.Cutscenes) this.game.data.cutscenes=files[i].data.Cutscenes;\n      if(files[i].data.Objects) this.game.data.objects=files[i].data.Objects;\n      if(files[i].data.Dialogues) this.game.data.dialogues=files[i].data.Dialogues;\n      if(files[i].data.Puzzles) this.game.data.puzzles=files[i].data.Puzzles;\n      if(files[i].data.Credits) this.game.data.credits=files[i].data.Credits;\n      if(files[i].data.Texts) this.game.data.texts=files[i].data.Texts;\n\n      //Look for sound files\n      if(files[i].data.Sounds){\n        let soundSrc=files[i].data.Sounds;\n        for(let j=0;j<soundSrc.length;j++){\n           let tmpSound=soundSrc[j].Src;\n           if(tmpSound!==null) this.add(soundSrc[j].Name,tmpSound);\n        }\n       }\n\n       //Look for video files\n       if(files[i].data.Vids)\n       {\n         //Fix for load correctly vids with pixi-sound\n         this.fixVidLoad();\n         let vidSrc=files[i].data.Vids;\n         for(let i=0;i<vidSrc.length;i++){\n           let tmpVid=vidSrc[i].Src;\n           if(tmpVid!==null) this.add(vidSrc[i].Name,tmpVid);\n         }\n       }\n\n       //Load Animations\n       if(files[i].data.Animations)\n       {\n         let animSrc=files[i].data.Animations;\n         for(let i=0;i<animSrc.length;i++){\n           let tmpAnim=animSrc[i].Src;\n           if(tmpAnim!==null) this.add(animSrc[i].Name,tmpAnim);\n         }\n       }\n\n       //Load Backgrounds if don't use texture atlas for backgrounds\n       if(files[i].data.Backgrounds){\n         let bgSrc=files[i].data.Animations;\n         for(let i=0;i<bgSrc.length;i++){\n           let tmpBg=bgSrc[i].Src;\n           if(tmpBg!==null) this.add(bgSrc[i].Name,tmpBg);\n         }\n       }\n\n       //Look for player files\n       if(files[i].data.Player){\n         this.add('playerTex', files[i].data.Player.Texture)\n             .add('playerJson', files[i].data.Player.Json)\n             .add('playerSkeleton', files[i].data.Player.Skeleton);\n         this.game.data.player=files[i].data.Player;\n       }\n\n       //Look for NPC files\n       if(files[i].data.Characters){\n         let npcSrc=files[i].data.Characters;\n         for(let i=0;i<npcSrc.length;i++){\n            this.add(npcSrc[i].Name+\"Tex\", npcSrc[i].Texture)\n            .add(npcSrc[i].Name+'Json', npcSrc[i].Json)\n            .add(npcSrc[i].Name+'Skeleton', npcSrc[i].Skeleton);\n          }\n          this.game.data.npc=files[i].data.Characters;\n        }\n    }\n  }\n\n  //Fix for load mp4 as videos instead as audio because of pixi-sound\n  fixVidLoad(){\n    PIXI.sound.utils.extensions.splice(PIXI.sound.utils.extensions.indexOf('mp4'), 1);\n    PIXI.loaders.Resource.setExtensionXhrType('mp4', undefined);\n    PIXI.loaders.Resource.setExtensionLoadType('mp4', PIXI.loaders.Resource.LOAD_TYPE.VIDEO);\n  }\n\n  //Loading progress\n  update(){\n    let percent=Math.floor(this.progress);\n    this.game.progressBar.width=(this.game.width/100)*percent;\n    //this.game.loadingTxt.text=\"Loading... \"+ percent+\"%\";\n  }\n\n  //File failed to load\n  error(resource){\n    console.log(resource);\n  }\n\n}\n\nexport default Loader;\n","import localForage from 'localforage';\n\nexport default class Storage{\n  constructor(game){\n    this.game=game;\n  }\n\n  //Save adventure progress\n  save(){\n    //Get solved puzzles\n    let puzzlesSolved=[];\n    let puzzleArray=Object.values(this.game.puzzles)\n\n    puzzleArray.forEach(function(puzzle){\n      if(puzzle.solved && !puzzlesSolved.includes(puzzle.config.Name))\n        puzzlesSolved.push(puzzle.config.Name)\n    });\n\n    //Get dialogues\n    let dialoguesDisabled=[];\n    let dialogueArray=Object.values(this.game.dialogues);\n\n\n    dialogueArray.forEach(function(dialogue){\n      let branches=Object.values(dialogue.branches);\n\n      branches.forEach(function(branch){\n\n        branch.Choices.forEach(function(choice,index){\n          if(choice.disabled){\n            let disabledOption={\n              Dialogue:dialogue.config.Name,\n              Branch:branch.Name,\n              Index:index\n            }\n            dialoguesDisabled.push(disabledOption);\n          }\n        });\n      });\n\n    });\n\n    //Get player cutscenes\n    let cutscenesPlayed=[];\n    let cutscenesArray=Object.values(this.game.cutscenes);\n    cutscenesArray.forEach(function(cutscene){\n      if(cutscene.played) cutscenesPlayed.push(cutscene.config.Name);\n    });\n\n    //Store the progress\n    this.progress={\n      language:this.game.activeLanguage,\n      latestScene:this.game.activeScene.config.Name,\n      playerPos:[this.game.player.sprite.x,this.game.player.sprite.y],\n      inventory:this.game.inventory.objects,\n      puzzles:puzzlesSolved,\n      dialogues:dialoguesDisabled,\n      cutscenes:cutscenesPlayed\n    }\n\n    //Save object to local storage\n    localForage.setItem('JSGAM_Storage', this.progress);\n  }\n\n  //Load adventure progress\n  load(){\n    let game=this.game;\n\n    //Load objects in inventory\n    this.progress.inventory.forEach(function(item){\n\n      //Add object to inventory\n      game.inventory.add(item);\n\n      //Remove objects from scenes configurations\n      let thisItem=item;\n      let sceneArray=Object.values(game.scenes);\n      sceneArray.forEach(function(scene){\n        if(scene.config.Objects!==undefined && scene.config.Objects.includes(thisItem)){\n          let tmpIndex=scene.config.Objects.indexOf(thisItem);\n          scene.config.Objects.splice(tmpIndex,1);\n        }\n      })\n\n    });\n\n    //Disable dialogues finished\n    this.progress.dialogues.forEach(function(disable){\n      game.dialogues[disable.Dialogue].branches[disable.Branch].Choices[disable.Index].disabled=true;\n    });\n\n    //Disable cutscenes played\n    this.progress.cutscenes.forEach(function(name){\n      game.cutscenes[name].played=true;\n    });\n\n    this.game.silentMode=true;\n    //Resolve puzzles already done\n    this.progress.puzzles.forEach(function(name){\n      game.puzzles[name].resolve();\n    });\n    this.game.silentMode=false\n\n    //Add player to latest Position\n    this.game.player.sprite.x=this.progress.playerPos[0];\n    this.game.player.sprite.y=this.progress.playerPos[1];\n\n  }\n\n  //Clear local storage\n  delete(){\n    localForage.clear();\n  }\n\n  check(){\n    let storage=this;\n\n    localForage.getItem('JSGAM_Storage').then(function(value) {\n      // This code runs once the value has been loaded\n      // from the offline store.\n      if(value!==null){\n        storage.progress=value;\n        storage.game.activeLanguage=value.language;\n        storage.game.scenes[\"Title\"].changeLanguage();\n        storage.game.scenes[\"Title\"].states[\"MainMenu\"].enable(\"Continue\");\n      }\n    }).catch(function(err) {\n        // This code runs if there were any errors\n        console.log(err);\n    });\n  }\n}\n","class Scene{\n  constructor(){\n    this.container = new PIXI.Container();\n    this.game=null;\n  }\n\n  setup(config){\n    this.background=new PIXI.Sprite(PIXI.Texture.from(config.Background));\n    this.background.anchor.set(0);\n    this.container.addChild(this.background);\n    if(config.Foreground!==undefined)\n    {\n      this.foreground=new PIXI.Sprite(PIXI.Texture.from(config.Foreground));\n      this.foreground.anchor.set(0);\n      this.container.addChild(this.foreground);\n    }\n    this.music=config.Music;\n    this.config=config;\n  }\n\n  update(dt) {\n\n  }\n  hide(){\n    this.container.visible=false;\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n}\n\nexport default Scene;\n","class Button extends PIXI.extras.BitmapText{\n    constructor(text,style){\n      super(text,style);\n      this.interactive=true;\n      this.buttonMode=true;\n    }\n}\n\nclass Infotxt extends PIXI.extras.BitmapText{\n    constructor(text,style){\n      super(text,style);\n    }\n}\n\n\nclass Phrases{\n  constructor(config){\n    this.container=new PIXI.Container();\n    this.hide();\n    this.game=config;\n    this.option=[];\n\n    for(let i=0;i<3;i++){\n      this.option[i]=new Button(\"Option\",this.game.settings.Text.ButtonStyle);\n      this.option[i].game=this.game;\n      this.option[i].anchor.set(0.5,0);\n      this.option[i].on('pointertap', this.onTap.bind(this.option[i]));\n      this.option[i].index=i;\n      this.container.addChild(this.option[i]);\n      if(i>0)this.option[i].y=this.option[i-1].y+this.option[i-1].height;\n    }\n  }\n\n  show(){\n    this.sort();\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  onTap(){\n    let activeChoice=this.game.activeDialogue.currentBranch.Choices;\n\n    if(this.alpha==1){\n      this.game.activeDialogue.choice=this.index;\n      if(activeChoice[this.index].Repeat==false) activeChoice[this.index].disabled=true;\n      this.game.activeDialogue.next();\n    }\n  }\n\n  get(){\n    this.clear();\n    let options=this.game.activeDialogue.currentBranch.Choices;\n    for(let i=0;i<options.length;i++){\n      if(options[i].disabled){\n        this.option[i].alpha=0.5;\n      }else this.option[i].alpha=1;\n      this.option[i].visible=true;\n      this.option[i].text=options[i].Text[this.game.activeLanguage];\n    }\n    this.show();\n  }\n\n  clear(){\n    for(let i=0;i<this.option.length;i++){\n      this.option[i].visible=false;\n    }\n  }\n\n  sort(){\n    for(let i=0;i<this.option.length;i++){\n      this.option[i].x=this.container.width/2;\n    }\n    if(this.container.width>this.container.parent.width || this.container.height>this.container.parent.height){\n      this.scale();\n    }\n    this.center();\n  }\n\n  scale(){\n    let ratio = Math.min( this.game.width/this.container.width,  this.container.parent.height/this.container.height);\n    this.container.scale.set(ratio*0.95)\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n  //  this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n  //  this.container.pivot.y = this.container.height / 2;\n  }\n}\n\nclass TextField{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.Background=null;\n    this.Text=null;\n    this.container.visible=false;\n  }\n\n  build(){\n    this.container.parentLayer = this.game.layerUI;\n    this.Background=new PIXI.Sprite(PIXI.Texture.WHITE);\n\n    let size=4;\n    if(this.game.settings.Text.Size!==undefined){\n      if(this.game.settings.Text.Size===\"fourth\") size=4;\n      else if(this.game.settings.Text.Size===\"half\") size=2;\n    }\n    this.Background.width=this.game.width;\n    this.Background.height=this.game.height/size;\n\n    this.Background.tint='black';\n    this.Background.alpha=0.5;\n\n    this.Text=new Button(\"\", this.game.settings.Text.Style);\n    this.Text.anchor.set(0.5,0);\n\n    this.Text.y=0;\n    this.Text.on('pointertap',this.skip.bind(this));\n\n    this.Choices=new Phrases(this.game);\n\n    this.container.addChild(this.Background);\n    this.container.addChild(this.Text);\n    this.container.addChild(this.Choices.container);\n\n    this.Text.x=this.container.width/2;\n\n    if(this.game.settings.Text.Position!==undefined) this.setPosition(this.game.settings.Text.Position);\n  }\n\n  show(){\n    this.Text.visible=true;\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  end(){\n    if(this.game.activeDialogue!==null){\n      this.talker.shutup();\n      if(this.game.activeDialogue.choice!==null) this.game.activeDialogue.answer();\n      else{\n        this.Text.visible=false;\n        this.Choices.get();\n      }\n\n    }else{\n      this.setText(\"\");\n      this.hide();\n      this.talker.shutup();\n      this.game.player.stop();\n      if(this.game.activeObject!==null) this.game.activeObject.cancel();\n    }\n  }\n\n  skip(){\n    this.end();\n    if(this.talker) clearTimeout(this.talker.timeoutID);\n  }\n\n  setPosition(position){\n    if(position===\"top\"){\n      this.container.x=0;\n      this.container.y=0;\n    }else if(position===\"bottom\"){\n      this.container.x=0;\n      this.container.y=this.game.height-this.container.height;\n    }\n  }\n\n  setText(newText){\n    this.Text.text=newText;\n    if(this.Text.width>this.container.width || this.Text.height>this.container.height){\n      this.adjustText();\n    }\n  }\n\n  adjustText(){\n    let ratio = Math.min( this.container.width/this.Text.width,  this.container.height/this.Text.height);\n    this.container.scale.set(ratio*0.95);\n  }\n\n  //Get words number of the text\n  countWords(str) {\n   return str.split(\" \").length;\n  }\n\n  //Calculate how many seconds we show the text\n  timeOut(){\n    let time;\n    if(this.game.settings.Text.Speed!==undefined) time=this.game.settings.Text.Speed;\n    else time=this.countWords(this.Text.text)/3;\n\n    //Time must be at least 1 second\n    if(time<1) time=1;\n\n    return time*1000;\n  }\n\n  setColor(colour){\n    this.Text.tint=colour;\n  }\n}\n\nexport {Button,TextField,Infotxt};\n","import {Button} from './text.js'\n\nclass Menu{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.game=null;\n    this.buttons={};\n    }\n\n  addButton(name,text){\n    this.buttons[name]=new Button(text[this.game.activeLanguage],this.game.settings.Text.ButtonStyle);\n    this.container.addChild(this.buttons[name]);\n  }\n\n  modify(name,text){\n    this.buttons[name].text=text[this.game.activeLanguage];\n  }\n\n  disable(name){\n    this.buttons[name].alpha=0.5;\n    this.buttons[name].interactive=false;\n  }\n\n  enable(name){\n    this.buttons[name].alpha=1.0;\n    this.buttons[name].interactive=true;\n  }\n\n  sort(){\n    let i;\n    let arrayButtons=Object.values(this.buttons);\n    let length=arrayButtons.length;\n    arrayButtons[0].y=0;\n    for(i=1;i<length;i++)\n    {\n      arrayButtons[i].y=arrayButtons[i-1].y+arrayButtons[i-1].height*1.5;\n      arrayButtons[i].x=this.container.width/2-arrayButtons[i].width/2;\n    }\n\n    this.center();\n  //  this.resize();\n  }\n\n  resize(){\n    let ratio = Math.min( this.game.width/this.container.width,  this.game.height/this.container.height);\n    //console.log(ratio)\n    this.container.scale.set(ratio*0.95);\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n\n}\nexport default Menu;\n","import Menu from './menu.js';\n\nclass MainMenu extends Menu{\n  create(){\n      let gameTexts=this.game.data.texts;\n      this.addButton(\"New\",gameTexts.NewGame);\n      this.addButton(\"Continue\",gameTexts.Continue);\n      this.addButton(\"Options\",gameTexts.Options);\n      this.addButton(\"Help\",gameTexts.Help);\n      this.addButton(\"Credits\",gameTexts.Credits);\n\n      this.disable(\"Continue\");\n\n      this.sort();\n    }\n\n  changeLanguage(){\n    this.modify(\"New\",this.game.data.texts.NewGame);\n    this.modify(\"Continue\",this.game.data.texts.Continue);\n    this.modify(\"Options\",this.game.data.texts.Options);\n    this.modify(\"Help\",this.game.data.texts.Help);\n    this.modify(\"Credits\",this.game.data.texts.Credits);\n\n    this.sort();\n  }\n\n}\nexport default MainMenu;\n","import Menu from './menu.js';\nimport {Button} from './text.js';\n\nclass Options extends Menu{\n  create(){\n    this.container.visible=false;\n    let languages=this.game.settings.Languages\n    for(let i=0;i<languages.length;i++){\n      this.addLanguage(languages[i],);\n      this.buttons[languages[i]].on('pointerup', this.setLanguage);\n    }\n\n    let langArray=Object.values(this.buttons);\n    langArray[this.game.activeLanguage].tint=0xFF0000;\n\n    this.addButton(\"Back\",this.game.data.texts.Back);\n    this.sort();\n  }\n\n  addLanguage(name){\n    this.buttons[name]=new Button(name,this.game.settings.Text.ButtonStyle);\n    this.buttons[name].father=this;\n    this.container.addChild(this.buttons[name]);\n  }\n\n  setLanguage(){\n    this.father.change(this.text);\n  }\n\n  change(text){\n    let languages=this.game.settings.Languages\n    this.buttons[languages[this.game.activeLanguage]].tint=0xFFFFFF;\n    this.game.activeLanguage=this.game.settings.Languages.indexOf(text);\n    this.buttons[languages[this.game.activeLanguage]].tint=0xFF0000;\n    this.modify(\"Back\",this.game.data.texts.Back);\n    this.sort();\n  }\n\n}\nexport default Options;\n","class Help{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.container.visible=false;\n    this.container.interactive=true;\n    this.container.buttonMode=true;\n    }\n\n  create(){\n    let config=this.game.settings;\n\n    this.background=new PIXI.Sprite(PIXI.Texture.from(config.Help[this.game.activeLanguage]));\n    this.container.addChild(this.background);\n    this.center();\n    this.container.on('pointerup', this.mainMenu.bind(this));\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  changeLanguage(){\n    this.background.texture=PIXI.Texture.from(this.game.settings.Help[this.game.activeLanguage]);\n    this.center();\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n}\n\nexport default Help;\n","\nimport tweenManager from 'k8w-pixi-tween';\n\nclass Credits{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.container.visible=false;\n    this.container.interactive=true;\n    this.container.buttonMode=true;\n    }\n\n  create(){\n    let config=this.game.data.credits;\n\n    if(config.Background!==undefined) this.background=new PIXI.Sprite(PIXI.Texture.from(config.Background));\n\n    this.buildText();\n\n    this.structuredText = new PIXI.extras.BitmapText(this.text,config.Style);\n\n    this.container.addChild(this.structuredText);\n\n    this.container.x = this.game.width / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.y=this.game.height;\n    this.tween = PIXI.tweenManager.createTween(this.container);\n    this.tween\n      .from({ y: this.game.height})\n      .to({ y: 0 - this.container.height});\n    this.tween.time = 20000;\n    this.tween.expire=true;\n    this.tween.delay=500;\n    this.tween.on(\"end\", this.mainMenu.bind(this));\n\n    this.container.on('pointerup', this.mainMenu.bind(this));\n  }\n\n  show(){\n    this.container.visible=true;\n    this.tween.start();\n  }\n\n  hide(){\n    this.tween.stop().reset();\n    this.container.visible=false;\n  }\n\n\n  buildText(){\n    let credits=this.game.data.credits;\n\n    this.text=\"\";\n    let i;\n    for (i=0; i < credits.Lines.length; i++) {\n    this.text += credits.Lines[i].Title[this.game.activeLanguage];\n    this.text += \"\\n\";\n    let j;\n\n    for (j = 0; j < credits.Lines[i].Text.length; j++) {\n      this.text += credits.Lines[i].Text[j];\n      this.text += \"\\n\";\n    }\n    this.text += \"\\n\";\n    }\n  }\n\n  update(){\n    PIXI.tweenManager.update();\n  }\n\n  changeLanguage(){\n    this.buildText();\n    this.structuredText.text=this.text;\n  }\n\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n}\n\nexport default Credits;\n","import Menu from './menu.js';\nimport {Infotxt} from './text.js'\n\nclass Confirmation extends Menu{\n  create(){\n    this.hide();\n    let gameTexts=this.game.data.texts;\n    this.addText(\"Warning\",gameTexts.Warning);\n    this.addButton(\"Yes\",gameTexts.Yes);\n    this.addButton(\"No\",gameTexts.No);\n    this.sort();\n  }\n\n  changeLanguage(){\n    //this.modify(\"Warning\",this.game.data.texts.Warning);\n    this.text.text=this.game.data.texts.Warning[this.game.activeLanguage];\n    this.modify(\"Yes\",this.game.data.texts.Yes);\n    this.modify(\"No\",this.game.data.texts.No);\n    this.sort();\n  }\n\n  sort(){\n    this.text.y=0\n    this.text.x=this.game.width/2-this.text.width/2;\n    this.buttons[\"Yes\"].y=this.text.height*1.5;\n    this.buttons[\"Yes\"].x=this.buttons[\"Yes\"].width;\n    this.buttons[\"No\"].y=this.text.height*1.5;\n    this.buttons[\"No\"].x=this.game.width-this.buttons[\"No\"].width*2;\n    this.container.y=this.game.height/2-this.container.height/2;\n  }\n\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n\n  addText(name,text){\n    this.text=new Infotxt(text[this.game.activeLanguage],this.game.settings.Text.ButtonStyle);\n    this.container.addChild(this.text);\n  }\n}\n\nexport default Confirmation;\n","import Scene from './scene.js';\nimport MainMenu from './mainmenu.js'\nimport Options from './options.js'\nimport Help from './help.js'\nimport Credits from './credits.js'\nimport Confirmation from './confirmation.js'\n\nimport 'pixi-sound';\n\nclass Title extends Scene{\n  build(){\n    this.states={};\n\n    //Add Menus\n    this.addState(\"MainMenu\", new MainMenu());\n    this.addState(\"Options\", new Options());\n    this.addState(\"Credits\", new Credits());\n    this.addState(\"Help\", new Help());\n    this.addState(\"Warning\", new Confirmation());\n\n    //Add actions to the menu buttons\n    this.addAction(\"MainMenu\",\"Options\",this.showOptions.bind(this));\n    this.addAction(\"MainMenu\",\"Help\",this.showHelp.bind(this));\n    this.addAction(\"MainMenu\",\"Credits\",this.showCredits.bind(this));\n\n    this.addAction(\"MainMenu\",\"New\",this.checkAdventure.bind(this));\n    this.addAction(\"MainMenu\",\"Continue\",this.loadAdventure.bind(this));\n\n    this.addAction(\"Warning\",\"Yes\",this.newAdventure.bind(this));\n    this.addAction(\"Warning\",\"No\",this.mainMenu.bind(this));\n\n    this.addAction(\"Options\", \"Back\",this.mainMenu.bind(this));\n\n  }\n\n  addAction(name,button,action){\n    this.states[name].buttons[button].on('pointerup',action)\n  }\n\n  addState(name, state, config) {\n      this.states[name] = state;\n\n      //Set game so state can access it\n      state.game = this.game;\n\n      //Create state\n      state.create();\n\n      this.container.addChild(this.states[name].container);\n  }\n\n  showOptions(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Options\"].show();\n  }\n\n  showHelp(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Help\"].show();\n  }\n\n  showCredits(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Credits\"].show();\n    this.game.activeState=this.states[\"Credits\"];\n  }\n\n  mainMenu(){\n    this.game.activeState=null;\n    this.states[\"Credits\"].hide();\n    this.states[\"Options\"].hide();\n    this.states[\"Help\"].hide();\n    this.states[\"Warning\"].hide();\n    this.changeLanguage();\n    this.states[\"MainMenu\"].show();\n\n  }\n\n  changeLanguage(){\n    this.states[\"MainMenu\"].changeLanguage();\n    this.states[\"Credits\"].changeLanguage();\n    this.states[\"Help\"].changeLanguage();\n    this.states[\"Warning\"].changeLanguage();\n  }\n\n  warning(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Warning\"].show();\n  }\n\n  checkAdventure(){\n    if(this.game.storage.progress!==undefined){\n      this.warning();\n    }else{\n      this.newAdventure();\n    }\n  }\n\n  newAdventure(){\n    //Delete any game progress\n    this.game.storage.delete();\n\n    //Set the first scene\n    this.game.setScene(this.game.settings.FirstScene);\n\n    //Here we go\n    this.game.start();\n  }\n\n  loadAdventure(){\n    this.game.storage.load();\n    this.game.setScene(this.game.storage.progress.latestScene);\n    this.game.start();\n  }\n}\n\nexport default Title;\n","//import * as PIXI from 'pixi.js';\nimport Scene from './scene.js';\n\nimport Walkable from 'walkable';\n\nclass GameScene extends Scene{\n  build(){\n    if(this.foreground!==undefined) this.foreground.parentLayer = this.game.layerTop; //Z-order\n    this.background.parentLayer = this.game.layerBottom; //Z-order\n    this.background.interactive=true;\n    this.background.buttonMode=true;\n\n    this.background.on('pointertap',this.getPosition.bind(this));\n\n    //Add obstacles to the scene\n    this.walkable=new Walkable(this.game.width,this.game.height);\n      if(this.config.WalkArea!==undefined){\n        this.walkable.addPolygon(this.config.WalkArea);\n      }\n\n      if(this.config.Obstacles!==undefined){\n        let obstacles=Object.values(this.config.Obstacles);\n        this.config.Obstacles=obstacles;\n        for(let i=0;i<this.config.Obstacles.length;i++){\n          this.walkable.addPolygon(this.config.Obstacles[i]);\n        }\n      }\n\n      //Add objects to the scene\n      let sceneObjects=this.config.Objects;\n      if(sceneObjects){\n        for(let i=0;i<sceneObjects.length;i++){\n          if(this.game.objects[sceneObjects[i]]!==undefined){\n            this.container.addChild(this.game.objects[sceneObjects[i]].sprite);\n          }else{\n            console.log(\"Error:Game object \"+sceneObjects[i]+\" not found\");\n          }\n        }\n      }\n\n      //Add NPCs (non-playable characters) to the scene\n      let sceneChars=this.config.Characters;\n      if(sceneChars){\n        for(let i=0;i<sceneChars.length;i++){\n          if(this.game.npcs[sceneChars[i]]!==undefined){\n            this.container.addChild(this.game.npcs[sceneChars[i]].sprite);\n          }else{\n            console.log(\"Error:Game character \"+sceneChars[i]+\" not found\");\n          }\n        }\n      }\n  }\n\n  getPosition(event){\n    let coord=event.data.getLocalPosition(this.game.app.stage);\n    if(!this.game.player.lock && this.game.activeObject===null){\n      this.game.player.move(coord);\n    }\n  }\n\n  getPath(fromX,fromY,toX,toY){\n    return this.walkable.findPath(fromX, fromY, toX, toY, 0);\n  }\n\n}\n\nexport default GameScene;\n","class CutScene{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.sequenceIndex=0;\n    this.played=false;\n  }\n\n  build(){\n    if(this.config.Video){\n      this.videoData = this.game.files.resources[this.config.Video].data;\n      this.videoEnds=this.end.bind(this);\n      this.videoData.addEventListener('ended',this.videoEnds);\n    }else if(this.config.Sequence){\n      this.image=new PIXI.Sprite(PIXI.Texture.from(this.config.Sequence[this.sequenceIndex].Image));\n      var ratio = Math.min(this.game.width/this.image.width, this.game.height/this.image.height);\n      this.image.scale.set(ratio/2);\n\n      this.container.interactive=true;\n      this.container.buttonMode=true;\n      this.container.on('pointertap',this.next.bind(this));\n\n      this.container.addChild(this.image);\n\n      this.field=new PIXI.extras.BitmapText(this.config.Sequence[this.sequenceIndex].Text[this.game.activeLanguage],this.game.settings.Text.Style);\n      this.field.anchor.set(0.5,0);\n      this.field.x=this.image.width/2;\n      this.field.y=this.image.height+this.field.height/2;\n\n      this.container.addChild(this.field);\n      this.adjust();\n    }\n  }\n\n  show(){\n      if(this.config.Video) {\n        let videoTexture = PIXI.Texture.from(this.videoData);\n      \tthis.videoSprite = new PIXI.Sprite(videoTexture);\n        this.videoSprite.width = this.game.width;\n        this.videoSprite.height = this.game.height;\n        this.videoSprite.interactive=true;\n        this.videoSprite.buttonMode=true;\n        this.videoSprite.on('pointertap',this.end.bind(this));\n        this.container.addChild(this.videoSprite);\n      }else if(this.config.Sequence) {\n        this.sound();\n        this.timeoutID = setTimeout(this.next.bind(this),\n                         this.config.Sequence[this.sequenceIndex].Time*1000);\n      }\n      this.game.app.stage.addChild(this.container);\n      this.game.activeScene.hide();\n      this.game.inventory.hideIcon();\n      this.game.player.hide();\n  }\n\n  hide(){\n      this.container.parent.removeChild(this.container);\n  }\n\n  next(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    if(this.sequenceIndex<this.config.Sequence.length-1){\n      this.sequenceIndex+=1;\n      this.field.text=this.config.Sequence[this.sequenceIndex].Text[this.game.activeLanguage];\n      this.image.texture=(PIXI.Texture.from(this.config.Sequence[this.sequenceIndex].Image));\n      this.adjust();\n      this.timeoutID = setTimeout(this.next.bind(this), this.config.Sequence[this.sequenceIndex].Time*1000);\n    }else{\n      this.end();\n    }\n  }\n\n  end(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    if(this.videoData){\n      this.videoData.pause();\n      this.videoData.removeEventListener('ended',this.videoEnds);\n    }\n    PIXI.sound.stopAll();\n    this.hide();\n    this.played=true;\n    this.game.activeScene.show();\n    this.game.inventory.showIcon();\n    this.game.player.show();\n  }\n\n  adjust(){\n    let containerDimension=this.container.y+this.container.height;\n    if(containerDimension>this.game.height) this.container.y-=containerDimension-this.game.height;\n    else this.container.y = (this.game.height - this.container.height) / 2;\n\n    if(this.container.height>this.game.height || this.container.width>this.game.width) this.scale();\n    else{\n      this.container.scale.set(1);\n      this.center();\n    }\n  }\n\n  center(){\n    this.container.x = (this.game.width - this.container.width) / 2;\n    this.container.y = (this.game.height - this.container.height) / 2;\n  }\n\n  scale(){\n    let ratio = Math.min( this.game.width/this.container.width, this.game.height/this.container.height);\n    this.container.scale.set(ratio*0.95);\n    this.center();\n  }\n\n  sound(){\n    if(this.config.Sequence[this.sequenceIndex].Music!==undefined && this.game.playSounds){\n      PIXI.sound.stopAll();\n      if(PIXI.sound.exists(this.config.Sequence[this.sequenceIndex].Music))\n        PIXI.sound.play(this.config.Sequence[this.sequenceIndex].Music,{loop:true});\n    }\n  }\n\n}\n\nexport default CutScene;\n","import * as PolyK from 'polyk';\n\nfunction boxesIntersect(a, b)\n{\n  var ab = a.getBounds();\n  var bb = b.getBounds();\n  return ab.x + ab.width > bb.x && ab.x < bb.x + bb.width && ab.y + ab.height > bb.y && ab.y < bb.y + bb.height;\n}\n\nfunction collision(a, b)\n{\n  let result;\n  if(a!=undefined && b !=undefined){\n    if(a.hitArea) result=PolyK.ContainsPoint(a.hitArea.points,b.x,b.y);\n    else if(b.hitArea) result=PolyK.ContainsPoint(b.hitArea.points,a.x,a.y);\n    else result=boxesIntersect(a,b);\n  }\n\n  return result;\n}\n\nfunction closestPoint(area,coords){\n  let coordX=Math.round(coords.x);\n  let coordY=Math.round(coords.y);\n  let changePosition={};\n  let closestedge=PolyK.ClosestEdge(area,coordX,coordY);\n  changePosition.x=closestedge.point.x-closestedge.norm.x;\n  changePosition.y=closestedge.point.y-closestedge.norm.y;\n  return {x:Math.round(changePosition.x),y:Math.round(changePosition.y)}\n}\n\nfunction checkPath(coords,obstaclesPolys,walkPoly){\n  let coordX=Math.round(coords.x);\n  let coordY=Math.round(coords.y);\n  let changePosition={};\n  let newPos;\n\n  if(!PolyK.ContainsPoint(walkPoly,coordX,coordY))\n  {\n    let closestedge=PolyK.ClosestEdge(walkPoly,coordX,coordY);\n    changePosition.x=closestedge.point.x-closestedge.norm.x;\n    changePosition.y=closestedge.point.y-closestedge.norm.y;\n    newPos={x:Math.round(changePosition.x),y:Math.round(changePosition.y)}\n  }else if(obstaclesPolys!==undefined){\n\n    for(let i=0;i<obstaclesPolys.length ;i++){\n      if(PolyK.ContainsPoint(obstaclesPolys[i],coordX,coordY)){\n        let closestedge=PolyK.ClosestEdge(walkPoly,coordX,coordY);\n        changePosition.x=closestedge.point.x-closestedge.norm.x;\n        changePosition.y=closestedge.point.y-closestedge.norm.y;\n        newPos={x:Math.round(changePosition.x)+1,y:Math.round(changePosition.y)+1};\n        break;\n      }\n    }\n  }\n\n  return newPos;\n}\n\nexport {boxesIntersect,checkPath,collision,closestPoint};\n","import {boxesIntersect,collision,closestPoint} from '../collisions.js';\n\nclass GameObject{\n  constructor(){\n    this.sprite=null;\n    this.game=null;\n    this.action=null;\n  }\n\n  build(){\n    if(this.config.Description===undefined){\n      this.config.Description=this.game.data.texts.NoDescription;\n    }\n    //Configure the sprite's object\n    if(this.config.Texture){\n      //Generate a static object from a texture\n      this.sprite=new PIXI.Sprite.from(PIXI.Texture.from(this.config.Texture));\n\n    }else if(this.config.Area){\n\n      //For invisible objects\n      this.sprite=new PIXI.Sprite.from(PIXI.Texture.EMPTY);\n      this.sprite.hitArea=new PIXI.Polygon(this.config.Area);\n\n    }else if(this.config.Animation){\n\n      //Animated objects\n      let spritesheet=this.game.files.resources[this.config.Animation.Name].spritesheet;\n\n      let frames = [];\n      for (var i = 0; i < spritesheet._frameKeys.length; i++) {\n          frames.push(PIXI.Texture.from(spritesheet._frameKeys[i]));\n      }\n\n      this.sprite=new PIXI.extras.AnimatedSprite(frames);\n      this.animationSpeed=this.config.Animation.Speed;\n      this.play();\n    }\n\n    //Position of the object in the screen\n    if(this.config.Position){\n      this.sprite.x=this.config.Position[0];\n      this.sprite.y=this.config.Position[1];\n    }\n\n    //Size of the object\n    if(this.config.Size){\n      this.sprite.scale.set(this.config.Size)\n    }\n\n    if(this.config.Mirror){\n      this.flip();\n    }\n\n    //Configure the anchor (origin point of the object)\n    if(!this.config.Area)this.sprite.anchor.set(0.5,1);\n\n    //Configure the layer for the z-order\n    if(this.config.Layer===\"Top\") this.sprite.parentLayer=this.game.layerTop;\n    else if(this.config.Layer===\"Bottom\") this.sprite.parentLayer=this.game.layerBottom;\n    else this.sprite.parentLayer = this.game.layer;\n\n    //Is it a door?\n    if(this.config.Door){\n      this.door=true;\n      this.newScene=this.config.Door.To;\n      this.playerPos=this.config.Door.Player;\n    }\n\n    //Game object events\n    this.sprite.interactive=true;\n    this.sprite.buttonMode=true;\n\n    if(this.config.Area!==undefined){\n      this.sprite.on('pointerdown', this.touchArea.bind(this))\n          .on('pointerup', this.releaseArea.bind(this))\n          .on('pointerupoutside', this.releaseArea.bind(this));\n    }else{\n      this.sprite.on('pointerdown', this.touch.bind(this))\n          .on('pointermove', this.move.bind(this))\n          .on('pointerup', this.release.bind(this))\n          .on('pointerupoutside', this.release.bind(this));\n    }\n\n    if(this.config.Interactive!==undefined) this.setInteraction(this.config.Interactive);\n  }\n\n  hide(){\n    this.sprite.visible=false;\n  }\n\n  show(){\n    this.sprite.visible=true;\n  }\n\n  setpos(x,y){\n    this.sprite.x=x;\n    this.sprite.y=y;\n  }\n\n  flip(){\n    this.sprite.scale.x*=-1;\n  }\n\n  changeTexture(texture){\n    this.sprite.texture=new PIXI.Texture.from(texture)\n  }\n  //Invisible object touch begins\n  touchArea(event){\n    if(this.game.activeObject===null && !this.game.player.lock){\n      this.game.activeObject=this;\n      this.interaction = event.data;\n      this.action=null;\n      this.touchedPos=this.interaction.getLocalPosition(this.game.app.stage);\n    }\n  }\n\n  //Invisible object touch ends\n  releaseArea(){\n    if(this.interaction){\n      let moveTo=this.interaction.getLocalPosition(this.game.app.stage);\n      if(collision(moveTo,this.sprite)){\n         this.look();\n      }else if(this.door===true){\n        let newPos=closestPoint(this.config.Area,moveTo);\n        moveTo=newPos;\n        this.use();\n      }\n      if(this.action!==null){\n        this.game.player.tween.once('end',this.action);\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      this.interaction = null;\n      this.touchedPos=null;\n    }\n  }\n\n  //Object touch begins\n  touch(event){\n    if(this.game.activeObject===null && !this.game.player.lock){\n      this.game.activeObject=this;\n      this.action=null;\n      this.posX = this.sprite.x;\n      this.posY = this.sprite.y;\n      this.interaction = event.data;\n      this.sprite.alpha = 0.5;\n      this.dragging = true;\n      this.moved = 0;\n      this.oldParent=this.sprite.parent;\n      this.depthGroup=this.sprite.parentLayer;\n      if(this.sprite.parentLayer !== this.game.layerUI) this.sprite.parentLayer = this.game.layerUI;\n    }\n  }\n\n  //Object is being dragged\n  move(){\n    if (this.dragging) {\n      this.moved++;\n      this.sprite.setParent(this.game.app.stage);\n      var newPosition = this.interaction.getLocalPosition(this.sprite.parent);\n      let bounds=this.sprite.getBounds();\n      //We can only move the object inside the stage\n      if(newPosition.x>bounds.width/2 && newPosition.x<this.game.width-bounds.width/2) this.sprite.x = newPosition.x;\n      if(newPosition.y>bounds.height && newPosition.y<this.game.height) this.sprite.y = newPosition.y;\n    }\n  }\n\n  //Object drag/touch ends\n  release(){\n    if(this.interaction){\n      let moveTo={x:this.posX,y:this.posY};\n      //Check if we take it\n      if(collision(this.sprite,this.game.inventory.icon) && this.config.Take){\n        this.take();\n        //Check if we look it\n      }else if(this.moved<3){\n        this.look();\n      }else if(this.config.door===true){\n        this.use();\n      }else if(this.config.Use!==undefined){\n        this.game.activePuzzle=this.game.puzzles[this.config.Use];\n        this.use();\n      }\n\n      if(this.action!==null){\n        this.game.player.tween.once('end',this.action);\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      this.sprite.x = this.posX;\n      this.sprite.y = this.posY;\n      this.sprite.alpha = 1;\n      this.sprite.parentLayer = this.depthGroup;\n      this.sprite.setParent(this.oldParent);\n\n      this.interaction = null;\n      this.dragging = false;\n      this.moved=0;\n    }\n  }\n\n  //Set player to look this object\n  look(){\n    this.action=this.game.player.look.bind(this.game.player);\n  }\n\n  //Set player to take this object\n  take(){\n    this.action=this.game.player.take.bind(this.game.player);\n  }\n\n  //Set player to use this object\n  use(){\n    this.action=this.game.player.use.bind(this.game.player);\n  }\n\n  //Check collision between objects\n  hit(){\n    let found=null;\n    let i;\n\n    //First check the collision between active scene's objects\n    let objectsArray=this.game.activeScene.config.Objects;\n\n    for(i=0;i<objectsArray.length;i++){\n      if(collision(this.sprite,this.game.objects[objectsArray[i]].sprite)\n                   && this.config.Name!==objectsArray[i]){\n        found=objectsArray[i];\n        break;\n      }\n    }\n\n    //Check if the collision is between inventory objects\n    objectsArray=this.game.inventory.objects;\n\n    for(i=0;i<objectsArray.length;i++){\n      if(collision(this.sprite,this.game.objects[objectsArray[i]].sprite)\n                   && this.config.Name!==objectsArray[i]){\n        found=objectsArray[i];\n        break;\n      }\n    }\n\n    return found;\n  }\n\n  //Object action is canceled or ended\n  cancel(){\n    this.game.activeObject.action=null;\n    this.game.activeObject=null;\n\n  }\n\n  setInteraction(value){\n    this.sprite.interactive=value;\n  }\n\n  //Add the object to a given scene\n  add(scene){\n    this.game.scenes[scene].container.addChild(this.sprite);\n    this.game.scenes[scene].config.Objects.push(this.config.Name);\n    this.game.scenes[scene].config.Objects;\n  }\n  //Remove objects from game\n  remove(){\n    this.sprite.parent.removeChild(this.sprite);\n    //POR HACER\n    //Quitar el objeto de la cadena de objetos de la escena\n    //Quitar del inventario en caso de que esté ahí\n  }\n\n}\n\nexport default GameObject;\n","import {boxesIntersect,collision} from '../collisions.js';\n\nclass Inventory{\n  constructor(){\n      this.container=new PIXI.Container();\n      this.container.visible=false;\n      this.game=null;\n      this.objects=[];\n\n    }\n\n    build(){\n      this.background=new PIXI.Sprite(PIXI.Texture.from(this.game.settings.Inventory.Background));\n      this.background.width=this.game.width/2;\n      this.background.height=this.game.height/2;\n      this.background.parentLayer = this.game.layerUI;\n      this.container.x = (this.game.width - this.background.width) / 2;\n      this.container.y = (this.game.height - this.background.height) / 2;\n      this.border=10;\n      this.icon=new PIXI.Sprite(PIXI.Texture.from(this.game.settings.Inventory.Icon));\n      this.icon.on('pointertap',this.click.bind(this));\n      this.icon.interactive=true;\n      this.icon.buttonMode=true;\n      this.setIcon(this.game.settings.Inventory.Position);\n      this.container.addChild(this.background);\n      this.icon.parentLayer = this.game.layerUI;\n    }\n\n    show(){\n      this.update();\n      this.container.visible=true;\n    }\n\n    hide(){\n      this.container.visible=false;\n\n    }\n\n    showIcon(){\n      this.icon.visible=true;\n    }\n\n    hideIcon(){\n      this.icon.visible=false;\n\n    }\n\n    setIcon(position){\n      if(position==\"bottom-right\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=this.game.height - this.icon.height;\n      }else if(position==\"top-right\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=0;\n      }else if(position==\"top-left\"){\n        this.icon.x=0;\n        this.icon.y=this.game.height - this.icon.height;\n      }else if(position==\"bottom-top\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=0;\n      }\n    }\n\n    click(){\n      if (this.container.visible) this.hide();\n      else if(!this.game.player.lock) this.show();\n    }\n\n    add(name){\n      this.objects.push(name);\n      this.game.objects[name].sprite.setParent(this.container);\n      this.game.objects[name].sprite.parentLayer=this.game.layerUI;\n      this.game.objects[name].sprite.on('pointermove', this.move.bind(this.game.objects[name]))\n                                    .off('pointerup')\n                                    .off('pointerupoutside')\n                                    .on('pointerup',this.release.bind(this.game.objects[name]))\n                                    .on('pointerupoutside',this.release.bind(this.game.objects[name]));\n      this.update();\n    }\n\n    remove(name)\n    {\n      //Check if object is already in inventory\n      if(this.objects.includes(name)){\n        this.objects.splice(this.objects.indexOf(name),1);\n        this.update();\n      }\n    }\n\n    update(){\n      let i;\n      let numObjs=this.objects.length;\n      for(i=0;i<numObjs;i++){\n        let tmpObj=this.game.objects[this.objects[i]].sprite;\n\n        tmpObj.width=this.container.width/5-this.container.width*0.05;\n        tmpObj.height=this.container.height/5-this.container.height*0.05;\n        tmpObj.x = ((i % 5) * this.container.width/5+this.border-i)+tmpObj.width/2;\n        tmpObj.y = (Math.floor(i / 5) * this.container.height/5+this.border-i)+tmpObj.height;\n        this.container.width=this.background.width;\n        this.container.height=this.background.height;\n      }\n    }\n\n    move(){\n      if(!boxesIntersect(this.sprite,this.game.inventory.container))\n        this.game.inventory.hide();\n    }\n\n    release(event){\n      if(this.interaction){\n        let objectHit=this.hit();\n\n        let moveTo={x:this.sprite.x,y:this.sprite.y};\n        //Check if we take it\n        if(this.moved<3){\n          this.game.player.say(this.config.Description[this.game.activeLanguage])\n        }else if(this.config.Combine!==undefined && objectHit!==null){\n          if(this.config.Combine.With===objectHit) {\n            this.game.activePuzzle=this.game.puzzles[this.config.Combine.Puzzle];\n          }\n          this.use();\n        }\n\n        if(this.action!==null){\n          this.game.player.tween.once('end',this.action);\n          this.game.player.move(moveTo);\n        }else{\n          this.cancel();\n        }\n\n        this.sprite.x = this.posX;\n        this.sprite.y = this.posY;\n        this.sprite.alpha = 1;\n        this.sprite.setParent(this.oldParent);\n\n        this.interaction = null;\n        this.dragging = false;\n        this.moved=0;\n      }\n    }\n}\n\nexport default Inventory;\n","class Puzzle{\n  constructor(){\n    this.solved=false;\n  }\n\n  resolve(){\n    if(this.game.activeObject!==null) this.game.activeObject.cancel();\n\n    if(!this.solved){\n      if(this.config.ModifyObject){\n        let objectMod=this.game.objects[this.config.ModifyObject.Name];\n        if(this.config.ModifyObject.Description!==undefined) objectMod.config.Description=this.config.ModifyObject.Description;\n        if(this.config.ModifyObject.Door!==undefined) this.createDoor(objectMod)\n        if(this.config.ModifyObject.Position!==undefined) objectMod.setpos(this.config.ModifyObject.Position[0],this.config.ModifyObject.Position[1]);\n        if(this.config.ModifyObject.Mirror) objectMod.flip();\n        if(this.config.ModifyObject.Interactive!==undefined) this.setInteraction(this.config.ModifyObject.Interactive);\n        if(this.config.ModifyObject.Texture!==undefined) this.changeTexture(this.config.ModifyObject.Texture);\n      }\n\n      if(this.config.GetObject!==undefined) this.game.inventory.add(this.config.GetObject);\n\n      if(this.config.AddObject!==undefined){\n        let objectAdd=this.game.objects[this.config.AddObject.Name];\n        objectAdd.add(this.config.AddObject.Scene);\n      }\n\n      if(this.config.RemoveObject!==undefined){\n\n      }\n\n      if(this.config.Resolve!==undefined)this.game.puzzles[this.config.Resolve].resolve();\n\n      if(this.config.Say && !this.game.silentMode){\n        this.game.player.say(this.config.Say[this.game.activeLanguage]);\n      }else{\n        this.game.player.stop();\n      }\n\n      this.solved=true;\n\n    }else{\n      this.game.player.stop();\n    }\n\n    this.game.activePuzzle=null;\n  }\n\n  createDoor(target){\n    target.door=true;\n    target.newScene=this.config.ModifyObject.Door.To;\n    target.playerPos=this.config.ModifyObject.Door.Player;\n  }\n\n  createInventoryObject(objectName){\n    //this.game.objects[objectName].take();\n  }\n}\n\nexport default Puzzle;\n","import dragonBones from 'dragonbones-pixi';\nimport tweenManager from 'k8w-pixi-tween';\nconst dbfactory=dragonBones.dragonBones.PixiFactory.factory;\nimport {checkPath} from '../collisions.js'\n\nclass Character{\n  constructor(){\n    this.game=null;\n    this.state=null;\n    this.lock=false;\n  }\n\n  setup(config){\n    dbfactory.parseDragonBonesData(this.game.files.resources[config.Name+\"Skeleton\"].data);\n    dbfactory.parseTextureAtlasData(this.game.files.resources[config.Name+\"Json\"].data,this.game.files.resources[config.Name+\"Tex\"].texture);\n    this.sprite = dbfactory.buildArmatureDisplay(config.Armature);\n    this.size=1;\n    this.tween=PIXI.tweenManager.createTween(this.sprite);\n    this.tween.on('end', this.stop.bind(this));\n    if(config.Animations!=undefined)\n      this.animations=config.Animations;\n    else\n      this.animations={\n        Stand:\"stand\",\n        Walk:\"walk\",\n        Take:\"take\",\n        Use:\"use\",\n        Say:\"speak\"\n      };\n    this.animate(this.animations.Stand);\n    this.state=\"stand\";\n    this.sprite.x=500;\n    this.sprite.y=500;\n    this.sprite.parentLayer = this.game.layer;//Z-order*/\n    this.config=config;\n  }\n\n  hide(){\n    this.sprite.visible=false;\n  }\n\n  show(){\n    this.sprite.visible=true;\n  }\n\n  position(coords){\n    this.sprite.x=coords[0];\n    this.sprite.y=coords[1];\n  }\n\n  move(coords){\n    let obstacles=this.game.activeScene.config.Obstacles;\n    let walkingArea=this.game.activeScene.config.WalkArea;\n    let newPosition=coords;\n    let closestPosition=checkPath(coords,obstacles,walkingArea);\n\n    if(closestPosition){\n      newPosition=closestPosition;\n    }\n\n    let path = new PIXI.tween.TweenPath();\n    let findPath=this.game.activeScene.walkable.findPath(this.sprite.x,this.sprite.y,newPosition.x,newPosition.y,0);\n    if(findPath.length>0){\n      this.tween.stop().clear();\n      this.animate(this.animations.Walk);\n      if(this.sprite.x<newPosition.x) this.sprite.armature.flipX=false;\n      else this.sprite.armature.flipX=true;\n      path.drawShape(new PIXI.Polygon(findPath));\n      this.tween.path=path;\n\n      //Needs improvement\n      let animationTime=Math.abs(this.sprite.x-newPosition.x)*5+Math.abs(this.sprite.y-newPosition.y)*5+findPath.length*100;\n\n      this.tween.time = animationTime;\n      this.tween.speed = 1;\n      this.tween.delay=10;\n      this.tween.start();\n    }\n  }\n\n  update(){\n    PIXI.tweenManager.update();\n    this.scale();\n  }\n\n  scale(){\n    let scaleChar=this.sprite.y/this.game.height*this.size;\n    if(scaleChar<this.game.activeScene.config.Depth) scaleChar=this.game.activeScene.config.Depth;\n    this.sprite.scale.set(scaleChar);\n  }\n\n  stop(){\n    this.animate(this.animations.Stand);\n    this.game.activeState=null;\n    this.lock=false;\n  }\n\n  say(text){\n    this.game.textField.talker=this;\n    //Setup the text to show\n    this.game.textField.setText(text);\n    this.game.textField.setColor(Number(this.config.Color));\n    this.game.textField.show();\n\n    //Animate the character\n    this.animate(this.animations.Say);\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    this.timeoutID=setTimeout(this.game.textField.end.bind(this.game.textField), this.game.textField.timeOut());\n  }\n\n  shutup(){\n    this.animate(this.animations.Stand);\n  }\n\n  animate(animation,times){\n    if(this.sprite.animation.lastAnimationName!==animation)\n      this.sprite.animation.fadeIn(animation,0.25,times);\n  }\n}\n\nexport default Character;\n","import Character from './character.js';\nimport dragonBones from 'dragonbones-pixi';\nconst dbEvents=dragonBones.dragonBones.EventObject;\n\nclass Player extends Character{\n  move(coords){\n    super.move(coords);\n    this.game.activeState=this;\n  }\n  say(text){\n    super.say(text);\n    //Lock the player\n    this.lock=true;\n  }\n  look(){\n    if(this.game.activeObject!==null){\n      let text=this.game.activeObject.config.Description[this.game.activeLanguage];\n      this.say(text);\n      this.game.activeObject.cancel();\n    }\n  }\n\n  take(){\n    this.lock=true;\n    this.animate(this.animations.Take,1);\n    this.sprite.once(dbEvents.COMPLETE, this.takeEnd, this);\n  }\n\n  takeEnd(){\n    if(this.game.activeObject!==null){\n      let name=this.game.activeObject.config.Name;\n      if(this.game.activeScene!==null){\n        if(this.game.activeScene.config.Objects.includes(name)){\n          let tmpIndex=this.game.activeScene.config.Objects.indexOf(name);\n          this.game.activeScene.config.Objects.splice(tmpIndex,1);\n        }\n      }\n      this.game.inventory.add(name);\n      this.game.activeObject.cancel();\n      this.stop();\n    }\n  }\n\n  use(){\n    this.lock=true;\n    this.animate(this.animations.Use,1);\n    this.sprite.once(dbEvents.COMPLETE, this.useEnd, this);\n  }\n\n  useEnd(){\n    if(this.game.activePuzzle!==null){\n      this.game.activePuzzle.resolve();\n    }else if(this.game.activeObject!==null) {\n      if(this.game.activeObject.door){\n        this.game.setScene(this.game.activeObject.newScene,this.game.activeObject.playerPos);\n        this.stop();\n      }else{\n        this.say(this.game.data.texts.NotUsable[this.game.activeLanguage])\n      }\n      this.game.activeObject.cancel();\n    }\n  }\n\n  talk(){\n    //Player must look in the right direction\n    if(this.sprite.x<this.game.activeNPC.sprite.x) this.sprite.armature.flipX=false;\n    else this.sprite.armature.flipX=true;\n\n    //Let's talk\n    this.game.activeDialogue.start();\n  }\n\n}\n\nexport default Player;\n","import Character from './character.js';\n\nclass NPC extends Character{\n  build(){\n    this.sprite.interactive=true;\n    this.sprite.buttonMode=true;\n    this.sprite.on('pointerdown', this.touch.bind(this))\n        .on('pointerup', this.release.bind(this))\n        .on('pointerupoutside', this.release.bind(this));\n  }\n\n  touch(event){\n    if(this.game.activeNPC===null && !this.game.player.lock){\n      this.game.activeNPC=this;\n      this.action=null;\n      this.interaction = event.data;\n    }\n  }\n  //Object drag/touch ends\n  release(){\n\n    if(this.interaction){\n      let distance=0;\n      if(this.game.player.sprite.x<this.sprite.x) distance=this.sprite.width*-1;\n      else distance=this.sprite.width;\n      let moveTo={x:this.sprite.x+distance,y:this.sprite.y};\n      //Check if we take it\n      if(this.config.Dialogue!==undefined){\n        this.game.activeDialogue=this.game.dialogues[this.config.Dialogue];\n        this.action=this.game.player.talk.bind(this.game.player);\n      }\n\n      if(this.action!==null){\n        this.game.player.tween.once('end',this.action);\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      this.interaction = null;\n      this.dragging = false;\n      this.moved=0;\n    }\n  }\n  //Object action is canceled or ended\n  cancel(){\n    this.game.activeNPC.action=null;\n    this.game.activeNPC=null;\n\n  }\n}\n\nexport default NPC;\n","import {Button} from './text.js'\n\n//Branches dialogue system\nclass Dialogue{\n  constructor(){\n    this.timeoutID=null;\n    this.firstTime=true;\n    this.choice=null;\n    this.branches={};\n  }\n\n  setup(config){\n    this.config=config;\n\n    //Get dialogue branches\n    let i;\n    length=this.config.Branches.length;\n    for(i=0;i<length;i++)\n    {\n      this.branches[this.config.Branches[i].Name]=this.config.Branches[i];\n    }\n\n    this.currentBranch=this.branches[this.config.DefaultBranch];\n  }\n\n  //Executed when we interact with a NPC\n  start(){\n    this.firstTime=false;\n    this.game.player.lock=true;\n    this.game.textField.show();\n    this.game.textField.Choices.get();\n  }\n\n  //Executed everytime we choose an option\n  next(){\n    if(this.choice!==null){\n      let choiceSelected=this.currentBranch.Choices[this.choice];\n      this.game.textField.Choices.hide();\n      this.game.player.say(choiceSelected.Text[this.game.activeLanguage]);\n    }else{\n      this.game.textField.Choices.get();\n    }\n  }\n\n  //Search for a branch with a given name\n  searchBranch(name){\n    let branchFound=-1;\n    let i;\n    let length=this.config.Branches.length\n    for(i=0;i<length;i++)\n         if(this.config.Branches[i].Name==name)\n         {\n             branchFound=i;\n             break;\n         }\n    return branchFound;\n  }\n\n  answer(){\n    let choiceSelected=this.currentBranch.Choices[this.choice];\n    this.game.activeNPC.say(choiceSelected.Answer[this.game.activeLanguage]);\n    if(choiceSelected.EndDialogue){\n      this.end();\n    }else if(choiceSelected.Link){\n      this.currentBranch=this.branches[choiceSelected.Link];\n    }else if(choiceSelected.Puzzle){\n      choiceSelected.Repeat=false;\n      this.end();\n      this.game.puzzles[choiceSelected.Puzzle].resolve();\n    }\n\n\n    this.choice=null;\n  }\n\n  //Ends the conversations\n  end(){\n    this.game.activeNPC=null;\n    this.game.activeDialogue=null;\n  }\n\n  timeOut(){\n    this.next();\n  }\n}\n\nexport default Dialogue;\n","import * as PIXI from 'pixi.js';\nimport 'pixi-sound';\nimport 'pixi-layers';\n\nimport Loader from './loader.js';\nimport Storage from './storage.js';\nimport Title from './class/title.js';\nimport GameScene from './class/gamescene.js';\nimport CutScene from './class/cutscene.js';\nimport GameObject from './class/gameobject.js';\nimport Inventory from './class/inventory.js';\nimport Puzzle from './class/puzzle.js';\nimport {TextField} from './class/text.js';\nimport Player from './class/player.js';\nimport NPC from './class/npc.js';\nimport Dialogue from './class/dialogue.js';\n\nclass Game {\n  constructor(config){\n    this.settings={};\n    this.data={};\n    this.width=config.width;\n    this.height=config.height;\n    this.playSounds = true;\n\n    //Setup the application\n    this.app = new PIXI.Application(config.width,config.height,{antialias: true, autoResize: true, resolution: devicePixelRatio});\n    this.app.stage = new PIXI.display.Stage();\n\n    //Change game size when window size changes\n    if(config.autoResize!==undefined) this.app.renderer.autoResize=config.autoResize;\n    else window.addEventListener('resize', this.resize.bind(this));\n\n\n    //We append it to a HTML element or Document body\n    if(config.parent){\n      document.getElementById(config.parent).appendChild(this.app.view)\n    }else{\n      document.body.appendChild(this.app.view);\n    }\n\n    //Load config files\n    this.preload(config.files);\n  }\n\n  //Read JSON configuration files\n  preload(files){\n    //Text to show progress\n    this.progressBar=new PIXI.Graphics();\n    this.progressBar.beginFill(0xDE3249);\n    this.progressBar.drawRect(0, 0, this.width, this.height/50);\n    this.progressBar.endFill();\n    this.progressBar.width=0;\n\n    this.loadingTxt=new PIXI.Text(\"Loading...\", {fill: 'white',\"fontSize\": 50});\n    this.loadingTxt.anchor.set(0.5);\n    this.loadingTxt.x=this.width/2;\n    this.loadingTxt.y=this.height/2;\n\n    this.progressBar.y=this.height/2+this.loadingTxt.height;\n\n    this.app.stage.addChild(this.loadingTxt);\n    this.app.stage.addChild(this.progressBar);\n\n    this.jsons=new Loader();\n    this.jsons.game=this;\n    this.jsons.addJSON(files);\n    this.jsons.load(this.load.bind(this)); //When all config files are loaded, load the game resources.\n  }\n\n  //Load game resources (images,sounds,vids...)\n  load(){\n    this.files=new Loader();\n    this.files.game=this;\n    this.files.addFiles(Object.values(this.jsons.resources));\n    this.files.load(this.setup.bind(this));\n  }\n\n  setup(){\n    this.app.stage.removeChild(this.loadingTxt);\n    this.app.stage.removeChild(this.progressBar);\n\n    //Z-Order\n    this.addZOrder();\n\n    //Adjust to window size\n    this.resize();\n\n    this.scenes={};\n    this.cutscenes={};\n    this.objects={};\n    this.npcs={};\n    this.dialogues={};\n    this.puzzles={};\n\n    this.activeLanguage=0;\n    this.activeScene=null;\n    this.activeObject=null;\n    this.activeNPC=null;\n    this.activePuzzle=null;\n    this.activeDialogue=null;\n\n    this.activeState=null;\n\n    this.storage=new Storage(this);\n\n    //Setup title screen\n    this.addScene(\"Title\",new Title(),this.settings.TitleScreen);\n\n    //Add game objects\n    let i;\n    let length=this.data.objects.length;\n    for(i=0;i<length;i++)\n    {\n      this.addObject(this.data.objects[i].Name,new GameObject(),this.data.objects[i]);\n    }\n\n    //Non-playable characters\n    length=this.data.npc.length;\n    for(i=0;i<length;i++)\n    {\n      this.addNPC(this.data.npc[i].Name,new NPC(),this.data.npc[i]);\n    }\n\n    //Dialogues\n    length=this.data.dialogues.length;\n    for(i=0;i<length;i++)\n    {\n      this.addDialogue(this.data.dialogues[i].Name,new Dialogue(),this.data.dialogues[i]);\n    }\n\n    //Add game scenes\n    length=this.data.scenes.length;\n    for(i=0;i<length;i++)\n    {\n      this.addScene(this.data.scenes[i].Name,new GameScene(),this.data.scenes[i]);\n    }\n\n    //Add cutscenes\n    length=this.data.cutscenes.length;\n    for(i=0;i<length;i++)\n    {\n      this.addCutscene(this.data.cutscenes[i].Name,new CutScene(),this.data.cutscenes[i]);\n    }\n\n    //Puzzles\n    length=this.data.puzzles.length;\n    for(i=0;i<length;i++)\n    {\n      this.addPuzzle(this.data.puzzles[i].Name,new Puzzle(),this.data.puzzles[i]);\n    }\n\n    //Add Inventory\n    this.addInventory();\n\n    //Add text field\n    this.addTextField();\n\n    //Add player\n    this.addPlayer();\n\n    //Check if there is a saved game\n    this.storage.check();\n\n    //Set Title as the first scene to show\n    this.setScene(\"Title\");\n\n    //Game's loop\n    this.app.ticker.add(this.loop.bind(this));\n  }\n\n  loop(dt){\n  //  console.log(this.player.lock) //Test\n    //console.log(this.activeObject); //Test\n    // update current state\n    if (this.activeState != null) {\n        this.activeState.update(dt);\n    }\n  }\n\n  addObject(name, object, config) {\n      this.objects[name] = object;\n\n      //Config the object\n      object.config=config;\n\n      //Set game so object can access it\n      object.game = this;\n\n      //Build object\n      object.build();\n  }\n\n  addScene(name, scene, config) {\n      this.scenes[name] = scene;\n\n      //Config the scene\n      scene.setup(config);\n\n      //Set game so scene can access it\n      scene.game = this;\n\n      //Build scene\n      scene.build();\n  }\n\n  addCutscene(name, cutscene, config) {\n      this.cutscenes[name] = cutscene;\n\n      //Config the scene\n      cutscene.config=config;\n\n      //Set game so scene can access it\n      cutscene.game = this;\n\n      //Build scene\n      cutscene.build();\n  }\n\n  addPuzzle(name, puzzle, config) {\n      this.puzzles[name] = puzzle;\n\n      //Puzzle's config\n      puzzle.config=config;\n\n      //Set game so puzzle can access it\n      puzzle.game = this;\n  }\n\n  setScene(name,playerCoords) {\n\n      //Remove current container\n      if (this.activeScene !== null) {\n          this.app.stage.removeChild(this.activeScene.container);\n      }\n\n      //Set current container\n      this.activeScene = this.scenes[name];\n      //Add our new container\n      this.app.stage.addChild(this.activeScene.container);\n\n      if(this.activeScene.config.Player!==undefined){\n        if(this.activeScene.config.Player.Position!==undefined){\n          this.player.position(this.activeScene.config.Player.Position);\n        }\n        if(this.activeScene.config.Player.Size!==undefined){\n          this.player.size=this.activeScene.config.Player.Size;\n          this.player.scale();\n        }\n      }\n\n      if(playerCoords!==undefined){\n        this.player.sprite.x=playerCoords[0];\n        this.player.sprite.y=playerCoords[1];\n      }\n\n      if(this.activeScene.config.CutScene!==undefined){\n        if(!this.cutscenes[this.activeScene.config.CutScene].played){\n          this.cutscenes[this.activeScene.config.CutScene].show();\n        }\n      }\n\n      //Save game progress\n      if(this.activeScene!==this.scenes[\"Title\"])\n        this.storage.save();\n      // Play sounds\n      if(this.activeScene.music!==undefined && this.playSounds){\n        PIXI.sound.stopAll();\n        if(PIXI.sound.exists(this.activeScene.music))\n          PIXI.sound.play(this.activeScene.music,{loop:true});\n      }\n  }\n\n  addZOrder(){\n    this.BottomGroup= new PIXI.display.Group(0,false);\n    this.sortGroup= new PIXI.display.Group(1, true);\n    this.sortGroup.on('sort', function (sprite) {\n      sprite.zOrder = -sprite.y;\n    });\n    this.TopGroup = new PIXI.display.Group(2,false);\n    this.UIGroup = new PIXI.display.Group(3,false);\n\n    this.layerBottom=new PIXI.display.Layer(this.BottomGroup);\n    this.layer=new PIXI.display.Layer(this.sortGroup);\n    this.layerTop=new PIXI.display.Layer(this.TopGroup);\n    this.layerUI=new PIXI.display.Layer(this.UIGroup);\n\n    this.app.stage.group.enableSort = true;\n    this.app.stage.addChild(this.layerBottom);//Z-order\n    this.app.stage.addChild(this.layer);//Z-order\n    this.app.stage.addChild(this.layerTop);//Z-order\n    this.app.stage.addChild(this.layerUI);//Z-order\n  }\n\n  addInventory(){\n    this.inventory=new Inventory();\n    this.inventory.game=this;\n    this.inventory.build();\n  }\n\n  addPlayer(){\n    this.player=new Player();\n    this.player.game=this;\n    this.data.player.Name=\"player\";\n    this.player.setup(this.data.player);\n  }\n\n  addNPC(name, char, config){\n    this.npcs[name] = char;\n\n    char.game = this;\n\n    char.setup(config);\n\n    char.build();\n  }\n\n  addDialogue(name, dialogue, config){\n    this.dialogues[name] = dialogue;\n\n    dialogue.game = this;\n\n    dialogue.setup(config);\n  }\n\n  addTextField(){\n    this.textField=new TextField();\n    this.textField.game=this;\n    this.textField.build();\n  }\n\n  //Adjust game screen to the window\n  resize() {\n    var w = window.innerWidth * window.devicePixelRatio;\n    var h = window.innerHeight * window.devicePixelRatio;\n    var ratio = Math.min( w/this.width,  h/this.height);\n    this.app.renderer.resize(this.width*ratio,this.height*ratio);\n    this.app.stage.scale.set(ratio);\n  }\n\n  //The magic begins\n  start(){\n    //Show Inventory\n    this.app.stage.addChild(this.inventory.container);\n    this.app.stage.addChild(this.inventory.icon);\n\n    //Show Player\n    this.app.stage.addChild(this.player.sprite);\n\n    //Add Text Field\n    this.app.stage.addChild(this.textField.container);\n  }\n\n\n}\n\nexport default Game;\n","import Game from './game';\n\nconsole.log(\"JSGAM 5.0.0 https://github.com/kreezii/jsgam\");\n\n//export default Game;\nexport default Game;\n"],"names":["Loader","constructor","game","onLoad","add","this","update","bind","onError","error","addJSON","files","i","arrayLength","length","name","slice","lastIndexOf","addFiles","data","Settings","settings","Scenes","scenes","Cutscenes","cutscenes","Objects","objects","Dialogues","dialogues","Puzzles","puzzles","Credits","credits","Texts","texts","Sounds","soundSrc","j","tmpSound","Src","Name","Vids","fixVidLoad","vidSrc","tmpVid","Animations","animSrc","tmpAnim","Backgrounds","bgSrc","tmpBg","Player","Texture","Json","Skeleton","player","Characters","npcSrc","npc","PIXI","sound","utils","extensions","splice","indexOf","loaders","Resource","setExtensionXhrType","undefined","setExtensionLoadType","LOAD_TYPE","VIDEO","percent","Math","floor","progress","progressBar","width","resource","console","log","Storage","save","puzzlesSolved","Object","values","forEach","puzzle","solved","includes","config","push","dialoguesDisabled","dialogue","branches","branch","Choices","choice","index","disabled","Dialogue","Branch","cutscenesPlayed","cutscene","played","language","activeLanguage","activeScene","sprite","x","y","inventory","setItem","load","item","thisItem","scene","tmpIndex","disable","Index","silentMode","resolve","playerPos","delete","localForage","clear","check","storage","getItem","then","value","changeLanguage","states","enable","catch","err","Scene","container","Container","setup","background","Sprite","from","Background","anchor","set","addChild","Foreground","foreground","music","Music","dt","hide","visible","show","Button","text","style","interactive","buttonMode","extras","BitmapText","Infotxt","Phrases","option","let","Text","ButtonStyle","on","onTap","height","sort","activeChoice","activeDialogue","currentBranch","alpha","Repeat","next","get","options","parent","scale","center","ratio","min","pivot","TextField","build","parentLayer","layerUI","WHITE","size","Size","tint","Style","skip","Position","setPosition","end","talker","shutup","answer","setText","stop","activeObject","cancel","clearTimeout","timeoutID","position","newText","adjustText","countWords","str","split","timeOut","time","Speed","setColor","colour","Menu","buttons","addButton","modify","arrayButtons","resize","MainMenu","create","gameTexts","NewGame","Continue","Options","Help","languages","Languages","addLanguage","setLanguage","Back","father","change","mainMenu","texture","buildText","structuredText","tween","tweenManager","createTween","to","expire","delay","start","reset","Lines","Title","Confirmation","addText","Warning","Yes","No","addState","addAction","showOptions","showHelp","showCredits","checkAdventure","loadAdventure","newAdventure","button","action","state","activeState","warning","setScene","FirstScene","latestScene","GameScene","layerTop","layerBottom","getPosition","walkable","Walkable","WalkArea","addPolygon","Obstacles","obstacles","sceneObjects","sceneChars","npcs","event","coord","getLocalPosition","app","stage","lock","move","getPath","fromX","fromY","toX","toY","findPath","CutScene","sequenceIndex","boxesIntersect","a","b","ab","getBounds","bb","collision","result","hitArea","PolyK","points","Video","videoData","resources","videoEnds","addEventListener","Sequence","image","Image","field","adjust","videoTexture","videoSprite","setTimeout","Time","hideIcon","removeChild","pause","removeEventListener","stopAll","showIcon","containerDimension","playSounds","exists","play","GameObject","Description","NoDescription","Area","EMPTY","Polygon","Animation","spritesheet","frames","_frameKeys","AnimatedSprite","animationSpeed","Mirror","flip","Layer","layer","Door","door","newScene","To","touchArea","releaseArea","touch","release","Interactive","setInteraction","setpos","changeTexture","interaction","touchedPos","moveTo","look","area","coords","coordX","round","coordY","changePosition","closestedge","point","norm","use","once","posX","posY","dragging","moved","oldParent","depthGroup","setParent","newPosition","bounds","icon","Take","take","Use","activePuzzle","hit","found","objectsArray","remove","Inventory","border","Icon","click","setIcon","off","numObjs","tmpObj","objectHit","say","Combine","With","Puzzle","ModifyObject","objectMod","createDoor","GetObject","AddObject","Resolve","Say","target","createInventoryObject","objectName","const","dbfactory","dragonBones","PixiFactory","factory","Character","parseDragonBonesData","parseTextureAtlasData","buildArmatureDisplay","Armature","animations","animate","Stand","closestPosition","obstaclesPolys","walkPoly","newPos","checkPath","path","TweenPath","Walk","armature","flipX","drawShape","animationTime","abs","speed","scaleChar","Depth","textField","Number","Color","animation","times","lastAnimationName","fadeIn","dbEvents","EventObject","COMPLETE","takeEnd","useEnd","NotUsable","talk","activeNPC","NPC","firstTime","Branches","DefaultBranch","choiceSelected","searchBranch","branchFound","Answer","EndDialogue","Link","Game","devicePixelRatio","Stage","autoResize","renderer","window","document","getElementById","appendChild","view","body","preload","beginFill","drawRect","endFill","loadingTxt","jsons","addZOrder","addScene","TitleScreen","addObject","addNPC","addDialogue","addCutscene","addPuzzle","addInventory","addTextField","addPlayer","ticker","loop","object","playerCoords","BottomGroup","Group","sortGroup","zOrder","TopGroup","UIGroup","group","enableSort","char","w","innerWidth","h","innerHeight"],"mappings":"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"}