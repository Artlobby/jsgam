{"version":3,"file":"jsgam.js","sources":["../src/loader.js","../src/storage.js","../src/class/scene.js","../src/class/text.js","../src/class/menu.js","../src/class/mainmenu.js","../src/class/options.js","../src/class/help.js","../src/class/credits.js","../src/class/confirmation.js","../src/class/title.js","../src/class/gamescene.js","../src/class/cutscene.js","../src/collisions.js","../src/class/gameobject.js","../src/class/inventory.js","../src/class/puzzle.js","../src/class/character.js","../src/class/player.js","../src/class/npc.js","../src/class/dialogue.js","../src/game.js","../src/index.js"],"sourcesContent":["\n\nclass Loader extends PIXI.loaders.Loader{\n  constructor(){\n    super();\n    this.game=null;\n    this.onLoad.add(this.update.bind(this));\n    this.onError.add(this.error.bind(this));\n  }\n\n  //Add config files to loader\n  addJSON(files){\n  /*  let thisLoader=this;\n    files.map(function(file){\n      thisLoader.add(file.slice(file.lastIndexOf(\"/\")+1,file.lastIndexOf(\".\")),file)\n    });*/\n    let i;\n    let arrayLength=files.length;\n\n    for(i=0;i<arrayLength;i++){\n      let name=files[i].slice(files[i].lastIndexOf(\"/\")+1,files[i].lastIndexOf(\".\"));\n      this.add(name,files[i]);\n    }\n  }\n\n  //Add resource files to loader and settings to game\n  addFiles(files){\n    let i;\n    let length=files.length\n    for(i=0;i<length;i++){\n      //Add config files to setup the game\n      if(files[i].data.Settings) this.game.settings=files[i].data.Settings;\n      if(files[i].data.Scenes) this.game.data.scenes=this.game.data.scenes.concat(files[i].data.Scenes);\n      if(files[i].data.Cutscenes) this.game.data.cutscenes=this.game.data.cutscenes.concat(files[i].data.Cutscenes);\n      if(files[i].data.Objects) this.game.data.objects=this.game.data.objects.concat(files[i].data.Objects);\n      if(files[i].data.Dialogues) this.game.data.dialogues=this.game.data.dialogues.concat(files[i].data.Dialogues);\n      if(files[i].data.Puzzles) this.game.data.puzzles=this.game.data.puzzles.concat(files[i].data.Puzzles);\n      if(files[i].data.Credits) this.game.data.credits=files[i].data.Credits;\n      if(files[i].data.Texts) this.game.data.texts=files[i].data.Texts;\n      //Look for sound files\n      if(files[i].data.Sounds){\n        let soundSrc=files[i].data.Sounds;\n        for(let j=0;j<soundSrc.length;j++){\n           let tmpSound=soundSrc[j].Src;\n           if(tmpSound!==null) this.add(soundSrc[j].Name,tmpSound);\n        }\n       }\n\n       //Look for video files\n       if(files[i].data.Vids)\n       {\n         //Fix for load correctly vids with pixi-sound\n         this.fixVidLoad();\n         let vidSrc=files[i].data.Vids;\n         for(let i=0;i<vidSrc.length;i++){\n           let tmpVid=vidSrc[i].Src;\n           if(tmpVid!==null) this.add(vidSrc[i].Name,tmpVid);\n         }\n       }\n\n       //Load Animations\n       if(files[i].data.Animations)\n       {\n         let animSrc=files[i].data.Animations;\n         for(let i=0;i<animSrc.length;i++){\n           let tmpAnim=animSrc[i].Src;\n           if(tmpAnim!==null) this.add(animSrc[i].Name,tmpAnim);\n         }\n       }\n\n       //Load Backgrounds if don't use texture atlas for backgrounds\n       if(files[i].data.Backgrounds){\n         let bgSrc=files[i].data.Animations;\n         for(let i=0;i<bgSrc.length;i++){\n           let tmpBg=bgSrc[i].Src;\n           if(tmpBg!==null) this.add(bgSrc[i].Name,tmpBg);\n         }\n       }\n\n       //Look for player files\n       if(files[i].data.Player){\n         this.add('playerTex', files[i].data.Player.Texture)\n             .add('playerJson', files[i].data.Player.Json)\n             .add('playerSkeleton', files[i].data.Player.Skeleton);\n         this.game.data.player=files[i].data.Player;\n       }\n\n       //Look for NPC files\n       if(files[i].data.Characters){\n         let npcSrc=files[i].data.Characters;\n         for(let i=0;i<npcSrc.length;i++){\n            this.add(npcSrc[i].Name+\"Tex\", npcSrc[i].Texture)\n            .add(npcSrc[i].Name+'Json', npcSrc[i].Json)\n            .add(npcSrc[i].Name+'Skeleton', npcSrc[i].Skeleton);\n          }\n          this.game.data.npc=files[i].data.Characters;\n        }\n    }\n  }\n\n  //Fix for load mp4 as videos instead as audio because of pixi-sound\n  fixVidLoad(){\n    PIXI.sound.utils.extensions.splice(PIXI.sound.utils.extensions.indexOf('mp4'), 1);\n    PIXI.loaders.Resource.setExtensionXhrType('mp4', undefined);\n    PIXI.loaders.Resource.setExtensionLoadType('mp4', PIXI.loaders.Resource.LOAD_TYPE.VIDEO);\n  }\n\n  //Loading progress\n  update(){\n    let percent=Math.floor(this.progress);\n    this.game.progressBar.width=(this.game.width/100)*percent;\n    //this.game.loadingTxt.text=\"Loading... \"+ percent+\"%\";\n  }\n\n  //File failed to load\n  error(resource){\n    console.log(resource);\n  }\n\n}\n\nexport default Loader;\n","import localForage from 'localforage';\n\nexport default class Storage{\n  constructor(game){\n    this.game=game;\n  }\n\n  //Save adventure progress\n  save(){\n    //Get solved puzzles\n    let puzzlesSolved=[];\n    let puzzleArray=Object.values(this.game.puzzles)\n\n    puzzleArray.forEach(function(puzzle){\n      if(puzzle.solved && !puzzlesSolved.includes(puzzle.config.Name))\n        puzzlesSolved.push(puzzle.config.Name)\n    });\n\n    //Get dialogues\n    let dialoguesDisabled=[];\n    let dialogueArray=Object.values(this.game.dialogues);\n\n\n    dialogueArray.forEach(function(dialogue){\n      let branches=Object.values(dialogue.branches);\n\n      branches.forEach(function(branch){\n\n        branch.Choices.forEach(function(choice,index){\n          if(choice.disabled){\n            let disabledOption={\n              Dialogue:dialogue.config.Name,\n              Branch:branch.Name,\n              Index:index\n            }\n            dialoguesDisabled.push(disabledOption);\n          }\n        });\n      });\n\n    });\n\n    //Get player cutscenes\n    let cutscenesPlayed=[];\n    let cutscenesArray=Object.values(this.game.cutscenes);\n    cutscenesArray.forEach(function(cutscene){\n      if(cutscene.played) cutscenesPlayed.push(cutscene.config.Name);\n    });\n\n    //Store the progress\n    this.progress={\n      language:this.game.activeLanguage,\n      latestScene:this.game.activeScene.config.Name,\n      playerPos:[this.game.player.sprite.x,this.game.player.sprite.y],\n      inventory:this.game.inventory.objects,\n      puzzles:puzzlesSolved,\n      dialogues:dialoguesDisabled,\n      cutscenes:cutscenesPlayed\n    }\n\n    //Save object to local storage\n    localForage.setItem('JSGAM_Storage', this.progress);\n  }\n\n  //Load adventure progress\n  load(){\n    let game=this.game;\n\n    //Disable dialogues finished\n    this.progress.dialogues.forEach(function(disable){\n      game.dialogues[disable.Dialogue].branches[disable.Branch].Choices[disable.Index].disabled=true;\n    });\n\n    //Disable cutscenes played\n    this.progress.cutscenes.forEach(function(name){\n      game.cutscenes[name].played=true;\n    });\n\n    this.game.silentMode=true;\n    //Resolve puzzles already done\n    this.progress.puzzles.forEach(function(name){\n      game.puzzles[name].resolve();\n    });\n    \n    //Load objects in inventory\n    this.progress.inventory.forEach(function(item){\n\n      //Add object to inventory\n      game.inventory.add(item);\n\n      //Remove objects from scenes configurations\n      let thisItem=item;\n      let sceneArray=Object.values(game.scenes);\n      sceneArray.forEach(function(scene){\n        if(scene.config.Objects!==undefined && scene.config.Objects.includes(thisItem)){\n          let tmpIndex=scene.config.Objects.indexOf(thisItem);\n          scene.config.Objects.splice(tmpIndex,1);\n        }\n      })\n\n    });\n    this.game.silentMode=false\n\n    //Add player to latest Position\n    this.game.player.sprite.x=this.progress.playerPos[0];\n    this.game.player.sprite.y=this.progress.playerPos[1];\n\n  }\n\n  //Clear local storage\n  delete(){\n    localForage.clear();\n  }\n\n  check(){\n    let storage=this;\n\n    localForage.getItem('JSGAM_Storage').then(function(value) {\n      // This code runs once the value has been loaded\n      // from the offline store.\n      if(value!==null){\n        storage.progress=value;\n        storage.game.activeLanguage=value.language;\n        storage.game.scenes[\"Title\"].changeLanguage();\n        storage.game.scenes[\"Title\"].states[\"MainMenu\"].enable(\"Continue\");\n      }\n    }).catch(function(err) {\n        // This code runs if there were any errors\n        console.log(err);\n    });\n  }\n}\n","class Scene{\n  constructor(){\n    this.container = new PIXI.Container();\n    this.game=null;\n  }\n\n  setup(config){\n    this.background=new PIXI.Sprite(PIXI.Texture.from(config.Background));\n    this.background.anchor.set(0);\n    this.container.addChild(this.background);\n    if(config.Foreground!==undefined)\n    {\n      this.foreground=new PIXI.Sprite(PIXI.Texture.from(config.Foreground));\n      this.foreground.anchor.set(0);\n      this.container.addChild(this.foreground);\n    }\n    this.music=config.Music;\n    this.config=config;\n  }\n\n  update(dt) {\n\n  }\n  hide(){\n    this.container.visible=false;\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n}\n\nexport default Scene;\n","class Button extends PIXI.extras.BitmapText{\n    constructor(text,style){\n      super(text,style);\n      this.interactive=true;\n      this.buttonMode=true;\n    }\n}\n\nclass Infotxt extends PIXI.extras.BitmapText{\n    constructor(text,style){\n      super(text,style);\n    }\n}\n\n\nclass Phrases{\n  constructor(config){\n    this.container=new PIXI.Container();\n    this.hide();\n    this.game=config;\n    this.option=[];\n\n    for(let i=0;i<3;i++){\n      this.option[i]=new Button(\"Option\",this.game.settings.Text.ButtonStyle);\n      this.option[i].game=this.game;\n      this.option[i].anchor.set(0.5,0);\n      this.option[i].on('pointertap', this.onTap.bind(this.option[i]));\n      this.option[i].index=i;\n      this.container.addChild(this.option[i]);\n      this.option[i].x=this.container.width/2;\n      if(i>0)this.option[i].y=this.option[i-1].y+this.option[i-1].height;\n    }\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  onTap(){\n    let activeChoice=this.game.activeDialogue.currentBranch.Choices;\n\n    if(this.alpha==1){\n      this.game.activeDialogue.choice=this.index;\n      if(activeChoice[this.index].Repeat==false) activeChoice[this.index].disabled=true;\n      this.game.activeDialogue.next();\n    }\n  }\n\n  get(){\n    this.clear();\n    let options=this.game.activeDialogue.currentBranch.Choices;\n    for(let i=0;i<options.length;i++){\n      if(options[i].disabled){\n        this.option[i].alpha=0.5;\n      }else this.option[i].alpha=1;\n      this.option[i].visible=true;\n      this.option[i].text=options[i].Text[this.game.activeLanguage];\n    }\n    this.sort();\n    this.show();\n  }\n\n  clear(){\n    for(let i=0;i<this.option.length;i++){\n      this.option[i].visible=false;\n    }\n  }\n\n  sort(){\n    for(let i=0;i<this.option.length;i++){\n      this.option[i].x=this.container.width/2;\n    }\n    if(this.container.width>this.container.parent.width || this.container.height>this.container.parent.height){\n      this.scale();\n    }\n    this.center();\n  }\n\n  scale(){\n    let ratio = Math.min( this.game.width/this.container.width,  this.container.parent.height/this.container.height);\n    this.container.scale.set(ratio*0.95)\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n  //  this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n  //  this.container.pivot.y = this.container.height / 2;\n  }\n}\n\nclass TextField{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.Background=null;\n    this.Text=null;\n    this.container.visible=false;\n  }\n\n  build(){\n    this.container.parentLayer = this.game.layerUI;\n    this.Background=new PIXI.Sprite(PIXI.Texture.WHITE);\n\n    let size=4;\n    if(this.game.settings.Text.Size!==undefined){\n      if(this.game.settings.Text.Size===\"fourth\") size=4;\n      else if(this.game.settings.Text.Size===\"half\") size=2;\n    }\n    this.Background.width=this.game.width;\n    this.Background.height=this.game.height/size;\n\n    this.Background.tint='black';\n    this.Background.alpha=0.5;\n\n    this.Text=new Button(\"\", this.game.settings.Text.Style);\n    this.Text.anchor.set(0.5,0);\n\n    this.Text.y=0;\n    this.Text.on('pointertap',this.skip.bind(this));\n\n    this.Choices=new Phrases(this.game);\n\n    this.container.addChild(this.Background);\n    this.container.addChild(this.Text);\n    this.container.addChild(this.Choices.container);\n\n    this.Text.x=this.container.width/2;\n    this.Choices.sort();\n    if(this.game.settings.Text.Position!==undefined) this.setPosition(this.game.settings.Text.Position);\n  }\n\n  show(){\n    this.Text.visible=true;\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  end(){\n    if(this.game.activeDialogue!==null){\n      this.talker.shutup();\n      if(this.game.activeDialogue.choice!==null) this.game.activeDialogue.answer();\n      else{\n        this.Text.visible=false;\n        this.Choices.get();\n      }\n\n    }else{\n      this.setText(\"\");\n      this.hide();\n      this.talker.shutup();\n      this.game.player.stop();\n      if(this.game.activeObject!==null) this.game.activeObject.cancel();\n    }\n  }\n\n  skip(){\n    this.end();\n    if(this.talker) clearTimeout(this.talker.timeoutID);\n  }\n\n  setPosition(position){\n    if(position===\"top\"){\n      this.container.x=0;\n      this.container.y=0;\n    }else if(position===\"bottom\"){\n      this.container.x=0;\n      this.container.y=this.game.height-this.container.height;\n    }\n  }\n\n  setText(newText){\n    this.Text.text=newText;\n    if(this.Text.width>this.container.width || this.Text.height>this.container.height){\n      this.adjustText();\n    }\n  }\n\n  adjustText(){\n    let ratio = Math.min( this.container.width/this.Text.width,  this.container.height/this.Text.height);\n    this.container.scale.set(ratio*0.95);\n  }\n\n  //Get words number of the text\n  countWords(str) {\n   return str.split(\" \").length;\n  }\n\n  //Calculate how many seconds we show the text\n  timeOut(){\n    let time;\n    if(this.game.settings.Text.Speed!==undefined) time=this.game.settings.Text.Speed;\n    else time=this.countWords(this.Text.text)/3;\n\n    //Time must be at least 1 second\n    if(time<1) time=1;\n\n    return time*1000;\n  }\n\n  setColor(colour){\n    this.Text.tint=colour;\n  }\n\n  setFont(newFont){\n    this.Text.font=newFont;\n  }\n}\n\nexport {Button,TextField,Infotxt};\n","import {Button} from './text.js'\n\nclass Menu{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.game=null;\n    this.buttons={};\n    }\n\n  addButton(name,text){\n    this.buttons[name]=new Button(text[this.game.activeLanguage],this.game.settings.Text.ButtonStyle);\n    this.container.addChild(this.buttons[name]);\n  }\n\n  modify(name,text){\n    this.buttons[name].text=text[this.game.activeLanguage];\n  }\n\n  disable(name){\n    this.buttons[name].alpha=0.5;\n    this.buttons[name].interactive=false;\n  }\n\n  enable(name){\n    this.buttons[name].alpha=1.0;\n    this.buttons[name].interactive=true;\n  }\n\n  sort(){\n    let i;\n    let arrayButtons=Object.values(this.buttons);\n    let length=arrayButtons.length;\n    arrayButtons[0].y=0;\n    for(i=1;i<length;i++)\n    {\n      arrayButtons[i].y=arrayButtons[i-1].y+arrayButtons[i-1].height*1.5;\n      arrayButtons[i].x=this.container.width/2-arrayButtons[i].width/2;\n    }\n\n    this.center();\n  //  this.resize();\n  }\n\n  resize(){\n    let ratio = Math.min( this.game.width/this.container.width,  this.game.height/this.container.height);\n    //console.log(ratio)\n    this.container.scale.set(ratio*0.95);\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n\n}\nexport default Menu;\n","import Menu from './menu.js';\n\nclass MainMenu extends Menu{\n  create(){\n      let gameTexts=this.game.data.texts;\n      this.addButton(\"New\",gameTexts.NewGame);\n      this.addButton(\"Continue\",gameTexts.Continue);\n      this.addButton(\"Options\",gameTexts.Options);\n      this.addButton(\"Help\",gameTexts.Help);\n      this.addButton(\"Credits\",gameTexts.Credits);\n\n      this.disable(\"Continue\");\n\n      this.sort();\n    }\n\n  changeLanguage(){\n    this.modify(\"New\",this.game.data.texts.NewGame);\n    this.modify(\"Continue\",this.game.data.texts.Continue);\n    this.modify(\"Options\",this.game.data.texts.Options);\n    this.modify(\"Help\",this.game.data.texts.Help);\n    this.modify(\"Credits\",this.game.data.texts.Credits);\n\n    this.sort();\n  }\n\n}\nexport default MainMenu;\n","import Menu from './menu.js';\nimport {Button} from './text.js';\n\nclass Options extends Menu{\n  create(){\n    this.container.visible=false;\n    let languages=this.game.settings.Languages\n    for(let i=0;i<languages.length;i++){\n      this.addLanguage(languages[i],);\n      this.buttons[languages[i]].on('pointerup', this.setLanguage);\n    }\n\n    let langArray=Object.values(this.buttons);\n    langArray[this.game.activeLanguage].tint=0xFF0000;\n\n    this.addButton(\"Back\",this.game.data.texts.Back);\n    this.sort();\n  }\n\n  addLanguage(name){\n    this.buttons[name]=new Button(name,this.game.settings.Text.ButtonStyle);\n    this.buttons[name].father=this;\n    this.container.addChild(this.buttons[name]);\n  }\n\n  setLanguage(){\n    this.father.change(this.text);\n  }\n\n  change(text){\n    let languages=this.game.settings.Languages\n    this.buttons[languages[this.game.activeLanguage]].tint=0xFFFFFF;\n    this.game.activeLanguage=this.game.settings.Languages.indexOf(text);\n    this.buttons[languages[this.game.activeLanguage]].tint=0xFF0000;\n    this.modify(\"Back\",this.game.data.texts.Back);\n    this.sort();\n  }\n\n}\nexport default Options;\n","class Help{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.container.visible=false;\n    this.container.interactive=true;\n    this.container.buttonMode=true;\n    }\n\n  create(){\n    let config=this.game.settings;\n\n    this.background=new PIXI.Sprite(PIXI.Texture.from(config.Help[this.game.activeLanguage]));\n    this.container.addChild(this.background);\n    this.center();\n    this.container.on('pointerup', this.mainMenu.bind(this));\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  changeLanguage(){\n    this.background.texture=PIXI.Texture.from(this.game.settings.Help[this.game.activeLanguage]);\n    this.center();\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n}\n\nexport default Help;\n","\nimport tweenManager from 'k8w-pixi-tween';\n\nclass Credits{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.container.visible=false;\n    this.container.interactive=true;\n    this.container.buttonMode=true;\n    }\n\n  create(){\n    let config=this.game.data.credits;\n\n    if(config.Background!==undefined) this.background=new PIXI.Sprite(PIXI.Texture.from(config.Background));\n\n    this.buildText();\n\n    this.structuredText = new PIXI.extras.BitmapText(this.text,config.Style);\n\n    this.container.addChild(this.structuredText);\n\n    this.container.x = this.game.width / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.y=this.game.height;\n    this.tween = PIXI.tweenManager.createTween(this.container);\n    this.tween\n      .from({ y: this.game.height})\n      .to({ y: 0 - this.container.height});\n    this.tween.time = 20000;\n    this.tween.expire=true;\n    this.tween.delay=500;\n    this.tween.on(\"end\", this.mainMenu.bind(this));\n\n    this.container.on('pointerup', this.mainMenu.bind(this));\n  }\n\n  show(){\n    this.container.visible=true;\n    this.tween.start();\n  }\n\n  hide(){\n    this.tween.stop().reset();\n    this.container.visible=false;\n  }\n\n\n  buildText(){\n    let credits=this.game.data.credits;\n\n    this.text=\"\";\n    let i;\n    for (i=0; i < credits.Lines.length; i++) {\n    this.text += credits.Lines[i].Title[this.game.activeLanguage];\n    this.text += \"\\n\";\n    let j;\n\n    for (j = 0; j < credits.Lines[i].Text.length; j++) {\n      this.text += credits.Lines[i].Text[j];\n      this.text += \"\\n\";\n    }\n    this.text += \"\\n\";\n    }\n  }\n\n  update(){\n    PIXI.tweenManager.update();\n  }\n\n  changeLanguage(){\n    this.buildText();\n    this.structuredText.text=this.text;\n  }\n\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n}\n\nexport default Credits;\n","import Menu from './menu.js';\nimport {Infotxt} from './text.js'\n\nclass Confirmation extends Menu{\n  create(){\n    this.hide();\n    let gameTexts=this.game.data.texts;\n    this.addText(\"Warning\",gameTexts.Warning);\n    this.addButton(\"Yes\",gameTexts.Yes);\n    this.addButton(\"No\",gameTexts.No);\n    this.sort();\n  }\n\n  changeLanguage(){\n    //this.modify(\"Warning\",this.game.data.texts.Warning);\n    this.text.text=this.game.data.texts.Warning[this.game.activeLanguage];\n    this.modify(\"Yes\",this.game.data.texts.Yes);\n    this.modify(\"No\",this.game.data.texts.No);\n    this.sort();\n  }\n\n  sort(){\n    this.text.y=0\n    this.text.x=this.game.width/2-this.text.width/2;\n    this.buttons[\"Yes\"].y=this.text.height*1.5;\n    this.buttons[\"Yes\"].x=this.buttons[\"Yes\"].width;\n    this.buttons[\"No\"].y=this.text.height*1.5;\n    this.buttons[\"No\"].x=this.game.width-this.buttons[\"No\"].width*2;\n    this.container.y=this.game.height/2-this.container.height/2;\n  }\n\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n\n  addText(name,text){\n    this.text=new Infotxt(text[this.game.activeLanguage],this.game.settings.Text.ButtonStyle);\n    this.container.addChild(this.text);\n  }\n}\n\nexport default Confirmation;\n","import Scene from './scene.js';\nimport MainMenu from './mainmenu.js'\nimport Options from './options.js'\nimport Help from './help.js'\nimport Credits from './credits.js'\nimport Confirmation from './confirmation.js'\n\nimport 'pixi-sound';\n\nclass Title extends Scene{\n  build(){\n    this.states={};\n\n    //Add Menus\n    this.addState(\"MainMenu\", new MainMenu());\n    this.addState(\"Options\", new Options());\n    this.addState(\"Credits\", new Credits());\n    this.addState(\"Help\", new Help());\n    this.addState(\"Warning\", new Confirmation());\n\n    //Add actions to the menu buttons\n    this.addAction(\"MainMenu\",\"Options\",this.showOptions.bind(this));\n    this.addAction(\"MainMenu\",\"Help\",this.showHelp.bind(this));\n    this.addAction(\"MainMenu\",\"Credits\",this.showCredits.bind(this));\n\n    this.addAction(\"MainMenu\",\"New\",this.checkAdventure.bind(this));\n    this.addAction(\"MainMenu\",\"Continue\",this.loadAdventure.bind(this));\n\n    this.addAction(\"Warning\",\"Yes\",this.newAdventure.bind(this));\n    this.addAction(\"Warning\",\"No\",this.mainMenu.bind(this));\n\n    this.addAction(\"Options\", \"Back\",this.mainMenu.bind(this));\n\n  }\n\n  addAction(name,button,action){\n    this.states[name].buttons[button].on('pointerup',action)\n  }\n\n  addState(name, state, config) {\n      this.states[name] = state;\n\n      //Set game so state can access it\n      state.game = this.game;\n\n      //Create state\n      state.create();\n\n      this.container.addChild(this.states[name].container);\n  }\n\n  showOptions(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Options\"].show();\n  }\n\n  showHelp(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Help\"].show();\n  }\n\n  showCredits(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Credits\"].show();\n    this.game.activeState=this.states[\"Credits\"];\n  }\n\n  mainMenu(){\n    this.game.activeState=null;\n    this.states[\"Credits\"].hide();\n    this.states[\"Options\"].hide();\n    this.states[\"Help\"].hide();\n    this.states[\"Warning\"].hide();\n    this.changeLanguage();\n    this.states[\"MainMenu\"].show();\n\n  }\n\n  changeLanguage(){\n    this.states[\"MainMenu\"].changeLanguage();\n    this.states[\"Credits\"].changeLanguage();\n    this.states[\"Help\"].changeLanguage();\n    this.states[\"Warning\"].changeLanguage();\n  }\n\n  warning(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Warning\"].show();\n  }\n\n  checkAdventure(){\n    if(this.game.storage.progress!==undefined){\n      this.warning();\n    }else{\n      this.newAdventure();\n    }\n  }\n\n  newAdventure(){\n    //Delete any game progress\n    this.game.storage.delete();\n\n    //Set the first scene\n    this.game.setScene(this.game.settings.FirstScene);\n\n    //Here we go\n    this.game.start();\n  }\n\n  loadAdventure(){\n    this.game.storage.load();\n    this.game.setScene(this.game.storage.progress.latestScene);\n    this.game.start();\n  }\n}\n\nexport default Title;\n","//import * as PIXI from 'pixi.js';\nimport Scene from './scene.js';\n\nimport Walkable from 'walkable';\n\nclass GameScene extends Scene{\n  build(){\n    if(this.foreground!==undefined) this.foreground.parentLayer = this.game.layerTop; //Z-order\n    this.background.parentLayer = this.game.layerBottom; //Z-order\n    this.background.interactive=true;\n    this.background.buttonMode=true;\n\n    this.background.on('pointertap',this.getPosition.bind(this));\n\n    //Add obstacles to the scene\n    this.walkable=new Walkable(this.game.width,this.game.height);\n      if(this.config.WalkArea!==undefined){\n        this.walkable.addPolygon(this.config.WalkArea);\n      }\n\n      if(this.config.Obstacles!==undefined){\n        let obstacles=Object.values(this.config.Obstacles);\n        this.config.Obstacles=obstacles;\n        for(let i=0;i<this.config.Obstacles.length;i++){\n          this.walkable.addPolygon(this.config.Obstacles[i]);\n        }\n      }\n\n      //Add objects to the scene\n      let sceneObjects=this.config.Objects;\n      if(sceneObjects){\n        for(let i=0;i<sceneObjects.length;i++){\n          if(this.game.objects[sceneObjects[i]]!==undefined){\n            this.container.addChild(this.game.objects[sceneObjects[i]].sprite);\n          }else{\n            console.log(\"Error:Game object \"+sceneObjects[i]+\" not found\");\n          }\n        }\n      }\n\n      //Add NPCs (non-playable characters) to the scene\n      let sceneChars=this.config.Characters;\n      if(sceneChars){\n        for(let i=0;i<sceneChars.length;i++){\n          if(this.game.npcs[sceneChars[i]]!==undefined){\n            this.container.addChild(this.game.npcs[sceneChars[i]].sprite);\n          }else{\n            console.log(\"Error:Game character \"+sceneChars[i]+\" not found\");\n          }\n        }\n      }\n  }\n\n  getPosition(event){\n    let coord=event.data.getLocalPosition(this.game.app.stage);\n    if(!this.game.player.lock && this.game.activeObject===null){\n      this.game.player.move(coord);\n    }\n  }\n\n  getPath(fromX,fromY,toX,toY){\n    return this.walkable.findPath(fromX, fromY, toX, toY, 0);\n  }\n\n}\n\nexport default GameScene;\n","class CutScene{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.sequenceIndex=0;\n    this.played=false;\n  }\n\n  build(){\n    if(this.config.Video){\n      this.videoData = this.game.files.resources[this.config.Video].data;\n      this.videoEnds=this.end.bind(this);\n      this.videoData.addEventListener('ended',this.videoEnds);\n    }else if(this.config.Sequence){\n      this.image=new PIXI.Sprite(PIXI.Texture.from(this.config.Sequence[this.sequenceIndex].Image));\n      var ratio = Math.min(this.game.width/this.image.width, this.game.height/this.image.height);\n      this.image.scale.set(ratio/2);\n\n      this.container.interactive=true;\n      this.container.buttonMode=true;\n      this.container.on('pointertap',this.next.bind(this));\n\n      this.container.addChild(this.image);\n\n      this.field=new PIXI.extras.BitmapText(this.config.Sequence[this.sequenceIndex].Text[this.game.activeLanguage],this.game.settings.Text.Style);\n      this.field.anchor.set(0.5,0);\n      this.field.x=this.image.width/2;\n      this.field.y=this.image.height+this.field.height/2;\n\n      this.container.addChild(this.field);\n      this.adjust();\n    }\n  }\n\n  show(){\n      if(this.config.Video) {\n        let videoTexture = PIXI.Texture.from(this.videoData);\n      \tthis.videoSprite = new PIXI.Sprite(videoTexture);\n        this.videoSprite.width = this.game.width;\n        this.videoSprite.height = this.game.height;\n        this.videoSprite.interactive=true;\n        this.videoSprite.buttonMode=true;\n        this.videoSprite.on('pointertap',this.end.bind(this));\n        this.container.addChild(this.videoSprite);\n      }else if(this.config.Sequence) {\n        this.sound();\n        this.timeoutID = setTimeout(this.next.bind(this),\n                         this.config.Sequence[this.sequenceIndex].Time*1000);\n      }\n      this.game.app.stage.addChild(this.container);\n      this.game.activeScene.hide();\n      this.game.inventory.hideIcon();\n      this.game.player.hide();\n      if(PIXI.sound.exists(this.game.activeScene.music)) PIXI.sound.pause(this.game.activeScene.music)\n  }\n\n  hide(){\n      this.container.parent.removeChild(this.container);\n  }\n\n  next(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    if(this.sequenceIndex<this.config.Sequence.length-1){\n      this.sequenceIndex+=1;\n      this.field.text=this.config.Sequence[this.sequenceIndex].Text[this.game.activeLanguage];\n      this.image.texture=(PIXI.Texture.from(this.config.Sequence[this.sequenceIndex].Image));\n      this.adjust();\n      this.timeoutID = setTimeout(this.next.bind(this), this.config.Sequence[this.sequenceIndex].Time*1000);\n    }else{\n      this.end();\n    }\n  }\n\n  end(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    if(this.videoData){\n      this.videoData.pause();\n      this.videoData.removeEventListener('ended',this.videoEnds);\n    }\n    PIXI.sound.stopAll();\n    this.hide();\n    this.played=true;\n    this.game.activeScene.show();\n    this.game.inventory.showIcon();\n    this.game.player.show();\n    if(PIXI.sound.exists(this.game.activeScene.music)) PIXI.sound.play(this.game.activeScene.music)\n  }\n\n  adjust(){\n    let containerDimension=this.container.y+this.container.height;\n    if(containerDimension>this.game.height) this.container.y-=containerDimension-this.game.height;\n    else this.container.y = (this.game.height - this.container.height) / 2;\n\n    if(this.container.height>this.game.height || this.container.width>this.game.width) this.scale();\n    else{\n      this.container.scale.set(1);\n      this.center();\n    }\n  }\n\n  center(){\n    this.container.x = (this.game.width - this.container.width) / 2;\n    this.container.y = (this.game.height - this.container.height) / 2;\n  }\n\n  scale(){\n    let ratio = Math.min( this.game.width/this.container.width, this.game.height/this.container.height);\n    this.container.scale.set(ratio*0.95);\n    this.center();\n  }\n\n  sound(){\n    if(this.config.Sequence[this.sequenceIndex].Music!==undefined && this.game.playSounds){\n      PIXI.sound.stopAll();\n      if(PIXI.sound.exists(this.config.Sequence[this.sequenceIndex].Music))\n        PIXI.sound.play(this.config.Sequence[this.sequenceIndex].Music,{loop:true});\n    }\n  }\n\n}\n\nexport default CutScene;\n","import * as PolyK from 'polyk';\n\nfunction boxesIntersect(a, b)\n{\n  var ab = a.getBounds();\n  var bb = b.getBounds();\n  return ab.x + ab.width > bb.x && ab.x < bb.x + bb.width && ab.y + ab.height > bb.y && ab.y < bb.y + bb.height;\n}\n\nfunction collision(a, b)\n{\n  let result;\n  if(a!=undefined && b !=undefined){\n    if(a.hitArea) result=PolyK.ContainsPoint(a.hitArea.points,b.x,b.y);\n    else if(b.hitArea) result=PolyK.ContainsPoint(b.hitArea.points,a.x,a.y);\n    else result=boxesIntersect(a,b);\n  }\n\n  return result;\n}\n\nfunction closestPoint(area,coords){\n  let coordX=Math.round(coords.x);\n  let coordY=Math.round(coords.y);\n  let changePosition={};\n  let closestedge=PolyK.ClosestEdge(area,coordX,coordY);\n  changePosition.x=closestedge.point.x-closestedge.norm.x;\n  changePosition.y=closestedge.point.y-closestedge.norm.y;\n  return {x:Math.round(changePosition.x),y:Math.round(changePosition.y)}\n}\n\nfunction checkPath(coords,obstaclesPolys,walkPoly){\n  let coordX=Math.round(coords.x);\n  let coordY=Math.round(coords.y);\n  let changePosition={};\n  let newPos;\n\n  if(!PolyK.ContainsPoint(walkPoly,coordX,coordY))\n  {\n    let closestedge=PolyK.ClosestEdge(walkPoly,coordX,coordY);\n    changePosition.x=closestedge.point.x-closestedge.norm.x;\n    changePosition.y=closestedge.point.y-closestedge.norm.y;\n    newPos={x:Math.round(changePosition.x),y:Math.round(changePosition.y)}\n  }else if(obstaclesPolys!==undefined){\n\n    for(let i=0;i<obstaclesPolys.length ;i++){\n      if(PolyK.ContainsPoint(obstaclesPolys[i],coordX,coordY)){\n        let closestedge=PolyK.ClosestEdge(walkPoly,coordX,coordY);\n        changePosition.x=closestedge.point.x-closestedge.norm.x;\n        changePosition.y=closestedge.point.y-closestedge.norm.y;\n        newPos={x:Math.round(changePosition.x)+1,y:Math.round(changePosition.y)+1};\n        break;\n      }\n    }\n  }\n\n  return newPos;\n}\n\nexport {boxesIntersect,checkPath,collision,closestPoint};\n","import {boxesIntersect,collision,closestPoint} from '../collisions.js';\n\nclass GameObject{\n  constructor(){\n    this.sprite=null;\n    this.game=null;\n    this.action=null;\n  }\n\n  build(){\n    if(this.config.Description===undefined){\n      this.config.Description=this.game.data.texts.NoDescription;\n    }\n    //Configure the sprite's object\n    if(this.config.Texture){\n      //Generate a static object from a texture\n      this.sprite=new PIXI.Sprite.from(PIXI.Texture.from(this.config.Texture));\n\n    }else if(this.config.Area){\n\n      //For invisible objects\n      this.sprite=new PIXI.Sprite.from(PIXI.Texture.EMPTY);\n      this.sprite.hitArea=new PIXI.Polygon(this.config.Area);\n\n    }else if(this.config.Animation){\n\n      //Animated objects\n      let spritesheet=this.game.files.resources[this.config.Animation.Name].spritesheet;\n\n      let frames = [];\n      for (var i = 0; i < spritesheet._frameKeys.length; i++) {\n          frames.push(PIXI.Texture.from(spritesheet._frameKeys[i]));\n      }\n\n      this.sprite=new PIXI.extras.AnimatedSprite(frames);\n      this.animationSpeed=this.config.Animation.Speed;\n      this.play();\n    }\n\n    //Position of the object in the screen\n    if(this.config.Position){\n      this.sprite.x=this.config.Position[0];\n      this.sprite.y=this.config.Position[1];\n    }\n\n    //Size of the object\n    if(this.config.Size){\n      this.sprite.scale.set(this.config.Size)\n    }\n\n    if(this.config.Mirror){\n      this.flip();\n    }\n\n    //Configure the anchor (origin point of the object)\n    if(!this.config.Area)this.sprite.anchor.set(0.5,1);\n\n    //Configure the layer for the z-order\n    if(this.config.Layer===\"Top\") this.sprite.parentLayer=this.game.layerTop;\n    else if(this.config.Layer===\"Bottom\") this.sprite.parentLayer=this.game.layerBottom;\n    else this.sprite.parentLayer = this.game.layer;\n\n    //Is it a door?\n    if(this.config.Door){\n      this.door=true;\n      this.newScene=this.config.Door.To;\n      this.playerPos=this.config.Door.Player;\n    }\nthis.holding=false;\nthis.timeoutID;\n    if(this.config.Lock){\n      this.locked=true;\n    }\n    //Game object events\n    this.sprite.interactive=true;\n    this.sprite.buttonMode=true;\n\n    if(this.config.Area!==undefined){\n      this.sprite.on('pointerdown', this.touchArea.bind(this))\n          .on('pointerup', this.releaseArea.bind(this))\n          .on('pointerupoutside', this.releaseArea.bind(this));\n    }else{\n      this.sprite.on('pointerdown', this.touch.bind(this))\n          .on('pointermove', this.move.bind(this))\n          .on('pointerup', this.release.bind(this))\n          .on('pointerupoutside', this.release.bind(this));\n    }\n\n    if(this.config.Interactive!==undefined) this.setInteraction(this.config.Interactive);\n  }\n\n  hide(){\n    this.sprite.visible=false;\n  }\n\n  show(){\n    this.sprite.visible=true;\n  }\n\n  setpos(x,y){\n    this.sprite.x=x;\n    this.sprite.y=y;\n  }\n\n  flip(){\n    this.sprite.scale.x*=-1;\n  }\n\n  changeTexture(texture){\n    this.sprite.texture=new PIXI.Texture.from(texture)\n  }\n\n  hold(){\n    this.holding=true;\n  }\n  //Invisible object touch begins\n  touchArea(event){\n    if(this.game.activeObject===null && !this.game.player.lock){\n      this.game.activeObject=this;\n      this.interaction = event.data;\n      this.action=null;\n      if(this.timeoutID) clearTimeout(this.timeoutID);\n      this.timeoutID=setTimeout(this.hold.bind(this), this.game.holdTime);\n      this.touchedPos=this.interaction.getLocalPosition(this.game.app.stage);\n    }\n  }\n\n  //Invisible object touch ends\n  releaseArea(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n\n    if(this.interaction){\n      let moveTo=this.interaction.getLocalPosition(this.game.app.stage);\n      if(collision(moveTo,this.sprite)){\n        if(this.interaction.button===2 || this.holding){\n          if(this.door===true ){\n            let newPos=closestPoint(this.config.Area,moveTo);\n            moveTo=newPos;\n          }else if(this.config.Use!==undefined){\n            this.game.activePuzzle=this.game.puzzles[this.config.Use];\n          }\n          this.use();\n        }else{\n         this.look();\n       }\n      }\n\n      if(this.action!==null){\n        this.game.player.tween.once('end',this.action);\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      if(this.game.player.touched) this.game.player.touched=false;\n      this.holding=false;\n      this.interaction = null;\n      this.touchedPos=null;\n    }\n  }\n\n  //Object touch begins\n  touch(event){\n    if(this.game.activeObject===null && !this.game.player.lock){\n      this.game.activeObject=this;\n      this.action=null;\n      this.posX = this.sprite.x;\n      this.posY = this.sprite.y;\n      this.interaction = event.data;\n      this.sprite.alpha = 0.5;\n      this.dragging = true;\n      if(this.timeoutID) clearTimeout(this.timeoutID);\n      this.timeoutID=setTimeout(this.hold.bind(this), 1000);\n      this.oldParent=this.sprite.parent;\n      this.depthGroup=this.sprite.parentLayer;\n      if(this.sprite.parentLayer !== this.game.layerUI) this.sprite.parentLayer = this.game.layerUI;\n    }\n  }\n\n  //Object is being dragged\n  move(){\n    if (this.dragging && !this.locked) {\n      this.sprite.setParent(this.game.app.stage);\n      var newPosition = this.interaction.getLocalPosition(this.sprite.parent);\n      let bounds=this.sprite.getBounds();\n      //We can only move the object inside the stage\n      if(newPosition.x>bounds.width/2 && newPosition.x<this.game.width-bounds.width/2) this.sprite.x = newPosition.x;\n      if(newPosition.y>bounds.height && newPosition.y<this.game.height) this.sprite.y = newPosition.y;\n    }\n  }\n\n  //Object drag/touch ends\n  release(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n\n    if(this.interaction){\n      let moveTo={x:this.posX,y:this.posY};\n      //Check if we take it\n      if(collision(this.sprite,this.game.inventory.icon) && this.config.Take){\n        this.take();\n        //Check if we look it\n      }else if(this.interaction.button===2  || this.holding){\n        if(this.config.Use!==undefined) this.game.activePuzzle=this.game.puzzles[this.config.Use];\n        this.use();\n      }else{\n        this.look();\n      }\n\n      if(this.action!==null){\n        this.game.player.tween.once('end',this.action);\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      if(this.game.player.touched) this.game.player.touched=false;\n\n      this.sprite.x = this.posX;\n      this.sprite.y = this.posY;\n      this.sprite.alpha = 1;\n      this.sprite.parentLayer = this.depthGroup;\n      this.sprite.setParent(this.oldParent);\n\n      this.holding=false;\n      this.interaction = null;\n      this.dragging = false;\n    }\n  }\n\n  //Set player to look this object\n  look(){\n    this.action=this.game.player.look.bind(this.game.player);\n  }\n\n  //Set player to take this object\n  take(){\n    this.action=this.game.player.take.bind(this.game.player);\n  }\n\n  //Set player to use this object\n  use(){\n    this.action=this.game.player.use.bind(this.game.player);\n  }\n\n  //Check collision between objects\n  hit(){\n    let found=null;\n    let i;\n\n    //First check the collision between active scene's objects\n    let objectsArray=this.game.activeScene.config.Objects;\n\n    for(i=0;i<objectsArray.length;i++){\n      if(collision(this.sprite,this.game.objects[objectsArray[i]].sprite)\n                   && this.config.Name!==objectsArray[i]){\n        found=objectsArray[i];\n        break;\n      }\n    }\n\n    //Check if the collision is between inventory objects\n    objectsArray=this.game.inventory.objects;\n\n    for(i=0;i<objectsArray.length;i++){\n      if(collision(this.sprite,this.game.objects[objectsArray[i]].sprite)\n                   && this.config.Name!==objectsArray[i]){\n        found=objectsArray[i];\n        break;\n      }\n    }\n\n    //Check the collision a character\n    let charsArray=this.game.activeScene.config.Characters;\n\n    for(i=0;i<charsArray.length;i++){\n      if(collision(this.sprite,this.game.npcs[charsArray[i]].sprite)\n                   && this.config.Name!==charsArray[i]){\n        found=charsArray[i];\n        break;\n      }\n    }\n\n    return found;\n  }\n\n  //Object action is canceled or ended\n  cancel(){\n    this.game.activeObject.action=null;\n    this.game.activeObject=null;\n\n  }\n\n  setInteraction(value){\n    this.sprite.interactive=value;\n  }\n\n  //Add the object to a given scene\n  add(scene){\n    this.game.scenes[scene].container.addChild(this.sprite);\n    this.game.scenes[scene].config.Objects.push(this.config.Name);\n  }\n  //Remove objects from game\n  remove(){\n    this.sprite.parent.removeChild(this.sprite);\n\n    //Check if we remove an object which is in an scene\n    let scenesArray=Object.values(this.game.scenes)\n    let i;\n    let scenesLength=scenesArray.length;\n    for(i=0;i<scenesLength;i++){\n      if(scenesArray[i].config.Objects!==undefined && scenesArray[i].config.Objects.includes(this.config.Name)){\n        let tmpIndex=scenesArray[i].config.Objects.indexOf(this.config.Name);\n        scenesArray[i].config.Objects.splice(tmpIndex,1);\n      }\n    }\n\n    //Check if the object to remove is inside the inventory\n    if(this.game.inventory.objects.includes(this.config.Name)){\n      this.game.inventory.remove(this.config.Name)\n    }\n  }\n\n}\n\nexport default GameObject;\n","import {boxesIntersect,collision} from '../collisions.js';\n\nclass Inventory{\n  constructor(){\n      this.container=new PIXI.Container();\n      this.container.visible=false;\n      this.game=null;\n      this.objects=[];\n\n    }\n\n    build(){\n      this.background=new PIXI.Sprite(PIXI.Texture.from(this.game.settings.Inventory.Background));\n      this.background.width=this.game.width/2;\n      this.background.height=this.game.height/2;\n      this.background.parentLayer = this.game.layerUI;\n      this.container.x = (this.game.width - this.background.width) / 2;\n      this.container.y = (this.game.height - this.background.height) / 2;\n      this.border=10;\n      this.icon=new PIXI.Sprite(PIXI.Texture.from(this.game.settings.Inventory.Icon));\n      this.icon.on('pointertap',this.click.bind(this));\n      this.icon.interactive=true;\n      this.icon.buttonMode=true;\n      this.setIcon(this.game.settings.Inventory.Position);\n      this.container.addChild(this.background);\n      this.icon.parentLayer = this.game.layerUI;\n    }\n\n    show(){\n      this.update();\n      this.container.visible=true;\n    }\n\n    hide(){\n      this.container.visible=false;\n\n    }\n\n    showIcon(){\n      this.icon.visible=true;\n    }\n\n    hideIcon(){\n      this.icon.visible=false;\n\n    }\n\n    setIcon(position){\n      if(position==\"bottom-right\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=this.game.height - this.icon.height;\n      }else if(position==\"top-right\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=0;\n      }else if(position==\"top-left\"){\n        this.icon.x=0;\n        this.icon.y=this.game.height - this.icon.height;\n      }else if(position==\"bottom-top\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=0;\n      }\n    }\n\n    click(){\n      if (this.container.visible) this.hide();\n      else if(!this.game.player.lock) this.show();\n    }\n\n    add(name){\n      this.objects.push(name);\n      this.game.objects[name].sprite.setParent(this.container);\n      this.game.objects[name].sprite.parentLayer=this.game.layerUI;\n      this.game.objects[name].sprite.on('pointermove', this.move.bind(this.game.objects[name]))\n                                    .off('pointerup')\n                                    .off('pointerupoutside')\n                                    .on('pointerup',this.release.bind(this.game.objects[name]))\n                                    .on('pointerupoutside',this.release.bind(this.game.objects[name]));\n      this.update();\n    }\n\n    remove(name)\n    {\n      //Check if object is already in inventory\n      if(this.objects.includes(name)){\n        this.objects.splice(this.objects.indexOf(name),1);\n        this.update();\n      }\n    }\n\n    update(){\n      //Inventory is limited to 25 objects\n      let i;\n      let numObjs=this.objects.length;\n      for(i=0;i<numObjs;i++){\n        let tmpObj=this.game.objects[this.objects[i]].sprite;\n\n        let desiredWidth=this.container.width/5-this.container.width*0.05;\n        let desiredHeight=this.container.height/5-this.container.height*0.05;\n        let ratio = Math.min( desiredWidth/tmpObj.width, desiredHeight/tmpObj.height);\n        tmpObj.width*=ratio;\n        tmpObj.height*=ratio;\n\n        tmpObj.x = ((i % 5) * this.container.width/5+this.border-i)+tmpObj.width/2;\n        tmpObj.y = (Math.floor(i / 5) * this.container.height/5+this.border-i)+tmpObj.height;\n        this.container.width=this.background.width;\n        this.container.height=this.background.height;\n      }\n    }\n\n    move(){\n      if(!boxesIntersect(this.sprite,this.game.inventory.container))\n        this.game.inventory.hide();\n    }\n\n    release(event){\n      if(this.timeoutID) clearTimeout(this.timeoutID);\n      \n      if(this.interaction){\n        let objectHit=this.hit();\n\n        let moveTo={x:this.sprite.x,y:this.sprite.y};\n        //Check if we take it\n        if(!this.holding){\n          this.game.player.say(this.config.Description[this.game.activeLanguage])\n        }else if(this.config.Combine!==undefined && objectHit!==null){\n          if(this.config.Combine.With===objectHit) {\n            this.game.activePuzzle=this.game.puzzles[this.config.Combine.Puzzle];\n          }\n          this.use();\n        }\n\n        if(this.action!==null){\n          this.game.player.tween.once('end',this.action);\n          this.game.player.move(moveTo);\n        }else{\n          this.cancel();\n        }\n\n        this.sprite.x = this.posX;\n        this.sprite.y = this.posY;\n        this.sprite.alpha = 1;\n        this.sprite.setParent(this.oldParent);\n\n        this.interaction = null;\n        this.dragging = false;\n        this.holding=false;\n      }\n    }\n}\n\nexport default Inventory;\n","class Puzzle{\n  constructor(){\n    this.solved=false;\n  }\n\n  resolve(){\n    if(this.game.activeObject!==null) this.game.activeObject.cancel();\n\n    if(!this.solved){\n      if(this.config.ModifyObject){\n        let objectMod=this.game.objects[this.config.ModifyObject.Name];\n        if(this.config.ModifyObject.Description!==undefined) objectMod.config.Description=this.config.ModifyObject.Description;\n        if(this.config.ModifyObject.Door!==undefined) this.createDoor(objectMod)\n        if(this.config.ModifyObject.Position!==undefined) objectMod.setpos(this.config.ModifyObject.Position[0],this.config.ModifyObject.Position[1]);\n        if(this.config.ModifyObject.Mirror) objectMod.flip();\n        if(this.config.ModifyObject.Interactive!==undefined) this.setInteraction(this.config.ModifyObject.Interactive);\n        if(this.config.ModifyObject.Texture!==undefined) this.changeTexture(this.config.ModifyObject.Texture);\n        if(this.config.ModifyObject.Combine!==undefined) objectMod.config.Combine=this.config.ModifyObject.Combine;\n        if(this.config.ModifyObject.Lock!==undefined) objectMod.lock=this.config.ModifyObject.Lock;\n      }\n\n      if(this.config.GetObject!==undefined) this.game.inventory.add(this.config.GetObject);\n\n      if(this.config.AddObject!==undefined){\n        let objectAdd=this.game.objects[this.config.AddObject.Name];\n        objectAdd.add(this.config.AddObject.Scene);\n      }\n\n      if(this.config.RemoveObject!==undefined){\n        let objectRemove=this.game.objects[this.config.RemoveObject];\n        objectRemove.remove();\n\n      }\n\n      if(this.config.SetDialogue!==undefined){\n        this.game.npcs[this.config.SetDialogue.Character].config.Dialogue=this.config.SetDialogue.Dialogue;\n      }\n\n      if(this.config.Resolve!==undefined)this.game.puzzles[this.config.Resolve].resolve();\n\n      if(this.config.Say && !this.game.silentMode){\n        this.game.player.say(this.config.Say[this.game.activeLanguage]);\n      }else{\n        this.game.player.stop();\n      }\n\n      this.solved=true;\n\n    }else{\n      this.game.player.stop();\n    }\n\n    this.game.activePuzzle=null;\n  }\n\n  createDoor(target){\n    target.door=true;\n    target.newScene=this.config.ModifyObject.Door.To;\n    target.playerPos=this.config.ModifyObject.Door.Player;\n  }\n}\n\nexport default Puzzle;\n","import dragonBones from 'dragonbones-pixi';\nimport tweenManager from 'k8w-pixi-tween';\nconst dbfactory=dragonBones.dragonBones.PixiFactory.factory;\nimport {checkPath} from '../collisions.js'\n\nclass Character{\n  constructor(){\n    this.game=null;\n    this.state=null;\n    this.lock=false;\n  }\n\n  setup(config){\n    dbfactory.parseDragonBonesData(this.game.files.resources[config.Name+\"Skeleton\"].data);\n    dbfactory.parseTextureAtlasData(this.game.files.resources[config.Name+\"Json\"].data,this.game.files.resources[config.Name+\"Tex\"].texture);\n    this.sprite = dbfactory.buildArmatureDisplay(config.Armature);\n    if(config.Size){\n      this.size=config.Size;\n      this.sprite.scale.set(this.size);\n    }else{\n      this.size=1;\n    }\n    this.tween=PIXI.tweenManager.createTween(this.sprite);\n    this.tween.on('end', this.stop.bind(this));\n    if(config.Animations!=undefined)\n      this.animations=config.Animations;\n    else\n      this.animations={\n        Stand:\"stand\",\n        Walk:\"walk\",\n        Take:\"take\",\n        Use:\"use\",\n        Say:\"speak\"\n      };\n    this.animate(this.animations.Stand);\n    this.state=\"stand\";\n    this.sprite.x=500;\n    this.sprite.y=500;\n    this.sprite.parentLayer = this.game.layer;//Z-order*/\n    this.config=config;\n  }\n\n  hide(){\n    this.sprite.visible=false;\n  }\n\n  show(){\n    this.sprite.visible=true;\n  }\n\n  position(coords){\n    this.sprite.x=coords[0];\n    this.sprite.y=coords[1];\n  }\n\n  move(coords){\n    let obstacles=this.game.activeScene.config.Obstacles;\n    let walkingArea=this.game.activeScene.config.WalkArea;\n    let newPosition=coords;\n    let closestPosition=checkPath(coords,obstacles,walkingArea);\n\n    if(closestPosition){\n      newPosition=closestPosition;\n    }\n\n    let path = new PIXI.tween.TweenPath();\n    let findPath=this.game.activeScene.walkable.findPath(this.sprite.x,this.sprite.y,newPosition.x,newPosition.y,0);\n    if(findPath.length>0){\n      this.tween.stop().clear();\n      this.animate(this.animations.Walk);\n      if(this.sprite.x<newPosition.x) this.sprite.armature.flipX=false;\n      else this.sprite.armature.flipX=true;\n      path.drawShape(new PIXI.Polygon(findPath));\n      this.tween.path=path;\n\n      //Needs improvement\n      let animationTime=Math.abs(this.sprite.x-newPosition.x)*5+Math.abs(this.sprite.y-newPosition.y)*5+findPath.length*100;\n\n      this.tween.time = animationTime;\n      this.tween.speed = 1;\n      this.tween.delay=10;\n      this.tween.start();\n    }\n  }\n\n  update(){\n    PIXI.tweenManager.update();\n    this.scale();\n  }\n\n  scale(){\n    let scaleChar=this.sprite.y/this.game.height*this.size;\n    if(scaleChar<this.game.activeScene.config.Depth) scaleChar=this.game.activeScene.config.Depth;\n    this.sprite.scale.set(scaleChar);\n  }\n\n  stop(){\n    this.animate(this.animations.Stand);\n    this.game.activeState=null;\n    this.lock=false;\n  }\n\n  say(text){\n    this.game.textField.talker=this;\n    //Setup the text to show\n    this.game.textField.setText(text);\n    if(this.config.Color!==undefined) this.game.textField.setColor(Number(this.config.Color));\n    if(this.config.Font!==undefined) this.game.textField.setFont(this.config.Font);\n    else this.game.textField.setFont(this.game.settings.Text.Style.font)\n\n    this.game.textField.show();\n\n    //Animate the character\n    this.animate(this.animations.Say);\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    this.timeoutID=setTimeout(this.game.textField.end.bind(this.game.textField), this.game.textField.timeOut());\n  }\n\n  shutup(){\n    this.animate(this.animations.Stand);\n  }\n\n  animate(animation,times){\n    if(this.sprite.animation.lastAnimationName!==animation)\n      this.sprite.animation.fadeIn(animation,0.25,times);\n  }\n}\n\nexport default Character;\n","import Character from './character.js';\nimport dragonBones from 'dragonbones-pixi';\nconst dbEvents=dragonBones.dragonBones.EventObject;\n\nclass Player extends Character{\n  build(){\n    this.sprite.x=this.game.data.player.Position[0];\n    this.sprite.y=this.game.data.player.Position[1];\n  }\n\n  move(coords){\n    super.move(coords);\n    this.game.activeState=this;\n  }\n\n  say(text){\n    super.say(text);\n    //Lock the player\n    this.lock=true;\n  }\n\n  look(){\n    if(this.game.activeObject!==null){\n      let text=this.game.activeObject.config.Description[this.game.activeLanguage];\n      this.say(text);\n      this.game.activeObject.cancel();\n    }else if(this.game.activeNPC!==null){\n          let text=this.game.activeNPC.config.Description[this.game.activeLanguage];\n          this.say(text);\n          this.game.activeNPC.cancel();\n    }\n  }\n\n  take(){\n    this.lock=true;\n    this.animate(this.animations.Take,1);\n    this.sprite.once(dbEvents.COMPLETE, this.takeEnd, this);\n  }\n\n  takeEnd(){\n    if(this.game.activeObject!==null){\n      let name=this.game.activeObject.config.Name;\n      if(this.game.activeScene!==null){\n        if(this.game.activeScene.config.Objects.includes(name)){\n          let tmpIndex=this.game.activeScene.config.Objects.indexOf(name);\n          this.game.activeScene.config.Objects.splice(tmpIndex,1);\n        }\n      }\n      this.game.inventory.add(name);\n      this.game.activeObject.cancel();\n      this.stop();\n    }\n  }\n\n  use(){\n    this.lock=true;\n    this.animate(this.animations.Use,1);\n    this.sprite.once(dbEvents.COMPLETE, this.useEnd, this);\n  }\n\n  useEnd(){\n    if(this.game.activePuzzle!==null){\n      this.game.activePuzzle.resolve();\n    }else if(this.game.activeObject!==null) {\n      if(this.game.activeObject.door){\n        this.game.setScene(this.game.activeObject.newScene,this.game.activeObject.playerPos);\n        this.stop();\n      }else{\n        this.say(this.game.data.texts.NotUsable[this.game.activeLanguage])\n      }\n      this.game.activeObject.cancel();\n    }\n  }\n\n  talk(){\n    //Player must look in the right direction\n    if(this.sprite.x<this.game.activeNPC.sprite.x){\n      this.sprite.armature.flipX=false;\n      this.game.activeNPC.sprite.armature.flipX=true;\n    }else{\n      this.sprite.armature.flipX=true;\n      this.game.activeNPC.sprite.armature.flipX=false;\n    }\n\n    //Let's talk\n    this.game.activeDialogue.start();\n  }\n\n}\n\nexport default Player;\n","import Character from './character.js';\n\nclass NPC extends Character{\n  build(){\n    this.holding=false;\n    this.pressTimeoutID;\n    this.sprite.interactive=true;\n    this.sprite.buttonMode=true;\n    this.sprite.on('pointerdown', this.touch.bind(this))\n        .on('pointerup', this.release.bind(this))\n        .on('pointerupoutside', this.release.bind(this));\n  }\n\n  hold(){\n    this.holding=true;\n  }\n\n  touch(event){\n    if(this.game.activeNPC===null && !this.game.player.lock){\n      this.game.activeNPC=this;\n      this.action=null;\n      this.interaction = event.data;\n      if(this.pressTimeoutID) clearTimeout(this.pressTimeoutID);\n      this.pressTimeoutID=setTimeout(this.hold.bind(this), this.game.holdTime);\n    }\n  }\n  //Object drag/touch ends\n  release(){\n    if(this.pressTimeoutID) clearTimeout(this.pressTimeoutID);\n    if(this.interaction){\n      let distance=0;\n      if(this.game.player.sprite.x<this.sprite.x) distance=this.sprite.width*-1;\n      else distance=this.sprite.width;\n      let moveTo={x:this.sprite.x+distance,y:this.sprite.y};\n\n      if(this.interaction.button===2  || this.holding){\n        //Check if we talk with the character\n        if(this.config.Dialogue!==undefined){\n          this.game.activeDialogue=this.game.dialogues[this.config.Dialogue];\n          this.action=this.game.player.talk.bind(this.game.player);\n        }\n      }else{\n        this.look();\n      }\n\n      if(this.action!==null){\n        this.game.player.tween.once('end',this.action);\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      if(this.game.player.touched) this.game.player.touched=false;\n\n      this.holding=false;\n      this.interaction = null;\n      this.dragging = false;\n      this.moved=0;\n    }\n  }\n\n  //Set player to look this object\n  look(){\n    this.action=this.game.player.look.bind(this.game.player);\n  }\n\n  //Object action is canceled or ended\n  cancel(){\n    this.game.activeNPC.action=null;\n    this.game.activeNPC=null;\n\n  }\n}\n\nexport default NPC;\n","import {Button} from './text.js'\n\n//Branches dialogue system\nclass Dialogue{\n  constructor(){\n    this.timeoutID=null;\n    this.firstTime=true;\n    this.choice=null;\n    this.branches={};\n  }\n\n  setup(config){\n    this.config=config;\n\n    //Get dialogue branches\n    let i;\n    length=this.config.Branches.length;\n    for(i=0;i<length;i++)\n    {\n      this.branches[this.config.Branches[i].Name]=this.config.Branches[i];\n    }\n\n    this.currentBranch=this.branches[this.config.DefaultBranch];\n  }\n\n  //Executed when we interact with a NPC\n  start(){\n    this.firstTime=false;\n    this.game.player.lock=true;\n    this.game.textField.show();\n    this.game.textField.Choices.get();\n  }\n\n  //Executed everytime we choose an option\n  next(){\n    if(this.choice!==null){\n      let choiceSelected=this.currentBranch.Choices[this.choice];\n      this.game.textField.Choices.hide();\n      this.game.player.say(choiceSelected.Text[this.game.activeLanguage]);\n    }else{\n      this.game.textField.Choices.get();\n    }\n  }\n\n  //Search for a branch with a given name\n  searchBranch(name){\n    let branchFound=-1;\n    let i;\n    let length=this.config.Branches.length\n    for(i=0;i<length;i++)\n         if(this.config.Branches[i].Name==name)\n         {\n             branchFound=i;\n             break;\n         }\n    return branchFound;\n  }\n\n  answer(){\n    let choiceSelected=this.currentBranch.Choices[this.choice];\n    this.game.activeNPC.say(choiceSelected.Answer[this.game.activeLanguage]);\n\n    if(choiceSelected.Link){\n      this.currentBranch=this.branches[choiceSelected.Link];\n    }else if(choiceSelected.Puzzle){\n      choiceSelected.Repeat=false;\n      this.end();\n      this.game.puzzles[choiceSelected.Puzzle].resolve();\n    }else if(choiceSelected.EndDialogue){\n      this.end();\n    }\n\n\n    this.choice=null;\n  }\n\n  //Ends the conversations\n  end(){\n    this.game.activeNPC=null;\n    this.game.activeDialogue=null;\n  }\n\n  timeOut(){\n    this.next();\n  }\n}\n\nexport default Dialogue;\n","import * as PIXI from 'pixi.js';\nimport 'pixi-sound';\nimport 'pixi-layers';\n\nimport Loader from './loader.js';\nimport Storage from './storage.js';\nimport Title from './class/title.js';\nimport GameScene from './class/gamescene.js';\nimport CutScene from './class/cutscene.js';\nimport GameObject from './class/gameobject.js';\nimport Inventory from './class/inventory.js';\nimport Puzzle from './class/puzzle.js';\nimport {TextField} from './class/text.js';\nimport Player from './class/player.js';\nimport NPC from './class/npc.js';\nimport Dialogue from './class/dialogue.js';\n\nclass Game {\n  constructor(config){\n    this.settings={};\n    this.data={\n      scenes:[],\n      cutscenes:[],\n      objects:[],\n      dialogues:[],\n      puzzles:[],\n      credits:[],\n      texts:[]\n    };\n    this.width=config.width;\n    this.height=config.height;\n    this.holdTime=500;\n    this.playSounds = true;\n\n    //Setup the application\n    this.app = new PIXI.Application(\n      config.width,config.height,{\n      antialias: true,\n      autoResize: true,\n      resolution: devicePixelRatio\n    });\n\n    this.app.stage = new PIXI.display.Stage();\n\n    //Change game size when window size changes\n    if(config.autoResize!==undefined) this.app.renderer.autoResize=config.autoResize;\n    else window.addEventListener('resize', this.resize.bind(this));\n\n    //Disable contextmenu for mouse interaction\n    document.addEventListener('contextmenu', e => {\n       e.preventDefault();\n    });\n\n    //We append it to a HTML element or Document body\n    if(config.parent){\n      document.getElementById(config.parent).appendChild(this.app.view)\n    }else{\n      document.body.appendChild(this.app.view);\n    }\n\n    //Load config files\n    this.preload(config.files);\n  }\n\n  //Read JSON configuration files\n  preload(files){\n    //Text to show progress\n    this.progressBar=new PIXI.Graphics();\n    this.progressBar.beginFill(0xDE3249);\n    this.progressBar.drawRect(0, 0, this.width, this.height/50);\n    this.progressBar.endFill();\n    this.progressBar.width=0;\n\n    this.loadingTxt=new PIXI.Text(\"Loading...\", {fill: 'white',\"fontSize\": 50});\n    this.loadingTxt.anchor.set(0.5);\n    this.loadingTxt.x=this.width/2;\n    this.loadingTxt.y=this.height/2;\n\n    this.progressBar.y=this.height/2+this.loadingTxt.height;\n\n    this.app.stage.addChild(this.loadingTxt);\n    this.app.stage.addChild(this.progressBar);\nthis.resize();\n    this.jsons=new Loader();\n    this.jsons.game=this;\n    this.jsons.addJSON(files);\n    this.jsons.load(this.load.bind(this)); //When all config files are loaded, load the game resources.\n  }\n\n  //Load game resources (images,sounds,vids...)\n  load(){\n    this.files=new Loader();\n    this.files.game=this;\n    this.files.addFiles(Object.values(this.jsons.resources));\n    this.files.load(this.setup.bind(this));\n  }\n\n  setup(){\n    this.app.stage.removeChild(this.loadingTxt);\n    this.app.stage.removeChild(this.progressBar);\n\n    //Z-Order\n    this.addZOrder();\n\n    //Adjust to window size\n    this.resize();\n\n    this.scenes={};\n    this.cutscenes={};\n    this.objects={};\n    this.npcs={};\n    this.dialogues={};\n    this.puzzles={};\n\n    this.activeLanguage=0;\n    this.activeScene=null;\n    this.activeObject=null;\n    this.activeNPC=null;\n    this.activePuzzle=null;\n    this.activeDialogue=null;\n\n    this.activeState=null;\n\n    this.storage=new Storage(this);\n\n\n    if(this.settings.HoldTime!==undefined) this.holdTime=this.settings.HoldTime*1000;\n    //Setup title screen\n    this.addScene(\"Title\",new Title(),this.settings.TitleScreen);\n\n    //Add game objects\n    let i;\n    let length=this.data.objects.length;\n    for(i=0;i<length;i++)\n    {\n      this.addObject(this.data.objects[i].Name,new GameObject(),this.data.objects[i]);\n    }\n\n    //Non-playable characters\n    length=this.data.npc.length;\n    for(i=0;i<length;i++)\n    {\n      this.addNPC(this.data.npc[i].Name,new NPC(),this.data.npc[i]);\n    }\n\n    //Dialogues\n    length=this.data.dialogues.length;\n    for(i=0;i<length;i++)\n    {\n      this.addDialogue(this.data.dialogues[i].Name,new Dialogue(),this.data.dialogues[i]);\n    }\n\n    //Add game scenes\n    length=this.data.scenes.length;\n    for(i=0;i<length;i++)\n    {\n      this.addScene(this.data.scenes[i].Name,new GameScene(),this.data.scenes[i]);\n    }\n\n    //Add cutscenes\n    length=this.data.cutscenes.length;\n    for(i=0;i<length;i++)\n    {\n      this.addCutscene(this.data.cutscenes[i].Name,new CutScene(),this.data.cutscenes[i]);\n    }\n\n    //Puzzles\n    length=this.data.puzzles.length;\n    for(i=0;i<length;i++)\n    {\n      this.addPuzzle(this.data.puzzles[i].Name,new Puzzle(),this.data.puzzles[i]);\n    }\n\n    //Add Inventory\n    this.addInventory();\n\n    //Add text field\n    this.addTextField();\n\n    //Add player\n    this.addPlayer();\n\n    //Check if there is a saved game\n    this.storage.check();\n\n    //Set Title as the first scene to show\n    this.setScene(\"Title\");\n\n    //Game's loop\n    this.app.ticker.add(this.loop.bind(this));\n  }\n\n  loop(dt){\n  //  console.log(this.player.lock) //Test\n    //console.log(this.activeObject); //Test\n    // update current state\n    if (this.activeState != null) {\n        this.activeState.update(dt);\n    }\n  }\n\n  addObject(name, object, config) {\n      this.objects[name] = object;\n\n      //Config the object\n      object.config=config;\n\n      //Set game so object can access it\n      object.game = this;\n\n      //Build object\n      object.build();\n  }\n\n  addScene(name, scene, config) {\n      this.scenes[name] = scene;\n\n      //Config the scene\n      scene.setup(config);\n\n      //Set game so scene can access it\n      scene.game = this;\n\n      //Build scene\n      scene.build();\n  }\n\n  addCutscene(name, cutscene, config) {\n      this.cutscenes[name] = cutscene;\n\n      //Config the scene\n      cutscene.config=config;\n\n      //Set game so scene can access it\n      cutscene.game = this;\n\n      //Build scene\n      cutscene.build();\n  }\n\n  addPuzzle(name, puzzle, config) {\n      this.puzzles[name] = puzzle;\n\n      //Puzzle's config\n      puzzle.config=config;\n\n      //Set game so puzzle can access it\n      puzzle.game = this;\n  }\n\n  setScene(name,playerCoords) {\n\n      //Remove current container\n      if (this.activeScene !== null) {\n          this.app.stage.removeChild(this.activeScene.container);\n      }\n\n      //Set current container\n      this.activeScene = this.scenes[name];\n      //Add our new container\n      this.app.stage.addChild(this.activeScene.container);\n\n      if(playerCoords!==undefined){\n        this.player.sprite.x=playerCoords[0];\n        this.player.sprite.y=playerCoords[1];\n      }\n\n      if(this.activeScene.config.Player!==undefined){\n        if(this.activeScene.config.Player.Position!==undefined){\n          this.player.position(this.activeScene.config.Player.Position);\n        }\n        if(this.activeScene.config.Player.Size!==undefined){\n          this.player.size=this.activeScene.config.Player.Size;\n          this.player.scale();\n        }\n      }\n\n      if(this.activeScene.config.CutScene!==undefined){\n        if(!this.cutscenes[this.activeScene.config.CutScene].played){\n          this.cutscenes[this.activeScene.config.CutScene].show();\n        }\n      }else{\n        // Play sounds\n        if(this.activeScene.music!==undefined && this.playSounds){\n          PIXI.sound.stopAll();\n          if(PIXI.sound.exists(this.activeScene.music))\n            PIXI.sound.play(this.activeScene.music,{loop:true});\n        }\n      }\n\n      //Save game progress\n      if(this.activeScene!==this.scenes[\"Title\"])\n        this.storage.save();\n\n  }\n\n  addZOrder(){\n    this.BottomGroup= new PIXI.display.Group(0,false);\n    this.sortGroup= new PIXI.display.Group(1, true);\n    this.sortGroup.on('sort', function (sprite) {\n      sprite.zOrder = -sprite.y;\n    });\n    this.TopGroup = new PIXI.display.Group(2,false);\n    this.UIGroup = new PIXI.display.Group(3,false);\n\n    this.layerBottom=new PIXI.display.Layer(this.BottomGroup);\n    this.layer=new PIXI.display.Layer(this.sortGroup);\n    this.layerTop=new PIXI.display.Layer(this.TopGroup);\n    this.layerUI=new PIXI.display.Layer(this.UIGroup);\n\n    this.app.stage.group.enableSort = true;\n    this.app.stage.addChild(this.layerBottom);//Z-order\n    this.app.stage.addChild(this.layer);//Z-order\n    this.app.stage.addChild(this.layerTop);//Z-order\n    this.app.stage.addChild(this.layerUI);//Z-order\n  }\n\n  addInventory(){\n    this.inventory=new Inventory();\n    this.inventory.game=this;\n    this.inventory.build();\n  }\n\n  addPlayer(){\n    this.player=new Player();\n    this.player.game=this;\n    this.data.player.Name=\"player\";\n    this.player.setup(this.data.player);\n    this.player.build();\n  }\n\n  addNPC(name, char, config){\n    this.npcs[name] = char;\n\n    char.game = this;\n\n    char.setup(config);\n\n    char.build();\n  }\n\n  addDialogue(name, dialogue, config){\n    this.dialogues[name] = dialogue;\n\n    dialogue.game = this;\n\n    dialogue.setup(config);\n  }\n\n  addTextField(){\n    this.textField=new TextField();\n    this.textField.game=this;\n    this.textField.build();\n  }\n\n  //Adjust game screen to the window\n  resize() {\n    var w = window.innerWidth;// * window.devicePixelRatio;\n    var h = window.innerHeight;// * window.devicePixelRatio;\n    var ratio = Math.min( w/this.width,  h/this.height);\n    this.app.renderer.resize(this.width*ratio,this.height*ratio);\n    this.app.stage.scale.set(ratio);\n\n  }\n\n  //The magic begins\n  start(){\n    //Show Inventory\n    this.app.stage.addChild(this.inventory.container);\n    this.app.stage.addChild(this.inventory.icon);\n\n    //Show Player\n    this.app.stage.addChild(this.player.sprite);\n\n    //Add Text Field\n    this.app.stage.addChild(this.textField.container);\n  }\n\n\n}\n\nexport default Game;\n","import Game from './game';\n\nconsole.log(\"JSGAM 5.0.0 https://github.com/kreezii/jsgam\");\n\n//export default Game;\nexport default Game;\n"],"names":["Loader","constructor","game","onLoad","add","this","update","bind","onError","error","addJSON","files","i","arrayLength","length","name","slice","lastIndexOf","addFiles","data","Settings","settings","Scenes","scenes","concat","Cutscenes","cutscenes","Objects","objects","Dialogues","dialogues","Puzzles","puzzles","Credits","credits","Texts","texts","Sounds","soundSrc","j","tmpSound","Src","Name","Vids","fixVidLoad","vidSrc","tmpVid","Animations","animSrc","tmpAnim","Backgrounds","bgSrc","tmpBg","Player","Texture","Json","Skeleton","player","Characters","npcSrc","npc","PIXI","sound","utils","extensions","splice","indexOf","loaders","Resource","setExtensionXhrType","undefined","setExtensionLoadType","LOAD_TYPE","VIDEO","percent","Math","floor","progress","progressBar","width","resource","console","log","Storage","save","puzzlesSolved","Object","values","forEach","puzzle","solved","includes","config","push","dialoguesDisabled","dialogue","branches","branch","Choices","choice","index","disabled","Dialogue","Branch","cutscenesPlayed","cutscene","played","language","activeLanguage","activeScene","sprite","x","y","inventory","setItem","load","disable","Index","silentMode","resolve","item","thisItem","scene","tmpIndex","playerPos","delete","localForage","clear","check","storage","getItem","then","value","changeLanguage","states","enable","catch","err","Scene","container","Container","setup","background","Sprite","from","Background","anchor","set","addChild","Foreground","foreground","music","Music","dt","hide","visible","show","Button","text","style","interactive","buttonMode","extras","BitmapText","Infotxt","Phrases","option","let","Text","ButtonStyle","on","onTap","height","activeChoice","activeDialogue","currentBranch","alpha","Repeat","next","get","options","sort","parent","scale","center","ratio","min","pivot","TextField","build","parentLayer","layerUI","WHITE","size","Size","tint","Style","skip","Position","setPosition","end","talker","shutup","answer","setText","stop","activeObject","cancel","clearTimeout","timeoutID","position","newText","adjustText","countWords","str","split","timeOut","time","Speed","setColor","colour","setFont","newFont","font","Menu","buttons","addButton","modify","arrayButtons","resize","MainMenu","create","gameTexts","NewGame","Continue","Options","Help","languages","Languages","addLanguage","setLanguage","Back","father","change","mainMenu","texture","buildText","structuredText","tween","tweenManager","createTween","to","expire","delay","start","reset","Lines","Title","Confirmation","addText","Warning","Yes","No","addState","addAction","showOptions","showHelp","showCredits","checkAdventure","loadAdventure","newAdventure","button","action","state","activeState","warning","setScene","FirstScene","latestScene","GameScene","layerTop","layerBottom","getPosition","walkable","Walkable","WalkArea","addPolygon","Obstacles","obstacles","sceneObjects","sceneChars","npcs","event","coord","getLocalPosition","app","stage","lock","move","getPath","fromX","fromY","toX","toY","findPath","CutScene","sequenceIndex","boxesIntersect","a","b","ab","getBounds","bb","collision","result","hitArea","PolyK","points","Video","videoData","resources","videoEnds","addEventListener","Sequence","image","Image","field","adjust","videoTexture","videoSprite","setTimeout","Time","hideIcon","exists","pause","removeChild","removeEventListener","stopAll","showIcon","play","containerDimension","playSounds","GameObject","Description","NoDescription","Area","EMPTY","Polygon","Animation","spritesheet","frames","_frameKeys","AnimatedSprite","animationSpeed","Mirror","flip","Layer","layer","Door","door","newScene","To","holding","Lock","locked","touchArea","releaseArea","touch","release","Interactive","setInteraction","setpos","changeTexture","hold","interaction","holdTime","touchedPos","moveTo","area","coords","coordX","round","coordY","changePosition","closestedge","point","norm","Use","activePuzzle","use","look","once","touched","posX","posY","dragging","oldParent","depthGroup","setParent","newPosition","bounds","icon","Take","take","hit","found","objectsArray","charsArray","remove","scenesArray","scenesLength","Inventory","border","Icon","click","setIcon","off","numObjs","tmpObj","objectHit","Combine","With","Puzzle","say","ModifyObject","objectMod","createDoor","GetObject","AddObject","RemoveObject","SetDialogue","Character","Resolve","Say","target","const","dbfactory","dragonBones","PixiFactory","factory","parseDragonBonesData","parseTextureAtlasData","buildArmatureDisplay","Armature","animations","animate","Stand","closestPosition","obstaclesPolys","walkPoly","newPos","checkPath","path","TweenPath","Walk","armature","flipX","drawShape","animationTime","abs","speed","scaleChar","Depth","textField","Color","Number","Font","animation","times","lastAnimationName","fadeIn","dbEvents","EventObject","activeNPC","COMPLETE","takeEnd","useEnd","NotUsable","talk","NPC","pressTimeoutID","moved","firstTime","Branches","DefaultBranch","choiceSelected","searchBranch","branchFound","Answer","Link","EndDialogue","Game","devicePixelRatio","Stage","autoResize","renderer","window","e","preventDefault","document","getElementById","appendChild","view","body","preload","beginFill","drawRect","endFill","loadingTxt","jsons","addZOrder","HoldTime","addScene","TitleScreen","addObject","addNPC","addDialogue","addCutscene","addPuzzle","addInventory","addTextField","addPlayer","ticker","loop","object","playerCoords","BottomGroup","Group","sortGroup","zOrder","TopGroup","UIGroup","group","enableSort","char","w","innerWidth","h","innerHeight"],"mappings":"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"}