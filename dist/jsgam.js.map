{"version":3,"file":"jsgam.js","sources":["../src/loader.js","../src/class/scene.js","../src/class/text.js","../src/class/menu.js","../src/class/mainmenu.js","../src/class/options.js","../src/class/help.js","../src/class/credits.js","../src/class/title.js","../src/class/gamescene.js","../src/class/cutscene.js","../src/collisions.js","../src/class/gameobject.js","../src/class/inventory.js","../src/class/puzzle.js","../src/class/character.js","../src/class/player.js","../src/class/npc.js","../src/class/dialogue.js","../src/game.js","../src/index.js"],"sourcesContent":["\n\nclass Loader extends PIXI.loaders.Loader{\n  constructor(){\n    super();\n    this.game=null;\n    this.onLoad.add(this.update.bind(this));\n    this.onError.add(this.error.bind(this));\n  }\n\n  //Add config files to loader\n  addJSON(files){\n    let i;\n    let arrayLength=files.length;\n\n    for(i=0;i<arrayLength;i++){\n      let name=files[i].slice(files[i].lastIndexOf(\"/\")+1,files[i].lastIndexOf(\".\"));\n      this.add(name,files[i]);\n    }\n  }\n\n  //Add resource files to loader and settings to game\n  addFiles(files){\n    let i;\n    let length=files.length\n    for(i=0;i<length;i++){\n      //Add config files to setup the game\n      if(files[i].data.Settings) this.game.settings=files[i].data.Settings;\n      if(files[i].data.Scenes) this.game.data.scenes=files[i].data.Scenes;\n      if(files[i].data.Cutscenes) this.game.data.cutscenes=files[i].data.Cutscenes;\n      if(files[i].data.Objects) this.game.data.objects=files[i].data.Objects;\n      if(files[i].data.Dialogues) this.game.data.dialogues=files[i].data.Dialogues;\n      if(files[i].data.Puzzles) this.game.data.puzzles=files[i].data.Puzzles;\n      if(files[i].data.Credits) this.game.data.credits=files[i].data.Credits;\n      if(files[i].data.Texts) this.game.data.texts=files[i].data.Texts;\n\n      //Look for sound files\n      if(files[i].data.Sounds){\n        let soundSrc=files[i].data.Sounds;\n        for(let j=0;j<soundSrc.length;j++){\n           let tmpSound=soundSrc[j].Src;\n           if(tmpSound!==null) this.add(soundSrc[j].Name,tmpSound);\n        }\n       }\n\n       //Look for video files\n       if(files[i].data.Vids)\n       {\n         //Fix for load correctly vids with pixi-sound\n         this.fixVidLoad();\n         let vidSrc=files[i].data.Vids;\n         for(let i=0;i<vidSrc.length;i++){\n           let tmpVid=vidSrc[i].Src;\n           if(tmpVid!==null) this.add(vidSrc[i].Name,tmpVid);\n         }\n       }\n\n       //Load Animations\n       if(files[i].data.Animations)\n       {\n         let animSrc=files[i].data.Animations;\n         for(let i=0;i<animSrc.length;i++){\n           let tmpAnim=animSrc[i].Src;\n           if(tmpAnim!==null) this.add(animSrc[i].Name,tmpAnim);\n         }\n       }\n\n       //Load Backgrounds if don't use texture atlas for backgrounds\n       if(files[i].data.Backgrounds){\n         let bgSrc=files[i].data.Animations;\n         for(let i=0;i<bgSrc.length;i++){\n           let tmpBg=bgSrc[i].Src;\n           if(tmpBg!==null) this.add(bgSrc[i].Name,tmpBg);\n         }\n       }\n\n       //Look for player files\n       if(files[i].data.Player){\n         this.add('playerTex', files[i].data.Player.Texture)\n             .add('playerJson', files[i].data.Player.Json)\n             .add('playerSkeleton', files[i].data.Player.Skeleton);\n         this.game.data.player=files[i].data.Player;\n       }\n\n       //Look for NPC files\n       if(files[i].data.Characters){\n         let npcSrc=files[i].data.Characters;\n         for(let i=0;i<npcSrc.length;i++){\n            this.add(npcSrc[i].Name+\"Tex\", npcSrc[i].Texture)\n            .add(npcSrc[i].Name+'Json', npcSrc[i].Json)\n            .add(npcSrc[i].Name+'Skeleton', npcSrc[i].Skeleton);\n          }\n          this.game.data.npc=files[i].data.Characters;\n        }\n    }\n  }\n\n  //Fix for load mp4 as videos instead as audio because of pixi-sound\n  fixVidLoad(){\n    PIXI.sound.utils.extensions.splice(PIXI.sound.utils.extensions.indexOf('mp4'), 1);\n    PIXI.loaders.Resource.setExtensionXhrType('mp4', undefined);\n    PIXI.loaders.Resource.setExtensionLoadType('mp4', PIXI.loaders.Resource.LOAD_TYPE.VIDEO);\n  }\n\n  //Loading progress\n  update(){\n    let percent=Math.floor(this.progress);\n    this.game.progressBar.width=(this.game.width/100)*percent;\n    //this.game.loadingTxt.text=\"Loading... \"+ percent+\"%\";\n  }\n\n  //File failed to load\n  error(resource){\n    console.log(resource);\n  }\n\n}\n\nexport default Loader;\n","class Scene{\n  constructor(){\n    this.container = new PIXI.Container();\n    this.game=null;\n  }\n\n  setup(config){\n    this.background=new PIXI.Sprite(PIXI.Texture.from(config.Background));\n    this.background.anchor.set(0);\n    this.container.addChild(this.background);\n    this.music=config.Music;\n    this.config=config;\n  }\n\n  update(dt) {\n\n  }\n  hide(){\n    this.container.visible=false;\n  }\n  \n  show(){\n    this.container.visible=true;\n  }\n}\n\nexport default Scene;\n","class Button extends PIXI.extras.BitmapText{\n    constructor(text,style){\n      super(text,style);\n      this.interactive=true;\n      this.buttonMode=true;\n    }\n}\n\nclass Phrases{\n  constructor(config){\n    this.container=new PIXI.Container();\n    this.hide();\n    this.game=config;\n    this.option=[];\n\n    for(let i=0;i<3;i++){\n      this.option[i]=new Button(\"Option\",this.game.settings.Text.ButtonStyle);\n      this.option[i].game=this.game;\n      this.option[i].on('pointertap', this.onTap.bind(this.option[i]));\n      this.option[i].index=i;\n      this.container.addChild(this.option[i]);\n      if(i>0)this.option[i].y=this.option[i-1].y+this.option[i-1].height;\n    }\n  }\n\n  show(){\n    this.sort();\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  onTap(){\n    let activeChoice=this.game.activeDialogue.currentBranch.Choices;\n\n    if(this.alpha==1){\n      this.game.activeDialogue.choice=this.index;\n      activeChoice[this.index].clicked=true;\n      this.game.activeDialogue.next();\n    }\n  }\n\n  get(){\n    this.clear();\n    let options=this.game.activeDialogue.currentBranch.Choices;\n    for(let i=0;i<options.length;i++){\n      if(options[i].clicked && options[i].Repeat==false){\n        this.option[i].alpha=0.5;\n      }else this.option[i].alpha=1;\n      this.option[i].visible=true;\n      this.option[i].text=options[i].Text[this.game.activeLanguage];\n    }\n    this.show();\n  }\n\n  clear(){\n    for(let i=0;i<this.option.length;i++){\n      this.option[i].visible=false;\n    }\n  }\n\n  sort(){\n    for(let i=0;i<this.option.length;i++){\n      this.option[i].anchor.set(0.5,0);\n      this.option[i].x=this.game.width/2;\n    }\n    if(this.container.width>this.container.parent.width || this.container.height>this.container.parent.height){\n      this.scale();\n    }\n  }\n\n  scale(){\n    let ratio = Math.min( this.container.parent.width/this.container.width,  this.container.parent.height/this.container.height);\n    this.container.scale.set(ratio*0.95);\n    this.container.x=this.container.width;\n  }\n}\n\nclass TextField{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.Background=null;\n    this.Text=null;\n    this.container.visible=false;\n  }\n\n  build(){\n    this.container.parentLayer = this.game.layerUI;\n    this.Background=new PIXI.Sprite(PIXI.Texture.WHITE);\n\n    let size=4;\n    if(this.game.settings.Text.Size!==undefined){\n      if(this.game.settings.Text.Size===\"fourth\") size=4;\n      else if(this.game.settings.Text.Size===\"half\") size=2;\n    }\n    this.Background.width=this.game.width;\n    this.Background.height=this.game.height/size;\n\n    this.Background.tint='black';\n    this.Background.alpha=0.5;\n\n    this.Text=new Button(\"\", this.game.settings.Text.Style);\n    this.Text.anchor.set(0.5,0);\n    this.Text.x=this.game.width/2;\n    this.Text.y=0;\n    this.Text.on('pointertap',this.skip.bind(this));\n\n    this.Choices=new Phrases(this.game);\n\n    this.container.addChild(this.Background);\n    this.container.addChild(this.Text);\n    this.container.addChild(this.Choices.container);\n\n    if(this.game.settings.Text.Position!==undefined) this.setPosition(this.game.settings.Text.Position);\n  }\n\n  show(){\n    this.Text.visible=true;\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  end(){\n    if(this.game.activeDialogue!==null){\n      this.talker.shutup();\n      if(this.game.activeDialogue.choice!==null) this.game.activeDialogue.answer();\n      else{\n        this.Text.visible=false;\n        this.Choices.get();\n      }\n\n    }else{\n      this.setText(\"\");\n      this.hide();\n      this.talker.shutup();\n      this.game.player.stop();\n    }\n  }\n\n  skip(){\n    this.end();\n    if(this.talker) clearTimeout(this.talker.timeoutID);\n  }\n\n  setPosition(position){\n    if(position===\"top\"){\n      this.container.x=0;\n      this.container.y=0;\n    }else if(position===\"bottom\"){\n      this.container.x=0;\n      this.container.y=this.game.height-this.container.height;\n    }\n  }\n\n  setText(newText){\n    this.Text.text=newText;\n    if(this.Text.width>this.container.width || this.Text.height>this.container.height){\n      this.adjustText();\n    }\n  }\n\n  adjustText(){\n    let ratio = Math.min( this.container.width/this.Text.width,  this.container.height/this.Text.height);\n    this.container.scale.set(ratio*0.95);\n  }\n\n  //Get words number of the text\n  countWords(str) {\n   return str.split(\" \").length;\n  }\n\n  //Calculate how many seconds we show the text\n  timeOut(){\n    let time;\n    if(this.game.settings.Text.Speed!==undefined) time=this.game.settings.Text.Speed;\n    else time=this.countWords(this.Text.text)/3;\n\n    //Time must be at least 1 second\n    if(time<1) time=1;\n\n    return time*1000;\n  }\n\n  setColor(colour){\n    this.Text.tint=colour;\n  }\n}\n\nexport {Button,TextField};\n","import {Button} from './text.js'\n\nclass Menu{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.game=null;\n    this.buttons={};\n    }\n\n  addButton(name,text){\n    this.buttons[name]=new Button(text[this.game.activeLanguage],this.game.settings.Text.ButtonStyle);\n    this.container.addChild(this.buttons[name]);\n  }\n\n  modify(name,text){\n    this.buttons[name].text=text[this.game.activeLanguage];\n  }\n\n  disable(name){\n    this.buttons[name].alpha=0.5;\n    this.buttons[name].interactive=false;\n  }\n\n  enable(name){\n    this.buttons[name].alpha=1.0;\n    this.buttons[name].interactive=true;\n  }\n\n  sort(){\n    let i;\n    let arrayButtons=Object.values(this.buttons);\n    let length=arrayButtons.length;\n    arrayButtons[0].y=0;\n    for(i=1;i<length;i++)\n    {\n      arrayButtons[i].y=arrayButtons[i-1].y+arrayButtons[i-1].height*1.5;\n      arrayButtons[i].x=this.container.width/2-arrayButtons[i].width/2;\n    }\n\n    this.center();\n  //  this.resize();\n  }\n\n  resize(){\n    let ratio = Math.min( this.game.width/this.container.width,  this.game.height/this.container.height);\n    //console.log(ratio)\n    this.container.scale.set(ratio*0.95);\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n\n}\nexport default Menu;\n","import Menu from './menu.js';\n\nclass MainMenu extends Menu{\n  create(){\n      let gameTexts=this.game.data.texts;\n      this.addButton(\"New\",gameTexts.NewGame);\n      this.addButton(\"Continue\",gameTexts.Continue);\n      this.addButton(\"Options\",gameTexts.Options);\n      this.addButton(\"Help\",gameTexts.Help);\n      this.addButton(\"Credits\",gameTexts.Credits);\n\n      this.disable(\"Continue\");\n\n      this.sort();\n    }\n\n  changeLanguage(){\n    this.modify(\"New\",this.game.data.texts.NewGame);\n    this.modify(\"Continue\",this.game.data.texts.Continue);\n    this.modify(\"Options\",this.game.data.texts.Options);\n    this.modify(\"Help\",this.game.data.texts.Help);\n    this.modify(\"Credits\",this.game.data.texts.Credits);\n\n    this.sort();\n  }\n\n}\nexport default MainMenu;\n","import Menu from './menu.js';\nimport {Button} from './text.js';\n\nclass Options extends Menu{\n  create(){\n    this.container.visible=false;\n    let languages=this.game.settings.Languages\n    for(let i=0;i<languages.length;i++){\n      this.addLanguage(languages[i],);\n      this.buttons[languages[i]].on('pointerup', this.setLanguage);\n    }\n\n    let langArray=Object.values(this.buttons);\n    langArray[this.game.activeLanguage].tint=0xFF0000;\n\n    this.addButton(\"Back\",this.game.data.texts.Back);\n    this.sort();\n  }\n\n  addLanguage(name){\n    this.buttons[name]=new Button(name,this.game.settings.Text.ButtonStyle);\n    this.buttons[name].father=this;\n    this.container.addChild(this.buttons[name]);\n  }\n\n  setLanguage(){\n    this.father.change(this.text);\n  }\n\n  change(text){\n    let languages=this.game.settings.Languages\n    this.buttons[languages[this.game.activeLanguage]].tint=0xFFFFFF;\n    this.game.activeLanguage=this.game.settings.Languages.indexOf(text);\n    this.buttons[languages[this.game.activeLanguage]].tint=0xFF0000;\n    this.modify(\"Back\",this.game.data.texts.Back);\n    this.sort();\n  }\n\n}\nexport default Options;\n","\nimport tweenManager from 'k8w-pixi-tween';\n\nclass Help{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.container.visible=false;\n    this.container.interactive=true;\n    this.container.buttonMode=true;\n    }\n\n  create(){\n    let config=this.game.settings;\n\n    this.background=new PIXI.Sprite(PIXI.Texture.from(config.Help[this.game.activeLanguage]));\n    this.container.addChild(this.background);\n    this.center();\n    this.container.on('pointerup', this.mainMenu.bind(this));\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  changeLanguage(){\n    this.background.texture=PIXI.Texture.from(this.game.settings.Help[this.game.activeLanguage]);\n    this.center();\n  }\n  \n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n}\n\nexport default Help;\n","\nimport tweenManager from 'k8w-pixi-tween';\n\nclass Credits{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.container.visible=false;\n    this.container.interactive=true;\n    this.container.buttonMode=true;\n    }\n\n  create(){\n    let config=this.game.data.credits;\n\n    if(config.Background!==undefined) this.background=new PIXI.Sprite(PIXI.Texture.from(config.Background));\n\n    this.buildText();\n\n    this.structuredText = new PIXI.extras.BitmapText(this.text,config.Style);\n\n    this.container.addChild(this.structuredText);\n\n    this.container.x = this.game.width / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.y=this.game.height;\n    this.tween = PIXI.tweenManager.createTween(this.container);\n    this.tween\n      .from({ y: this.game.height})\n      .to({ y: 0 - this.container.height});\n    this.tween.time = 20000;\n    this.tween.expire=true;\n    this.tween.delay=500;\n    this.tween.on(\"end\", this.mainMenu.bind(this));\n\n    this.container.on('pointerup', this.mainMenu.bind(this));\n  }\n\n  show(){\n    this.container.visible=true;\n    this.tween.start();\n  }\n\n  hide(){\n    this.tween.stop().reset();\n    this.container.visible=false;\n  }\n\n\n  buildText(){\n    let credits=this.game.data.credits;\n\n    this.text=\"\";\n    let i;\n    for (i=0; i < credits.Lines.length; i++) {\n    this.text += credits.Lines[i].Title[this.game.activeLanguage];\n    this.text += \"\\n\";\n    let j;\n\n    for (j = 0; j < credits.Lines[i].Text.length; j++) {\n      this.text += credits.Lines[i].Text[j];\n      this.text += \"\\n\";\n    }\n    this.text += \"\\n\";\n    }\n  }\n\n  update(){\n    PIXI.tweenManager.update();\n  }\n\n  changeLanguage(){\n    this.buildText();\n    this.structuredText.text=this.text;\n  }\n\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n}\n\nexport default Credits;\n","import Scene from './scene.js';\nimport MainMenu from './mainmenu.js'\nimport Options from './options.js'\nimport Help from './help.js'\nimport Credits from './credits.js'\n\nimport 'pixi-sound';\n\nclass Title extends Scene{\n  build(){\n    this.states={};\n\n    //Add Menus\n    this.addState(\"MainMenu\", new MainMenu());\n    this.addState(\"Options\", new Options());\n    this.addState(\"Credits\", new Credits());\n    this.addState(\"Help\", new Help());\n\n    //Add actions to the menu buttons\n    this.addAction(\"MainMenu\",\"Options\",this.showOptions.bind(this));\n    this.addAction(\"MainMenu\",\"Help\",this.showHelp.bind(this));\n    this.addAction(\"MainMenu\",\"Credits\",this.showCredits.bind(this));\n    this.addAction(\"MainMenu\",\"New\",this.newAdventure.bind(this));\n\n    this.addAction(\"Options\", \"Back\",this.mainMenu.bind(this));\n\n  }\n\n  addAction(name,button,action){\n    this.states[name].buttons[button].on('pointerup',action)\n  }\n\n  addState(name, state, config) {\n      this.states[name] = state;\n\n      //Set game so state can access it\n      state.game = this.game;\n\n      //Create state\n      state.create();\n\n      this.container.addChild(this.states[name].container);\n  }\n\n  showOptions(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Options\"].show();\n  }\n\n  showHelp(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Help\"].show();\n  }\n\n  showCredits(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Credits\"].show();\n    this.game.activeState=this.states[\"Credits\"];\n  }\n\n  mainMenu(){\n    this.game.activeState=null;\n    this.states[\"Credits\"].hide();\n    this.states[\"Options\"].hide();\n    this.states[\"Help\"].hide();\n    this.changeLanguage();\n    this.states[\"MainMenu\"].show();\n\n  }\n\n  changeLanguage(){\n    this.states[\"MainMenu\"].changeLanguage();\n    this.states[\"Credits\"].changeLanguage();\n    this.states[\"Help\"].changeLanguage();\n    //game.titleScreen.warning.update();\n  }\n\n  newAdventure(){\n    this.game.start();\n  }\n\n}\n\nexport default Title;\n","//import * as PIXI from 'pixi.js';\nimport Scene from './scene.js';\n\nimport Walkable from 'walkable';\n\nclass GameScene extends Scene{\n  build(){\n    this.background.parentLayer = this.game.layer; //Z-order\n    this.background.interactive=true;\n    this.background.buttonMode=true;\n\n    this.background.on('pointertap',this.getPosition.bind(this));\n\n    //Add obstacles to the scene\n    this.walkable=new Walkable(this.game.width,this.game.height);\n      if(this.config.WalkArea!==undefined){\n        this.walkable.addPolygon(this.config.WalkArea);\n      }\n\n      if(this.config.Obstacles!==undefined){\n        let obstacles=Object.values(this.config.Obstacles);\n        this.config.Obstacles=obstacles;\n        for(let i=0;i<this.config.Obstacles.length;i++){\n          this.walkable.addPolygon(this.config.Obstacles[i]);\n        }\n      }\n\n      //Add objects to the scene\n      let sceneObjects=this.config.Objects;\n      if(sceneObjects){\n        for(let i=0;i<sceneObjects.length;i++){\n          if(this.game.objects[sceneObjects[i]]!==undefined){\n            this.container.addChild(this.game.objects[sceneObjects[i]].sprite);\n          }else{\n            console.log(\"Error:Game object \"+sceneObjects[i]+\" not found\");\n          }\n        }\n      }\n\n      //Add NPCs (non-playable characters) to the scene\n      let sceneChars=this.config.Characters;\n      if(sceneChars){\n        for(let i=0;i<sceneChars.length;i++){\n          if(this.game.npcs[sceneChars[i]]!==undefined){\n            this.container.addChild(this.game.npcs[sceneChars[i]].sprite);\n          }else{\n            console.log(\"Error:Game character \"+sceneChars[i]+\" not found\");\n          }\n        }\n      }\n  }\n\n  getPosition(event){\n    let coord=event.data.getLocalPosition(this.game.app.stage);\n    if(!this.game.player.lock && this.game.activeObject===null){\n      this.game.player.move(coord);\n    }\n  }\n\n  getPath(fromX,fromY,toX,toY){\n    return this.walkable.findPath(fromX, fromY, toX, toY, 0);\n  }\n\n}\n\nexport default GameScene;\n","class CutScene{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.sequenceIndex=0;\n    this.played=false;\n  }\n\n  build(){\n    if(this.config.Video){\n      this.videoData = this.game.files.resources[this.config.Video].data;\n      this.videoEnds=this.end.bind(this);\n      this.videoData.addEventListener('ended',this.videoEnds);\n    }else if(this.config.Sequence){\n      this.image=new PIXI.Sprite(PIXI.Texture.from(this.config.Sequence[this.sequenceIndex].Image));\n      var ratio = Math.min(this.game.width/this.image.width, this.game.height/this.image.height);\n      this.image.scale.set(ratio/2);\n\n      this.container.interactive=true;\n      this.container.buttonMode=true;\n      this.container.on('pointertap',this.next.bind(this));\n\n      this.container.addChild(this.image);\n\n      this.field=new PIXI.Text(this.config.Sequence[this.sequenceIndex].Text[this.game.activeLanguage],this.game.settings.Text.Style);\n      this.field.anchor.set(0.5,0);\n      this.field.x=this.image.width/2;\n      this.field.y=this.image.height+this.field.height/2;\n\n      this.container.addChild(this.field);\n\n      this.container.x = (this.game.width - this.image.width) / 2;\n      this.container.y = (this.game.height - this.image.height) / 2;\n    }\n  }\n\n  show(){\n      if(this.config.Video) {\n        let videoTexture = PIXI.Texture.from(this.videoData);\n      \tthis.videoSprite = new PIXI.Sprite(videoTexture);\n        this.videoSprite.width = this.game.width;\n        this.videoSprite.height = this.game.height;\n        this.videoSprite.interactive=true;\n        this.videoSprite.buttonMode=true;\n        this.videoSprite.on('pointertap',this.end.bind(this));\n        this.container.addChild(this.videoSprite);\n      }else if(this.config.Sequence) {\n        this.timeoutID = setTimeout(this.next.bind(this),\n                         this.config.Sequence[this.sequenceIndex].Time*1000);\n      }\n      this.game.app.stage.addChild(this.container);\n      this.game.activeScene.hide();\n      this.game.inventory.hideIcon();\n      this.game.player.hide();\n  }\n\n  hide(){\n      this.container.parent.removeChild(this.container);\n  }\n\n  next(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    if(this.sequenceIndex<this.config.Sequence.length-1){\n      this.sequenceIndex+=1;\n      this.field.text=this.config.Sequence[this.sequenceIndex].Text[this.game.activeLanguage];\n      this.image.texture=(PIXI.Texture.from(this.config.Sequence[this.sequenceIndex].Image));\n      this.timeoutID = setTimeout(this.next.bind(this), this.config.Sequence[this.sequenceIndex].Time*1000);\n    }else{\n      this.end();\n    }\n  }\n\n  end(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    if(this.videoData){\n      this.videoData.pause();\n      this.videoData.removeEventListener('ended',this.videoEnds);\n    }\n\n    this.hide();\n    this.played=true;\n    this.game.activeScene.show();\n    this.game.inventory.showIcon();\n    this.game.player.show();\n  }\n}\n\nexport default CutScene;\n","import * as PolyK from 'polyk';\n\nfunction boxesIntersect(a, b)\n{\n  var ab = a.getBounds();\n  var bb = b.getBounds();\n  return ab.x + ab.width > bb.x && ab.x < bb.x + bb.width && ab.y + ab.height > bb.y && ab.y < bb.y + bb.height;\n}\n\nfunction collision(a, b)\n{\n  let result;\n  if(a!=undefined && b !=undefined){\n    if(a.hitArea) result=PolyK.ContainsPoint(a.hitArea.points,b.x,b.y);\n    else if(b.hitArea) result=PolyK.ContainsPoint(b.hitArea.points,a.x,a.y);\n    else result=boxesIntersect(a,b);\n  }\n\n  return result;\n}\n\nfunction closestPoint(area,coords){\n  let coordX=Math.round(coords.x);\n  let coordY=Math.round(coords.y);\n  let changePosition=PolyK.ClosestEdge(area,coordX,coordY).point;\n  return {x:Math.round(changePosition.x)+1,y:Math.round(changePosition.y)+1}\n}\n\nfunction checkPath(coords,obstaclesPolys,walkPoly){\n  let coordX=Math.round(coords.x);\n  let coordY=Math.round(coords.y);\n  let changePosition;\n  let newPos;\n\n  if(!PolyK.ContainsPoint(walkPoly,coordX,coordY))\n  {\n    changePosition=PolyK.ClosestEdge(walkPoly,coordX,coordY).point;\n    newPos={x:Math.round(changePosition.x)+1,y:Math.round(changePosition.y)+1}\n  }else if(obstaclesPolys!==undefined){\n    for(let i=0;i<obstaclesPolys.length ;i++){\n      if(PolyK.ContainsPoint(obstaclesPolys[i],coordX,coordY)){\n        changePosition=PolyK.ClosestEdge(walkPoly,coordX,coordY).point;\n        newPos={x:Math.round(changePosition.x)+1,y:Math.round(changePosition.y)+1}\n        break;\n      }\n    }\n  }\n\n  return newPos;\n}\n\nexport {boxesIntersect,checkPath,collision,closestPoint};\n","import {boxesIntersect,collision,closestPoint} from '../collisions.js';\n\nclass GameObject{\n  constructor(){\n    this.sprite=null;\n    this.game=null;\n    this.action=null;\n  }\n\n  build(){\n    //Configure the sprite's object\n    if(this.config.Texture){\n      //Generate a static object from a texture\n      this.sprite=new PIXI.Sprite.from(PIXI.Texture.from(this.config.Texture));\n\n    }else if(this.config.Area){\n\n      //For invisible objects\n      this.sprite=new PIXI.Sprite.from(PIXI.Texture.EMPTY);\n      this.sprite.hitArea=new PIXI.Polygon(this.config.Area);\n\n    }else if(this.config.Animation){\n\n      //Animated objects\n      let spritesheet=this.game.files.resources[this.config.Animation.Name].spritesheet;\n\n      let frames = [];\n      for (var i = 0; i < spritesheet._frameKeys.length; i++) {\n          frames.push(PIXI.Texture.from(spritesheet._frameKeys[i]));\n      }\n\n      this.sprite=new PIXI.extras.AnimatedSprite(frames);\n      this.animationSpeed=this.config.Animation.Speed;\n      this.play();\n    }\n\n    //Position of the object in the screen\n    if(this.config.Position){\n      this.sprite.x=this.config.Position[0];\n      this.sprite.y=this.config.Position[1];\n    }\n\n    //Size of the object\n    if(this.config.Size){\n      this.sprite.scale.set(this.config.Size)\n    }\n\n    //Configure the anchor (origin point of the object)\n    if(!this.config.Area)this.sprite.anchor.set(0.5,1);\n\n    //Configure the layer for the z-order\n    if(this.config.Layer==\"Front\") this.sprite.parentLayer=this.game.layeronTop;\n    else this.sprite.parentLayer = this.game.layer;\n\n    //Is it a door?\n    if(this.config.Door){\n      this.door=true;\n      this.newScene=this.config.Door.To;\n      this.playerPos=this.config.Door.Player;\n    }\n\n    //Game object events\n    this.sprite.interactive=true;\n    this.sprite.buttonMode=true;\n\n    if(this.config.Area!==undefined){\n      this.sprite.on('pointerdown', this.touchArea.bind(this))\n          .on('pointerup', this.releaseArea.bind(this))\n          .on('pointerupoutside', this.releaseArea.bind(this));\n    }else{\n      this.sprite.on('pointerdown', this.touch.bind(this))\n          .on('pointermove', this.move.bind(this))\n          .on('pointerup', this.release.bind(this))\n          .on('pointerupoutside', this.release.bind(this));\n    }\n  }\n\n  hide(){\n    this.sprite.visible=false;\n  }\n\n  show(){\n    this.sprite.visible=true;\n  }\n\n  //Invisible object touch begins\n  touchArea(event){\n    if(this.game.activeObject===null && !this.game.player.lock){\n      this.game.activeObject=this;\n      this.interaction = event.data;\n      this.action=null;\n      this.touchedPos=this.interaction.getLocalPosition(this.game.app.stage);\n    }\n  }\n\n  //Invisible object touch ends\n  releaseArea(){\n    if(this.interaction){\n      let moveTo=this.interaction.getLocalPosition(this.game.app.stage);\n      if(collision(moveTo,this.sprite)){\n         this.look();\n      }else if(this.door===true){\n        let newPos=closestPoint(this.config.Area,moveTo);\n        moveTo=newPos;\n        this.use();\n      }\n      if(this.action!==null){\n        this.game.player.tween.once('end',this.action);\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      this.interaction = null;\n      this.touchedPos=null;\n    }\n  }\n\n  //Object touch begins\n  touch(event){\n    if(this.game.activeObject===null && !this.game.player.lock){\n      this.game.activeObject=this;\n      this.action=null;\n      this.posX = this.sprite.x;\n      this.posY = this.sprite.y;\n      this.interaction = event.data;\n      this.sprite.alpha = 0.5;\n      this.dragging = true;\n      this.moved = 0;\n      this.oldParent=this.sprite.parent;\n      if(this.sprite.parentLayer !== this.game.layerUI) this.sprite.parentLayer = this.game.layerUI;\n    }\n  }\n\n  //Object is being dragged\n  move(){\n    if (this.dragging) {\n      this.moved++;\n      this.sprite.setParent(this.game.app.stage);\n      var newPosition = this.interaction.getLocalPosition(this.sprite.parent);\n      let bounds=this.sprite.getBounds();\n      //We can only move the object inside the stage\n      if(newPosition.x>bounds.width/2 && newPosition.x<this.game.width-bounds.width/2) this.sprite.x = newPosition.x;\n      if(newPosition.y>bounds.height && newPosition.y<this.game.height) this.sprite.y = newPosition.y;\n    }\n  }\n\n  //Object drag/touch ends\n  release(){\n    if(this.interaction){\n      let moveTo={x:this.posX,y:this.posY};\n      //Check if we take it\n      if(collision(this.sprite,this.game.inventory.icon) && this.config.Take){\n        this.take();\n        //Check if we look it\n      }else if(this.moved<3){\n        this.look();\n      }else if(this.config.door===true){\n        this.use();\n      }else if(this.config.Use!==undefined){\n        this.game.activePuzzle=this.game.puzzles[this.config.Use];\n        this.use();\n      }\n\n      if(this.action!==null){\n        this.game.player.tween.once('end',this.action);\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      this.sprite.x = this.posX;\n      this.sprite.y = this.posY;\n      this.sprite.alpha = 1;\n      this.sprite.parentLayer = this.game.layer;\n      this.sprite.setParent(this.oldParent);\n\n      this.interaction = null;\n      this.dragging = false;\n      this.moved=0;\n    }\n  }\n\n  //Set player to look this object\n  look(){\n    this.action=this.game.player.look.bind(this.game.player);\n  }\n\n  //Set player to take this object\n  take(){\n    this.action=this.game.player.take.bind(this.game.player);\n  }\n\n  //Set player to use this object\n  use(){\n    this.action=this.game.player.use.bind(this.game.player);\n  }\n\n  //Check collision between objects\n  hit(){\n    let found=null;\n    let i;\n\n    //First check the collision between active scene's objects\n    let objectsArray=this.game.activeScene.config.Objects;\n\n    for(i=0;i<objectsArray.length;i++){\n      if(collision(this.sprite,this.game.objects[objectsArray[i]].sprite)\n                   && this.config.Name!==objectsArray[i]){\n        found=objectsArray[i];\n        break;\n      }\n    }\n\n    //Check if the collision is between inventory objects\n    objectsArray=this.game.inventory.objects;\n\n    for(i=0;i<objectsArray.length;i++){\n      if(collision(this.sprite,this.game.objects[objectsArray[i]].sprite)\n                   && this.config.Name!==objectsArray[i]){\n        found=objectsArray[i];\n        break;\n      }\n    }\n\n    return found;\n  }\n\n  //Object action is canceled or ended\n  cancel(){\n    this.game.activeObject.action=null;\n    this.game.activeObject=null;\n\n  }\n\n  //Remove objects from game\n  remove(){\n    this.sprite.parent.removeChild(this.sprite);\n    //POR HACER\n    //Quitar el objeto de la cadena de objetos de la escena\n    //Quitar del inventario en caso de que esté ahí\n  }\n\n}\n\nexport default GameObject;\n","import {boxesIntersect,collision} from '../collisions.js';\n\nclass Inventory{\n  constructor(){\n      this.container=new PIXI.Container();\n      this.container.visible=false;\n      this.game=null;\n      this.objects=[];\n\n    }\n\n    build(){\n      this.background=new PIXI.Sprite(PIXI.Texture.from(this.game.settings.Inventory.Background));\n      this.background.width=this.game.width/2;\n      this.background.height=this.game.height/2;\n      this.background.parentLayer = this.game.layerUI;\n      this.container.x = (this.game.width - this.background.width) / 2;\n      this.container.y = (this.game.height - this.background.height) / 2;\n      this.border=10;\n      this.icon=new PIXI.Sprite(PIXI.Texture.from(this.game.settings.Inventory.Icon));\n      this.icon.on('pointertap',this.click.bind(this));\n      this.icon.interactive=true;\n      this.icon.buttonMode=true;\n      this.setIcon(this.game.settings.Inventory.Position);\n      this.container.addChild(this.background);\n      this.icon.parentLayer = this.game.layerUI;\n    }\n\n    show(){\n      this.update();\n      this.container.visible=true;\n    }\n\n    hide(){\n      this.container.visible=false;\n\n    }\n\n    showIcon(){\n      this.icon.visible=true;\n    }\n\n    hideIcon(){\n      this.icon.visible=false;\n\n    }\n\n    setIcon(position){\n      if(position==\"bottom-right\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=this.game.height - this.icon.height;\n      }else if(position==\"top-right\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=0;\n      }else if(position==\"top-left\"){\n        this.icon.x=0;\n        this.icon.y=this.game.height - this.icon.height;\n      }else if(position==\"bottom-top\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=0;\n      }\n    }\n\n    click(){\n      if (this.container.visible) this.hide();\n      else if(!this.game.player.lock) this.show();\n    }\n\n    add(name){\n      if(this.game.activeScene!==null){\n        if(this.game.activeScene.config.Objects.includes(name)){\n          let tmpIndex=this.game.activeScene.config.Objects.indexOf(name);\n          this.game.activeScene.config.Objects.splice(tmpIndex,1);\n        }\n      }\n      this.objects.push(name);\n      this.game.objects[name].sprite.setParent(this.container);\n      this.game.objects[name].sprite.parentLayer=this.game.layerUI;\n      this.game.objects[name].sprite.on('pointermove', this.move.bind(this.game.objects[name]))\n                                    .off('pointerup')\n                                    .off('pointerupoutside')\n                                    .on('pointerup',this.release.bind(this.game.objects[name]))\n                                    .on('pointerupoutside',this.release.bind(this.game.objects[name]));\n      this.update();\n    }\n\n    remove(name)\n    {\n      //Check if object is already in inventory\n      if(this.objects.includes(name)){\n        this.objects.splice(this.objects.indexOf(name),1);\n        this.update();\n      }\n    }\n\n    update(){\n      let i;\n      let numObjs=this.objects.length;\n      for(i=0;i<numObjs;i++){\n        let tmpObj=this.game.objects[this.objects[i]].sprite;\n\n        tmpObj.width=this.container.width/5-this.container.width*0.05;\n        tmpObj.height=this.container.height/5-this.container.height*0.05;\n        tmpObj.x = ((i % 5) * this.container.width/5+this.border-i)+tmpObj.width/2;\n        tmpObj.y = (Math.floor(i / 5) * this.container.height/5+this.border-i)+tmpObj.height;\n        this.container.width=this.background.width;\n        this.container.height=this.background.height;\n      }\n    }\n\n    move(){\n      if(!boxesIntersect(this.sprite,this.game.inventory.container))\n        this.game.inventory.hide();\n    }\n\n    release(event){\n      if(this.interaction){\n        let objectHit=this.hit();\n\n        let moveTo={x:this.sprite.x,y:this.sprite.y};\n        //Check if we take it\n        if(this.moved<3){\n          this.game.player.say(this.config.Description[this.game.activeLanguage])\n        }else if(this.config.Combine!==undefined && objectHit!==null){\n          if(this.config.Combine.With===objectHit) {\n            this.game.activePuzzle=this.game.puzzles[this.config.Combine.Puzzle];\n          }\n          this.use();\n        }\n\n        if(this.action!==null){\n          this.game.player.tween.once('end',this.action);\n          this.game.player.move(moveTo);\n        }else{\n          this.cancel();\n        }\n\n        this.sprite.x = this.posX;\n        this.sprite.y = this.posY;\n        this.sprite.alpha = 1;\n        this.sprite.setParent(this.oldParent);\n\n        this.interaction = null;\n        this.dragging = false;\n        this.moved=0;\n      }\n    }\n}\n\nexport default Inventory;\n","class Puzzle{\n  constructor(){\n    this.solved=false;\n  }\n\n  resolve(){\n      if(this.game.activeObject!==null) this.game.activeObject.cancel();\n\n    if(this.config.Modify){\n      let objectMod=this.game.objects[this.config.Modify.Name]\n      if(this.config.Modify.Description) objectMod.config.Description=this.config.Modify.Description;\n      if(this.config.Modify.Door) this.createDoor(objectMod)\n    }\n\n    if(this.config.Say && !this.game.silentMode){\n      this.game.player.say(this.config.Say[this.game.activeLanguage]);\n    }else{\n      this.game.player.stop();\n    }\n\n    /*else if(this.config.NPCSay && !game.silentMode){\n      game.selectedCharacter=game.searchCharacter(this.config.Give);\n      game.characters[game.selectedCharacter].talk(this.config.NPCSay[game.mainLanguage]);\n      if(game.player.sprite.visible) game.player.stand();\n    }\n*/\n    if(this.config.Remove!==undefined){\n      let i;\n      let array=this.config.Remove;\n      for(i=0;i<array.length;i++){\n        this.game.objects[array[i]].remove();\n      }\n    }\n\n    if(this.config.GetObject!==undefined) this.game.inventory.add(this.config.GetObject);\n/*\n    if(this.config.Create){\n      let objectIndex=game.searchObject(this.config.Create);\n      if(objectIndex){\n        game.scenes[game.currentScene].container.addChild(game.objects[objectIndex]);}\n    }\n*/\n    this.solved=true;\n    this.game.activePuzzle=null;\n  }\n\n  createDoor(target){\n    target.door=true;\n    target.newScene=this.config.Modify.Door.To;\n    target.playerPos=this.config.Modify.Door.Player;\n  }\n\n  createInventoryObject(objectName){\n    //this.game.objects[objectName].take();\n  }\n}\n\nexport default Puzzle;\n","import dragonBones from 'dragonbones-pixi';\nimport tweenManager from 'k8w-pixi-tween';\nconst dbfactory=dragonBones.dragonBones.PixiFactory.factory;\nimport {checkPath} from '../collisions.js'\n\nclass Character{\n  constructor(){\n    this.game=null;\n    this.state=null;\n    this.lock=false;\n  }\n\n  setup(config){\n    dbfactory.parseDragonBonesData(this.game.files.resources[config.Name+\"Skeleton\"].data);\n    dbfactory.parseTextureAtlasData(this.game.files.resources[config.Name+\"Json\"].data,this.game.files.resources[config.Name+\"Tex\"].texture);\n    this.sprite = dbfactory.buildArmatureDisplay(config.Armature);\n    this.size=1;\n    this.tween=PIXI.tweenManager.createTween(this.sprite);\n    this.tween.on('end', this.stop.bind(this));\n    if(config.Animations!=undefined)\n      this.animations=config.Animations;\n    else\n      this.animations={\n        Stand:\"stand\",\n        Walk:\"walk\",\n        Take:\"take\",\n        Use:\"use\",\n        Say:\"speak\"\n      };\n    this.animate(this.animations.Stand);\n    this.state=\"stand\";\n    this.sprite.x=500;\n    this.sprite.y=500;\n    this.sprite.parentLayer = this.game.layer;//Z-order*/\n    this.config=config;\n  }\n\n  hide(){\n    this.sprite.visible=false;\n  }\n\n  show(){\n    this.sprite.visible=true;\n  }\n\n  position(coords){\n    this.sprite.x=coords[0];\n    this.sprite.y=coords[1];\n  }\n\n  move(coords){\n    let obstacles=this.game.activeScene.config.Obstacles;\n    let walkingArea=this.game.activeScene.config.WalkArea;\n    let newPosition=coords;\n    let closestPosition=checkPath(coords,obstacles,walkingArea);\n\n    if(closestPosition){\n      newPosition=closestPosition;\n    }\n\n    let path = new PIXI.tween.TweenPath();\n    let findPath=this.game.activeScene.walkable.findPath(this.sprite.x,this.sprite.y,newPosition.x,newPosition.y,0);\n\n    if(findPath.length>0){\n      this.tween.stop().clear();\n      this.animate(this.animations.Walk);\n      if(this.sprite.x<newPosition.x) this.sprite.armature.flipX=false;\n      else this.sprite.armature.flipX=true;\n      path.drawShape(new PIXI.Polygon(findPath));\n      this.tween.path=path;\n\n      //Needs improvement\n      let animationTime=Math.abs(this.sprite.x-newPosition.x)*5+Math.abs(this.sprite.y-newPosition.y)*5+findPath.length*100;\n\n      this.tween.time = animationTime;\n      this.tween.speed = 1;\n      this.tween.delay=10;\n      this.tween.start();\n    }\n  }\n\n  update(){\n    PIXI.tweenManager.update();\n    this.scale();\n  }\n\n  scale(){\n    let scaleChar=this.sprite.y/this.game.height*this.size;\n    this.sprite.scale.set(scaleChar);\n  }\n\n  stop(){\n    this.animate(this.animations.Stand);\n    this.game.activeState=null;\n    this.lock=false;\n  }\n\n  say(text){\n    this.game.textField.talker=this;\n    //Setup the text to show\n    this.game.textField.setText(text);\n    this.game.textField.setColor(Number(this.config.Color));\n    this.game.textField.show();\n\n    //Animate the character\n    this.animate(this.animations.Say);\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    this.timeoutID=setTimeout(this.game.textField.end.bind(this.game.textField), this.game.textField.timeOut());\n  }\n\n  shutup(){\n    this.animate(this.animations.Stand);\n  }\n\n  animate(animation,times){\n    if(this.sprite.animation.lastAnimationName!==animation)\n      this.sprite.animation.fadeIn(animation,0.25,times);\n  }\n}\n\nexport default Character;\n","import Character from './character.js';\nimport dragonBones from 'dragonbones-pixi';\nconst dbEvents=dragonBones.dragonBones.EventObject;\n\nclass Player extends Character{\n  move(coords){\n    super.move(coords);\n    this.game.activeState=this;\n  }\n  say(text){\n    super.say(text);\n    //Lock the player\n    this.lock=true;\n  }\n  look(){\n    if(this.game.activeObject!==null){\n      let text=this.game.activeObject.config.Description[this.game.activeLanguage];\n      this.say(text);\n      this.game.activeObject.cancel();\n    }\n  }\n\n  take(){\n    this.lock=true;\n    this.animate(this.animations.Take,1);\n    this.sprite.once(dbEvents.COMPLETE, this.takeEnd, this);\n  }\n\n  takeEnd(){\n    if(this.game.activeObject!==null){\n      this.game.inventory.add(this.game.activeObject.config.Name);\n      this.game.activeObject.cancel();\n      this.stop();\n    }\n  }\n\n  use(){\n    this.lock=true;\n    this.animate(this.animations.Use,1);\n    this.sprite.once(dbEvents.COMPLETE, this.useEnd, this);\n  }\n\n  useEnd(){\n    if(this.game.activePuzzle!==null){\n      this.game.activePuzzle.resolve();\n    }else if(this.game.activeObject!==null) {\n      if(this.game.activeObject.door){\n        this.game.setScene(this.game.activeObject.newScene,this.game.activeObject.playerPos);\n        this.stop();\n      }else{\n        this.say(this.game.data.texts.NotUsable[this.game.activeLanguage])\n      }\n      this.game.activeObject.cancel();\n    }\n\n  }\n\n  talk(){\n    this.game.activeDialogue.start();\n  }\n\n}\n\nexport default Player;\n","import Character from './character.js';\n\nclass NPC extends Character{\n  build(){\n    this.sprite.interactive=true;\n    this.sprite.buttonMode=true;\n    this.sprite.on('pointerdown', this.touch.bind(this))\n        .on('pointerup', this.release.bind(this))\n        .on('pointerupoutside', this.release.bind(this));\n  }\n\n  touch(event){\n    if(this.game.activeNPC===null && !this.game.player.lock){\n      this.game.activeNPC=this;\n      this.action=null;\n      this.interaction = event.data;\n    }\n  }\n  //Object drag/touch ends\n  release(){\n\n    if(this.interaction){\n      let distance=0;\n      if(this.game.player.sprite.x<this.sprite.x) distance=this.sprite.width*-1;\n      else distance=this.sprite.width;\n      let moveTo={x:this.sprite.x+distance,y:this.sprite.y};\n      //Check if we take it\n      if(this.config.Dialogue!==undefined){\n        this.game.activeDialogue=this.game.dialogues[this.config.Dialogue];\n        this.action=this.game.player.talk.bind(this.game.player);\n      }\n\n      if(this.action!==null){\n        this.game.player.tween.once('end',this.action);\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      this.interaction = null;\n      this.dragging = false;\n      this.moved=0;\n    }\n  }\n  //Object action is canceled or ended\n  cancel(){\n    this.game.activeNPC.action=null;\n    this.game.activeNPC=null;\n\n  }\n}\n\nexport default NPC;\n","import {Button} from './text.js'\n\n//Branches dialogue system\nclass Dialogue{\n  constructor(){\n    this.timeoutID=null;\n    this.firstTime=true;\n    this.choice=null;\n    this.branches={};\n  }\n\n  setup(config){\n    this.config=config;\n\n    //Get dialogue branches\n    let i;\n    length=this.config.Branches.length;\n    for(i=0;i<length;i++)\n    {\n      this.branches[this.config.Branches[i].Name]=this.config.Branches[i];\n    }\n\n    this.currentBranch=this.branches[this.config.DefaultBranch];\n  }\n\n  //Executed when we interact with a NPC\n  start(){\n    this.firstTime=false;\n    this.game.player.lock=true;\n    this.game.textField.show();\n    this.game.textField.Choices.get();\n  }\n\n  //Executed everytime we choose an option\n  next(){\n    if(this.choice!==null){\n      let choiceSelected=this.currentBranch.Choices[this.choice];\n      this.game.textField.Choices.hide();\n      this.game.player.say(choiceSelected.Text[this.game.activeLanguage]);\n    }else{\n      this.game.textField.Choices.get();\n    }\n  }\n\n  //Search for a branch with a given name\n  searchBranch(name){\n    let branchFound=-1;\n    let i;\n    let length=this.config.Branches.length\n    for(i=0;i<length;i++)\n         if(this.config.Branches[i].Name==name)\n         {\n             branchFound=i;\n             break;\n         }\n    return branchFound;\n  }\n\n  answer(){\n    let choiceSelected=this.currentBranch.Choices[this.choice];\n    this.game.activeNPC.say(choiceSelected.Answer[this.game.activeLanguage]);\n    if(choiceSelected.EndDialogue){\n      this.end();\n    }else if(choiceSelected.Link){\n      this.currentBranch=this.branches[choiceSelected.Link];\n    }else if(choiceSelected.Puzzle){\n      choiceSelected.Repeat=false;\n      this.end();\n      this.game.puzzles[choiceSelected.Puzzle].resolve();\n    }\n\n\n    this.choice=null;\n  }\n\n  //Ends the conversations\n  end(){\n    this.game.activeNPC=null;\n    this.game.activeDialogue=null;\n  }\n\n  timeOut(){\n    this.next();\n  }\n}\n\nexport default Dialogue;\n","import * as PIXI from 'pixi.js';\nimport 'pixi-sound';\nimport 'pixi-layers';\n\nimport Loader from './loader.js';\nimport Title from './class/title.js';\nimport GameScene from './class/gamescene.js';\nimport CutScene from './class/cutscene.js';\nimport GameObject from './class/gameobject.js';\nimport Inventory from './class/inventory.js';\nimport Puzzle from './class/puzzle.js';\nimport {TextField} from './class/text.js';\nimport Player from './class/player.js';\nimport NPC from './class/npc.js';\nimport Dialogue from './class/dialogue.js';\n\nclass Game {\n  constructor(config){\n    this.settings={};\n    this.data={};\n    this.width=config.width;\n    this.height=config.height;\n    this.playSounds = true;\n\n    //Setup the application\n    this.app = new PIXI.Application(config.width,config.height,{antialias: true, autoResize: true, resolution: devicePixelRatio});\n  //  this.app.renderer.autoResize=true;\n    this.app.stage = new PIXI.display.Stage();\n\n    //Change game size when window size changes\n    if(config.autoResize!==undefined) this.app.renderer.autoResize=config.autoResize;\n    else window.addEventListener('resize', this.resize.bind(this));\n\n\n    //We append it to a HTML element or Document body\n    if(config.parent){\n      document.getElementById(config.parent).appendChild(this.app.view)\n    }else{\n      document.body.appendChild(this.app.view);\n    }\n\n    //Load config files\n    this.preload(config.files);\n  }\n\n  //Read JSON configuration files\n  preload(files){\n    //Text to show progress\n    this.progressBar=new PIXI.Graphics();\n    this.progressBar.beginFill(0xDE3249);\n    this.progressBar.drawRect(0, 0, this.width, this.height/50);\n    this.progressBar.endFill();\n    this.progressBar.width=0;\n\n    this.loadingTxt=new PIXI.Text(\"Loading...\", {fill: 'white',\"fontSize\": 50});\n    this.loadingTxt.anchor.set(0.5);\n    this.loadingTxt.x=this.width/2;\n    this.loadingTxt.y=this.height/2;\n\n    this.progressBar.y=this.height/2+this.loadingTxt.height;\n\n    this.app.stage.addChild(this.loadingTxt);\n    this.app.stage.addChild(this.progressBar);\n\n    this.jsons=new Loader();\n    this.jsons.game=this;\n    this.jsons.addJSON(files);\n    this.jsons.load(this.load.bind(this)); //When all config files are loaded, load the game resources.\n  }\n\n  //Load game resources (images,sounds,vids...)\n  load(){\n    this.files=new Loader();\n    this.files.game=this;\n    this.files.addFiles(Object.values(this.jsons.resources));\n    this.files.load(this.setup.bind(this));\n  }\n\n  setup(){\n    this.app.stage.removeChild(this.loadingTxt);\n    this.app.stage.removeChild(this.progressBar);\n\n    //Z-Order\n    this.addZOrder();\n\n    //Adjust to window size\n    this.resize();\n\n    this.scenes={};\n    this.cutscenes={};\n    this.objects={};\n    this.npcs={};\n    this.dialogues={};\n    this.puzzles={};\n\n    this.activeLanguage=0;\n    this.activeScene=null;\n    this.activeObject=null;\n    this.activeNPC=null;\n    this.activePuzzle=null;\n    this.activeDialogue=null;\n\n    this.activeState=null;\n\n    //Setup title screen\n    this.addScene(\"Title\",new Title(),this.settings.TitleScreen);\n\n    //Add game objects\n    let i;\n    let length=this.data.objects.length;\n    for(i=0;i<length;i++)\n    {\n      this.addObject(this.data.objects[i].Name,new GameObject(),this.data.objects[i]);\n    }\n\n    //Non-playable characters\n    length=this.data.npc.length;\n    for(i=0;i<length;i++)\n    {\n      this.addNPC(this.data.npc[i].Name,new NPC(),this.data.npc[i]);\n    }\n\n    //Dialogues\n    length=this.data.dialogues.length;\n    for(i=0;i<length;i++)\n    {\n      this.addDialogue(this.data.dialogues[i].Name,new Dialogue(),this.data.dialogues[i]);\n    }\n\n    //Add game scenes\n    length=this.data.scenes.length;\n    for(i=0;i<length;i++)\n    {\n      this.addScene(this.data.scenes[i].Name,new GameScene(),this.data.scenes[i]);\n    }\n\n    //Add cutscenes\n    length=this.data.cutscenes.length;\n    for(i=0;i<length;i++)\n    {\n      this.addCutscene(this.data.cutscenes[i].Name,new CutScene(),this.data.cutscenes[i]);\n    }\n\n    //Puzzles\n    length=this.data.puzzles.length;\n    for(i=0;i<length;i++)\n    {\n      this.addPuzzle(this.data.puzzles[i].Name,new Puzzle(),this.data.puzzles[i]);\n    }\n\n    //Add Inventory\n    this.addInventory();\n\n    //Add text field\n    this.addTextField();\n\n    //Add player\n    this.addPlayer();\n\n    //Set Title as the first scene to show\n    this.setScene(\"Title\");\n\n    //Game's loop\n    this.app.ticker.add(this.loop.bind(this));\n  }\n\n  loop(dt){\n    //console.log(this.player.lock) //Test\n    // update current state\n    if (this.activeState != null) {\n        this.activeState.update(dt);\n    }\n  }\n\n  addObject(name, object, config) {\n      this.objects[name] = object;\n\n      //Config the object\n      object.config=config;\n\n      //Set game so object can access it\n      object.game = this;\n\n      //Build object\n      object.build();\n  }\n\n  addScene(name, scene, config) {\n      this.scenes[name] = scene;\n\n      //Config the scene\n      scene.setup(config);\n\n      //Set game so scene can access it\n      scene.game = this;\n\n      //Build scene\n      scene.build();\n  }\n\n  addCutscene(name, cutscene, config) {\n      this.cutscenes[name] = cutscene;\n\n      //Config the scene\n      cutscene.config=config;\n\n      //Set game so scene can access it\n      cutscene.game = this;\n\n      //Build scene\n      cutscene.build();\n  }\n\n  addPuzzle(name, puzzle, config) {\n      this.puzzles[name] = puzzle;\n\n      //Puzzle's config\n      puzzle.config=config;\n\n      //Set game so puzzle can access it\n      puzzle.game = this;\n  }\n\n  setScene(name,playerCoords) {\n      //Remove current container\n      if (this.activeScene !== null) {\n          this.app.stage.removeChild(this.activeScene.container);\n      }\n\n      //Set current container\n      this.activeScene = this.scenes[name];\n\n      //Add our new container\n      this.app.stage.addChild(this.activeScene.container);\n\n      if(playerCoords!==undefined){\n        this.player.sprite.x=playerCoords[0];\n        this.player.sprite.y=playerCoords[1];\n      }\n\n      if(this.activeScene.config.Player!==undefined){\n        if(this.activeScene.config.Player.Position!==undefined){\n          this.player.position(this.activeScene.config.Player.Position);\n        }\n        if(this.activeScene.config.Player.Size!==undefined){\n          this.player.size=this.activeScene.config.Player.Size;\n          this.player.scale();\n        }\n      }\n\n      if(this.activeScene.config.CutScene!==undefined){\n        if(!this.cutscenes[this.activeScene.config.CutScene].played){\n          this.cutscenes[this.activeScene.config.CutScene].show();\n        }\n      }\n      // Play sounds\n    //  if(this.activeScreen.music!==null && this.playSounds) PIXI.sound.play(this.activeScreen.music,{loop:true});\n  }\n\n  addZOrder(){\n    this.sortGroup= new PIXI.display.Group(0, true);\n    this.sortGroup.on('sort', function (sprite) {\n      sprite.zOrder = -sprite.y;\n    });\n    this.onTopGroup = new PIXI.display.Group(1,false);\n    this.UIGroup = new PIXI.display.Group(2,false);\n\n    this.layer=new PIXI.display.Layer(this.sortGroup);\n    this.layeronTop=new PIXI.display.Layer(this.onTopGroup);\n    this.layerUI=new PIXI.display.Layer(this.UIGroup);\n    //this.layerUI.group.enableSort = true;\n    //this.layer.group.enableSort = true;\n    this.app.stage.group.enableSort = true;\n    this.app.stage.addChild(this.layer);//Z-order\n    this.app.stage.addChild(this.layeronTop);//Z-order\n    this.app.stage.addChild(this.layerUI);//Z-order\n  }\n\n  addInventory(){\n    this.inventory=new Inventory();\n    this.inventory.game=this;\n    this.inventory.build();\n  }\n\n  addPlayer(){\n    this.player=new Player();\n    this.player.game=this;\n    this.data.player.Name=\"player\";\n    this.player.setup(this.data.player);\n  }\n\n  addNPC(name, char, config){\n    this.npcs[name] = char;\n\n    char.game = this;\n\n    char.setup(config);\n\n    char.build();\n  }\n\n  addDialogue(name, dialogue, config){\n    this.dialogues[name] = dialogue;\n\n    dialogue.game = this;\n\n    dialogue.setup(config);\n  }\n\n  addTextField(){\n    this.textField=new TextField();\n    this.textField.game=this;\n    this.textField.build();\n  }\n\n  //Adjust game screen to the window\n  resize() {\n    var w = window.innerWidth * window.devicePixelRatio;\n    var h = window.innerHeight * window.devicePixelRatio;\n    var ratio = Math.min( w/this.width,  h/this.height);\n    this.app.renderer.resize(this.width*ratio,this.height*ratio);\n    this.app.stage.scale.set(ratio);\n  }\n\n  //The magic begins\n  start(){\n    this.setScene(this.settings.FirstScene);\n\n    //Show Inventory\n    this.app.stage.addChild(this.inventory.container);\n    this.app.stage.addChild(this.inventory.icon);\n\n    //Show Player\n    this.app.stage.addChild(this.player.sprite);\n\n    //Add Text Field\n    this.app.stage.addChild(this.textField.container);\n  }\n\n\n}\n\nexport default Game;\n","import Game from './game';\n\nconsole.log(\"JSGAM 5.0.0 https://github.com/kreezii/jsgam\");\n\nexport default Game;\n"],"names":["Loader","constructor","game","onLoad","add","this","update","bind","onError","error","addJSON","files","i","arrayLength","length","name","slice","lastIndexOf","addFiles","data","Settings","settings","Scenes","scenes","Cutscenes","cutscenes","Objects","objects","Dialogues","dialogues","Puzzles","puzzles","Credits","credits","Texts","texts","Sounds","soundSrc","j","tmpSound","Src","Name","Vids","fixVidLoad","vidSrc","tmpVid","Animations","animSrc","tmpAnim","Backgrounds","bgSrc","tmpBg","Player","Texture","Json","Skeleton","player","Characters","npcSrc","npc","PIXI","sound","utils","extensions","splice","indexOf","loaders","Resource","setExtensionXhrType","undefined","setExtensionLoadType","LOAD_TYPE","VIDEO","percent","Math","floor","progress","progressBar","width","resource","console","log","Scene","container","Container","setup","config","background","Sprite","from","Background","anchor","set","addChild","music","Music","dt","hide","visible","show","Button","text","style","interactive","buttonMode","extras","BitmapText","Phrases","option","let","Text","ButtonStyle","on","onTap","index","y","height","sort","activeChoice","activeDialogue","currentBranch","Choices","alpha","choice","clicked","next","get","clear","options","Repeat","activeLanguage","x","parent","scale","ratio","min","TextField","build","parentLayer","layerUI","WHITE","size","Size","tint","Style","skip","Position","setPosition","end","talker","shutup","answer","setText","stop","clearTimeout","timeoutID","position","newText","adjustText","countWords","str","split","timeOut","time","Speed","setColor","colour","Menu","buttons","addButton","modify","disable","enable","arrayButtons","Object","values","center","resize","pivot","MainMenu","create","gameTexts","NewGame","Continue","Options","Help","changeLanguage","languages","Languages","addLanguage","setLanguage","Back","father","change","mainMenu","texture","buildText","structuredText","tween","tweenManager","createTween","to","expire","delay","start","reset","Lines","Title","states","addState","addAction","showOptions","showHelp","showCredits","newAdventure","button","action","state","activeState","GameScene","layer","getPosition","walkable","Walkable","WalkArea","addPolygon","Obstacles","obstacles","sceneObjects","sprite","sceneChars","npcs","event","coord","getLocalPosition","app","stage","lock","activeObject","move","getPath","fromX","fromY","toX","toY","findPath","CutScene","sequenceIndex","played","boxesIntersect","a","b","ab","getBounds","bb","collision","result","hitArea","PolyK","points","Video","videoData","resources","videoEnds","addEventListener","Sequence","image","Image","field","videoTexture","videoSprite","setTimeout","Time","activeScene","inventory","hideIcon","removeChild","pause","removeEventListener","showIcon","GameObject","Area","EMPTY","Polygon","Animation","spritesheet","frames","_frameKeys","push","AnimatedSprite","animationSpeed","play","Layer","layeronTop","Door","door","newScene","To","playerPos","touchArea","releaseArea","touch","release","interaction","touchedPos","moveTo","look","area","coords","coordX","round","coordY","changePosition","point","use","once","cancel","posX","posY","dragging","moved","oldParent","setParent","newPosition","bounds","icon","Take","take","Use","activePuzzle","hit","found","objectsArray","remove","Inventory","border","Icon","click","setIcon","includes","tmpIndex","off","numObjs","tmpObj","objectHit","say","Description","Combine","With","Puzzle","solved","resolve","Modify","objectMod","createDoor","Say","silentMode","Remove","array","GetObject","target","createInventoryObject","objectName","const","dbfactory","dragonBones","PixiFactory","factory","Character","parseDragonBonesData","parseTextureAtlasData","buildArmatureDisplay","Armature","animations","animate","Stand","closestPosition","obstaclesPolys","walkPoly","newPos","checkPath","path","TweenPath","Walk","armature","flipX","drawShape","animationTime","abs","speed","textField","Number","Color","animation","times","lastAnimationName","fadeIn","dbEvents","EventObject","COMPLETE","takeEnd","useEnd","setScene","NotUsable","talk","NPC","activeNPC","Dialogue","firstTime","branches","Branches","DefaultBranch","choiceSelected","searchBranch","branchFound","Answer","EndDialogue","Link","Game","playSounds","devicePixelRatio","Stage","autoResize","renderer","window","document","getElementById","appendChild","view","body","preload","beginFill","drawRect","endFill","loadingTxt","jsons","load","addZOrder","addScene","TitleScreen","addObject","addNPC","addDialogue","addCutscene","addPuzzle","addInventory","addTextField","addPlayer","ticker","loop","object","scene","cutscene","puzzle","playerCoords","sortGroup","Group","zOrder","onTopGroup","UIGroup","group","enableSort","char","dialogue","w","innerWidth","h","innerHeight","FirstScene"],"mappings":"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"}