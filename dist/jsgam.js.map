{"version":3,"file":"jsgam.js","sources":["../src/loader.js","../src/storage.js","../src/sound.js","../src/class/scene.js","../src/class/text.js","../src/class/menu.js","../src/class/mainmenu.js","../src/class/options.js","../src/class/help.js","../src/class/credits.js","../src/class/confirmation.js","../src/class/title.js","../src/class/gamescene.js","../src/class/cutscene.js","../src/collisions.js","../src/class/gameobject.js","../src/class/inventory.js","../src/class/puzzle.js","../src/class/character.js","../src/class/player.js","../src/class/npc.js","../src/class/dialogue.js","../src/class/logo.js","../src/game.js","../src/index.js"],"sourcesContent":["import {Howl} from 'howler';\nimport {Loader} from 'pixi.js';\n\nclass GameLoader extends Loader{\n  constructor(){\n    super();\n    this.game=null;\n    this.onLoad.add(this.update.bind(this));\n    this.onError.add(this.error.bind(this));\n    this.use(this.howlerMiddleware.bind(this));\n  }\n\n  howlerMiddleware(resource,next){\n    if (resource && [\"wav\", \"ogg\", \"mp3\"].includes(resource.extension)) {\n      const options = JSON.parse(JSON.stringify(resource.metadata));\n      options.src = [resource.url];\n      resource.sound = new Howl(options);\n      next();\n    }else next();\n  }\n\n  //Add config files to loader\n  addJSON(files){\n    let i;\n    let arrayLength=files.length;\n\n    for(i=0;i<arrayLength;i++){\n      let name=files[i].slice(files[i].lastIndexOf(\"/\")+1,files[i].lastIndexOf(\".\"));\n      this.add(name,files[i]);\n    }\n  }\n\n  //Add resource files to loader and settings to game\n  addFiles(files){\n    let i;\n    let length=files.length\n    for(i=0;i<length;i++){\n      //Add config files to setup the game\n      if(files[i].data.Settings) this.game.settings=files[i].data.Settings;\n      if(files[i].data.Scenes) this.game.data.scenes=this.game.data.scenes.concat(files[i].data.Scenes);\n      if(files[i].data.Cutscenes) this.game.data.cutscenes=this.game.data.cutscenes.concat(files[i].data.Cutscenes);\n      if(files[i].data.Objects) this.game.data.objects=this.game.data.objects.concat(files[i].data.Objects);\n      if(files[i].data.Dialogues) this.game.data.dialogues=this.game.data.dialogues.concat(files[i].data.Dialogues);\n      if(files[i].data.Puzzles) this.game.data.puzzles=this.game.data.puzzles.concat(files[i].data.Puzzles);\n      if(files[i].data.Credits) this.game.data.credits=files[i].data.Credits;\n      if(files[i].data.Texts) this.game.data.texts=files[i].data.Texts;\n      if(files[i].data.Voices) this.game.data.voices=this.game.data.voices.concat(files[i].data.Voices);\n      if(files[i].data.Music) this.game.data.music=this.game.data.music.concat(files[i].data.Music);\n      if(files[i].data.Sounds) this.game.data.sounds=this.game.data.sounds.concat(files[i].data.Sounds);\n\n      //Look for sound files\n      if(files[i].data.Sounds){\n        let soundSrc=files[i].data.Sounds;\n        for(let j=0;j<soundSrc.length;j++){\n           let tmpSound=soundSrc[j].Src;\n           if(tmpSound!==null) this.add(soundSrc[j].Name,tmpSound);\n        }\n       }\n\n       //Look for music files\n       if(files[i].data.Music){\n         let musicSrc=files[i].data.Music;\n         for(let j=0;j<musicSrc.length;j++){\n            let tmpMusic=musicSrc[j].Src;\n            if(tmpMusic!==null) this.add(musicSrc[j].Name,tmpMusic);\n         }\n        }\n\n       //Look for voice files\n       if(files[i].data.Voices){\n         let voiceSrc=files[i].data.Voices;\n         for(let j=0;j<voiceSrc.length;j++){\n            let tmpVoice=voiceSrc[j].Src;\n            if(tmpVoice!==null) this.add(voiceSrc[j].Name,tmpVoice);\n         }\n        }\n\n       //Look for video files\n       if(files[i].data.Vids)\n       {\n         let vidSrc=files[i].data.Vids;\n         for(let i=0;i<vidSrc.length;i++){\n           let tmpVid=vidSrc[i].Src;\n           if(tmpVid!==null) this.add(vidSrc[i].Name,tmpVid);\n         }\n       }\n\n       //Load Animations\n       if(files[i].data.Animations)\n       {\n         let animSrc=files[i].data.Animations;\n         for(let i=0;i<animSrc.length;i++){\n           let tmpAnim=animSrc[i].Src;\n           if(tmpAnim!==null) this.add(animSrc[i].Name,tmpAnim);\n         }\n       }\n\n       //Load Backgrounds if don't use texture atlas for backgrounds\n       if(files[i].data.Backgrounds){\n         let bgSrc=files[i].data.Animations;\n         for(let i=0;i<bgSrc.length;i++){\n           let tmpBg=bgSrc[i].Src;\n           if(tmpBg!==null) this.add(bgSrc[i].Name,tmpBg);\n         }\n       }\n\n       //Look for player files\n       if(files[i].data.Player){\n         this.add('playerTex', files[i].data.Player.Texture)\n             .add('playerJson', files[i].data.Player.Json)\n             .add('playerSkeleton', files[i].data.Player.Skeleton);\n         this.game.data.player=files[i].data.Player;\n       }\n\n       //Look for NPC files\n       if(files[i].data.Characters){\n         let npcSrc=files[i].data.Characters;\n         for(let i=0;i<npcSrc.length;i++){\n            this.add(npcSrc[i].Name+\"Tex\", npcSrc[i].Texture)\n            .add(npcSrc[i].Name+'Json', npcSrc[i].Json)\n            .add(npcSrc[i].Name+'Skeleton', npcSrc[i].Skeleton);\n          }\n          this.game.data.npc=files[i].data.Characters;\n        }\n    }\n  }\n\n  //Loading progress\n  update(){\n    let percent=Math.floor(this.progress);\n    this.game.progressBar.width=(this.game.width/100)*percent;\n    //this.game.loadingTxt.text=\"Loading... \"+ percent+\"%\";\n  }\n\n  //File failed to load\n  error(resource){\n    console.log(resource);\n  }\n\n}\n\nexport default GameLoader;\n","import localForage from 'localforage';\n\nexport default class Storage{\n  constructor(game){\n    this.game=game;\n  }\n\n  //Save adventure progress\n  save(){\n    //Get solved puzzles\n    let puzzlesSolved=[];\n    let puzzleArray=Object.values(this.game.puzzles)\n\n    puzzleArray.forEach(function(puzzle){\n      if(puzzle.solved && !puzzlesSolved.includes(puzzle.config.Name))\n        puzzlesSolved.push(puzzle.config.Name)\n    });\n\n    //Get dialogues\n    let dialoguesDisabled=[];\n    let dialogueArray=Object.values(this.game.dialogues);\n\n\n    dialogueArray.forEach(function(dialogue){\n      let branches=Object.values(dialogue.branches);\n\n      branches.forEach(function(branch){\n\n        branch.Choices.forEach(function(choice,index){\n          if(choice.disabled){\n            let disabledOption={\n              Dialogue:dialogue.config.Name,\n              Branch:branch.Name,\n              Index:index\n            }\n            dialoguesDisabled.push(disabledOption);\n          }\n        });\n      });\n\n    });\n\n    //Get player cutscenes\n    let cutscenesPlayed=[];\n    let cutscenesArray=Object.values(this.game.cutscenes);\n    cutscenesArray.forEach(function(cutscene){\n      if(cutscene.played) cutscenesPlayed.push(cutscene.config.Name);\n    });\n\n    //Store the progress\n    this.progress={\n      language:this.game.activeLanguage,\n      latestScene:this.game.activeScene.config.Name,\n      playerPos:[this.game.player.sprite.x,this.game.player.sprite.y],\n      inventory:this.game.inventory.objects,\n      puzzles:puzzlesSolved,\n      dialogues:dialoguesDisabled,\n      cutscenes:cutscenesPlayed\n    }\n\n    //Save object to local storage\n    localForage.setItem('JSGAM_Storage', this.progress);\n  }\n\n  //Load adventure progress\n  load(){\n    let game=this.game;\n\n    //Disable dialogues finished\n    this.progress.dialogues.forEach(function(disable){\n      game.dialogues[disable.Dialogue].branches[disable.Branch].Choices[disable.Index].disabled=true;\n    });\n\n    //Disable cutscenes played\n    this.progress.cutscenes.forEach(function(name){\n      game.cutscenes[name].played=true;\n    });\n\n    this.game.silentMode=true;\n    //Resolve puzzles already done\n    this.progress.puzzles.forEach(function(name){\n      game.puzzles[name].resolve();\n    });\n    \n    //Load objects in inventory\n    this.progress.inventory.forEach(function(item){\n\n      //Add object to inventory\n      game.inventory.add(item);\n\n      //Remove objects from scenes configurations\n      let thisItem=item;\n      let sceneArray=Object.values(game.scenes);\n      sceneArray.forEach(function(scene){\n        if(scene.config.Objects!==undefined && scene.config.Objects.includes(thisItem)){\n          let tmpIndex=scene.config.Objects.indexOf(thisItem);\n          scene.config.Objects.splice(tmpIndex,1);\n        }\n      })\n\n    });\n    this.game.silentMode=false\n\n    //Add player to latest Position\n    this.game.player.sprite.x=this.progress.playerPos[0];\n    this.game.player.sprite.y=this.progress.playerPos[1];\n\n  }\n\n  //Clear local storage\n  delete(){\n    localForage.clear();\n  }\n\n  check(){\n    let storage=this;\n\n    localForage.getItem('JSGAM_Storage').then(function(value) {\n      // This code runs once the value has been loaded\n      // from the offline store.\n      if(value!==null){\n        storage.progress=value;\n        storage.game.activeLanguage=value.language;\n        storage.game.scenes[\"Title\"].changeLanguage();\n        storage.game.scenes[\"Title\"].states[\"MainMenu\"].enable(\"Continue\");\n      }\n    }).catch(function(err) {\n        // This code runs if there were any errors\n        console.log(err);\n    });\n  }\n}\n","export default class Sound{\n  constructor(){\n    this.game=null;\n    this.source=null;\n    this.sprite=null;\n  }\n\n  play(loop,src){\n    this.source.volume(1);\n    if(loop!==undefined && loop!==null) this.source.loop(true);\n    if(src!==undefined && src!==null) this.sprite=this.source.play(src);\n    else this.source.play();\n  }\n\n  stop(){\n    if(this.sprite!==null){\n      this.source.once('fade', this.onFade.bind(this),this.sprite);\n      this.source.fade(1,0,1000,this.sprite);\n    }\n    else{\n      this.source.once('fade', this.onFade.bind(this));\n      this.source.fade(1,0,1000);\n    }\n  }\n\n  onFade(){\n    if(this.sprite!==null){\n      this.source.stop(this.sprite);\n      this.source.volume(1,this.sprite);\n      this.sprite=null;\n    }else{\n      this.source.stop();\n      this.source.volume(1);\n    }\n  }\n\n  duration(){\n    let length=null;\n    if(this.sprite!==null) length=this.source.duration(this.sprite);\n    else length=this.source.duration();\n    return length;\n  }\n\n}\n","class Scene{\n  constructor(){\n    this.container = new PIXI.Container();\n    this.game=null;\n  }\n\n  setup(config){\n    this.background=new PIXI.Sprite(PIXI.Texture.from(config.Background));\n    this.background.anchor.set(0);\n    this.container.addChild(this.background);\n    if(config.Foreground!==undefined)\n    {\n      this.foreground=new PIXI.Sprite(PIXI.Texture.from(config.Foreground));\n      this.foreground.anchor.set(0);\n      this.container.addChild(this.foreground);\n    }\n    this.music=config.Music;\n    this.config=config;\n  }\n\n  update(dt) {\n\n  }\n  hide(){\n    this.container.visible=false;\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n}\n\nexport default Scene;\n","import {BitmapText} from 'pixi.js';\n\nclass Button extends BitmapText{\n    constructor(text,style){\n      super(text,style);\n      this.interactive=true;\n      this.buttonMode=true;\n    }\n}\n\nclass Infotxt extends BitmapText{\n    constructor(text,style){\n      super(text,style);\n    }\n}\n\n\nclass Phrases{\n  constructor(config){\n    this.container=new PIXI.Container();\n    this.hide();\n    this.game=config;\n    this.option=[];\n\n    for(let i=0;i<this.game.dialogueChoices;i++){\n      this.option[i]=new Button(\"Option\",this.game.settings.Text.ButtonStyle);\n      this.option[i].game=this.game;\n      this.option[i].anchor.set(0.5,0);\n      this.option[i].on('pointertap', this.onTap.bind(this.option[i]));\n      this.option[i].index=i;\n      this.container.addChild(this.option[i]);\n      this.option[i].x=this.container.width/2;\n      if(i>0)this.option[i].y=this.option[i-1].y+this.option[i-1].height;\n    }\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  onTap(){\n    let activeChoice=this.game.activeDialogue.currentBranch.Choices;\n\n    if(this.alpha==1){\n      this.game.activeDialogue.choice=this.index;\n      if(activeChoice[this.index].Repeat==false) activeChoice[this.index].disabled=true;\n      this.game.activeDialogue.next();\n    }\n  }\n\n  get(){\n    this.clear();\n    let options=this.game.activeDialogue.currentBranch.Choices;\n    for(let i=0;i<options.length;i++){\n      if(options[i].disabled){\n        this.option[i].alpha=0.5;\n      }else this.option[i].alpha=1;\n      this.option[i].visible=true;\n      this.option[i].text=options[i].Text[this.game.activeLanguage];\n    }\n    this.sort();\n    this.show();\n  }\n\n  clear(){\n    for(let i=0;i<this.option.length;i++){\n      this.option[i].visible=false;\n    }\n  }\n\n  sort(){\n    for(let i=0;i<this.option.length;i++){\n      this.option[i].x=this.container.width/2;\n    }\n    if(this.container.width>this.container.parent.width || this.container.height>this.container.parent.height){\n      this.scale();\n    }\n    this.center();\n  }\n\n  scale(){\n    let ratio = Math.min( this.game.width/this.container.width,  this.container.parent.height/this.container.height);\n    this.container.scale.set(ratio*0.95)\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n  //  this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n  //  this.container.pivot.y = this.container.height / 2;\n  }\n}\n\nclass TextField{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.Avatar=null;\n    this.Background=null;\n    this.Text=null;\n    this.container.visible=false;\n  }\n\n  build(){\n    this.container.parentLayer = this.game.layerUI;\n    this.Background=new PIXI.Sprite(PIXI.Texture.WHITE);\n\n    let size=4;\n    if(this.game.settings.Text.Size!==undefined){\n      if(this.game.settings.Text.Size===\"fourth\") size=4;\n      else if(this.game.settings.Text.Size===\"half\") size=2;\n    }\n    this.Background.width=this.game.width;\n    this.Background.height=this.game.height/size;\n\n    this.Background.tint='black';\n    this.Background.alpha=0.5;\n\n    this.Avatar=new PIXI.Sprite(PIXI.Texture.from(this.game.data.player.Avatar));\n    let ratio=this.Avatar.width / this.Avatar.height;\n    this.Avatar.height=this.Background.height;\n    this.Avatar.width=this.Avatar.height*ratio*0.95;\n\n    this.Text=new Button(\"\", this.game.settings.Text.Style);\n    this.Text.x=this.Avatar.width*1.05;\n  //  this.Text.anchor.set(0.5,0);\n    this.Text.maxWidth=this.game.width-this.Avatar.width;\n\n    this.Text.y=0;\n    this.Text.on('pointertap',this.skip.bind(this));\n\n    this.Choices=new Phrases(this.game);\n\n    this.container.addChild(this.Background);\n    this.container.addChild(this.Avatar);\n    this.container.addChild(this.Text);\n    this.container.addChild(this.Choices.container);\n\n    //this.Text.x=this.container.width/2;\n    this.Choices.sort();\n    if(this.game.settings.Text.Position!==undefined) this.setPosition(this.game.settings.Text.Position);\n  }\n\n  show(){\n    this.Text.visible=true;\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  end(){\n    if(this.game.activeDialogue!==null){\n      this.talker.shutup();\n      if(this.game.activeDialogue.choice!==null) this.game.activeDialogue.answer();\n      else{\n        this.Text.visible=false;\n        this.Avatar.visible=false;\n        this.Choices.get();\n      }\n\n    }else{\n      this.setText(\"\");\n      this.hide();\n      this.talker.shutup();\n      this.game.player.stop();\n      if(this.game.activeObject!==null) this.game.activeObject.cancel();\n    }\n  }\n\n  skip(){\n    this.end();\n    if(this.talker) clearTimeout(this.talker.timeoutID);\n  }\n\n  setPosition(position){\n    if(position===\"top\"){\n      this.container.x=0;\n      this.container.y=0;\n    }else if(position===\"bottom\"){\n      this.container.x=0;\n      this.container.y=this.game.height-this.container.height;\n    }\n  }\n\n  setText(newText){\n    this.Text.text=newText;\n    if(this.Text.width>this.container.width || this.Text.height>this.container.height){\n      this.adjustText();\n    }\n  }\n\n  adjustText(){\n    let ratio = Math.min( this.container.width/this.Text.width,  this.container.height/this.Text.height);\n    this.container.scale.set(ratio*0.95);\n  }\n\n  //Get words number of the text\n  countWords(str) {\n   return str.split(\" \").length;\n  }\n\n  //Calculate how many seconds we show the text\n  timeOut(){\n    let time;\n    if(this.game.activeVoice!==null) time=this.game.voices[this.game.activeVoice].duration();\n    else if(this.game.settings.Text.Speed!==undefined) time=this.game.settings.Text.Speed;\n    else time=this.countWords(this.Text.text)/3;\n\n    //Time must be at least 1 second\n    if(time<1) time=1;\n\n    return time*1000;\n  }\n\n  setColor(colour){\n    this.Text.tint=colour;\n  }\n\n  setFont(newFont){\n    this.Text.font=newFont;\n  }\n\n  setAvatar(newAvi){\n    this.Avatar.visible=true;\n    this.Avatar.texture=(PIXI.Texture.from(newAvi));\n  }\n\n  hideAvatar(){\n    this.Avatar.visible=false;\n  }\n\n}\n\nexport {Button,TextField,Infotxt};\n","import {Button} from './text.js'\n\nclass Menu{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.game=null;\n    this.buttons={};\n    }\n\n  addButton(name,text){\n    this.buttons[name]=new Button(text[this.game.activeLanguage],this.game.settings.Text.ButtonStyle);\n    this.container.addChild(this.buttons[name]);\n  }\n\n  modify(name,text){\n    this.buttons[name].text=text[this.game.activeLanguage];\n  }\n\n  disable(name){\n    this.buttons[name].alpha=0.5;\n    this.buttons[name].interactive=false;\n  }\n\n  enable(name){\n    this.buttons[name].alpha=1.0;\n    this.buttons[name].interactive=true;\n  }\n\n  sort(){\n    let i;\n    let arrayButtons=Object.values(this.buttons);\n    let length=arrayButtons.length;\n    arrayButtons[0].y=0;\n    for(i=1;i<length;i++)\n    {\n      arrayButtons[i].y=arrayButtons[i-1].y+arrayButtons[i-1].height*1.5;\n      arrayButtons[i].x=this.container.width/2-arrayButtons[i].width/2;\n    }\n\n    this.center();\n  //  this.resize();\n  }\n\n  resize(){\n    let ratio = Math.min( this.game.width/this.container.width,  this.game.height/this.container.height);\n    //console.log(ratio)\n    this.container.scale.set(ratio*0.95);\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n\n}\nexport default Menu;\n","import Menu from './menu.js';\n\nclass MainMenu extends Menu{\n  create(){\n      let gameTexts=this.game.data.texts;\n      this.addButton(\"New\",gameTexts.NewGame);\n      this.addButton(\"Continue\",gameTexts.Continue);\n      this.addButton(\"Options\",gameTexts.Options);\n      this.addButton(\"Help\",gameTexts.Help);\n      this.addButton(\"Credits\",gameTexts.Credits);\n\n      this.disable(\"Continue\");\n\n      this.sort();\n    }\n\n  changeLanguage(){\n    this.modify(\"New\",this.game.data.texts.NewGame);\n    this.modify(\"Continue\",this.game.data.texts.Continue);\n    this.modify(\"Options\",this.game.data.texts.Options);\n    this.modify(\"Help\",this.game.data.texts.Help);\n    this.modify(\"Credits\",this.game.data.texts.Credits);\n\n    this.sort();\n  }\n\n}\nexport default MainMenu;\n","import Menu from './menu.js';\nimport {Button} from './text.js';\n\nclass Options extends Menu{\n  create(){\n    this.container.visible=false;\n    let languages=this.game.settings.Languages\n    for(let i=0;i<languages.length;i++){\n      this.addLanguage(languages[i],);\n      this.buttons[languages[i]].on('pointerup', this.setLanguage);\n    }\n\n    let langArray=Object.values(this.buttons);\n    langArray[this.game.activeLanguage].tint=0xFF0000;\n\n    this.addButton(\"Back\",this.game.data.texts.Back);\n    this.sort();\n  }\n\n  addLanguage(name){\n    this.buttons[name]=new Button(name,this.game.settings.Text.ButtonStyle);\n    this.buttons[name].father=this;\n    this.container.addChild(this.buttons[name]);\n  }\n\n  setLanguage(){\n    this.father.change(this.text);\n  }\n\n  change(text){\n    let languages=this.game.settings.Languages\n    this.buttons[languages[this.game.activeLanguage]].tint=0xFFFFFF;\n    this.game.activeLanguage=this.game.settings.Languages.indexOf(text);\n    this.buttons[languages[this.game.activeLanguage]].tint=0xFF0000;\n    this.modify(\"Back\",this.game.data.texts.Back);\n    this.sort();\n  }\n\n}\nexport default Options;\n","class Help{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.container.visible=false;\n    this.container.interactive=true;\n    this.container.buttonMode=true;\n    }\n\n  create(){\n    let config=this.game.settings;\n\n    this.background=new PIXI.Sprite(PIXI.Texture.from(config.Help[this.game.activeLanguage]));\n    this.container.addChild(this.background);\n    this.center();\n    this.container.on('pointerup', this.mainMenu.bind(this));\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  changeLanguage(){\n    this.background.texture=PIXI.Texture.from(this.game.settings.Help[this.game.activeLanguage]);\n    this.center();\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n}\n\nexport default Help;\n","import { TweenMax } from \"gsap\";\nimport PixiPlugin from \"gsap/PixiPlugin\";\nimport {BitmapText,Container} from 'pixi.js';\n\nclass Credits{\n  constructor(){\n    this.container=new Container();\n    this.container.visible=false;\n    this.container.interactive=true;\n    this.container.buttonMode=true;\n    }\n\n  create(){\n    let config=this.game.data.credits;\n\n    if(config.Background!==undefined){\n      this.background=new PIXI.Sprite(PIXI.Texture.from(config.Background));\n      this.container.addChild(this.background);\n    }\n\n    this.buildText();\n    this.speed=null;\n\n    if(this.game.data.credits.Time!==undefined){\n      this.speed=this.game.data.credits.Time;\n    }else{\n      this.speed=20;\n    }\n\n    this.structuredText = new BitmapText(this.text,config.Style);\n    this.tween=null;\n    this.container.addChild(this.structuredText);\n\n    this.container.x = this.game.width / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.y=this.game.height;\n    this.container.on('pointerup', this.mainMenu.bind(this));\n  }\n\n  show(){\n    this.container.visible=true;\n    this.animate();\n  }\n\n  animate(){\n    TweenMax.set(this.container,{y: this.game.height});\n    this.tween=TweenMax.to(this.container, 20, {y: 0 - this.container.height,onComplete:this.mainMenu.bind(this)});\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n\n  buildText(){\n    let credits=this.game.data.credits;\n\n    this.text=\"\";\n    let i;\n    for (i=0; i < credits.Lines.length; i++) {\n    this.text += credits.Lines[i].Title[this.game.activeLanguage];\n    this.text += \"\\n\";\n    let j;\n\n    for (j = 0; j < credits.Lines[i].Text.length; j++) {\n      this.text += credits.Lines[i].Text[j];\n      this.text += \"\\n\";\n    }\n    this.text += \"\\n\";\n    }\n  }\n\n  update(){\n    //PIXI.tweenManager.update();\n  }\n\n  changeLanguage(){\n    this.buildText();\n    this.structuredText.text=this.text;\n  }\n\n  mainMenu(){\n    this.tween.kill();\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n}\n\nexport default Credits;\n","import Menu from './menu.js';\nimport {Infotxt} from './text.js'\n\nclass Confirmation extends Menu{\n  create(){\n    this.hide();\n    let gameTexts=this.game.data.texts;\n    this.addText(\"Warning\",gameTexts.Warning);\n    this.addButton(\"Yes\",gameTexts.Yes);\n    this.addButton(\"No\",gameTexts.No);\n    this.sort();\n  }\n\n  changeLanguage(){\n    //this.modify(\"Warning\",this.game.data.texts.Warning);\n    this.text.text=this.game.data.texts.Warning[this.game.activeLanguage];\n    this.modify(\"Yes\",this.game.data.texts.Yes);\n    this.modify(\"No\",this.game.data.texts.No);\n    this.sort();\n  }\n\n  sort(){\n    this.text.y=0\n    this.text.x=this.game.width/2-this.text.width/2;\n    this.buttons[\"Yes\"].y=this.text.height*1.5;\n    this.buttons[\"Yes\"].x=this.buttons[\"Yes\"].width;\n    this.buttons[\"No\"].y=this.text.height*1.5;\n    this.buttons[\"No\"].x=this.game.width-this.buttons[\"No\"].width*2;\n    this.container.y=this.game.height/2-this.container.height/2;\n  }\n\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n\n  addText(name,text){\n    this.text=new Infotxt(text[this.game.activeLanguage],this.game.settings.Text.ButtonStyle);\n    this.container.addChild(this.text);\n  }\n}\n\nexport default Confirmation;\n","import Scene from './scene.js';\nimport MainMenu from './mainmenu.js'\nimport Options from './options.js'\nimport Help from './help.js'\nimport Credits from './credits.js'\nimport Confirmation from './confirmation.js'\n\nclass Title extends Scene{\n  build(){\n    this.states={};\n\n    //Add Menus\n    this.addState(\"MainMenu\", new MainMenu());\n    this.addState(\"Options\", new Options());\n    this.addState(\"Credits\", new Credits());\n    this.addState(\"Help\", new Help());\n    this.addState(\"Warning\", new Confirmation());\n\n    //Add actions to the menu buttons\n    this.addAction(\"MainMenu\",\"Options\",this.showOptions.bind(this));\n    this.addAction(\"MainMenu\",\"Help\",this.showHelp.bind(this));\n    this.addAction(\"MainMenu\",\"Credits\",this.showCredits.bind(this));\n\n    this.addAction(\"MainMenu\",\"New\",this.checkAdventure.bind(this));\n    this.addAction(\"MainMenu\",\"Continue\",this.loadAdventure.bind(this));\n\n    this.addAction(\"Warning\",\"Yes\",this.newAdventure.bind(this));\n    this.addAction(\"Warning\",\"No\",this.mainMenu.bind(this));\n\n    this.addAction(\"Options\", \"Back\",this.mainMenu.bind(this));\n\n  }\n\n  addAction(name,button,action){\n    this.states[name].buttons[button].on('pointerup',action)\n  }\n\n  addState(name, state, config) {\n      this.states[name] = state;\n\n      //Set game so state can access it\n      state.game = this.game;\n\n      //Create state\n      state.create();\n\n      this.container.addChild(this.states[name].container);\n  }\n\n  showOptions(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Options\"].show();\n  }\n\n  showHelp(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Help\"].show();\n  }\n\n  showCredits(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Credits\"].show();\n  }\n\n  mainMenu(){\n    this.states[\"Credits\"].hide();\n    this.states[\"Options\"].hide();\n    this.states[\"Help\"].hide();\n    this.states[\"Warning\"].hide();\n    this.changeLanguage();\n    this.states[\"MainMenu\"].show();\n\n  }\n\n  changeLanguage(){\n    this.states[\"MainMenu\"].changeLanguage();\n    this.states[\"Credits\"].changeLanguage();\n    this.states[\"Help\"].changeLanguage();\n    this.states[\"Warning\"].changeLanguage();\n  }\n\n  warning(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Warning\"].show();\n  }\n\n  checkAdventure(){\n    if(this.game.storage.progress!==undefined){\n      this.warning();\n    }else{\n      this.newAdventure();\n    }\n  }\n\n  newAdventure(){\n    //Delete any game progress\n    this.game.storage.delete();\n\n    //Set the first scene\n    this.game.changeScene(this.game.settings.FirstScene);\n\n    //Here we go\n    this.game.start();\n\n  }\n\n  loadAdventure(){\n    this.game.storage.load();\n    this.game.changeScene(this.game.storage.progress.latestScene);\n    this.game.start();\n  }\n}\n\nexport default Title;\n","//import * as PIXI from 'pixi.js';\nimport Scene from './scene.js';\n\nimport Walkable from 'walkable';\n\nclass GameScene extends Scene{\n  build(){\n    if(this.foreground!==undefined) this.foreground.parentLayer = this.game.layerTop; //Z-order\n    this.background.parentLayer = this.game.layerBottom; //Z-order\n    this.background.interactive=true;\n    this.background.buttonMode=true;\n\n    this.background.on('pointertap',this.getPosition.bind(this));\n\n    //Add obstacles to the scene\n    this.walkable=new Walkable(this.game.width,this.game.height);\n      if(this.config.WalkArea!==undefined){\n        this.walkable.addPolygon(this.config.WalkArea);\n      }\n\n      if(this.config.Obstacles!==undefined){\n        let obstacles=Object.values(this.config.Obstacles);\n        this.config.Obstacles=obstacles;\n        for(let i=0;i<this.config.Obstacles.length;i++){\n          this.walkable.addPolygon(this.config.Obstacles[i]);\n        }\n      }\n\n      //Add objects to the scene\n      let sceneObjects=this.config.Objects;\n      if(sceneObjects){\n        for(let i=0;i<sceneObjects.length;i++){\n          if(this.game.objects[sceneObjects[i]]!==undefined){\n            this.container.addChild(this.game.objects[sceneObjects[i]].sprite);\n          }else{\n            console.log(\"Error:Game object \"+sceneObjects[i]+\" not found\");\n          }\n        }\n      }\n\n      //Add NPCs (non-playable characters) to the scene\n      let sceneChars=this.config.Characters;\n      if(sceneChars){\n        for(let i=0;i<sceneChars.length;i++){\n          if(this.game.npcs[sceneChars[i]]!==undefined){\n            this.container.addChild(this.game.npcs[sceneChars[i]].sprite);\n          }else{\n            console.log(\"Error:Game character \"+sceneChars[i]+\" not found\");\n          }\n        }\n      }\n  }\n\n  getPosition(event){\n    let coord=event.data.getLocalPosition(this.game.app.stage);\n    if(!this.game.player.lock && this.game.activeObject===null && this.game.activeNPC===null){\n      this.game.player.move(coord);\n    }\n  }\n\n  getPath(fromX,fromY,toX,toY){\n    return this.walkable.findPath(fromX, fromY, toX, toY, 0);\n  }\n\n}\n\nexport default GameScene;\n","import { TweenMax } from \"gsap\";\nimport PixiPlugin from \"gsap/PixiPlugin\";\nimport {Sprite,Texture,Container,BitmapText} from 'pixi.js';\n\nclass CutScene{\n  constructor(){\n    this.container=new Container();\n    this.music=null;\n    this.voice=null;\n    this.sequenceIndex=0;\n    this.played=false;\n  }\n\n  build(){\n    if(this.config.Video){\n      this.videoData = this.game.files.resources[this.config.Video].data;\n      this.videoEnds=this.end.bind(this);\n      this.videoData.addEventListener('ended',this.videoEnds);\n    }else if(this.config.Sequence){\n      this.tween=null;\n      this.image=new Sprite(Texture.from(this.config.Sequence[this.sequenceIndex].Image));\n      this.image.anchor.set(0.5,0);\n      this.container.interactive=true;\n      this.container.buttonMode=true;\n      this.container.on('pointertap',this.next.bind(this));\n      this.container.addChild(this.image);\n      this.field=new BitmapText(this.config.Sequence[this.sequenceIndex].Text[this.game.activeLanguage],this.game.settings.Text.Style);\n      this.field.anchor.set(0.5,1);\n      this.field.maxWidth=this.game.width;\n      this.container.addChild(this.field);\n    }\n  }\n\n  show(){\n    if(this.config.Video) {\n      let videoTexture = Texture.from(this.videoData);\n    \tthis.videoSprite = new Sprite(videoTexture);\n      this.videoSprite.width = this.game.width;\n      this.videoSprite.height = this.game.height;\n      this.videoSprite.interactive=true;\n      this.videoSprite.buttonMode=true;\n      this.videoSprite.on('pointertap',this.end.bind(this));\n      this.container.addChild(this.videoSprite);\n    }else if(this.config.Sequence) {\n      this.adjust();\n      this.setMusic();\n      this.setVoice();\n    }\n    this.game.app.stage.addChild(this.container);\n    this.fadeIn();\n\n  }\n\n  hide(){\n      this.container.parent.removeChild(this.container);\n  }\n\n  next(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    if(this.sequenceIndex<this.config.Sequence.length-1){\n      this.sequenceIndex+=1;\n      this.field.text=this.config.Sequence[this.sequenceIndex].Text[this.game.activeLanguage];\n      this.image.texture=(Texture.from(this.config.Sequence[this.sequenceIndex].Image));\n      this.adjust();\n      this.setMusic();\n      this.setVoice();\n      this.fadeIn();\n    }else{\n      this.end();\n    }\n  }\n\n  fadeIn(){\n    if(this.tween) this.tween.kill();\n    this.tween=TweenMax.fromTo(this.container, 1, {alpha:0}, {alpha:1, onComplete:this.timer.bind(this)});\n  }\n\n  timer(){\n    this.timeoutID = setTimeout(this.fadeOut.bind(this), this.config.Sequence[this.sequenceIndex].Time*1000);\n  }\n\n  fadeOut(){\n    if(this.tween) this.tween.kill();\n    this.tween=TweenMax.fromTo(this.container, 1, {alpha:1}, {alpha:0, onComplete:this.next.bind(this)});\n  }\n\n  end(){\n    this.game.activeCutscene=null;\n    if(this.videoData){\n      this.videoData.pause();\n      this.videoData.removeEventListener('ended',this.videoEnds);\n    }\n\n    if(this.tween) this.tween.kill();\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n\n    if(this.music!==null){\n      //this.game.sound.stop(this.music);\n      this.game.music[this.music].stop();\n    }\n\n    this.played=true;\n    this.hide();\n\n    if(!this.game.finished)\n    {\n      this.game.resume();\n    }else{\n      this.game.home();\n    }\n  }\n\n  adjust(){\n    let ratio=this.image.width / this.image.height;\n    this.image.height=this.game.height-this.field.height;\n    this.image.width=this.image.height*ratio;\n\n    this.image.x=this.game.width/2;\n    this.field.x=this.game.width/2;\n    this.field.y=this.game.height;\n\n    if(this.container.width>this.game.width || this.container.height>this.game.height){\n      this.scale();\n    }\n    this.center();\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height  / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n\n  scale(){\n    let ratio = Math.min( this.game.width/this.container.width, this.game.height/this.container.height);\n    this.container.scale.set(ratio);\n  }\n\n  setMusic(){\n    if(this.config.Sequence[this.sequenceIndex].Music!==undefined && this.game.playSounds){\n      if(this.music!==null){\n        this.game.music[this.music].stop();\n      }\n\n      this.music=this.config.Sequence[this.sequenceIndex].Music;\n      this.game.music[this.music].play(true);\n    }\n  }\n\n  setVoice(){\n    if(this.voice!==null){\n      this.game.voices[this.config.VoiceSet].stop();\n      this.voice=null;\n    }\n\n    if(this.config.Sequence[this.sequenceIndex].Voice!==undefined && this.game.playSounds){\n      this.voice=this.config.Sequence[this.sequenceIndex].Voice[this.game.activeLanguage];\n      this.game.voices[this.config.VoiceSet].play(null,this.voice);\n    }\n  }\n\n}\n\nexport default CutScene;\n","import * as PolyK from 'polyk';\n\nfunction boxesIntersect(a, b)\n{\n  var ab = a.getBounds();\n  var bb = b.getBounds();\n  return ab.x + ab.width > bb.x && ab.x < bb.x + bb.width && ab.y + ab.height > bb.y && ab.y < bb.y + bb.height;\n}\n\nfunction collision(a, b)\n{\n  let result;\n  if(a!=undefined && b !=undefined){\n    if(a.hitArea) result=PolyK.ContainsPoint(a.hitArea.points,b.x,b.y);\n    else if(b.hitArea) result=PolyK.ContainsPoint(b.hitArea.points,a.x,a.y);\n    else result=boxesIntersect(a,b);\n  }\n\n  return result;\n}\n\nfunction closestPoint(area,coords){\n  let coordX=Math.round(coords.x);\n  let coordY=Math.round(coords.y);\n  let changePosition={};\n  let closestedge=PolyK.ClosestEdge(area,coordX,coordY);\n  changePosition.x=closestedge.point.x-closestedge.norm.x;\n  changePosition.y=closestedge.point.y-closestedge.norm.y;\n  return {x:Math.round(changePosition.x),y:Math.round(changePosition.y)}\n}\n\nfunction checkPath(coords,obstaclesPolys,walkPoly){\n  let coordX=Math.round(coords.x);\n  let coordY=Math.round(coords.y);\n  let changePosition={};\n  let newPos;\n\n  if(!PolyK.ContainsPoint(walkPoly,coordX,coordY))\n  {\n    let closestedge=PolyK.ClosestEdge(walkPoly,coordX,coordY);\n    changePosition.x=closestedge.point.x-closestedge.norm.x;\n    changePosition.y=closestedge.point.y-closestedge.norm.y;\n    newPos={x:Math.round(changePosition.x),y:Math.round(changePosition.y)}\n  }else if(obstaclesPolys!==undefined){\n\n    for(let i=0;i<obstaclesPolys.length ;i++){\n      if(PolyK.ContainsPoint(obstaclesPolys[i],coordX,coordY)){\n        let closestedge=PolyK.ClosestEdge(walkPoly,coordX,coordY);\n        changePosition.x=closestedge.point.x-closestedge.norm.x;\n        changePosition.y=closestedge.point.y-closestedge.norm.y;\n        newPos={x:Math.round(changePosition.x)+1,y:Math.round(changePosition.y)+1};\n        break;\n      }\n    }\n  }\n\n  return newPos;\n}\n\nexport {boxesIntersect,checkPath,collision,closestPoint};\n","import {boxesIntersect,collision,closestPoint} from '../collisions.js';\n\nclass GameObject{\n  constructor(){\n    this.sprite=null;\n    this.game=null;\n    this.action=null;\n  }\n\n  build(){\n    if(this.config.Description===undefined){\n      this.config.Description=this.game.data.texts.NoDescription;\n    }\n    //Configure the sprite's object\n    if(this.config.Texture){\n      //Generate a static object from a texture\n      this.sprite=new PIXI.Sprite.from(PIXI.Texture.from(this.config.Texture));\n\n    }else if(this.config.Area){\n\n      //For invisible objects\n      this.sprite=new PIXI.Sprite.from(PIXI.Texture.EMPTY);\n      this.sprite.hitArea=new PIXI.Polygon(this.config.Area);\n\n    }else if(this.config.Animation){\n\n      //Animated objects\n      let spritesheet=this.game.files.resources[this.config.Animation.Name].spritesheet;\n\n      let frames = [];\n      for (var i = 0; i < spritesheet._frameKeys.length; i++) {\n          frames.push(PIXI.Texture.from(spritesheet._frameKeys[i]));\n      }\n\n      this.sprite=new PIXI.extras.AnimatedSprite(frames);\n      this.animationSpeed=this.config.Animation.Speed;\n      this.play();\n    }\n\n    //Position of the object in the screen\n    if(this.config.Position){\n      this.sprite.x=this.config.Position[0];\n      this.sprite.y=this.config.Position[1];\n    }\n\n    //Size of the object\n    if(this.config.Size){\n      this.sprite.scale.set(this.config.Size)\n    }\n\n    if(this.config.Mirror){\n      this.flip();\n    }\n\n    //Configure the anchor (origin point of the object)\n    if(!this.config.Area)this.sprite.anchor.set(0.5,1);\n\n    //Configure the layer for the z-order\n    if(this.config.Layer===\"Top\") this.sprite.parentLayer=this.game.layerTop;\n    else if(this.config.Layer===\"Bottom\") this.sprite.parentLayer=this.game.layerBottom;\n    else this.sprite.parentLayer = this.game.layer;\n\n    //Is it a door?\n    if(this.config.Door){\n      this.door=true;\n      this.newScene=this.config.Door.To;\n      this.playerPos=this.config.Door.Player;\n    }\nthis.holding=false;\nthis.timeoutID;\n    if(this.config.Lock){\n      this.locked=true;\n    }\n    //Game object events\n    this.sprite.interactive=true;\n    this.sprite.buttonMode=true;\n\n    if(this.config.Area!==undefined){\n      this.sprite.on('pointerdown', this.touchArea.bind(this))\n          .on('pointerup', this.releaseArea.bind(this))\n          .on('pointerupoutside', this.releaseArea.bind(this));\n    }else{\n      this.sprite.on('pointerdown', this.touch.bind(this))\n          .on('pointermove', this.move.bind(this))\n          .on('pointerup', this.release.bind(this))\n          .on('pointerupoutside', this.release.bind(this));\n    }\n\n    if(this.config.Interactive!==undefined) this.setInteraction(this.config.Interactive);\n  }\n\n  hide(){\n    this.sprite.visible=false;\n  }\n\n  show(){\n    this.sprite.visible=true;\n  }\n\n  setpos(x,y){\n    this.sprite.x=x;\n    this.sprite.y=y;\n  }\n\n  flip(){\n    this.sprite.scale.x*=-1;\n  }\n\n  changeTexture(texture){\n    this.sprite.texture=new PIXI.Texture.from(texture)\n  }\n\n  hold(){\n    this.holding=true;\n  }\n  //Invisible object touch begins\n  touchArea(event){\n    if(this.game.activeObject===null && !this.game.player.lock){\n      this.game.activeObject=this;\n      this.interaction = event.data;\n      this.action=null;\n      if(this.timeoutID) clearTimeout(this.timeoutID);\n      this.timeoutID=setTimeout(this.hold.bind(this), this.game.holdTime);\n      this.touchedPos=this.interaction.getLocalPosition(this.game.app.stage);\n    }\n  }\n\n  //Invisible object touch ends\n  releaseArea(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n\n    if(this.interaction){\n      let moveTo=this.interaction.getLocalPosition(this.game.app.stage);\n      if(collision(moveTo,this.sprite)){\n        if(this.interaction.button===2 || this.holding){\n          if(this.door===true ){\n            let newPos=closestPoint(this.config.Area,moveTo);\n            moveTo=newPos;\n          }else if(this.config.Use!==undefined){\n            this.game.activePuzzle=this.game.puzzles[this.config.Use];\n          }\n          this.action=\"Use\";\n        }else{\n          this.action=\"Look\";\n       }\n      }\n\n      if(this.action!==null){\n        this.game.player.endAction=this.action;\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      if(this.game.player.touched) this.game.player.touched=false;\n      this.holding=false;\n      this.interaction = null;\n      this.touchedPos=null;\n    }\n  }\n\n  //Object touch begins\n  touch(event){\n    if(this.game.activeObject===null && !this.game.player.lock){\n      this.game.activeObject=this;\n      this.action=null;\n      this.posX = this.sprite.x;\n      this.posY = this.sprite.y;\n      this.interaction = event.data;\n      this.sprite.alpha = 0.5;\n      this.dragging = true;\n      if(this.timeoutID) clearTimeout(this.timeoutID);\n      this.timeoutID=setTimeout(this.hold.bind(this), 1000);\n      this.oldParent=this.sprite.parent;\n      this.depthGroup=this.sprite.parentLayer;\n      if(this.sprite.parentLayer !== this.game.layerUI) this.sprite.parentLayer = this.game.layerUI;\n    }\n  }\n\n  //Object is being dragged\n  move(){\n    if (this.dragging && !this.locked) {\n      this.sprite.setParent(this.game.app.stage);\n      var newPosition = this.interaction.getLocalPosition(this.sprite.parent);\n      let bounds=this.sprite.getBounds();\n      //We can only move the object inside the stage\n      if(newPosition.x>bounds.width/2 && newPosition.x<this.game.width-bounds.width/2) this.sprite.x = newPosition.x;\n      if(newPosition.y>bounds.height && newPosition.y<this.game.height) this.sprite.y = newPosition.y;\n    }\n  }\n\n  //Object drag/touch ends\n  release(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n\n    if(this.interaction){\n      let moveTo={x:this.posX,y:this.posY};\n      //Check if we take it\n      if(collision(this.sprite,this.game.inventory.icon) && this.config.Take){\n        this.action=\"Take\";\n        //Check if we look it\n      }else if(this.interaction.button===2  || this.holding){\n        if(this.config.Use!==undefined) this.game.activePuzzle=this.game.puzzles[this.config.Use];\n        this.action=\"Use\";\n      }else{\n        this.action=\"Look\";\n      }\n\n      if(this.action!==null){\n        this.game.player.endAction=this.action;\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      if(this.game.player.touched) this.game.player.touched=false;\n\n      this.sprite.x = this.posX;\n      this.sprite.y = this.posY;\n      this.sprite.alpha = 1;\n      this.sprite.parentLayer = this.depthGroup;\n      this.sprite.setParent(this.oldParent);\n\n      this.holding=false;\n      this.interaction = null;\n      this.dragging = false;\n    }\n  }\n\n  //Check collision between objects\n  hit(){\n    let found=null;\n    let i;\n\n    //First check the collision between active scene's objects\n    let objectsArray=this.game.activeScene.config.Objects;\n    if(objectsArray!==undefined){\n      for(i=0;i<objectsArray.length;i++){\n        if(collision(this.sprite,this.game.objects[objectsArray[i]].sprite)\n                     && this.config.Name!==objectsArray[i]){\n          found=objectsArray[i];\n          break;\n        }\n      }\n    }\n\n    //Check if the collision is between inventory objects\n    objectsArray=this.game.inventory.objects;\n\n    for(i=0;i<objectsArray.length;i++){\n      if(collision(this.sprite,this.game.objects[objectsArray[i]].sprite)\n                   && this.config.Name!==objectsArray[i]){\n        found=objectsArray[i];\n        break;\n      }\n    }\n\n    //Check the collision a character\n    let charsArray=this.game.activeScene.config.Characters;\n    if(charsArray!==undefined){\n      for(i=0;i<charsArray.length;i++){\n        if(collision(this.sprite,this.game.npcs[charsArray[i]].sprite)\n                     && this.config.Name!==charsArray[i]){\n          found=charsArray[i];\n          break;\n        }\n      }\n    }\n\n    return found;\n  }\n\n  //Object action is canceled or ended\n  cancel(){\n    this.game.activeObject.action=null;\n    this.game.activeObject=null;\n\n  }\n\n  setInteraction(value){\n    this.sprite.interactive=value;\n  }\n\n  //Add the object to a given scene\n  add(scene){\n    this.game.scenes[scene].container.addChild(this.sprite);\n    this.game.scenes[scene].config.Objects.push(this.config.Name);\n  }\n  //Remove objects from game\n  remove(){\n    this.sprite.parent.removeChild(this.sprite);\n\n    //Check if we remove an object which is in an scene\n    let scenesArray=Object.values(this.game.scenes)\n    let i;\n    let scenesLength=scenesArray.length;\n    for(i=0;i<scenesLength;i++){\n      if(scenesArray[i].config.Objects!==undefined && scenesArray[i].config.Objects.includes(this.config.Name)){\n        let tmpIndex=scenesArray[i].config.Objects.indexOf(this.config.Name);\n        scenesArray[i].config.Objects.splice(tmpIndex,1);\n      }\n    }\n\n    //Check if the object to remove is inside the inventory\n    if(this.game.inventory.objects.includes(this.config.Name)){\n      this.game.inventory.remove(this.config.Name)\n    }\n  }\n\n}\n\nexport default GameObject;\n","import {boxesIntersect,collision} from '../collisions.js';\n\nclass Inventory{\n  constructor(){\n      this.container=new PIXI.Container();\n      this.container.visible=false;\n      this.game=null;\n      this.objects=[];\n\n    }\n\n    build(){\n      this.background=new PIXI.Sprite(PIXI.Texture.from(this.game.settings.Inventory.Background));\n      this.background.width=this.game.width/2;\n      this.background.height=this.game.height/2;\n      this.background.parentLayer = this.game.layerUI;\n      this.container.x = (this.game.width - this.background.width) / 2;\n      this.container.y = (this.game.height - this.background.height) / 2;\n      this.border=10;\n      this.icon=new PIXI.Sprite(PIXI.Texture.from(this.game.settings.Inventory.Icon));\n      this.icon.on('pointertap',this.click.bind(this));\n      this.icon.interactive=true;\n      this.icon.buttonMode=true;\n      this.setIcon(this.game.settings.Inventory.Position);\n      this.container.addChild(this.background);\n      this.icon.parentLayer = this.game.layerUI;\n\n      //Hidden by default\n      this.hide();\n      this.hideIcon();\n    }\n\n    show(){\n      this.update();\n      this.container.visible=true;\n    }\n\n    hide(){\n      this.container.visible=false;\n\n    }\n\n    showIcon(){\n      this.icon.visible=true;\n    }\n\n    hideIcon(){\n      this.icon.visible=false;\n\n    }\n\n    setIcon(position){\n      if(position==\"bottom-right\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=this.game.height - this.icon.height;\n      }else if(position==\"top-right\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=0;\n      }else if(position==\"top-left\"){\n        this.icon.x=0;\n        this.icon.y=this.game.height - this.icon.height;\n      }else if(position==\"bottom-top\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=0;\n      }\n    }\n\n    click(){\n      if (this.container.visible) this.hide();\n      else if(!this.game.player.lock) this.show();\n    }\n\n    add(name){\n      this.objects.push(name);\n      this.game.objects[name].sprite.setParent(this.container);\n      this.game.objects[name].sprite.parentLayer=this.game.layerUI;\n      this.game.objects[name].sprite.on('pointermove', this.move.bind(this.game.objects[name]))\n                                    .off('pointerup')\n                                    .off('pointerupoutside')\n                                    .on('pointerup',this.release.bind(this.game.objects[name]))\n                                    .on('pointerupoutside',this.release.bind(this.game.objects[name]));\n      this.update();\n    }\n\n    remove(name)\n    {\n      //Check if object is already in inventory\n      if(this.objects.includes(name)){\n        this.objects.splice(this.objects.indexOf(name),1);\n        this.update();\n      }\n    }\n\n    update(){\n      //Inventory is limited to 25 objects\n      let i;\n      let numObjs=this.objects.length;\n      for(i=0;i<numObjs;i++){\n        let tmpObj=this.game.objects[this.objects[i]].sprite;\n\n        let desiredWidth=this.container.width/5-this.container.width*0.05;\n        let desiredHeight=this.container.height/5-this.container.height*0.05;\n        let ratio = Math.min( desiredWidth/tmpObj.width, desiredHeight/tmpObj.height);\n        tmpObj.width*=ratio;\n        tmpObj.height*=ratio;\n\n        tmpObj.x = ((i % 5) * this.container.width/5+this.border-i)+tmpObj.width/2;\n        tmpObj.y = (Math.floor(i / 5) * this.container.height/5+this.border-i)+tmpObj.height;\n        this.container.width=this.background.width;\n        this.container.height=this.background.height;\n      }\n    }\n\n    move(){\n      if(!boxesIntersect(this.sprite,this.game.inventory.container))\n        this.game.inventory.hide();\n    }\n\n    release(event){\n      if(this.timeoutID) clearTimeout(this.timeoutID);\n\n      if(this.interaction){\n        let objectHit=this.hit();\n\n        let moveTo={x:this.sprite.x,y:this.sprite.y};\n        //Check if we take it\n        if(!this.holding){\n          let voice=undefined;\n          if(this.config.VoiceDescription!==undefined){\n            voice=this.config.VoiceDescription[this.game.activeLanguage];\n          }\n          this.game.player.say(this.config.Description[this.game.activeLanguage],voice);\n\n        }else if(this.config.Combine!==undefined && objectHit!==null){\n          if(this.config.Combine.With===objectHit) {\n            this.game.activePuzzle=this.game.puzzles[this.config.Combine.Puzzle];\n          }\n          this.action=\"Use\";\n        }\n\n        if(this.action!==null){\n          this.game.player.endAction=this.action;\n          this.game.player.move(moveTo);\n        }else{\n          this.cancel();\n        }\n\n        this.sprite.x = this.posX;\n        this.sprite.y = this.posY;\n        this.sprite.alpha = 1;\n        this.sprite.setParent(this.oldParent);\n\n        this.interaction = null;\n        this.dragging = false;\n        this.holding=false;\n      }\n    }\n}\n\nexport default Inventory;\n","class Puzzle{\n  constructor(){\n    this.solved=false;\n  }\n\n  resolve(){\n    if(this.game.activeObject!==null) this.game.activeObject.cancel();\n\n    if(!this.solved){\n      if(this.config.ModifyObject){\n        let objectMod=this.game.objects[this.config.ModifyObject.Name];\n        if(this.config.ModifyObject.Description!==undefined) objectMod.config.Description=this.config.ModifyObject.Description;\n        if(this.config.ModifyObject.Door!==undefined) this.setDoor(objectMod)\n        if(this.config.ModifyObject.Position!==undefined) objectMod.setpos(this.config.ModifyObject.Position[0],this.config.ModifyObject.Position[1]);\n        if(this.config.ModifyObject.Mirror) objectMod.flip();\n        if(this.config.ModifyObject.Interactive!==undefined) this.setInteraction(this.config.ModifyObject.Interactive);\n        if(this.config.ModifyObject.Texture!==undefined) this.changeTexture(this.config.ModifyObject.Texture);\n        if(this.config.ModifyObject.Combine!==undefined) objectMod.config.Combine=this.config.ModifyObject.Combine;\n        if(this.config.ModifyObject.Use!==undefined) objectMod.config.Use=this.config.ModifyObject.Use;\n        if(this.config.ModifyObject.Lock!==undefined) objectMod.lock=this.config.ModifyObject.Lock;\n      }\n\n      if(this.config.GetObject!==undefined) this.game.inventory.add(this.config.GetObject);\n\n      if(this.config.AddObject!==undefined){\n        let objectAdd=this.game.objects[this.config.AddObject.Name];\n        objectAdd.add(this.config.AddObject.Scene);\n      }\n\n      if(this.config.RemoveObject!==undefined){\n        let objectRemove=this.game.objects[this.config.RemoveObject];\n        objectRemove.remove();\n\n      }\n\n      if(this.config.RemoveDoor!==undefined){\n        let objectDoor=this.game.objects[this.config.RemoveDoor];\n        objectDoor.door=false;\n      }\n\n      if(this.config.SetDialogue!==undefined){\n        this.game.npcs[this.config.SetDialogue.Character].config.Dialogue=this.config.SetDialogue.Dialogue;\n      }\n\n      if(this.config.Resolve!==undefined)this.game.puzzles[this.config.Resolve].resolve();\n\n      if(this.config.Say && !this.game.silentMode){\n        this.game.player.say(this.config.Say[this.game.activeLanguage]);\n      }else if(this.config.NPCSay && !this.game.silentMode){\n        this.game.npcs[this.config.NPCSay.Name].say(this.config.NPCSay.Text[this.game.activeLanguage]);\n      }else{\n        this.game.player.stop();\n      }\n\n      if(this.config.Sound!==undefined && !this.game.silentMode){\n          if(this.config.Sound.Source!==undefined) this.game.sounds[this.config.Sound.Name].play(null,this.config.Sound.Source);\n          else this.game.sounds[this.config.Sound.Name].play();\n      }\n\n      if(this.config.CutScene!==undefined && !this.game.silentMode && this.game.playSounds){\n        this.game.activeCutscene=this.game.cutscenes[this.config.CutScene];\n        this.game.pause();\n        this.game.activeCutscene.show();\n      }\n\n      if(this.config.EndGame!==undefined && !this.game.silentMode){\n        this.game.end();\n        if(this.config.EndGame.CutScene!==undefined){\n           this.game.activeCutscene=this.game.cutscenes[this.config.EndGame.CutScene];\n           this.game.pause();\n           this.game.activeCutscene.show();\n        }\n        else this.game.home();\n      }\n\n      this.solved=true;\n\n    }else{\n      this.game.player.stop();\n    }\n\n    this.game.activePuzzle=null;\n  }\n\n  setDoor(target){\n    if(this.config.ModifyObject.Door===false){\n      target.door=false;\n    }else{\n      target.door=true;\n      target.newScene=this.config.ModifyObject.Door.To;\n      target.playerPos=this.config.ModifyObject.Door.Player;\n    }\n  }\n}\n\nexport default Puzzle;\n","import * as PIXI from 'pixi.js';\nwindow.PIXI=PIXI;\nconst dragonBones=require('pixi5-dragonbones');\nconst dbfactory=dragonBones.PixiFactory.factory;\nimport {checkPath} from '../collisions.js'\n\nimport { TweenMax } from \"gsap\";\nimport PixiPlugin from \"gsap/PixiPlugin\";\n\nclass Character{\n  constructor(){\n    this.game=null;\n    this.state=null;\n    this.lock=false;\n    this.endAction=null;\n  }\n\n  setup(config){\n    dbfactory.parseDragonBonesData(this.game.files.resources[config.Name+\"Skeleton\"].data);\n    dbfactory.parseTextureAtlasData(this.game.files.resources[config.Name+\"Json\"].data,this.game.files.resources[config.Name+\"Tex\"].texture);\n    this.sprite = dbfactory.buildArmatureDisplay(config.Armature);\n    if(config.Size!==undefined){\n      this.size=config.Size;\n      this.sprite.scale.set(this.size);\n    }else{\n      this.size=1;\n    }\n    this.tween=null;\n    if(config.Animations!=undefined)\n      this.animations=config.Animations;\n    else\n      this.animations={\n        Stand:\"stand\",\n        Walk:\"walk\",\n        Take:\"take\",\n        Use:\"use\",\n        Say:\"speak\"\n      };\n    this.animate(this.animations.Stand);\n    this.state=\"stand\";\n    if(config.Position){\n      this.sprite.x=config.Position[0];\n      this.sprite.y=config.Position[1];\n    }\n    this.sprite.parentLayer = this.game.layer;//Z-order*/\n    this.config=config;\n  }\n\n  hide(){\n    this.sprite.visible=false;\n  }\n\n  show(){\n    this.sprite.visible=true;\n  }\n\n  width(){\n    return this.sprite.getBounds().width;\n  }\n\n  position(coords){\n    this.sprite.x=coords[0];\n    this.sprite.y=coords[1];\n  }\n\n  move(coords){\n    let obstacles=this.game.activeScene.config.Obstacles;\n    let walkingArea=this.game.activeScene.config.WalkArea;\n    let newPosition=coords;\n    let closestPosition=checkPath(coords,obstacles,walkingArea);\n\n    if(closestPosition){\n      newPosition=closestPosition;\n    }\n\n    let findPath=this.game.activeScene.walkable.findPath(this.sprite.x,this.sprite.y,newPosition.x,newPosition.y,0);\n    let i;\n    let finalPath=[];\n    for(i=0;i<findPath.length;i++){\n      finalPath.push({x:findPath[i],y:findPath[i+1]})\n      i++;\n    }\n\n    if(finalPath.length>0){\n      let animationTime=Math.abs(this.sprite.x-newPosition.x)+Math.abs(this.sprite.y-newPosition.y);\n      animationTime=animationTime/(this.game.width+this.game.height);\n      animationTime*=10;\n      if(this.config.Speed!==undefined) animationTime/=this.config.Speed;\n\n      this.animate(this.animations.Walk);\n      if(this.sprite.x<newPosition.x) this.sprite.armature.flipX=false;\n      else this.sprite.armature.flipX=true;\n\n      this.game.activeState=this;\n\n      if(this.tween!==null) this.tween.kill();\n      this.tween=TweenMax.to(this.sprite, animationTime, {bezier:finalPath, ease:Linear.easeNone,onComplete:this.stop.bind(this)});\n    }\n  }\n\n  update(){\n    this.scale();\n  }\n\n  scale(){\n    let scaleChar=this.sprite.y/this.game.height*this.size;\n    if(scaleChar<this.game.activeScene.config.Depth) scaleChar=this.game.activeScene.config.Depth;\n    this.sprite.scale.set(scaleChar);\n  }\n\n  stop(){\n    this.animate(this.animations.Stand);\n    this.game.activeState=null;\n    this.lock=false;\n    if(this.endAction!==null){\n      if(this.endAction===\"Look\") this.look();\n      else if(this.endAction===\"Take\") this.take();\n      else if(this.endAction===\"Use\") this.use();\n      else if(this.endAction===\"Talk\") this.talk();\n      this.endAction=null;\n    }\n  }\n\n  say(text,voice){\n    this.game.textField.talker=this;\n    //Setup the text to show\n    this.game.textField.setText(text);\n    this.game.textField.setAvatar(this.config.Avatar);\n    if(this.config.Color!==undefined) this.game.textField.setColor(Number(this.config.Color));\n    if(this.config.Font!==undefined) this.game.textField.setFont(this.config.Font);\n    else this.game.textField.setFont(this.game.settings.Text.Style.font)\n\n    //Play voice if it's defined\n    if(voice!==undefined && this.config.VoiceSet!=undefined){\n      this.game.activeVoice=this.config.VoiceSet;\n      this.game.voices[this.config.VoiceSet].play(null,voice);\n    }\n\n    this.game.textField.show();\n    //Animate the character\n    this.animate(this.animations.Say);\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    this.timeoutID=setTimeout(this.game.textField.end.bind(this.game.textField), this.game.textField.timeOut());\n  }\n\n  shutup(){\n    if(this.game.activeVoice!=null){\n      this.game.voices[this.config.VoiceSet].stop();\n      this.game.activeVoice=null\n    }\n    this.animate(this.animations.Stand);\n  }\n\n  animate(animation,times){\n    if(this.sprite.animation.lastAnimationName!==animation)\n      this.sprite.animation.fadeIn(animation,0.25,times);\n  }\n}\n\nexport default Character;\n","import * as PIXI from 'pixi.js';\nwindow.PIXI=PIXI;\nconst dragonBones=require('pixi5-dragonbones');\nimport Character from './character.js';\nconst dbEvents=dragonBones.EventObject;\nimport {closestPoint} from '../collisions.js';\n\nclass Player extends Character{\n  setup(config){\n    super.setup(config);\n\n    //Hidden by default\n    this.hide();\n  }\n\n  checkDirection(target){\n    //Player must look in the right direction\n    if(target.config.Area===undefined){\n      if(this.sprite.x<target.sprite.x){\n        this.sprite.armature.flipX=false;\n      }else{\n        this.sprite.armature.flipX=true;\n      }\n    }\n  }\n\n  say(text,voice){\n    super.say(text,voice);\n    //Lock the player\n    this.lock=true;\n  }\n\n  look(){\n    if(this.game.activeObject!==null){\n      this.checkDirection(this.game.activeObject);\n      let text=this.game.activeObject.config.Description[this.game.activeLanguage];\n      let voice=undefined;\n      if(this.game.activeObject.config.VoiceDescription!==undefined){\n        voice=this.game.activeObject.config.VoiceDescription[this.game.activeLanguage];\n      }\n      this.say(text,voice);\n      this.game.activeObject.cancel();\n    }else if(this.game.activeNPC!==null){\n      this.checkDirection(this.game.activeNPC);\n          let text=this.game.activeNPC.config.Description[this.game.activeLanguage];\n          this.say(text);\n          this.game.activeNPC.cancel();\n    }\n  }\n\n  take(){\n    this.lock=true;\n    this.animate(this.animations.Take,1);\n    this.sprite.once(dbEvents.COMPLETE, this.takeEnd, this);\n  }\n\n  takeEnd(){\n    if(this.game.activeObject!==null){\n      let name=this.game.activeObject.config.Name;\n      if(this.game.activeScene!==null){\n        if(this.game.activeScene.config.Objects.includes(name)){\n          let tmpIndex=this.game.activeScene.config.Objects.indexOf(name);\n          this.game.activeScene.config.Objects.splice(tmpIndex,1);\n        }\n      }\n      this.game.inventory.add(name);\n      this.game.activeObject.cancel();\n      this.stop();\n    }\n  }\n\n  use(){\n    this.lock=true;\n    this.animate(this.animations.Use,1);\n    this.sprite.once(dbEvents.COMPLETE, this.useEnd, this);\n  }\n\n  useEnd(){\n    if(this.game.activePuzzle!==undefined && this.game.activePuzzle!==null && !this.game.activePuzzle.solved){\n      this.game.activePuzzle.resolve();\n    }else if(this.game.activeObject!==undefined && this.game.activeObject!==null) {\n      if(this.game.activeObject.door){\n        this.game.changeScene(this.game.activeObject.newScene,\n          this.game.activeObject.playerPos);\n        this.stop();\n      }else{\n        this.say(this.game.data.texts.NotUsable[this.game.activeLanguage])\n      }\n      this.game.activeObject.cancel();\n    }\n  }\n\n  talk(){\n    //Player must look in the right direction\n    if(this.sprite.x<this.game.activeNPC.sprite.x){\n      this.sprite.armature.flipX=false;\n      //if(this.game.activeNPC.config.Mirror!==undefined) this.game.activeNPC.sprite.armature.flipX=true;\n      if(this.game.activeNPC.config.Mirror) this.game.activeNPC.sprite.armature.flipX=true;\n      else this.game.activeNPC.sprite.armature.flipX=false;\n    }else{\n      this.sprite.armature.flipX=true;\n      //if(this.game.activeNPC.config.Mirror!==undefined) this.game.activeNPC.sprite.armature.flipX=false;\n      if(this.game.activeNPC.config.Mirror) this.game.activeNPC.sprite.armature.flipX=false;\n      else this.game.activeNPC.sprite.armature.flipX=true;\n    }\n\n    //Let's talk\n    this.game.activeDialogue.start();\n  }\n\n}\n\nexport default Player;\n","import Character from './character.js';\n\nclass NPC extends Character{\n  build(){\n    if(this.config.Mirror!==undefined) this.sprite.armature.flipX=true;\n    this.holding=false;\n    this.pressTimeoutID;\n    this.sprite.interactive=true;\n    this.sprite.buttonMode=true;\n    this.sprite.on('pointerdown', this.touch.bind(this))\n        .on('pointerup', this.release.bind(this))\n        .on('pointerupoutside', this.release.bind(this));\n  }\n\n  hold(){\n    this.holding=true;\n  }\n\n  touch(event){\n    if(this.game.activeNPC===null && !this.game.player.lock){\n      this.game.activeNPC=this;\n      this.action=null;\n      this.interaction = event.data;\n      if(this.pressTimeoutID) clearTimeout(this.pressTimeoutID);\n      this.pressTimeoutID=setTimeout(this.hold.bind(this), this.game.holdTime);\n    }\n  }\n  //Object drag/touch ends\n  release(){\n    if(this.pressTimeoutID) clearTimeout(this.pressTimeoutID);\n    if(this.interaction){\n      let distance=this.width();\n      if(this.game.player.sprite.x<this.sprite.x) distance*=-1;\n    /*  if(this.game.player.sprite.x<this.sprite.x) distance=this.sprite.getBounds().width*-1;\n      else distance=this.sprite.getBounds().width+this.game.player.sprite;*/\n      let moveTo={x:this.sprite.x+distance,y:this.sprite.y};\n\n      if(this.interaction.button===2  || this.holding){\n        //Check if we talk with the character\n        if(this.config.Dialogue!==undefined){\n          this.game.activeDialogue=this.game.dialogues[this.config.Dialogue];\n          this.action=\"Talk\";\n        }\n      }else{\n        this.action=\"Look\";\n      }\n\n      if(this.action!==null){\n        this.game.player.endAction=this.action;\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      if(this.game.player.touched) this.game.player.touched=false;\n\n      this.holding=false;\n      this.interaction = null;\n      this.dragging = false;\n      this.moved=0;\n    }\n  }\n\n  //Set player to look this object\n  look(){\n    this.action=this.game.player.look.bind(this.game.player);\n  }\n\n  //Object action is canceled or ended\n  cancel(){\n    this.game.activeNPC.action=null;\n    this.game.activeNPC=null;\n\n  }\n}\n\nexport default NPC;\n","import {Button} from './text.js'\n\n//Branches dialogue system\nclass Dialogue{\n  constructor(){\n    this.timeoutID=null;\n    this.firstTime=true;\n    this.choice=null;\n    this.branches={};\n  }\n\n  setup(config){\n    this.config=config;\n\n    //Get dialogue branches\n    let i;\n    length=this.config.Branches.length;\n    for(i=0;i<length;i++)\n    {\n      this.branches[this.config.Branches[i].Name]=this.config.Branches[i];\n    }\n\n    this.currentBranch=this.branches[this.config.DefaultBranch];\n  }\n\n  //Executed when we interact with a NPC\n  start(){\n    this.firstTime=false;\n    this.game.player.lock=true;\n    this.game.textField.show();\n    this.game.textField.hideAvatar();\n    this.game.textField.Choices.get();\n  }\n\n  //Executed everytime we choose an option\n  next(){\n    if(this.choice!==null){\n      let choiceSelected=this.currentBranch.Choices[this.choice];\n      this.game.textField.Choices.hide();\n      let voice=undefined;\n      if(choiceSelected.Voice!==undefined){\n        voice=choiceSelected.Voice[this.game.activeLanguage];\n      }\n      this.game.player.say(choiceSelected.Text[this.game.activeLanguage],voice);\n    }else{\n      this.game.textField.hideAvatar();\n      this.game.textField.Choices.get();\n    }\n  }\n\n  //Search for a branch with a given name\n  searchBranch(name){\n    let branchFound=-1;\n    let i;\n    let length=this.config.Branches.length\n    for(i=0;i<length;i++)\n         if(this.config.Branches[i].Name===name)\n         {\n             branchFound=i;\n             break;\n         }\n    return branchFound;\n  }\n\n  answer(){\n    let choiceSelected=this.currentBranch.Choices[this.choice];\n    let voice=undefined;\n    if(choiceSelected.AnswerVoice!==undefined){\n      voice=choiceSelected.AnswerVoice[this.game.activeLanguage];\n    }\n    this.game.activeNPC.say(choiceSelected.Answer[this.game.activeLanguage],voice);\n\n    if(choiceSelected.Link){\n      this.currentBranch=this.branches[choiceSelected.Link];\n    }else if(choiceSelected.Puzzle){\n      choiceSelected.Repeat=false;\n      this.end();\n      this.game.puzzles[choiceSelected.Puzzle].resolve();\n    }else if(choiceSelected.EndDialogue){\n      this.end();\n    }\n\n\n    this.choice=null;\n  }\n\n  //Ends the conversations\n  end(){\n    this.game.activeNPC=null;\n    this.game.activeDialogue=null;\n  }\n\n  timeOut(){\n    this.next();\n  }\n}\n\nexport default Dialogue;\n","import { TweenMax } from \"gsap\";\nimport PixiPlugin from \"gsap/PixiPlugin\";\n\nclass Logo{\n  constructor(game){\n    this.game=game;\n    this.index=0;\n    this.timeoutID=null;\n    this.tween=null;\n    this.image=new PIXI.Sprite(\n      PIXI.Texture.from(this.game.settings.Logos[this.index]));\n    this.image.anchor.set(0.5,0.5)\n    this.image.position.set(this.game.width/2,this.game.height/2)\n    this.image.interactive=true;\n    this.image.buttonMode=true;\n    this.image.on('pointertap',this.fadeOut.bind(this));\n    this.image.alpha=0;\n  }\n\n  show(){\n    this.game.app.stage.addChild(this.image);\n    this.fadeIn();\n  }\n\n  fadeIn(){\n    if(this.tween) this.tween.kill();\n    this.tween=TweenMax.set(this.image,{alpha:0});\n    this.tween=TweenMax.fromTo(this.image, 1, {alpha:0}, {alpha:1, onComplete:this.timer.bind(this)});\n  }\n\n  timer(){\n    this.timeoutID = setTimeout(this.fadeOut.bind(this), 3*1000);\n  }\n\n  fadeOut(){\n    this.image.interactive=false;\n    if(this.tween) this.tween.kill();\n    this.tween=TweenMax.fromTo(this.image, 1, {alpha:1}, {alpha:0, onComplete:this.next.bind(this)});\n  }\n\n  next(){\n    this.image.interactive=true;\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    this.index++;\n    if(this.game.settings.Logos[this.index]!==undefined)\n    {\n      this.image.texture=(PIXI.Texture.from\n        (this.game.settings.Logos[this.index]));\n      this.fadeIn();\n    }\n    else this.end();\n  }\n\n  end(){\n\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    if(this.tween) this.tween.kill();\n    this.game.app.stage.removeChild(this.image);\n\n    //Set Title as the first scene to show\n    this.game.setScene(this.game.titleLabel);\n    this.game.fadeIn();\n  }\n}\n\nexport default Logo;\n","import * as PIXI from 'pixi.js';\nwindow.PIXI = PIXI;\nrequire(\"pixi-layers\");\nimport { TweenMax } from \"gsap\";\nimport PixiPlugin from \"gsap/PixiPlugin\";\n\nimport GameLoader from './loader.js';\nimport Storage from './storage.js';\nimport Sound from './sound.js';\nimport Title from './class/title.js';\nimport GameScene from './class/gamescene.js';\nimport CutScene from './class/cutscene.js';\nimport GameObject from './class/gameobject.js';\nimport Inventory from './class/inventory.js';\nimport Puzzle from './class/puzzle.js';\nimport {TextField} from './class/text.js';\nimport Player from './class/player.js';\nimport NPC from './class/npc.js';\nimport Dialogue from './class/dialogue.js';\nimport Logo from './class/logo.js';\n\nclass Game {\n  constructor(config){\n    this.settings={};\n    this.data={\n      scenes:[],\n      cutscenes:[],\n      objects:[],\n      dialogues:[],\n      puzzles:[],\n      credits:[],\n      texts:[],\n      music:[],\n      voices:[],\n      sounds:[]\n    };\n    this.width=config.width;\n    this.height=config.height;\n    this.holdTime=500;\n    this.playSounds = true;\n\n    //Setup the application\n    this.app = new PIXI.Application(\n      config.width,config.height,{\n      antialias: true,\n      autoResize: true,\n      resolution: devicePixelRatio\n    });\n\n    this.app.stage = new PIXI.display.Stage();\n\n    //Change game size when window size changes\n    if(config.autoResize!==undefined) this.app.renderer.autoResize=config.autoResize;\n    else window.addEventListener('resize', this.resize.bind(this));\n\n    //Disable contextmenu for mouse interaction\n    document.addEventListener('contextmenu', e => {\n       e.preventDefault();\n    });\n\n    //We append it to a HTML element or Document body\n    if(config.parent){\n      document.getElementById(config.parent).appendChild(this.app.view)\n    }else{\n      document.body.appendChild(this.app.view);\n    }\n\n    //Load config files\n    this.preload(config.files);\n  }\n\n  //Read JSON configuration files\n  preload(files){\n    //Text to show progress\n    this.progressBar=new PIXI.Graphics();\n    this.progressBar.beginFill(0xDE3249);\n    this.progressBar.drawRect(0, 0, this.width, this.height/50);\n    this.progressBar.endFill();\n    this.progressBar.width=0;\n\n    this.loadingTxt=new PIXI.Text(\"Loading...\", {fill: 'white',\"fontSize\": 50});\n    this.loadingTxt.anchor.set(0.5);\n    this.loadingTxt.x=this.width/2;\n    this.loadingTxt.y=this.height/2;\n\n    this.progressBar.y=this.height-this.loadingTxt.height;\n\n    this.app.stage.addChild(this.loadingTxt);\n    this.app.stage.addChild(this.progressBar);\n    this.resize();\n    this.jsons=new GameLoader();\n    this.jsons.game=this;\n    this.jsons.addJSON(files);\n    this.jsons.load(this.load.bind(this)); //When all config files are loaded, load the game resources.\n  }\n\n  //Load game resources (images,sounds,vids...)\n  load(){\n    this.files=new GameLoader();\n    this.files.game=this;\n    this.files.addFiles(Object.values(this.jsons.resources));\n    this.files.load(this.setup.bind(this));\n  }\n\n  setup(){\n    this.app.stage.removeChild(this.loadingTxt);\n    this.app.stage.removeChild(this.progressBar);\n\n    //Z-Order\n    this.addZOrder();\n\n    //Adjust to window size\n    this.resize();\n\n    this.tween=null;\n    this.logo=null;\n\n    this.scenes={};\n    this.cutscenes={};\n    this.objects={};\n    this.npcs={};\n    this.dialogues={};\n    this.puzzles={};\n    this.music={};\n    this.sounds={};\n    this.voices={};\n\n\n    this.activeLanguage=0;\n    this.activeScene=null;\n    this.activeObject=null;\n    this.activeNPC=null;\n    this.activePuzzle=null;\n    this.activeDialogue=null;\n    this.activeCutscene=null;\n    this.activeVoice=null;\n\n    this.activeState=null;\n\n    this.finished=false;\n\n    this.storage=new Storage(this);\n    this.logo=new Logo(this);\n  //  this.sound=new SoundManager(this);\n\n    this.titleLabel=\"Title\";\n\n\n    if(this.settings.HoldTime!==undefined) this.holdTime=this.settings.HoldTime*1000;\n    if(this.settings.dialogueChoices!==undefined) this.dialogueChoices=this.settings.dialogueChoices;\n    else this.dialogueChoices=3;\n\n    //Setup title screen\n    this.addScene(this.titleLabel,new Title(),this.settings.TitleScreen);\n\n    //Add sounds,music and voices\n    let i;\n    let length=this.data.music.length;\n    for(i=0;i<length;i++)\n    {\n      this.addMusic(this.data.music[i].Name,new Sound(),this.data.music[i]);\n    }\n\n    length=this.data.sounds.length;\n    for(i=0;i<length;i++)\n    {\n      this.addSound(this.data.sounds[i].Name,new Sound(),this.data.sounds[i]);\n    }\n\n    length=this.data.voices.length;\n    for(i=0;i<length;i++)\n    {\n      this.addVoice(this.data.voices[i].Name,new Sound(),this.data.voices[i]);\n    }\n\n\n    //Add game objects\n    length=this.data.objects.length;\n    for(i=0;i<length;i++)\n    {\n      this.addObject(this.data.objects[i].Name,new GameObject(),this.data.objects[i]);\n    }\n\n    //Non-playable characters\n    length=this.data.npc.length;\n    for(i=0;i<length;i++)\n    {\n      this.addNPC(this.data.npc[i].Name,new NPC(),this.data.npc[i]);\n    }\n\n    //Dialogues\n    length=this.data.dialogues.length;\n    for(i=0;i<length;i++)\n    {\n      this.addDialogue(this.data.dialogues[i].Name,new Dialogue(),this.data.dialogues[i]);\n    }\n\n    //Add game scenes\n    length=this.data.scenes.length;\n    for(i=0;i<length;i++)\n    {\n      this.addScene(this.data.scenes[i].Name,new GameScene(),this.data.scenes[i]);\n    }\n\n    //Add cutscenes\n    length=this.data.cutscenes.length;\n    for(i=0;i<length;i++)\n    {\n      this.addCutscene(this.data.cutscenes[i].Name,new CutScene(),this.data.cutscenes[i]);\n    }\n\n    //Puzzles\n    length=this.data.puzzles.length;\n    for(i=0;i<length;i++)\n    {\n      this.addPuzzle(this.data.puzzles[i].Name,new Puzzle(),this.data.puzzles[i]);\n    }\n\n    //Add Inventory\n    this.addInventory();\n\n    //Add text field\n    this.addTextField();\n\n    //Add player\n    this.addPlayer();\n\n    //Check if there is a saved game\n    this.storage.check();\n\n    this.addBlackScreen();\n\n    //Game's loop\n    this.app.ticker.add(this.loop.bind(this));\n\n    this.logo.show();\n\n  }\n\n  loop(dt){\n    // update current state\n    if (this.activeState != null) {\n        this.activeState.update(dt);\n    }\n  }\n\n  addMusic(name, music, config) {\n      this.music[name] = music;\n\n      //Music parameters\n      music.config=config;\n\n      //Set game so music can access it\n      music.game = this;\n\n      music.source=this.files.resources[name].sound;\n  }\n\n  addSound(name, sound, config) {\n      this.sounds[name] = sound;\n\n      //Music parameters\n      sound.config=config;\n\n      //Set game so music can access it\n      sound.game = this;\n\n      sound.source=this.files.resources[name].sound;\n\n      if(config.Sprites) sound.source._sprite=config.Sprites;\n  }\n\n  addVoice(name, voice, config) {\n      this.voices[name] = voice;\n\n      //Music parameters\n      voice.config=config;\n\n      //Set game so music can access it\n      voice.game = this;\n\n      voice.source=this.files.resources[name].sound;\n\n      voice.source._sprite=config.Sprites;\n  }\n\n  addObject(name, object, config) {\n      this.objects[name] = object;\n\n      //Config the object\n      object.config=config;\n\n      //Set game so object can access it\n      object.game = this;\n\n      //Build object\n      object.build();\n  }\n\n  addScene(name, scene, config) {\n      this.scenes[name] = scene;\n\n      //Config the scene\n      scene.setup(config);\n\n      //Set game so scene can access it\n      scene.game = this;\n\n      //Build scene\n      scene.build();\n  }\n\n  addCutscene(name, cutscene, config) {\n      this.cutscenes[name] = cutscene;\n\n      //Config the scene\n      cutscene.config=config;\n\n      //Set game so scene can access it\n      cutscene.game = this;\n\n      //Build scene\n      cutscene.build();\n  }\n\n  addPuzzle(name, puzzle, config) {\n      this.puzzles[name] = puzzle;\n\n      //Puzzle's config\n      puzzle.config=config;\n\n      //Set game so puzzle can access it\n      puzzle.game = this;\n  }\n\n  addZOrder(){\n    this.BottomGroup= new PIXI.display.Group(0,false);\n    this.sortGroup= new PIXI.display.Group(1, true);\n    this.sortGroup.on('sort', function (sprite) {\n      sprite.zOrder =  sprite.y;\n    });\n    this.TopGroup = new PIXI.display.Group(2,false);\n    this.UIGroup = new PIXI.display.Group(3,false);\n\n    this.layerBottom=new PIXI.display.Layer(this.BottomGroup);\n    this.layer=new PIXI.display.Layer(this.sortGroup);\n    this.layerTop=new PIXI.display.Layer(this.TopGroup);\n    this.layerUI=new PIXI.display.Layer(this.UIGroup);\n\n    this.app.stage.group.enableSort = true;\n    this.app.stage.addChild(this.layerBottom);//Z-order\n    this.app.stage.addChild(this.layer);//Z-order\n    this.app.stage.addChild(this.layerTop);//Z-order\n    this.app.stage.addChild(this.layerUI);//Z-order\n  }\n\n  addInventory(){\n    this.inventory=new Inventory();\n    this.inventory.game=this;\n    this.inventory.build();\n  }\n\n  addPlayer(){\n    this.player=new Player();\n    this.player.game=this;\n    this.data.player.Name=\"player\";\n    this.player.setup(this.data.player);\n  }\n\n  addNPC(name, char, config){\n    this.npcs[name] = char;\n\n    char.game = this;\n\n    char.setup(config);\n\n    char.build();\n  }\n\n  addDialogue(name, dialogue, config){\n    this.dialogues[name] = dialogue;\n\n    dialogue.game = this;\n\n    dialogue.setup(config);\n  }\n\n  addTextField(){\n    this.textField=new TextField();\n    this.textField.game=this;\n    this.textField.build();\n  }\n\n  //Used for fade between screens\n  addBlackScreen(){\n    this.blackScreen=new PIXI.Sprite(PIXI.Texture.WHITE);\n    this.blackScreen.width=this.width;\n    this.blackScreen.height=this.height;\n    this.blackScreen.tint=0x000000;\n    this.blackScreen.parentLayer = this.layerUI;\n  }\n\n  //Adjust game screen to the window\n  resize() {\n    var w = window.innerWidth;// * window.devicePixelRatio;\n    var h = window.innerHeight;// * window.devicePixelRatio;\n    var ratio = Math.min( w/this.width,  h/this.height);\n    this.app.renderer.resize(this.width*ratio,this.height*ratio);\n    this.app.stage.scale.set(ratio);\n\n  }\n\n  //The magic begins\n  start(){\n    //Show Inventory\n    this.app.stage.addChild(this.inventory.container);\n    this.app.stage.addChild(this.inventory.icon);\n\n    //Show Player\n    this.app.stage.addChild(this.player.sprite);\n\n    //Add Text Field\n    this.app.stage.addChild(this.textField.container);\n  }\n\n  pause(){\n    this.activeScene.hide();\n    this.inventory.hide();\n    this.inventory.hideIcon();\n    this.player.hide();\n    if(this.activeScene.music!==undefined){\n      this.music[this.activeScene.music].stop();\n    }\n  }\n\n  resume(){\n    this.inventory.showIcon();\n    this.player.show();\n    this.activeScene.show();\n    this.fadeIn();\n  }\n\n  end(){\n    this.finished=true;\n  }\n\n  home(){\n    location.reload();\n  }\n\n  setScene(name,playerCoords) {\n    //Remove current container\n    if (this.activeScene !== null) {\n        this.app.stage.removeChild(this.activeScene.container);\n    }\n\n    //Set current container\n    this.activeScene = this.scenes[name];\n\n    //Player parameters\n    if(playerCoords!==undefined){\n      this.player.sprite.x=playerCoords[0];\n      this.player.sprite.y=playerCoords[1];\n    }\n\n    if(this.activeScene.config.Player!==undefined){\n      if(this.activeScene.config.Player.Position!==undefined){\n        this.player.position(this.activeScene.config.Player.Position);\n      }\n      if(this.activeScene.config.Player.Size!==undefined){\n        this.player.size=this.activeScene.config.Player.Size;\n        this.player.scale();\n      }\n    }\n    //Save game progress\n    if(this.activeScene!==this.scenes[this.titleLabel])\n      this.storage.save();\n  }\n\n  changeScene(name,playerCoords){\n    //Music\n    if(this.activeScene.music!==undefined){\n      //this.sound.stop(this.activeScene.music);\n      this.music[this.activeScene.music].stop();\n    }\n    this.app.stage.addChild(this.blackScreen);\n    if(this.tween) this.tween.kill();\n    this.tween=TweenMax.set(this.blackScreen, {alpha:0});\n    this.tween=TweenMax.fromTo(this.blackScreen, 1,\n      {alpha:0},\n      {alpha:1, onComplete:this.fadeOutEnd.bind(this),\n        onCompleteParams:[name,playerCoords]});\n  }\n\n  fadeIn(){\n    //Add our new container\n    this.app.stage.addChild(this.activeScene.container);\n\n    this.app.stage.addChild(this.blackScreen);\n\n    if(this.tween) this.tween.kill();\n    this.tween=TweenMax.set(this.blackScreen, {alpha:1});\n    this.tween=TweenMax.fromTo(this.blackScreen, 1,\n      {alpha:1},\n      {alpha:0, onComplete:this.fadeInEnd.bind(this)}\n    );\n  }\n\n  fadeInEnd(){\n    this.app.stage.removeChild(this.blackScreen);\n    //Music\n    if(this.activeScene.music!==undefined && this.playSounds){\n      //this.sound.play(this.activeScene.music);\n      this.music[this.activeScene.music].play(true);\n    }\n  }\n\n  fadeOutEnd(name,playerCoords){\n    this.setScene(name,playerCoords);\n    //Check Cutscenes\n    if(this.activeScene.config.CutScene!==undefined &&\n      !this.cutscenes[this.activeScene.config.CutScene].played){\n        this.activeCutscene=this.cutscenes[this.activeScene.config.CutScene];\n      //  this.pause();\n        this.activeCutscene.show();\n    }else{\n      this.resume();\n    }\n\n    this.app.stage.removeChild(this.blackScreen);\n  }\n}\n\nexport default Game;\n","import Game from './game';\n\nconsole.log(\"JSGAM 5.0.0 https://github.com/kreezii/jsgam\");\n\n//export default Game;\nexport default Game;\n"],"names":["GameLoader","constructor","game","onLoad","add","this","update","bind","onError","error","use","howlerMiddleware","resource","next","includes","extension","options","JSON","parse","stringify","metadata","src","url","sound","Howl","addJSON","files","i","arrayLength","length","name","slice","lastIndexOf","addFiles","data","Settings","settings","Scenes","scenes","concat","Cutscenes","cutscenes","Objects","objects","Dialogues","dialogues","Puzzles","puzzles","Credits","credits","Texts","texts","Voices","voices","Music","music","Sounds","sounds","soundSrc","j","tmpSound","Src","Name","musicSrc","tmpMusic","voiceSrc","tmpVoice","Vids","vidSrc","tmpVid","Animations","animSrc","tmpAnim","Backgrounds","bgSrc","tmpBg","Player","Texture","Json","Skeleton","player","Characters","npcSrc","npc","percent","Math","floor","progress","progressBar","width","console","log","Loader","Storage","save","puzzlesSolved","Object","values","forEach","puzzle","solved","config","push","dialoguesDisabled","dialogue","branches","branch","Choices","choice","index","disabled","Dialogue","Branch","cutscenesPlayed","cutscene","played","language","activeLanguage","activeScene","sprite","x","y","inventory","setItem","load","disable","Index","silentMode","resolve","item","thisItem","scene","undefined","tmpIndex","indexOf","splice","playerPos","delete","localForage","clear","check","storage","getItem","then","value","changeLanguage","states","enable","catch","err","Sound","source","play","loop","volume","stop","once","onFade","fade","duration","Scene","container","PIXI","Container","setup","background","Sprite","from","Background","anchor","set","addChild","Foreground","foreground","dt","hide","visible","show","Button","text","style","interactive","buttonMode","BitmapText","Infotxt","Phrases","option","let","dialogueChoices","Text","ButtonStyle","on","onTap","height","activeChoice","activeDialogue","currentBranch","alpha","Repeat","get","sort","parent","scale","center","ratio","min","pivot","TextField","Avatar","build","parentLayer","layerUI","WHITE","size","Size","tint","Style","maxWidth","skip","Position","setPosition","end","talker","shutup","answer","setText","activeObject","cancel","clearTimeout","timeoutID","position","newText","adjustText","countWords","str","split","timeOut","time","activeVoice","Speed","setColor","colour","setFont","newFont","font","setAvatar","newAvi","texture","hideAvatar","Menu","buttons","addButton","modify","arrayButtons","resize","MainMenu","create","gameTexts","NewGame","Continue","Options","Help","languages","Languages","addLanguage","setLanguage","Back","father","change","mainMenu","buildText","speed","Time","structuredText","tween","animate","TweenMax","to","Lines","Title","kill","Confirmation","addText","Warning","Yes","No","addState","addAction","showOptions","showHelp","showCredits","checkAdventure","loadAdventure","newAdventure","button","action","state","warning","changeScene","FirstScene","start","latestScene","GameScene","layerTop","layerBottom","getPosition","walkable","Walkable","WalkArea","addPolygon","Obstacles","obstacles","sceneObjects","sceneChars","npcs","event","coord","getLocalPosition","app","stage","lock","activeNPC","move","getPath","fromX","fromY","toX","toY","findPath","CutScene","voice","sequenceIndex","boxesIntersect","a","b","ab","getBounds","bb","collision","result","hitArea","PolyK","points","Video","videoData","resources","videoEnds","addEventListener","Sequence","image","Image","field","videoTexture","videoSprite","adjust","setMusic","setVoice","fadeIn","removeChild","fromTo","timer","setTimeout","fadeOut","activeCutscene","pause","removeEventListener","finished","home","resume","playSounds","VoiceSet","Voice","GameObject","Description","NoDescription","Area","EMPTY","Polygon","Animation","spritesheet","frames","_frameKeys","extras","AnimatedSprite","animationSpeed","Mirror","flip","Layer","layer","Door","door","newScene","To","holding","Lock","locked","touchArea","releaseArea","touch","release","Interactive","setInteraction","setpos","changeTexture","hold","interaction","holdTime","touchedPos","moveTo","area","coords","coordX","round","coordY","changePosition","closestedge","point","norm","Use","activePuzzle","endAction","touched","posX","posY","dragging","oldParent","depthGroup","setParent","newPosition","bounds","icon","Take","hit","found","objectsArray","charsArray","remove","scenesArray","scenesLength","Inventory","border","Icon","click","setIcon","hideIcon","showIcon","off","numObjs","tmpObj","objectHit","Combine","With","Puzzle","VoiceDescription","say","ModifyObject","objectMod","setDoor","GetObject","AddObject","RemoveObject","RemoveDoor","SetDialogue","Character","Resolve","Say","NPCSay","Source","EndGame","target","window","const","dbfactory","require","PixiFactory","factory","parseDragonBonesData","parseTextureAtlasData","buildArmatureDisplay","Armature","animations","Stand","closestPosition","obstaclesPolys","walkPoly","newPos","checkPath","finalPath","animationTime","abs","Walk","armature","flipX","activeState","ease","Linear","easeNone","scaleChar","Depth","look","take","talk","textField","Color","Number","Font","animation","times","lastAnimationName","dbEvents","EventObject","checkDirection","COMPLETE","takeEnd","useEnd","NotUsable","NPC","pressTimeoutID","distance","moved","firstTime","Branches","DefaultBranch","choiceSelected","searchBranch","branchFound","AnswerVoice","Answer","Link","EndDialogue","Logo","Logos","setScene","titleLabel","Game","devicePixelRatio","Stage","autoResize","renderer","e","preventDefault","document","getElementById","appendChild","view","body","preload","beginFill","drawRect","endFill","loadingTxt","jsons","addZOrder","logo","HoldTime","addScene","TitleScreen","addMusic","addSound","addVoice","addObject","addNPC","addDialogue","addCutscene","addPuzzle","addInventory","addTextField","addPlayer","addBlackScreen","ticker","Sprites","_sprite","object","BottomGroup","Group","sortGroup","zOrder","TopGroup","UIGroup","group","enableSort","char","blackScreen","w","innerWidth","h","innerHeight","location","reload","playerCoords","fadeOutEnd","onCompleteParams","fadeInEnd"],"mappings":"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"}