{"version":3,"file":"jsgam.js","sources":["../src/loader.js","../src/storage.js","../src/class/scene.js","../src/class/text.js","../src/class/menu.js","../src/class/mainmenu.js","../src/class/options.js","../src/class/help.js","../src/class/credits.js","../src/class/confirmation.js","../src/class/title.js","../src/class/gamescene.js","../src/class/cutscene.js","../src/collisions.js","../src/class/gameobject.js","../src/class/inventory.js","../src/class/puzzle.js","../src/class/character.js","../src/class/player.js","../src/class/npc.js","../src/class/dialogue.js","../src/game.js","../src/index.js"],"sourcesContent":["\n\nclass Loader extends PIXI.loaders.Loader{\n  constructor(){\n    super();\n    this.game=null;\n    this.onLoad.add(this.update.bind(this));\n    this.onError.add(this.error.bind(this));\n  }\n\n  //Add config files to loader\n  addJSON(files){\n  /*  let thisLoader=this;\n    files.map(function(file){\n      thisLoader.add(file.slice(file.lastIndexOf(\"/\")+1,file.lastIndexOf(\".\")),file)\n    });*/\n    let i;\n    let arrayLength=files.length;\n\n    for(i=0;i<arrayLength;i++){\n      let name=files[i].slice(files[i].lastIndexOf(\"/\")+1,files[i].lastIndexOf(\".\"));\n      this.add(name,files[i]);\n    }\n  }\n\n  //Add resource files to loader and settings to game\n  addFiles(files){\n    let i;\n    let length=files.length\n    for(i=0;i<length;i++){\n      //Add config files to setup the game\n      if(files[i].data.Settings) this.game.settings=files[i].data.Settings;\n      if(files[i].data.Scenes) this.game.data.scenes=files[i].data.Scenes;\n      if(files[i].data.Cutscenes) this.game.data.cutscenes=files[i].data.Cutscenes;\n      if(files[i].data.Objects) this.game.data.objects=files[i].data.Objects;\n      if(files[i].data.Dialogues) this.game.data.dialogues=files[i].data.Dialogues;\n      if(files[i].data.Puzzles) this.game.data.puzzles=files[i].data.Puzzles;\n      if(files[i].data.Credits) this.game.data.credits=files[i].data.Credits;\n      if(files[i].data.Texts) this.game.data.texts=files[i].data.Texts;\n\n      //Look for sound files\n      if(files[i].data.Sounds){\n        let soundSrc=files[i].data.Sounds;\n        for(let j=0;j<soundSrc.length;j++){\n           let tmpSound=soundSrc[j].Src;\n           if(tmpSound!==null) this.add(soundSrc[j].Name,tmpSound);\n        }\n       }\n\n       //Look for video files\n       if(files[i].data.Vids)\n       {\n         //Fix for load correctly vids with pixi-sound\n         this.fixVidLoad();\n         let vidSrc=files[i].data.Vids;\n         for(let i=0;i<vidSrc.length;i++){\n           let tmpVid=vidSrc[i].Src;\n           if(tmpVid!==null) this.add(vidSrc[i].Name,tmpVid);\n         }\n       }\n\n       //Load Animations\n       if(files[i].data.Animations)\n       {\n         let animSrc=files[i].data.Animations;\n         for(let i=0;i<animSrc.length;i++){\n           let tmpAnim=animSrc[i].Src;\n           if(tmpAnim!==null) this.add(animSrc[i].Name,tmpAnim);\n         }\n       }\n\n       //Load Backgrounds if don't use texture atlas for backgrounds\n       if(files[i].data.Backgrounds){\n         let bgSrc=files[i].data.Animations;\n         for(let i=0;i<bgSrc.length;i++){\n           let tmpBg=bgSrc[i].Src;\n           if(tmpBg!==null) this.add(bgSrc[i].Name,tmpBg);\n         }\n       }\n\n       //Look for player files\n       if(files[i].data.Player){\n         this.add('playerTex', files[i].data.Player.Texture)\n             .add('playerJson', files[i].data.Player.Json)\n             .add('playerSkeleton', files[i].data.Player.Skeleton);\n         this.game.data.player=files[i].data.Player;\n       }\n\n       //Look for NPC files\n       if(files[i].data.Characters){\n         let npcSrc=files[i].data.Characters;\n         for(let i=0;i<npcSrc.length;i++){\n            this.add(npcSrc[i].Name+\"Tex\", npcSrc[i].Texture)\n            .add(npcSrc[i].Name+'Json', npcSrc[i].Json)\n            .add(npcSrc[i].Name+'Skeleton', npcSrc[i].Skeleton);\n          }\n          this.game.data.npc=files[i].data.Characters;\n        }\n    }\n  }\n\n  //Fix for load mp4 as videos instead as audio because of pixi-sound\n  fixVidLoad(){\n    PIXI.sound.utils.extensions.splice(PIXI.sound.utils.extensions.indexOf('mp4'), 1);\n    PIXI.loaders.Resource.setExtensionXhrType('mp4', undefined);\n    PIXI.loaders.Resource.setExtensionLoadType('mp4', PIXI.loaders.Resource.LOAD_TYPE.VIDEO);\n  }\n\n  //Loading progress\n  update(){\n    let percent=Math.floor(this.progress);\n    this.game.progressBar.width=(this.game.width/100)*percent;\n    //this.game.loadingTxt.text=\"Loading... \"+ percent+\"%\";\n  }\n\n  //File failed to load\n  error(resource){\n    console.log(resource);\n  }\n\n}\n\nexport default Loader;\n","import localForage from 'localforage';\n\nexport default class Storage{\n  constructor(game){\n    this.game=game;\n  }\n\n  //Save adventure progress\n  save(){\n    //Get solved puzzles\n    let puzzlesSolved=[];\n    let puzzleArray=Object.values(this.game.puzzles)\n\n    puzzleArray.forEach(function(puzzle){\n      if(puzzle.solved && !puzzlesSolved.includes(puzzle.config.Name))\n        puzzlesSolved.push(puzzle.config.Name)\n    });\n\n    //Get dialogues\n    let dialoguesDisabled=[];\n    let dialogueArray=Object.values(this.game.dialogues);\n\n\n    dialogueArray.forEach(function(dialogue){\n      let branches=Object.values(dialogue.branches);\n\n      branches.forEach(function(branch){\n\n        branch.Choices.forEach(function(choice,index){\n          if(choice.disabled){\n            let disabledOption={\n              Dialogue:dialogue.config.Name,\n              Branch:branch.Name,\n              Index:index\n            }\n            dialoguesDisabled.push(disabledOption);\n          }\n        });\n      });\n\n    });\n\n    //Get player cutscenes\n    let cutscenesPlayed=[];\n    let cutscenesArray=Object.values(this.game.cutscenes);\n    cutscenesArray.forEach(function(cutscene){\n      if(cutscene.played) cutscenesPlayed.push(cutscene.config.Name);\n    });\n\n    //Store the progress\n    this.progress={\n      language:this.game.activeLanguage,\n      latestScene:this.game.activeScene.config.Name,\n      playerPos:[this.game.player.sprite.x,this.game.player.sprite.y],\n      inventory:this.game.inventory.objects,\n      puzzles:puzzlesSolved,\n      dialogues:dialoguesDisabled,\n      cutscenes:cutscenesPlayed\n    }\n\n    //Save object to local storage\n    localForage.setItem('JSGAM_Storage', this.progress);\n  }\n\n  //Load adventure progress\n  load(){\n    let game=this.game;\n\n    //Load objects in inventory\n    this.progress.inventory.forEach(function(item){\n\n      //Add object to inventory\n      game.inventory.add(item);\n\n      //Remove objects from scenes configurations\n      let thisItem=item;\n      let sceneArray=Object.values(game.scenes);\n      sceneArray.forEach(function(scene){\n        if(scene.config.Objects!==undefined && scene.config.Objects.includes(thisItem)){\n          let tmpIndex=scene.config.Objects.indexOf(thisItem);\n          scene.config.Objects.splice(tmpIndex,1);\n        }\n      })\n\n    });\n\n    //Disable dialogues finished\n    this.progress.dialogues.forEach(function(disable){\n      game.dialogues[disable.Dialogue].branches[disable.Branch].Choices[disable.Index].disabled=true;\n    });\n\n    //Disable cutscenes played\n    this.progress.cutscenes.forEach(function(name){\n      game.cutscenes[name].played=true;\n    });\n\n    this.game.silentMode=true;\n    //Resolve puzzles already done\n    this.progress.puzzles.forEach(function(name){\n      game.puzzles[name].resolve();\n    });\n    this.game.silentMode=false\n\n  }\n\n  //Clear local storage\n  delete(){\n    localForage.clear();\n  }\n\n  check(){\n    let storage=this;\n\n    localForage.getItem('JSGAM_Storage').then(function(value) {\n      // This code runs once the value has been loaded\n      // from the offline store.\n      if(value!==null){\n        storage.progress=value;\n        storage.game.activeLanguage=value.language;\n        storage.game.scenes[\"Title\"].changeLanguage();\n        storage.game.scenes[\"Title\"].states[\"MainMenu\"].enable(\"Continue\");\n      }\n    }).catch(function(err) {\n        // This code runs if there were any errors\n        console.log(err);\n    });\n  }\n}\n","class Scene{\n  constructor(){\n    this.container = new PIXI.Container();\n    this.game=null;\n  }\n\n  setup(config){\n    this.background=new PIXI.Sprite(PIXI.Texture.from(config.Background));\n    this.background.anchor.set(0);\n    this.container.addChild(this.background);\n    this.music=config.Music;\n    this.config=config;\n  }\n\n  update(dt) {\n\n  }\n  hide(){\n    this.container.visible=false;\n  }\n  \n  show(){\n    this.container.visible=true;\n  }\n}\n\nexport default Scene;\n","class Button extends PIXI.extras.BitmapText{\n    constructor(text,style){\n      super(text,style);\n      this.interactive=true;\n      this.buttonMode=true;\n    }\n}\n\nclass Infotxt extends PIXI.extras.BitmapText{\n    constructor(text,style){\n      super(text,style);\n    }\n}\n\n\nclass Phrases{\n  constructor(config){\n    this.container=new PIXI.Container();\n    this.hide();\n    this.game=config;\n    this.option=[];\n\n    for(let i=0;i<3;i++){\n      this.option[i]=new Button(\"Option\",this.game.settings.Text.ButtonStyle);\n      this.option[i].game=this.game;\n      this.option[i].on('pointertap', this.onTap.bind(this.option[i]));\n      this.option[i].index=i;\n      this.container.addChild(this.option[i]);\n      if(i>0)this.option[i].y=this.option[i-1].y+this.option[i-1].height;\n    }\n  }\n\n  show(){\n    this.sort();\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  onTap(){\n    let activeChoice=this.game.activeDialogue.currentBranch.Choices;\n\n    if(this.alpha==1){\n      this.game.activeDialogue.choice=this.index;\n      if(activeChoice[this.index].Repeat==false) activeChoice[this.index].disabled=true;\n      this.game.activeDialogue.next();\n    }\n  }\n\n  get(){\n    this.clear();\n    let options=this.game.activeDialogue.currentBranch.Choices;\n    for(let i=0;i<options.length;i++){\n      if(options[i].disabled){\n        this.option[i].alpha=0.5;\n      }else this.option[i].alpha=1;\n      this.option[i].visible=true;\n      this.option[i].text=options[i].Text[this.game.activeLanguage];\n    }\n    this.show();\n  }\n\n  clear(){\n    for(let i=0;i<this.option.length;i++){\n      this.option[i].visible=false;\n    }\n  }\n\n  sort(){\n    for(let i=0;i<this.option.length;i++){\n      this.option[i].anchor.set(0.5,0);\n      this.option[i].x=this.game.width/2;\n    }\n    if(this.container.width>this.container.parent.width || this.container.height>this.container.parent.height){\n      this.scale();\n    }\n  }\n\n  scale(){\n    let ratio = Math.min( this.container.parent.width/this.container.width,  this.container.parent.height/this.container.height);\n    this.container.scale.set(ratio*0.95);\n    this.container.x=this.container.width;\n  }\n}\n\nclass TextField{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.Background=null;\n    this.Text=null;\n    this.container.visible=false;\n  }\n\n  build(){\n    this.container.parentLayer = this.game.layerUI;\n    this.Background=new PIXI.Sprite(PIXI.Texture.WHITE);\n\n    let size=4;\n    if(this.game.settings.Text.Size!==undefined){\n      if(this.game.settings.Text.Size===\"fourth\") size=4;\n      else if(this.game.settings.Text.Size===\"half\") size=2;\n    }\n    this.Background.width=this.game.width;\n    this.Background.height=this.game.height/size;\n\n    this.Background.tint='black';\n    this.Background.alpha=0.5;\n\n    this.Text=new Button(\"\", this.game.settings.Text.Style);\n    this.Text.anchor.set(0.5,0);\n    this.Text.x=this.game.width/2;\n    this.Text.y=0;\n    this.Text.on('pointertap',this.skip.bind(this));\n\n    this.Choices=new Phrases(this.game);\n\n    this.container.addChild(this.Background);\n    this.container.addChild(this.Text);\n    this.container.addChild(this.Choices.container);\n\n    if(this.game.settings.Text.Position!==undefined) this.setPosition(this.game.settings.Text.Position);\n  }\n\n  show(){\n    this.Text.visible=true;\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  end(){\n    if(this.game.activeDialogue!==null){\n      this.talker.shutup();\n      if(this.game.activeDialogue.choice!==null) this.game.activeDialogue.answer();\n      else{\n        this.Text.visible=false;\n        this.Choices.get();\n      }\n\n    }else{\n      this.setText(\"\");\n      this.hide();\n      this.talker.shutup();\n      this.game.player.stop();\n    }\n  }\n\n  skip(){\n    this.end();\n    if(this.talker) clearTimeout(this.talker.timeoutID);\n  }\n\n  setPosition(position){\n    if(position===\"top\"){\n      this.container.x=0;\n      this.container.y=0;\n    }else if(position===\"bottom\"){\n      this.container.x=0;\n      this.container.y=this.game.height-this.container.height;\n    }\n  }\n\n  setText(newText){\n    this.Text.text=newText;\n    if(this.Text.width>this.container.width || this.Text.height>this.container.height){\n      this.adjustText();\n    }\n  }\n\n  adjustText(){\n    let ratio = Math.min( this.container.width/this.Text.width,  this.container.height/this.Text.height);\n    this.container.scale.set(ratio*0.95);\n  }\n\n  //Get words number of the text\n  countWords(str) {\n   return str.split(\" \").length;\n  }\n\n  //Calculate how many seconds we show the text\n  timeOut(){\n    let time;\n    if(this.game.settings.Text.Speed!==undefined) time=this.game.settings.Text.Speed;\n    else time=this.countWords(this.Text.text)/3;\n\n    //Time must be at least 1 second\n    if(time<1) time=1;\n\n    return time*1000;\n  }\n\n  setColor(colour){\n    this.Text.tint=colour;\n  }\n}\n\nexport {Button,TextField,Infotxt};\n","import {Button} from './text.js'\n\nclass Menu{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.game=null;\n    this.buttons={};\n    }\n\n  addButton(name,text){\n    this.buttons[name]=new Button(text[this.game.activeLanguage],this.game.settings.Text.ButtonStyle);\n    this.container.addChild(this.buttons[name]);\n  }\n\n  modify(name,text){\n    this.buttons[name].text=text[this.game.activeLanguage];\n  }\n\n  disable(name){\n    this.buttons[name].alpha=0.5;\n    this.buttons[name].interactive=false;\n  }\n\n  enable(name){\n    this.buttons[name].alpha=1.0;\n    this.buttons[name].interactive=true;\n  }\n\n  sort(){\n    let i;\n    let arrayButtons=Object.values(this.buttons);\n    let length=arrayButtons.length;\n    arrayButtons[0].y=0;\n    for(i=1;i<length;i++)\n    {\n      arrayButtons[i].y=arrayButtons[i-1].y+arrayButtons[i-1].height*1.5;\n      arrayButtons[i].x=this.container.width/2-arrayButtons[i].width/2;\n    }\n\n    this.center();\n  //  this.resize();\n  }\n\n  resize(){\n    let ratio = Math.min( this.game.width/this.container.width,  this.game.height/this.container.height);\n    //console.log(ratio)\n    this.container.scale.set(ratio*0.95);\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n\n}\nexport default Menu;\n","import Menu from './menu.js';\n\nclass MainMenu extends Menu{\n  create(){\n      let gameTexts=this.game.data.texts;\n      this.addButton(\"New\",gameTexts.NewGame);\n      this.addButton(\"Continue\",gameTexts.Continue);\n      this.addButton(\"Options\",gameTexts.Options);\n      this.addButton(\"Help\",gameTexts.Help);\n      this.addButton(\"Credits\",gameTexts.Credits);\n\n      this.disable(\"Continue\");\n\n      this.sort();\n    }\n\n  changeLanguage(){\n    this.modify(\"New\",this.game.data.texts.NewGame);\n    this.modify(\"Continue\",this.game.data.texts.Continue);\n    this.modify(\"Options\",this.game.data.texts.Options);\n    this.modify(\"Help\",this.game.data.texts.Help);\n    this.modify(\"Credits\",this.game.data.texts.Credits);\n\n    this.sort();\n  }\n\n}\nexport default MainMenu;\n","import Menu from './menu.js';\nimport {Button} from './text.js';\n\nclass Options extends Menu{\n  create(){\n    this.container.visible=false;\n    let languages=this.game.settings.Languages\n    for(let i=0;i<languages.length;i++){\n      this.addLanguage(languages[i],);\n      this.buttons[languages[i]].on('pointerup', this.setLanguage);\n    }\n\n    let langArray=Object.values(this.buttons);\n    langArray[this.game.activeLanguage].tint=0xFF0000;\n\n    this.addButton(\"Back\",this.game.data.texts.Back);\n    this.sort();\n  }\n\n  addLanguage(name){\n    this.buttons[name]=new Button(name,this.game.settings.Text.ButtonStyle);\n    this.buttons[name].father=this;\n    this.container.addChild(this.buttons[name]);\n  }\n\n  setLanguage(){\n    this.father.change(this.text);\n  }\n\n  change(text){\n    let languages=this.game.settings.Languages\n    this.buttons[languages[this.game.activeLanguage]].tint=0xFFFFFF;\n    this.game.activeLanguage=this.game.settings.Languages.indexOf(text);\n    this.buttons[languages[this.game.activeLanguage]].tint=0xFF0000;\n    this.modify(\"Back\",this.game.data.texts.Back);\n    this.sort();\n  }\n\n}\nexport default Options;\n","class Help{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.container.visible=false;\n    this.container.interactive=true;\n    this.container.buttonMode=true;\n    }\n\n  create(){\n    let config=this.game.settings;\n\n    this.background=new PIXI.Sprite(PIXI.Texture.from(config.Help[this.game.activeLanguage]));\n    this.container.addChild(this.background);\n    this.center();\n    this.container.on('pointerup', this.mainMenu.bind(this));\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  changeLanguage(){\n    this.background.texture=PIXI.Texture.from(this.game.settings.Help[this.game.activeLanguage]);\n    this.center();\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n}\n\nexport default Help;\n","\nimport tweenManager from 'k8w-pixi-tween';\n\nclass Credits{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.container.visible=false;\n    this.container.interactive=true;\n    this.container.buttonMode=true;\n    }\n\n  create(){\n    let config=this.game.data.credits;\n\n    if(config.Background!==undefined) this.background=new PIXI.Sprite(PIXI.Texture.from(config.Background));\n\n    this.buildText();\n\n    this.structuredText = new PIXI.extras.BitmapText(this.text,config.Style);\n\n    this.container.addChild(this.structuredText);\n\n    this.container.x = this.game.width / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.y=this.game.height;\n    this.tween = PIXI.tweenManager.createTween(this.container);\n    this.tween\n      .from({ y: this.game.height})\n      .to({ y: 0 - this.container.height});\n    this.tween.time = 20000;\n    this.tween.expire=true;\n    this.tween.delay=500;\n    this.tween.on(\"end\", this.mainMenu.bind(this));\n\n    this.container.on('pointerup', this.mainMenu.bind(this));\n  }\n\n  show(){\n    this.container.visible=true;\n    this.tween.start();\n  }\n\n  hide(){\n    this.tween.stop().reset();\n    this.container.visible=false;\n  }\n\n\n  buildText(){\n    let credits=this.game.data.credits;\n\n    this.text=\"\";\n    let i;\n    for (i=0; i < credits.Lines.length; i++) {\n    this.text += credits.Lines[i].Title[this.game.activeLanguage];\n    this.text += \"\\n\";\n    let j;\n\n    for (j = 0; j < credits.Lines[i].Text.length; j++) {\n      this.text += credits.Lines[i].Text[j];\n      this.text += \"\\n\";\n    }\n    this.text += \"\\n\";\n    }\n  }\n\n  update(){\n    PIXI.tweenManager.update();\n  }\n\n  changeLanguage(){\n    this.buildText();\n    this.structuredText.text=this.text;\n  }\n\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n}\n\nexport default Credits;\n","import Menu from './menu.js';\nimport {Infotxt} from './text.js'\n\nclass Confirmation extends Menu{\n  create(){\n    this.hide();\n    let gameTexts=this.game.data.texts;\n    this.addText(\"Warning\",gameTexts.Warning);\n    this.addButton(\"Yes\",gameTexts.Yes);\n    this.addButton(\"No\",gameTexts.No);\n    this.sort();\n  }\n\n  changeLanguage(){\n    //this.modify(\"Warning\",this.game.data.texts.Warning);\n    this.text.text=this.game.data.texts.Warning[this.game.activeLanguage];\n    this.modify(\"Yes\",this.game.data.texts.Yes);\n    this.modify(\"No\",this.game.data.texts.No);\n    this.sort();\n  }\n\n  sort(){\n    this.text.y=0\n    this.text.x=this.game.width/2-this.text.width/2;\n    this.buttons[\"Yes\"].y=this.text.height*1.5;\n    this.buttons[\"Yes\"].x=this.buttons[\"Yes\"].width;\n    this.buttons[\"No\"].y=this.text.height*1.5;\n    this.buttons[\"No\"].x=this.game.width-this.buttons[\"No\"].width*2;\n    this.container.y=this.game.height/2-this.container.height/2;\n  }\n\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n\n  addText(name,text){\n    this.text=new Infotxt(text[this.game.activeLanguage],this.game.settings.Text.ButtonStyle);\n    this.container.addChild(this.text);\n  }\n}\n\nexport default Confirmation;\n","import Scene from './scene.js';\nimport MainMenu from './mainmenu.js'\nimport Options from './options.js'\nimport Help from './help.js'\nimport Credits from './credits.js'\nimport Confirmation from './confirmation.js'\n\nimport 'pixi-sound';\n\nclass Title extends Scene{\n  build(){\n    this.states={};\n\n    //Add Menus\n    this.addState(\"MainMenu\", new MainMenu());\n    this.addState(\"Options\", new Options());\n    this.addState(\"Credits\", new Credits());\n    this.addState(\"Help\", new Help());\n    this.addState(\"Warning\", new Confirmation());\n\n    //Add actions to the menu buttons\n    this.addAction(\"MainMenu\",\"Options\",this.showOptions.bind(this));\n    this.addAction(\"MainMenu\",\"Help\",this.showHelp.bind(this));\n    this.addAction(\"MainMenu\",\"Credits\",this.showCredits.bind(this));\n\n    this.addAction(\"MainMenu\",\"New\",this.checkAdventure.bind(this));\n    this.addAction(\"MainMenu\",\"Continue\",this.loadAdventure.bind(this));\n\n    this.addAction(\"Warning\",\"Yes\",this.newAdventure.bind(this));\n    this.addAction(\"Warning\",\"No\",this.mainMenu.bind(this));\n\n    this.addAction(\"Options\", \"Back\",this.mainMenu.bind(this));\n\n  }\n\n  addAction(name,button,action){\n    this.states[name].buttons[button].on('pointerup',action)\n  }\n\n  addState(name, state, config) {\n      this.states[name] = state;\n\n      //Set game so state can access it\n      state.game = this.game;\n\n      //Create state\n      state.create();\n\n      this.container.addChild(this.states[name].container);\n  }\n\n  showOptions(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Options\"].show();\n  }\n\n  showHelp(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Help\"].show();\n  }\n\n  showCredits(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Credits\"].show();\n    this.game.activeState=this.states[\"Credits\"];\n  }\n\n  mainMenu(){\n    this.game.activeState=null;\n    this.states[\"Credits\"].hide();\n    this.states[\"Options\"].hide();\n    this.states[\"Help\"].hide();\n    this.states[\"Warning\"].hide();\n    this.changeLanguage();\n    this.states[\"MainMenu\"].show();\n\n  }\n\n  changeLanguage(){\n    this.states[\"MainMenu\"].changeLanguage();\n    this.states[\"Credits\"].changeLanguage();\n    this.states[\"Help\"].changeLanguage();\n    this.states[\"Warning\"].changeLanguage();\n  }\n\n  warning(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Warning\"].show();\n  }\n\n  checkAdventure(){\n    if(this.game.storage.progress!==undefined){\n      this.warning();\n    }else{\n      this.newAdventure();\n    }\n  }\n\n  newAdventure(){\n    //Delete any game progress\n    this.game.storage.delete();\n\n    //Set the first scene\n    this.game.setScene(this.game.settings.FirstScene);\n\n    //Here we go\n    this.game.start();\n  }\n\n  loadAdventure(){\n    this.game.storage.load();\n    this.game.setScene(this.game.storage.progress.latestScene);\n    this.game.start();\n  }\n}\n\nexport default Title;\n","//import * as PIXI from 'pixi.js';\nimport Scene from './scene.js';\n\nimport Walkable from 'walkable';\n\nclass GameScene extends Scene{\n  build(){\n    this.background.parentLayer = this.game.layer; //Z-order\n    this.background.interactive=true;\n    this.background.buttonMode=true;\n\n    this.background.on('pointertap',this.getPosition.bind(this));\n\n    //Add obstacles to the scene\n    this.walkable=new Walkable(this.game.width,this.game.height);\n      if(this.config.WalkArea!==undefined){\n        this.walkable.addPolygon(this.config.WalkArea);\n      }\n\n      if(this.config.Obstacles!==undefined){\n        let obstacles=Object.values(this.config.Obstacles);\n        this.config.Obstacles=obstacles;\n        for(let i=0;i<this.config.Obstacles.length;i++){\n          this.walkable.addPolygon(this.config.Obstacles[i]);\n        }\n      }\n\n      //Add objects to the scene\n      let sceneObjects=this.config.Objects;\n      if(sceneObjects){\n        for(let i=0;i<sceneObjects.length;i++){\n          if(this.game.objects[sceneObjects[i]]!==undefined){\n            this.container.addChild(this.game.objects[sceneObjects[i]].sprite);\n          }else{\n            console.log(\"Error:Game object \"+sceneObjects[i]+\" not found\");\n          }\n        }\n      }\n\n      //Add NPCs (non-playable characters) to the scene\n      let sceneChars=this.config.Characters;\n      if(sceneChars){\n        for(let i=0;i<sceneChars.length;i++){\n          if(this.game.npcs[sceneChars[i]]!==undefined){\n            this.container.addChild(this.game.npcs[sceneChars[i]].sprite);\n          }else{\n            console.log(\"Error:Game character \"+sceneChars[i]+\" not found\");\n          }\n        }\n      }\n  }\n\n  getPosition(event){\n    let coord=event.data.getLocalPosition(this.game.app.stage);\n    if(!this.game.player.lock && this.game.activeObject===null){\n      this.game.player.move(coord);\n    }\n  }\n\n  getPath(fromX,fromY,toX,toY){\n    return this.walkable.findPath(fromX, fromY, toX, toY, 0);\n  }\n\n}\n\nexport default GameScene;\n","class CutScene{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.sequenceIndex=0;\n    this.played=false;\n  }\n\n  build(){\n    if(this.config.Video){\n      this.videoData = this.game.files.resources[this.config.Video].data;\n      this.videoEnds=this.end.bind(this);\n      this.videoData.addEventListener('ended',this.videoEnds);\n    }else if(this.config.Sequence){\n      this.image=new PIXI.Sprite(PIXI.Texture.from(this.config.Sequence[this.sequenceIndex].Image));\n      var ratio = Math.min(this.game.width/this.image.width, this.game.height/this.image.height);\n      this.image.scale.set(ratio/2);\n\n      this.container.interactive=true;\n      this.container.buttonMode=true;\n      this.container.on('pointertap',this.next.bind(this));\n\n      this.container.addChild(this.image);\n\n      this.field=new PIXI.Text(this.config.Sequence[this.sequenceIndex].Text[this.game.activeLanguage],this.game.settings.Text.Style);\n      this.field.anchor.set(0.5,0);\n      this.field.x=this.image.width/2;\n      this.field.y=this.image.height+this.field.height/2;\n\n      this.container.addChild(this.field);\n\n      this.container.x = (this.game.width - this.image.width) / 2;\n      this.container.y = (this.game.height - this.image.height) / 2;\n    }\n  }\n\n  show(){\n      if(this.config.Video) {\n        let videoTexture = PIXI.Texture.from(this.videoData);\n      \tthis.videoSprite = new PIXI.Sprite(videoTexture);\n        this.videoSprite.width = this.game.width;\n        this.videoSprite.height = this.game.height;\n        this.videoSprite.interactive=true;\n        this.videoSprite.buttonMode=true;\n        this.videoSprite.on('pointertap',this.end.bind(this));\n        this.container.addChild(this.videoSprite);\n      }else if(this.config.Sequence) {\n        this.timeoutID = setTimeout(this.next.bind(this),\n                         this.config.Sequence[this.sequenceIndex].Time*1000);\n      }\n      this.game.app.stage.addChild(this.container);\n      this.game.activeScene.hide();\n      this.game.inventory.hideIcon();\n      this.game.player.hide();\n  }\n\n  hide(){\n      this.container.parent.removeChild(this.container);\n  }\n\n  next(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    if(this.sequenceIndex<this.config.Sequence.length-1){\n      this.sequenceIndex+=1;\n      this.field.text=this.config.Sequence[this.sequenceIndex].Text[this.game.activeLanguage];\n      this.image.texture=(PIXI.Texture.from(this.config.Sequence[this.sequenceIndex].Image));\n      this.timeoutID = setTimeout(this.next.bind(this), this.config.Sequence[this.sequenceIndex].Time*1000);\n    }else{\n      this.end();\n    }\n  }\n\n  end(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    if(this.videoData){\n      this.videoData.pause();\n      this.videoData.removeEventListener('ended',this.videoEnds);\n    }\n\n    this.hide();\n    this.played=true;\n    this.game.activeScene.show();\n    this.game.inventory.showIcon();\n    this.game.player.show();\n  }\n}\n\nexport default CutScene;\n","import * as PolyK from 'polyk';\n\nfunction boxesIntersect(a, b)\n{\n  var ab = a.getBounds();\n  var bb = b.getBounds();\n  return ab.x + ab.width > bb.x && ab.x < bb.x + bb.width && ab.y + ab.height > bb.y && ab.y < bb.y + bb.height;\n}\n\nfunction collision(a, b)\n{\n  let result;\n  if(a!=undefined && b !=undefined){\n    if(a.hitArea) result=PolyK.ContainsPoint(a.hitArea.points,b.x,b.y);\n    else if(b.hitArea) result=PolyK.ContainsPoint(b.hitArea.points,a.x,a.y);\n    else result=boxesIntersect(a,b);\n  }\n\n  return result;\n}\n\nfunction closestPoint(area,coords){\n  let coordX=Math.round(coords.x);\n  let coordY=Math.round(coords.y);\n  let changePosition=PolyK.ClosestEdge(area,coordX,coordY).point;\n  return {x:Math.round(changePosition.x)+1,y:Math.round(changePosition.y)+1}\n}\n\nfunction checkPath(coords,obstaclesPolys,walkPoly){\n  let coordX=Math.round(coords.x);\n  let coordY=Math.round(coords.y);\n  let changePosition;\n  let newPos;\n\n  if(!PolyK.ContainsPoint(walkPoly,coordX,coordY))\n  {\n    changePosition=PolyK.ClosestEdge(walkPoly,coordX,coordY).point;\n    newPos={x:Math.round(changePosition.x)+1,y:Math.round(changePosition.y)+1}\n  }else if(obstaclesPolys!==undefined){\n    for(let i=0;i<obstaclesPolys.length ;i++){\n      if(PolyK.ContainsPoint(obstaclesPolys[i],coordX,coordY)){\n        changePosition=PolyK.ClosestEdge(walkPoly,coordX,coordY).point;\n        newPos={x:Math.round(changePosition.x)+1,y:Math.round(changePosition.y)+1}\n        break;\n      }\n    }\n  }\n\n  return newPos;\n}\n\nexport {boxesIntersect,checkPath,collision,closestPoint};\n","import {boxesIntersect,collision,closestPoint} from '../collisions.js';\n\nclass GameObject{\n  constructor(){\n    this.sprite=null;\n    this.game=null;\n    this.action=null;\n  }\n\n  build(){\n    //Configure the sprite's object\n    if(this.config.Texture){\n      //Generate a static object from a texture\n      this.sprite=new PIXI.Sprite.from(PIXI.Texture.from(this.config.Texture));\n\n    }else if(this.config.Area){\n\n      //For invisible objects\n      this.sprite=new PIXI.Sprite.from(PIXI.Texture.EMPTY);\n      this.sprite.hitArea=new PIXI.Polygon(this.config.Area);\n\n    }else if(this.config.Animation){\n\n      //Animated objects\n      let spritesheet=this.game.files.resources[this.config.Animation.Name].spritesheet;\n\n      let frames = [];\n      for (var i = 0; i < spritesheet._frameKeys.length; i++) {\n          frames.push(PIXI.Texture.from(spritesheet._frameKeys[i]));\n      }\n\n      this.sprite=new PIXI.extras.AnimatedSprite(frames);\n      this.animationSpeed=this.config.Animation.Speed;\n      this.play();\n    }\n\n    //Position of the object in the screen\n    if(this.config.Position){\n      this.sprite.x=this.config.Position[0];\n      this.sprite.y=this.config.Position[1];\n    }\n\n    //Size of the object\n    if(this.config.Size){\n      this.sprite.scale.set(this.config.Size)\n    }\n\n    //Configure the anchor (origin point of the object)\n    if(!this.config.Area)this.sprite.anchor.set(0.5,1);\n\n    //Configure the layer for the z-order\n    if(this.config.Layer==\"Front\") this.sprite.parentLayer=this.game.layeronTop;\n    else this.sprite.parentLayer = this.game.layer;\n\n    //Is it a door?\n    if(this.config.Door){\n      this.door=true;\n      this.newScene=this.config.Door.To;\n      this.playerPos=this.config.Door.Player;\n    }\n\n    //Game object events\n    this.sprite.interactive=true;\n    this.sprite.buttonMode=true;\n\n    if(this.config.Area!==undefined){\n      this.sprite.on('pointerdown', this.touchArea.bind(this))\n          .on('pointerup', this.releaseArea.bind(this))\n          .on('pointerupoutside', this.releaseArea.bind(this));\n    }else{\n      this.sprite.on('pointerdown', this.touch.bind(this))\n          .on('pointermove', this.move.bind(this))\n          .on('pointerup', this.release.bind(this))\n          .on('pointerupoutside', this.release.bind(this));\n    }\n  }\n\n  hide(){\n    this.sprite.visible=false;\n  }\n\n  show(){\n    this.sprite.visible=true;\n  }\n\n  //Invisible object touch begins\n  touchArea(event){\n    if(this.game.activeObject===null && !this.game.player.lock){\n      this.game.activeObject=this;\n      this.interaction = event.data;\n      this.action=null;\n      this.touchedPos=this.interaction.getLocalPosition(this.game.app.stage);\n    }\n  }\n\n  //Invisible object touch ends\n  releaseArea(){\n    if(this.interaction){\n      let moveTo=this.interaction.getLocalPosition(this.game.app.stage);\n      if(collision(moveTo,this.sprite)){\n         this.look();\n      }else if(this.door===true){\n        let newPos=closestPoint(this.config.Area,moveTo);\n        moveTo=newPos;\n        this.use();\n      }\n      if(this.action!==null){\n        this.game.player.tween.once('end',this.action);\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      this.interaction = null;\n      this.touchedPos=null;\n    }\n  }\n\n  //Object touch begins\n  touch(event){\n    if(this.game.activeObject===null && !this.game.player.lock){\n      this.game.activeObject=this;\n      this.action=null;\n      this.posX = this.sprite.x;\n      this.posY = this.sprite.y;\n      this.interaction = event.data;\n      this.sprite.alpha = 0.5;\n      this.dragging = true;\n      this.moved = 0;\n      this.oldParent=this.sprite.parent;\n      if(this.sprite.parentLayer !== this.game.layerUI) this.sprite.parentLayer = this.game.layerUI;\n    }\n  }\n\n  //Object is being dragged\n  move(){\n    if (this.dragging) {\n      this.moved++;\n      this.sprite.setParent(this.game.app.stage);\n      var newPosition = this.interaction.getLocalPosition(this.sprite.parent);\n      let bounds=this.sprite.getBounds();\n      //We can only move the object inside the stage\n      if(newPosition.x>bounds.width/2 && newPosition.x<this.game.width-bounds.width/2) this.sprite.x = newPosition.x;\n      if(newPosition.y>bounds.height && newPosition.y<this.game.height) this.sprite.y = newPosition.y;\n    }\n  }\n\n  //Object drag/touch ends\n  release(){\n    if(this.interaction){\n      let moveTo={x:this.posX,y:this.posY};\n      //Check if we take it\n      if(collision(this.sprite,this.game.inventory.icon) && this.config.Take){\n        this.take();\n        //Check if we look it\n      }else if(this.moved<3){\n        this.look();\n      }else if(this.config.door===true){\n        this.use();\n      }else if(this.config.Use!==undefined){\n        this.game.activePuzzle=this.game.puzzles[this.config.Use];\n        this.use();\n      }\n\n      if(this.action!==null){\n        this.game.player.tween.once('end',this.action);\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      this.sprite.x = this.posX;\n      this.sprite.y = this.posY;\n      this.sprite.alpha = 1;\n      this.sprite.parentLayer = this.game.layer;\n      this.sprite.setParent(this.oldParent);\n\n      this.interaction = null;\n      this.dragging = false;\n      this.moved=0;\n    }\n  }\n\n  //Set player to look this object\n  look(){\n    this.action=this.game.player.look.bind(this.game.player);\n  }\n\n  //Set player to take this object\n  take(){\n    this.action=this.game.player.take.bind(this.game.player);\n  }\n\n  //Set player to use this object\n  use(){\n    this.action=this.game.player.use.bind(this.game.player);\n  }\n\n  //Check collision between objects\n  hit(){\n    let found=null;\n    let i;\n\n    //First check the collision between active scene's objects\n    let objectsArray=this.game.activeScene.config.Objects;\n\n    for(i=0;i<objectsArray.length;i++){\n      if(collision(this.sprite,this.game.objects[objectsArray[i]].sprite)\n                   && this.config.Name!==objectsArray[i]){\n        found=objectsArray[i];\n        break;\n      }\n    }\n\n    //Check if the collision is between inventory objects\n    objectsArray=this.game.inventory.objects;\n\n    for(i=0;i<objectsArray.length;i++){\n      if(collision(this.sprite,this.game.objects[objectsArray[i]].sprite)\n                   && this.config.Name!==objectsArray[i]){\n        found=objectsArray[i];\n        break;\n      }\n    }\n\n    return found;\n  }\n\n  //Object action is canceled or ended\n  cancel(){\n    this.game.activeObject.action=null;\n    this.game.activeObject=null;\n\n  }\n\n  //Remove objects from game\n  remove(){\n    this.sprite.parent.removeChild(this.sprite);\n    //POR HACER\n    //Quitar el objeto de la cadena de objetos de la escena\n    //Quitar del inventario en caso de que esté ahí\n  }\n\n}\n\nexport default GameObject;\n","import {boxesIntersect,collision} from '../collisions.js';\n\nclass Inventory{\n  constructor(){\n      this.container=new PIXI.Container();\n      this.container.visible=false;\n      this.game=null;\n      this.objects=[];\n\n    }\n\n    build(){\n      this.background=new PIXI.Sprite(PIXI.Texture.from(this.game.settings.Inventory.Background));\n      this.background.width=this.game.width/2;\n      this.background.height=this.game.height/2;\n      this.background.parentLayer = this.game.layerUI;\n      this.container.x = (this.game.width - this.background.width) / 2;\n      this.container.y = (this.game.height - this.background.height) / 2;\n      this.border=10;\n      this.icon=new PIXI.Sprite(PIXI.Texture.from(this.game.settings.Inventory.Icon));\n      this.icon.on('pointertap',this.click.bind(this));\n      this.icon.interactive=true;\n      this.icon.buttonMode=true;\n      this.setIcon(this.game.settings.Inventory.Position);\n      this.container.addChild(this.background);\n      this.icon.parentLayer = this.game.layerUI;\n    }\n\n    show(){\n      this.update();\n      this.container.visible=true;\n    }\n\n    hide(){\n      this.container.visible=false;\n\n    }\n\n    showIcon(){\n      this.icon.visible=true;\n    }\n\n    hideIcon(){\n      this.icon.visible=false;\n\n    }\n\n    setIcon(position){\n      if(position==\"bottom-right\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=this.game.height - this.icon.height;\n      }else if(position==\"top-right\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=0;\n      }else if(position==\"top-left\"){\n        this.icon.x=0;\n        this.icon.y=this.game.height - this.icon.height;\n      }else if(position==\"bottom-top\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=0;\n      }\n    }\n\n    click(){\n      if (this.container.visible) this.hide();\n      else if(!this.game.player.lock) this.show();\n    }\n\n    add(name){\n      this.objects.push(name);\n      this.game.objects[name].sprite.setParent(this.container);\n      this.game.objects[name].sprite.parentLayer=this.game.layerUI;\n      this.game.objects[name].sprite.on('pointermove', this.move.bind(this.game.objects[name]))\n                                    .off('pointerup')\n                                    .off('pointerupoutside')\n                                    .on('pointerup',this.release.bind(this.game.objects[name]))\n                                    .on('pointerupoutside',this.release.bind(this.game.objects[name]));\n      this.update();\n    }\n\n    remove(name)\n    {\n      //Check if object is already in inventory\n      if(this.objects.includes(name)){\n        this.objects.splice(this.objects.indexOf(name),1);\n        this.update();\n      }\n    }\n\n    update(){\n      let i;\n      let numObjs=this.objects.length;\n      for(i=0;i<numObjs;i++){\n        let tmpObj=this.game.objects[this.objects[i]].sprite;\n\n        tmpObj.width=this.container.width/5-this.container.width*0.05;\n        tmpObj.height=this.container.height/5-this.container.height*0.05;\n        tmpObj.x = ((i % 5) * this.container.width/5+this.border-i)+tmpObj.width/2;\n        tmpObj.y = (Math.floor(i / 5) * this.container.height/5+this.border-i)+tmpObj.height;\n        this.container.width=this.background.width;\n        this.container.height=this.background.height;\n      }\n    }\n\n    move(){\n      if(!boxesIntersect(this.sprite,this.game.inventory.container))\n        this.game.inventory.hide();\n    }\n\n    release(event){\n      if(this.interaction){\n        let objectHit=this.hit();\n\n        let moveTo={x:this.sprite.x,y:this.sprite.y};\n        //Check if we take it\n        if(this.moved<3){\n          this.game.player.say(this.config.Description[this.game.activeLanguage])\n        }else if(this.config.Combine!==undefined && objectHit!==null){\n          if(this.config.Combine.With===objectHit) {\n            this.game.activePuzzle=this.game.puzzles[this.config.Combine.Puzzle];\n          }\n          this.use();\n        }\n\n        if(this.action!==null){\n          this.game.player.tween.once('end',this.action);\n          this.game.player.move(moveTo);\n        }else{\n          this.cancel();\n        }\n\n        this.sprite.x = this.posX;\n        this.sprite.y = this.posY;\n        this.sprite.alpha = 1;\n        this.sprite.setParent(this.oldParent);\n\n        this.interaction = null;\n        this.dragging = false;\n        this.moved=0;\n      }\n    }\n}\n\nexport default Inventory;\n","class Puzzle{\n  constructor(){\n    this.solved=false;\n  }\n\n  resolve(){\n      if(this.game.activeObject!==null) this.game.activeObject.cancel();\n\n    if(this.config.Modify){\n      let objectMod=this.game.objects[this.config.Modify.Name]\n      if(this.config.Modify.Description) objectMod.config.Description=this.config.Modify.Description;\n      if(this.config.Modify.Door) this.createDoor(objectMod)\n    }\n\n    if(this.config.Say && !this.game.silentMode){\n      this.game.player.say(this.config.Say[this.game.activeLanguage]);\n    }else{\n      this.game.player.stop();\n    }\n\n    /*else if(this.config.NPCSay && !game.silentMode){\n      game.selectedCharacter=game.searchCharacter(this.config.Give);\n      game.characters[game.selectedCharacter].talk(this.config.NPCSay[game.mainLanguage]);\n      if(game.player.sprite.visible) game.player.stand();\n    }\n*/\n    if(this.config.Remove!==undefined){\n      let i;\n      let array=this.config.Remove;\n      for(i=0;i<array.length;i++){\n        this.game.objects[array[i]].remove();\n      }\n    }\n\n    if(this.config.GetObject!==undefined) this.game.inventory.add(this.config.GetObject);\n/*\n    if(this.config.Create){\n      let objectIndex=game.searchObject(this.config.Create);\n      if(objectIndex){\n        game.scenes[game.currentScene].container.addChild(game.objects[objectIndex]);}\n    }\n*/\n    this.solved=true;\n    this.game.activePuzzle=null;\n  }\n\n  createDoor(target){\n    target.door=true;\n    target.newScene=this.config.Modify.Door.To;\n    target.playerPos=this.config.Modify.Door.Player;\n  }\n\n  createInventoryObject(objectName){\n    //this.game.objects[objectName].take();\n  }\n}\n\nexport default Puzzle;\n","import dragonBones from 'dragonbones-pixi';\nimport tweenManager from 'k8w-pixi-tween';\nconst dbfactory=dragonBones.dragonBones.PixiFactory.factory;\nimport {checkPath} from '../collisions.js'\n\nclass Character{\n  constructor(){\n    this.game=null;\n    this.state=null;\n    this.lock=false;\n  }\n\n  setup(config){\n    dbfactory.parseDragonBonesData(this.game.files.resources[config.Name+\"Skeleton\"].data);\n    dbfactory.parseTextureAtlasData(this.game.files.resources[config.Name+\"Json\"].data,this.game.files.resources[config.Name+\"Tex\"].texture);\n    this.sprite = dbfactory.buildArmatureDisplay(config.Armature);\n    this.size=1;\n    this.tween=PIXI.tweenManager.createTween(this.sprite);\n    this.tween.on('end', this.stop.bind(this));\n    if(config.Animations!=undefined)\n      this.animations=config.Animations;\n    else\n      this.animations={\n        Stand:\"stand\",\n        Walk:\"walk\",\n        Take:\"take\",\n        Use:\"use\",\n        Say:\"speak\"\n      };\n    this.animate(this.animations.Stand);\n    this.state=\"stand\";\n    this.sprite.x=500;\n    this.sprite.y=500;\n    this.sprite.parentLayer = this.game.layer;//Z-order*/\n    this.config=config;\n  }\n\n  hide(){\n    this.sprite.visible=false;\n  }\n\n  show(){\n    this.sprite.visible=true;\n  }\n\n  position(coords){\n    this.sprite.x=coords[0];\n    this.sprite.y=coords[1];\n  }\n\n  move(coords){\n    let obstacles=this.game.activeScene.config.Obstacles;\n    let walkingArea=this.game.activeScene.config.WalkArea;\n    let newPosition=coords;\n    let closestPosition=checkPath(coords,obstacles,walkingArea);\n\n    if(closestPosition){\n      newPosition=closestPosition;\n    }\n\n    let path = new PIXI.tween.TweenPath();\n    let findPath=this.game.activeScene.walkable.findPath(this.sprite.x,this.sprite.y,newPosition.x,newPosition.y,0);\n\n    if(findPath.length>0){\n      this.tween.stop().clear();\n      this.animate(this.animations.Walk);\n      if(this.sprite.x<newPosition.x) this.sprite.armature.flipX=false;\n      else this.sprite.armature.flipX=true;\n      path.drawShape(new PIXI.Polygon(findPath));\n      this.tween.path=path;\n\n      //Needs improvement\n      let animationTime=Math.abs(this.sprite.x-newPosition.x)*5+Math.abs(this.sprite.y-newPosition.y)*5+findPath.length*100;\n\n      this.tween.time = animationTime;\n      this.tween.speed = 1;\n      this.tween.delay=10;\n      this.tween.start();\n    }\n  }\n\n  update(){\n    PIXI.tweenManager.update();\n    this.scale();\n  }\n\n  scale(){\n    let scaleChar=this.sprite.y/this.game.height*this.size;\n    this.sprite.scale.set(scaleChar);\n  }\n\n  stop(){\n    this.animate(this.animations.Stand);\n    this.game.activeState=null;\n    this.lock=false;\n  }\n\n  say(text){\n    this.game.textField.talker=this;\n    //Setup the text to show\n    this.game.textField.setText(text);\n    this.game.textField.setColor(Number(this.config.Color));\n    this.game.textField.show();\n\n    //Animate the character\n    this.animate(this.animations.Say);\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    this.timeoutID=setTimeout(this.game.textField.end.bind(this.game.textField), this.game.textField.timeOut());\n  }\n\n  shutup(){\n    this.animate(this.animations.Stand);\n  }\n\n  animate(animation,times){\n    if(this.sprite.animation.lastAnimationName!==animation)\n      this.sprite.animation.fadeIn(animation,0.25,times);\n  }\n}\n\nexport default Character;\n","import Character from './character.js';\nimport dragonBones from 'dragonbones-pixi';\nconst dbEvents=dragonBones.dragonBones.EventObject;\n\nclass Player extends Character{\n  move(coords){\n    super.move(coords);\n    this.game.activeState=this;\n  }\n  say(text){\n    super.say(text);\n    //Lock the player\n    this.lock=true;\n  }\n  look(){\n    if(this.game.activeObject!==null){\n      let text=this.game.activeObject.config.Description[this.game.activeLanguage];\n      this.say(text);\n      this.game.activeObject.cancel();\n    }\n  }\n\n  take(){\n    this.lock=true;\n    this.animate(this.animations.Take,1);\n    this.sprite.once(dbEvents.COMPLETE, this.takeEnd, this);\n  }\n\n  takeEnd(){\n    if(this.game.activeObject!==null){\n      let name=this.game.activeObject.config.Name;\n      if(this.game.activeScene!==null){\n        if(this.game.activeScene.config.Objects.includes(name)){\n          let tmpIndex=this.game.activeScene.config.Objects.indexOf(name);\n          this.game.activeScene.config.Objects.splice(tmpIndex,1);\n        }\n      }\n      this.game.inventory.add(name);\n      this.game.activeObject.cancel();\n      this.stop();\n    }\n  }\n\n  use(){\n    this.lock=true;\n    this.animate(this.animations.Use,1);\n    this.sprite.once(dbEvents.COMPLETE, this.useEnd, this);\n  }\n\n  useEnd(){\n    if(this.game.activePuzzle!==null){\n      this.game.activePuzzle.resolve();\n    }else if(this.game.activeObject!==null) {\n      if(this.game.activeObject.door){\n        this.game.setScene(this.game.activeObject.newScene,this.game.activeObject.playerPos);\n        this.stop();\n      }else{\n        this.say(this.game.data.texts.NotUsable[this.game.activeLanguage])\n      }\n      this.game.activeObject.cancel();\n    }\n\n  }\n\n  talk(){\n    this.game.activeDialogue.start();\n  }\n\n}\n\nexport default Player;\n","import Character from './character.js';\n\nclass NPC extends Character{\n  build(){\n    this.sprite.interactive=true;\n    this.sprite.buttonMode=true;\n    this.sprite.on('pointerdown', this.touch.bind(this))\n        .on('pointerup', this.release.bind(this))\n        .on('pointerupoutside', this.release.bind(this));\n  }\n\n  touch(event){\n    if(this.game.activeNPC===null && !this.game.player.lock){\n      this.game.activeNPC=this;\n      this.action=null;\n      this.interaction = event.data;\n    }\n  }\n  //Object drag/touch ends\n  release(){\n\n    if(this.interaction){\n      let distance=0;\n      if(this.game.player.sprite.x<this.sprite.x) distance=this.sprite.width*-1;\n      else distance=this.sprite.width;\n      let moveTo={x:this.sprite.x+distance,y:this.sprite.y};\n      //Check if we take it\n      if(this.config.Dialogue!==undefined){\n        this.game.activeDialogue=this.game.dialogues[this.config.Dialogue];\n        this.action=this.game.player.talk.bind(this.game.player);\n      }\n\n      if(this.action!==null){\n        this.game.player.tween.once('end',this.action);\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      this.interaction = null;\n      this.dragging = false;\n      this.moved=0;\n    }\n  }\n  //Object action is canceled or ended\n  cancel(){\n    this.game.activeNPC.action=null;\n    this.game.activeNPC=null;\n\n  }\n}\n\nexport default NPC;\n","import {Button} from './text.js'\n\n//Branches dialogue system\nclass Dialogue{\n  constructor(){\n    this.timeoutID=null;\n    this.firstTime=true;\n    this.choice=null;\n    this.branches={};\n  }\n\n  setup(config){\n    this.config=config;\n\n    //Get dialogue branches\n    let i;\n    length=this.config.Branches.length;\n    for(i=0;i<length;i++)\n    {\n      this.branches[this.config.Branches[i].Name]=this.config.Branches[i];\n    }\n\n    this.currentBranch=this.branches[this.config.DefaultBranch];\n  }\n\n  //Executed when we interact with a NPC\n  start(){\n    this.firstTime=false;\n    this.game.player.lock=true;\n    this.game.textField.show();\n    this.game.textField.Choices.get();\n  }\n\n  //Executed everytime we choose an option\n  next(){\n    if(this.choice!==null){\n      let choiceSelected=this.currentBranch.Choices[this.choice];\n      this.game.textField.Choices.hide();\n      this.game.player.say(choiceSelected.Text[this.game.activeLanguage]);\n    }else{\n      this.game.textField.Choices.get();\n    }\n  }\n\n  //Search for a branch with a given name\n  searchBranch(name){\n    let branchFound=-1;\n    let i;\n    let length=this.config.Branches.length\n    for(i=0;i<length;i++)\n         if(this.config.Branches[i].Name==name)\n         {\n             branchFound=i;\n             break;\n         }\n    return branchFound;\n  }\n\n  answer(){\n    let choiceSelected=this.currentBranch.Choices[this.choice];\n    this.game.activeNPC.say(choiceSelected.Answer[this.game.activeLanguage]);\n    if(choiceSelected.EndDialogue){\n      this.end();\n    }else if(choiceSelected.Link){\n      this.currentBranch=this.branches[choiceSelected.Link];\n    }else if(choiceSelected.Puzzle){\n      choiceSelected.Repeat=false;\n      this.end();\n      this.game.puzzles[choiceSelected.Puzzle].resolve();\n    }\n\n\n    this.choice=null;\n  }\n\n  //Ends the conversations\n  end(){\n    this.game.activeNPC=null;\n    this.game.activeDialogue=null;\n  }\n\n  timeOut(){\n    this.next();\n  }\n}\n\nexport default Dialogue;\n","import * as PIXI from 'pixi.js';\nimport 'pixi-sound';\nimport 'pixi-layers';\n\nimport Loader from './loader.js';\nimport Storage from './storage.js';\nimport Title from './class/title.js';\nimport GameScene from './class/gamescene.js';\nimport CutScene from './class/cutscene.js';\nimport GameObject from './class/gameobject.js';\nimport Inventory from './class/inventory.js';\nimport Puzzle from './class/puzzle.js';\nimport {TextField} from './class/text.js';\nimport Player from './class/player.js';\nimport NPC from './class/npc.js';\nimport Dialogue from './class/dialogue.js';\n\nclass Game {\n  constructor(config){\n    this.settings={};\n    this.data={};\n    this.width=config.width;\n    this.height=config.height;\n    this.playSounds = true;\n\n    //Setup the application\n    this.app = new PIXI.Application(config.width,config.height,{antialias: true, autoResize: true, resolution: devicePixelRatio});\n    this.app.stage = new PIXI.display.Stage();\n\n    //Change game size when window size changes\n    if(config.autoResize!==undefined) this.app.renderer.autoResize=config.autoResize;\n    else window.addEventListener('resize', this.resize.bind(this));\n\n\n    //We append it to a HTML element or Document body\n    if(config.parent){\n      document.getElementById(config.parent).appendChild(this.app.view)\n    }else{\n      document.body.appendChild(this.app.view);\n    }\n\n    //Load config files\n    this.preload(config.files);\n  }\n\n  //Read JSON configuration files\n  preload(files){\n    //Text to show progress\n    this.progressBar=new PIXI.Graphics();\n    this.progressBar.beginFill(0xDE3249);\n    this.progressBar.drawRect(0, 0, this.width, this.height/50);\n    this.progressBar.endFill();\n    this.progressBar.width=0;\n\n    this.loadingTxt=new PIXI.Text(\"Loading...\", {fill: 'white',\"fontSize\": 50});\n    this.loadingTxt.anchor.set(0.5);\n    this.loadingTxt.x=this.width/2;\n    this.loadingTxt.y=this.height/2;\n\n    this.progressBar.y=this.height/2+this.loadingTxt.height;\n\n    this.app.stage.addChild(this.loadingTxt);\n    this.app.stage.addChild(this.progressBar);\n\n    this.jsons=new Loader();\n    this.jsons.game=this;\n    this.jsons.addJSON(files);\n    this.jsons.load(this.load.bind(this)); //When all config files are loaded, load the game resources.\n  }\n\n  //Load game resources (images,sounds,vids...)\n  load(){\n    this.files=new Loader();\n    this.files.game=this;\n    this.files.addFiles(Object.values(this.jsons.resources));\n    this.files.load(this.setup.bind(this));\n  }\n\n  setup(){\n    this.app.stage.removeChild(this.loadingTxt);\n    this.app.stage.removeChild(this.progressBar);\n\n    //Z-Order\n    this.addZOrder();\n\n    //Adjust to window size\n    this.resize();\n\n    this.scenes={};\n    this.cutscenes={};\n    this.objects={};\n    this.npcs={};\n    this.dialogues={};\n    this.puzzles={};\n\n    this.activeLanguage=0;\n    this.activeScene=null;\n    this.activeObject=null;\n    this.activeNPC=null;\n    this.activePuzzle=null;\n    this.activeDialogue=null;\n\n    this.activeState=null;\n\n    this.storage=new Storage(this);\n\n    //Setup title screen\n    this.addScene(\"Title\",new Title(),this.settings.TitleScreen);\n\n    //Add game objects\n    let i;\n    let length=this.data.objects.length;\n    for(i=0;i<length;i++)\n    {\n      this.addObject(this.data.objects[i].Name,new GameObject(),this.data.objects[i]);\n    }\n\n    //Non-playable characters\n    length=this.data.npc.length;\n    for(i=0;i<length;i++)\n    {\n      this.addNPC(this.data.npc[i].Name,new NPC(),this.data.npc[i]);\n    }\n\n    //Dialogues\n    length=this.data.dialogues.length;\n    for(i=0;i<length;i++)\n    {\n      this.addDialogue(this.data.dialogues[i].Name,new Dialogue(),this.data.dialogues[i]);\n    }\n\n    //Add game scenes\n    length=this.data.scenes.length;\n    for(i=0;i<length;i++)\n    {\n      this.addScene(this.data.scenes[i].Name,new GameScene(),this.data.scenes[i]);\n    }\n\n    //Add cutscenes\n    length=this.data.cutscenes.length;\n    for(i=0;i<length;i++)\n    {\n      this.addCutscene(this.data.cutscenes[i].Name,new CutScene(),this.data.cutscenes[i]);\n    }\n\n    //Puzzles\n    length=this.data.puzzles.length;\n    for(i=0;i<length;i++)\n    {\n      this.addPuzzle(this.data.puzzles[i].Name,new Puzzle(),this.data.puzzles[i]);\n    }\n\n    //Add Inventory\n    this.addInventory();\n\n    //Add text field\n    this.addTextField();\n\n    //Add player\n    this.addPlayer();\n\n    //Check if there is a saved game\n    this.storage.check();\n\n    //Set Title as the first scene to show\n    this.setScene(\"Title\");\n\n    //Game's loop\n    this.app.ticker.add(this.loop.bind(this));\n  }\n\n  loop(dt){\n    //console.log(this.player.lock) //Test\n    // update current state\n    if (this.activeState != null) {\n        this.activeState.update(dt);\n    }\n  }\n\n  addObject(name, object, config) {\n      this.objects[name] = object;\n\n      //Config the object\n      object.config=config;\n\n      //Set game so object can access it\n      object.game = this;\n\n      //Build object\n      object.build();\n  }\n\n  addScene(name, scene, config) {\n      this.scenes[name] = scene;\n\n      //Config the scene\n      scene.setup(config);\n\n      //Set game so scene can access it\n      scene.game = this;\n\n      //Build scene\n      scene.build();\n  }\n\n  addCutscene(name, cutscene, config) {\n      this.cutscenes[name] = cutscene;\n\n      //Config the scene\n      cutscene.config=config;\n\n      //Set game so scene can access it\n      cutscene.game = this;\n\n      //Build scene\n      cutscene.build();\n  }\n\n  addPuzzle(name, puzzle, config) {\n      this.puzzles[name] = puzzle;\n\n      //Puzzle's config\n      puzzle.config=config;\n\n      //Set game so puzzle can access it\n      puzzle.game = this;\n  }\n\n  setScene(name,playerCoords) {\n\n      //Remove current container\n      if (this.activeScene !== null) {\n          this.app.stage.removeChild(this.activeScene.container);\n      }\n\n      //Set current container\n      this.activeScene = this.scenes[name];\n      //Add our new container\n      this.app.stage.addChild(this.activeScene.container);\n\n      if(this.activeScene.config.Player!==undefined){\n        if(this.activeScene.config.Player.Position!==undefined){\n          this.player.position(this.activeScene.config.Player.Position);\n        }\n        if(this.activeScene.config.Player.Size!==undefined){\n          this.player.size=this.activeScene.config.Player.Size;\n          this.player.scale();\n        }\n      }\n\n      if(playerCoords!==undefined){\n        this.player.sprite.x=playerCoords[0];\n        this.player.sprite.y=playerCoords[1];\n      }\n\n      if(this.activeScene.config.CutScene!==undefined){\n        if(!this.cutscenes[this.activeScene.config.CutScene].played){\n          this.cutscenes[this.activeScene.config.CutScene].show();\n        }\n      }\n\n      //Save game progress\n      if(this.activeScene!==this.scenes[\"Title\"])\n        this.storage.save();\n      // Play sounds\n      if(this.activeScene.music!==undefined && this.playSounds){\n        PIXI.sound.stopAll();\n        if(PIXI.sound.exists(this.activeScene.music))\n          PIXI.sound.play(this.activeScene.music,{loop:true});\n      }\n  }\n\n  addZOrder(){\n    this.sortGroup= new PIXI.display.Group(0, true);\n    this.sortGroup.on('sort', function (sprite) {\n      sprite.zOrder = -sprite.y;\n    });\n    this.onTopGroup = new PIXI.display.Group(1,false);\n    this.UIGroup = new PIXI.display.Group(2,false);\n\n    this.layer=new PIXI.display.Layer(this.sortGroup);\n    this.layeronTop=new PIXI.display.Layer(this.onTopGroup);\n    this.layerUI=new PIXI.display.Layer(this.UIGroup);\n    //this.layerUI.group.enableSort = true;\n    //this.layer.group.enableSort = true;\n    this.app.stage.group.enableSort = true;\n    this.app.stage.addChild(this.layer);//Z-order\n    this.app.stage.addChild(this.layeronTop);//Z-order\n    this.app.stage.addChild(this.layerUI);//Z-order\n  }\n\n  addInventory(){\n    this.inventory=new Inventory();\n    this.inventory.game=this;\n    this.inventory.build();\n  }\n\n  addPlayer(){\n    this.player=new Player();\n    this.player.game=this;\n    this.data.player.Name=\"player\";\n    this.player.setup(this.data.player);\n  }\n\n  addNPC(name, char, config){\n    this.npcs[name] = char;\n\n    char.game = this;\n\n    char.setup(config);\n\n    char.build();\n  }\n\n  addDialogue(name, dialogue, config){\n    this.dialogues[name] = dialogue;\n\n    dialogue.game = this;\n\n    dialogue.setup(config);\n  }\n\n  addTextField(){\n    this.textField=new TextField();\n    this.textField.game=this;\n    this.textField.build();\n  }\n\n  //Adjust game screen to the window\n  resize() {\n    var w = window.innerWidth * window.devicePixelRatio;\n    var h = window.innerHeight * window.devicePixelRatio;\n    var ratio = Math.min( w/this.width,  h/this.height);\n    this.app.renderer.resize(this.width*ratio,this.height*ratio);\n    this.app.stage.scale.set(ratio);\n  }\n\n  //The magic begins\n  start(){\n    //Show Inventory\n    this.app.stage.addChild(this.inventory.container);\n    this.app.stage.addChild(this.inventory.icon);\n\n    //Show Player\n    this.app.stage.addChild(this.player.sprite);\n\n    //Add Text Field\n    this.app.stage.addChild(this.textField.container);\n  }\n\n\n}\n\nexport default Game;\n","import Game from './game';\n\nconsole.log(\"JSGAM 5.0.0 https://github.com/kreezii/jsgam\");\n\n//export default Game;\nexport default Game;\n"],"names":["Loader","constructor","game","onLoad","add","this","update","bind","onError","error","addJSON","files","i","arrayLength","length","name","slice","lastIndexOf","addFiles","data","Settings","settings","Scenes","scenes","Cutscenes","cutscenes","Objects","objects","Dialogues","dialogues","Puzzles","puzzles","Credits","credits","Texts","texts","Sounds","soundSrc","j","tmpSound","Src","Name","Vids","fixVidLoad","vidSrc","tmpVid","Animations","animSrc","tmpAnim","Backgrounds","bgSrc","tmpBg","Player","Texture","Json","Skeleton","player","Characters","npcSrc","npc","PIXI","sound","utils","extensions","splice","indexOf","loaders","Resource","setExtensionXhrType","undefined","setExtensionLoadType","LOAD_TYPE","VIDEO","percent","Math","floor","progress","progressBar","width","resource","console","log","Storage","save","puzzlesSolved","Object","values","forEach","puzzle","solved","includes","config","push","dialoguesDisabled","dialogue","branches","branch","Choices","choice","index","disabled","Dialogue","Branch","cutscenesPlayed","cutscene","played","language","activeLanguage","activeScene","sprite","x","y","inventory","setItem","load","item","thisItem","scene","tmpIndex","disable","Index","silentMode","resolve","delete","localForage","clear","check","storage","getItem","then","value","changeLanguage","states","enable","catch","err","Scene","container","Container","setup","background","Sprite","from","Background","anchor","set","addChild","music","Music","dt","hide","visible","show","Button","text","style","interactive","buttonMode","extras","BitmapText","Infotxt","Phrases","option","let","Text","ButtonStyle","on","onTap","height","sort","activeChoice","activeDialogue","currentBranch","alpha","Repeat","next","get","options","parent","scale","ratio","min","TextField","build","parentLayer","layerUI","WHITE","size","Size","tint","Style","skip","Position","setPosition","end","talker","shutup","answer","setText","stop","clearTimeout","timeoutID","position","newText","adjustText","countWords","str","split","timeOut","time","Speed","setColor","colour","Menu","buttons","addButton","modify","arrayButtons","center","resize","pivot","MainMenu","create","gameTexts","NewGame","Continue","Options","Help","languages","Languages","addLanguage","setLanguage","Back","father","change","mainMenu","texture","buildText","structuredText","tween","tweenManager","createTween","to","expire","delay","start","reset","Lines","Title","Confirmation","addText","Warning","Yes","No","addState","addAction","showOptions","showHelp","showCredits","checkAdventure","loadAdventure","newAdventure","button","action","state","activeState","warning","setScene","FirstScene","latestScene","GameScene","layer","getPosition","walkable","Walkable","WalkArea","addPolygon","Obstacles","obstacles","sceneObjects","sceneChars","npcs","event","coord","getLocalPosition","app","stage","lock","activeObject","move","getPath","fromX","fromY","toX","toY","findPath","CutScene","sequenceIndex","boxesIntersect","a","b","ab","getBounds","bb","collision","result","hitArea","PolyK","points","Video","videoData","resources","videoEnds","addEventListener","Sequence","image","Image","field","videoTexture","videoSprite","setTimeout","Time","hideIcon","removeChild","pause","removeEventListener","showIcon","GameObject","Area","EMPTY","Polygon","Animation","spritesheet","frames","_frameKeys","AnimatedSprite","animationSpeed","play","Layer","layeronTop","Door","door","newScene","To","playerPos","touchArea","releaseArea","touch","release","interaction","touchedPos","moveTo","look","area","coords","coordX","round","coordY","changePosition","point","use","once","cancel","posX","posY","dragging","moved","oldParent","setParent","newPosition","bounds","icon","Take","take","Use","activePuzzle","hit","found","objectsArray","remove","Inventory","border","Icon","click","setIcon","off","numObjs","tmpObj","objectHit","say","Description","Combine","With","Puzzle","Modify","objectMod","createDoor","Say","Remove","array","GetObject","target","createInventoryObject","objectName","const","dbfactory","dragonBones","PixiFactory","factory","Character","parseDragonBonesData","parseTextureAtlasData","buildArmatureDisplay","Armature","animations","animate","Stand","closestPosition","obstaclesPolys","walkPoly","newPos","checkPath","path","TweenPath","Walk","armature","flipX","drawShape","animationTime","abs","speed","textField","Number","Color","animation","times","lastAnimationName","fadeIn","dbEvents","EventObject","COMPLETE","takeEnd","useEnd","NotUsable","talk","NPC","activeNPC","firstTime","Branches","DefaultBranch","choiceSelected","searchBranch","branchFound","Answer","EndDialogue","Link","Game","playSounds","devicePixelRatio","Stage","autoResize","renderer","window","document","getElementById","appendChild","view","body","preload","beginFill","drawRect","endFill","loadingTxt","jsons","addZOrder","addScene","TitleScreen","addObject","addNPC","addDialogue","addCutscene","addPuzzle","addInventory","addTextField","addPlayer","ticker","loop","object","playerCoords","stopAll","exists","sortGroup","Group","zOrder","onTopGroup","UIGroup","group","enableSort","char","w","innerWidth","h","innerHeight"],"mappings":"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"}