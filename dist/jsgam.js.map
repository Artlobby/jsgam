{"version":3,"file":"jsgam.js","sources":["../src/loader.js","../src/storage.js","../src/class/scene.js","../src/class/text.js","../src/class/menu.js","../src/class/mainmenu.js","../src/class/options.js","../src/class/help.js","../src/class/credits.js","../src/class/confirmation.js","../src/class/title.js","../src/class/gamescene.js","../src/class/cutscene.js","../src/collisions.js","../src/class/gameobject.js","../src/class/inventory.js","../src/class/puzzle.js","../src/class/character.js","../src/class/player.js","../src/class/npc.js","../src/class/dialogue.js","../src/game.js","../src/index.js"],"sourcesContent":["\n\nclass Loader extends PIXI.loaders.Loader{\n  constructor(){\n    super();\n    this.game=null;\n    this.onLoad.add(this.update.bind(this));\n    this.onError.add(this.error.bind(this));\n  }\n\n  //Add config files to loader\n  addJSON(files){\n  /*  let thisLoader=this;\n    files.map(function(file){\n      thisLoader.add(file.slice(file.lastIndexOf(\"/\")+1,file.lastIndexOf(\".\")),file)\n    });*/\n    let i;\n    let arrayLength=files.length;\n\n    for(i=0;i<arrayLength;i++){\n      let name=files[i].slice(files[i].lastIndexOf(\"/\")+1,files[i].lastIndexOf(\".\"));\n      this.add(name,files[i]);\n    }\n  }\n\n  //Add resource files to loader and settings to game\n  addFiles(files){\n    let i;\n    let length=files.length\n    for(i=0;i<length;i++){\n      //Add config files to setup the game\n      if(files[i].data.Settings) this.game.settings=files[i].data.Settings;\n      if(files[i].data.Scenes) this.game.data.scenes=this.game.data.scenes.concat(files[i].data.Scenes);\n      if(files[i].data.Cutscenes) this.game.data.cutscenes=this.game.data.cutscenes.concat(files[i].data.Cutscenes);\n      if(files[i].data.Objects) this.game.data.objects=this.game.data.objects.concat(files[i].data.Objects);\n      if(files[i].data.Dialogues) this.game.data.dialogues=this.game.data.dialogues.concat(files[i].data.Dialogues);\n      if(files[i].data.Puzzles) this.game.data.puzzles=this.game.data.puzzles.concat(files[i].data.Puzzles);\n      if(files[i].data.Credits) this.game.data.credits=files[i].data.Credits;\n      if(files[i].data.Texts) this.game.data.texts=files[i].data.Texts;\n      //Look for sound files\n      if(files[i].data.Sounds){\n        let soundSrc=files[i].data.Sounds;\n        for(let j=0;j<soundSrc.length;j++){\n           let tmpSound=soundSrc[j].Src;\n           if(tmpSound!==null) this.add(soundSrc[j].Name,tmpSound);\n        }\n       }\n\n       //Look for video files\n       if(files[i].data.Vids)\n       {\n         //Fix for load correctly vids with pixi-sound\n         this.fixVidLoad();\n         let vidSrc=files[i].data.Vids;\n         for(let i=0;i<vidSrc.length;i++){\n           let tmpVid=vidSrc[i].Src;\n           if(tmpVid!==null) this.add(vidSrc[i].Name,tmpVid);\n         }\n       }\n\n       //Load Animations\n       if(files[i].data.Animations)\n       {\n         let animSrc=files[i].data.Animations;\n         for(let i=0;i<animSrc.length;i++){\n           let tmpAnim=animSrc[i].Src;\n           if(tmpAnim!==null) this.add(animSrc[i].Name,tmpAnim);\n         }\n       }\n\n       //Load Backgrounds if don't use texture atlas for backgrounds\n       if(files[i].data.Backgrounds){\n         let bgSrc=files[i].data.Animations;\n         for(let i=0;i<bgSrc.length;i++){\n           let tmpBg=bgSrc[i].Src;\n           if(tmpBg!==null) this.add(bgSrc[i].Name,tmpBg);\n         }\n       }\n\n       //Look for player files\n       if(files[i].data.Player){\n         this.add('playerTex', files[i].data.Player.Texture)\n             .add('playerJson', files[i].data.Player.Json)\n             .add('playerSkeleton', files[i].data.Player.Skeleton);\n         this.game.data.player=files[i].data.Player;\n       }\n\n       //Look for NPC files\n       if(files[i].data.Characters){\n         let npcSrc=files[i].data.Characters;\n         for(let i=0;i<npcSrc.length;i++){\n            this.add(npcSrc[i].Name+\"Tex\", npcSrc[i].Texture)\n            .add(npcSrc[i].Name+'Json', npcSrc[i].Json)\n            .add(npcSrc[i].Name+'Skeleton', npcSrc[i].Skeleton);\n          }\n          this.game.data.npc=files[i].data.Characters;\n        }\n    }\n  }\n\n  //Fix for load mp4 as videos instead as audio because of pixi-sound\n  fixVidLoad(){\n    PIXI.sound.utils.extensions.splice(PIXI.sound.utils.extensions.indexOf('mp4'), 1);\n    PIXI.loaders.Resource.setExtensionXhrType('mp4', undefined);\n    PIXI.loaders.Resource.setExtensionLoadType('mp4', PIXI.loaders.Resource.LOAD_TYPE.VIDEO);\n  }\n\n  //Loading progress\n  update(){\n    let percent=Math.floor(this.progress);\n    this.game.progressBar.width=(this.game.width/100)*percent;\n    //this.game.loadingTxt.text=\"Loading... \"+ percent+\"%\";\n  }\n\n  //File failed to load\n  error(resource){\n    console.log(resource);\n  }\n\n}\n\nexport default Loader;\n","import localForage from 'localforage';\n\nexport default class Storage{\n  constructor(game){\n    this.game=game;\n  }\n\n  //Save adventure progress\n  save(){\n    //Get solved puzzles\n    let puzzlesSolved=[];\n    let puzzleArray=Object.values(this.game.puzzles)\n\n    puzzleArray.forEach(function(puzzle){\n      if(puzzle.solved && !puzzlesSolved.includes(puzzle.config.Name))\n        puzzlesSolved.push(puzzle.config.Name)\n    });\n\n    //Get dialogues\n    let dialoguesDisabled=[];\n    let dialogueArray=Object.values(this.game.dialogues);\n\n\n    dialogueArray.forEach(function(dialogue){\n      let branches=Object.values(dialogue.branches);\n\n      branches.forEach(function(branch){\n\n        branch.Choices.forEach(function(choice,index){\n          if(choice.disabled){\n            let disabledOption={\n              Dialogue:dialogue.config.Name,\n              Branch:branch.Name,\n              Index:index\n            }\n            dialoguesDisabled.push(disabledOption);\n          }\n        });\n      });\n\n    });\n\n    //Get player cutscenes\n    let cutscenesPlayed=[];\n    let cutscenesArray=Object.values(this.game.cutscenes);\n    cutscenesArray.forEach(function(cutscene){\n      if(cutscene.played) cutscenesPlayed.push(cutscene.config.Name);\n    });\n\n    //Store the progress\n    this.progress={\n      language:this.game.activeLanguage,\n      latestScene:this.game.activeScene.config.Name,\n      playerPos:[this.game.player.sprite.x,this.game.player.sprite.y],\n      inventory:this.game.inventory.objects,\n      puzzles:puzzlesSolved,\n      dialogues:dialoguesDisabled,\n      cutscenes:cutscenesPlayed\n    }\n\n    //Save object to local storage\n    localForage.setItem('JSGAM_Storage', this.progress);\n  }\n\n  //Load adventure progress\n  load(){\n    let game=this.game;\n\n    //Disable dialogues finished\n    this.progress.dialogues.forEach(function(disable){\n      game.dialogues[disable.Dialogue].branches[disable.Branch].Choices[disable.Index].disabled=true;\n    });\n\n    //Disable cutscenes played\n    this.progress.cutscenes.forEach(function(name){\n      game.cutscenes[name].played=true;\n    });\n\n    this.game.silentMode=true;\n    //Resolve puzzles already done\n    this.progress.puzzles.forEach(function(name){\n      game.puzzles[name].resolve();\n    });\n    \n    //Load objects in inventory\n    this.progress.inventory.forEach(function(item){\n\n      //Add object to inventory\n      game.inventory.add(item);\n\n      //Remove objects from scenes configurations\n      let thisItem=item;\n      let sceneArray=Object.values(game.scenes);\n      sceneArray.forEach(function(scene){\n        if(scene.config.Objects!==undefined && scene.config.Objects.includes(thisItem)){\n          let tmpIndex=scene.config.Objects.indexOf(thisItem);\n          scene.config.Objects.splice(tmpIndex,1);\n        }\n      })\n\n    });\n    this.game.silentMode=false\n\n    //Add player to latest Position\n    this.game.player.sprite.x=this.progress.playerPos[0];\n    this.game.player.sprite.y=this.progress.playerPos[1];\n\n  }\n\n  //Clear local storage\n  delete(){\n    localForage.clear();\n  }\n\n  check(){\n    let storage=this;\n\n    localForage.getItem('JSGAM_Storage').then(function(value) {\n      // This code runs once the value has been loaded\n      // from the offline store.\n      if(value!==null){\n        storage.progress=value;\n        storage.game.activeLanguage=value.language;\n        storage.game.scenes[\"Title\"].changeLanguage();\n        storage.game.scenes[\"Title\"].states[\"MainMenu\"].enable(\"Continue\");\n      }\n    }).catch(function(err) {\n        // This code runs if there were any errors\n        console.log(err);\n    });\n  }\n}\n","class Scene{\n  constructor(){\n    this.container = new PIXI.Container();\n    this.game=null;\n  }\n\n  setup(config){\n    this.background=new PIXI.Sprite(PIXI.Texture.from(config.Background));\n    this.background.anchor.set(0);\n    this.container.addChild(this.background);\n    if(config.Foreground!==undefined)\n    {\n      this.foreground=new PIXI.Sprite(PIXI.Texture.from(config.Foreground));\n      this.foreground.anchor.set(0);\n      this.container.addChild(this.foreground);\n    }\n    this.music=config.Music;\n    this.config=config;\n  }\n\n  update(dt) {\n\n  }\n  hide(){\n    this.container.visible=false;\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n}\n\nexport default Scene;\n","class Button extends PIXI.extras.BitmapText{\n    constructor(text,style){\n      super(text,style);\n      this.interactive=true;\n      this.buttonMode=true;\n    }\n}\n\nclass Infotxt extends PIXI.extras.BitmapText{\n    constructor(text,style){\n      super(text,style);\n    }\n}\n\n\nclass Phrases{\n  constructor(config){\n    this.container=new PIXI.Container();\n    this.hide();\n    this.game=config;\n    this.option=[];\n\n    for(let i=0;i<this.game.dialogueChoices;i++){\n      this.option[i]=new Button(\"Option\",this.game.settings.Text.ButtonStyle);\n      this.option[i].game=this.game;\n      this.option[i].anchor.set(0.5,0);\n      this.option[i].on('pointertap', this.onTap.bind(this.option[i]));\n      this.option[i].index=i;\n      this.container.addChild(this.option[i]);\n      this.option[i].x=this.container.width/2;\n      if(i>0)this.option[i].y=this.option[i-1].y+this.option[i-1].height;\n    }\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  onTap(){\n    let activeChoice=this.game.activeDialogue.currentBranch.Choices;\n\n    if(this.alpha==1){\n      this.game.activeDialogue.choice=this.index;\n      if(activeChoice[this.index].Repeat==false) activeChoice[this.index].disabled=true;\n      this.game.activeDialogue.next();\n    }\n  }\n\n  get(){\n    this.clear();\n    let options=this.game.activeDialogue.currentBranch.Choices;\n    for(let i=0;i<options.length;i++){\n      if(options[i].disabled){\n        this.option[i].alpha=0.5;\n      }else this.option[i].alpha=1;\n      this.option[i].visible=true;\n      this.option[i].text=options[i].Text[this.game.activeLanguage];\n    }\n    this.sort();\n    this.show();\n  }\n\n  clear(){\n    for(let i=0;i<this.option.length;i++){\n      this.option[i].visible=false;\n    }\n  }\n\n  sort(){\n    for(let i=0;i<this.option.length;i++){\n      this.option[i].x=this.container.width/2;\n    }\n    if(this.container.width>this.container.parent.width || this.container.height>this.container.parent.height){\n      this.scale();\n    }\n    this.center();\n  }\n\n  scale(){\n    let ratio = Math.min( this.game.width/this.container.width,  this.container.parent.height/this.container.height);\n    this.container.scale.set(ratio*0.95)\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n  //  this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n  //  this.container.pivot.y = this.container.height / 2;\n  }\n}\n\nclass TextField{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.Background=null;\n    this.Text=null;\n    this.container.visible=false;\n  }\n\n  build(){\n    this.container.parentLayer = this.game.layerUI;\n    this.Background=new PIXI.Sprite(PIXI.Texture.WHITE);\n\n    let size=4;\n    if(this.game.settings.Text.Size!==undefined){\n      if(this.game.settings.Text.Size===\"fourth\") size=4;\n      else if(this.game.settings.Text.Size===\"half\") size=2;\n    }\n    this.Background.width=this.game.width;\n    this.Background.height=this.game.height/size;\n\n    this.Background.tint='black';\n    this.Background.alpha=0.5;\n\n    this.Text=new Button(\"\", this.game.settings.Text.Style);\n    this.Text.anchor.set(0.5,0);\n\n    this.Text.y=0;\n    this.Text.on('pointertap',this.skip.bind(this));\n\n    this.Choices=new Phrases(this.game);\n\n    this.container.addChild(this.Background);\n    this.container.addChild(this.Text);\n    this.container.addChild(this.Choices.container);\n\n    this.Text.x=this.container.width/2;\n    this.Choices.sort();\n    if(this.game.settings.Text.Position!==undefined) this.setPosition(this.game.settings.Text.Position);\n  }\n\n  show(){\n    this.Text.visible=true;\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  end(){\n    if(this.game.activeDialogue!==null){\n      this.talker.shutup();\n      if(this.game.activeDialogue.choice!==null) this.game.activeDialogue.answer();\n      else{\n        this.Text.visible=false;\n        this.Choices.get();\n      }\n\n    }else{\n      this.setText(\"\");\n      this.hide();\n      this.talker.shutup();\n      this.game.player.stop();\n      if(this.game.activeObject!==null) this.game.activeObject.cancel();\n    }\n  }\n\n  skip(){\n    this.end();\n    if(this.talker) clearTimeout(this.talker.timeoutID);\n  }\n\n  setPosition(position){\n    if(position===\"top\"){\n      this.container.x=0;\n      this.container.y=0;\n    }else if(position===\"bottom\"){\n      this.container.x=0;\n      this.container.y=this.game.height-this.container.height;\n    }\n  }\n\n  setText(newText){\n    this.Text.text=newText;\n    if(this.Text.width>this.container.width || this.Text.height>this.container.height){\n      this.adjustText();\n    }\n  }\n\n  adjustText(){\n    let ratio = Math.min( this.container.width/this.Text.width,  this.container.height/this.Text.height);\n    this.container.scale.set(ratio*0.95);\n  }\n\n  //Get words number of the text\n  countWords(str) {\n   return str.split(\" \").length;\n  }\n\n  //Calculate how many seconds we show the text\n  timeOut(){\n    let time;\n    if(this.game.settings.Text.Speed!==undefined) time=this.game.settings.Text.Speed;\n    else time=this.countWords(this.Text.text)/3;\n\n    //Time must be at least 1 second\n    if(time<1) time=1;\n\n    return time*1000;\n  }\n\n  setColor(colour){\n    this.Text.tint=colour;\n  }\n\n  setFont(newFont){\n    this.Text.font=newFont;\n  }\n}\n\nexport {Button,TextField,Infotxt};\n","import {Button} from './text.js'\n\nclass Menu{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.game=null;\n    this.buttons={};\n    }\n\n  addButton(name,text){\n    this.buttons[name]=new Button(text[this.game.activeLanguage],this.game.settings.Text.ButtonStyle);\n    this.container.addChild(this.buttons[name]);\n  }\n\n  modify(name,text){\n    this.buttons[name].text=text[this.game.activeLanguage];\n  }\n\n  disable(name){\n    this.buttons[name].alpha=0.5;\n    this.buttons[name].interactive=false;\n  }\n\n  enable(name){\n    this.buttons[name].alpha=1.0;\n    this.buttons[name].interactive=true;\n  }\n\n  sort(){\n    let i;\n    let arrayButtons=Object.values(this.buttons);\n    let length=arrayButtons.length;\n    arrayButtons[0].y=0;\n    for(i=1;i<length;i++)\n    {\n      arrayButtons[i].y=arrayButtons[i-1].y+arrayButtons[i-1].height*1.5;\n      arrayButtons[i].x=this.container.width/2-arrayButtons[i].width/2;\n    }\n\n    this.center();\n  //  this.resize();\n  }\n\n  resize(){\n    let ratio = Math.min( this.game.width/this.container.width,  this.game.height/this.container.height);\n    //console.log(ratio)\n    this.container.scale.set(ratio*0.95);\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n\n}\nexport default Menu;\n","import Menu from './menu.js';\n\nclass MainMenu extends Menu{\n  create(){\n      let gameTexts=this.game.data.texts;\n      this.addButton(\"New\",gameTexts.NewGame);\n      this.addButton(\"Continue\",gameTexts.Continue);\n      this.addButton(\"Options\",gameTexts.Options);\n      this.addButton(\"Help\",gameTexts.Help);\n      this.addButton(\"Credits\",gameTexts.Credits);\n\n      this.disable(\"Continue\");\n\n      this.sort();\n    }\n\n  changeLanguage(){\n    this.modify(\"New\",this.game.data.texts.NewGame);\n    this.modify(\"Continue\",this.game.data.texts.Continue);\n    this.modify(\"Options\",this.game.data.texts.Options);\n    this.modify(\"Help\",this.game.data.texts.Help);\n    this.modify(\"Credits\",this.game.data.texts.Credits);\n\n    this.sort();\n  }\n\n}\nexport default MainMenu;\n","import Menu from './menu.js';\nimport {Button} from './text.js';\n\nclass Options extends Menu{\n  create(){\n    this.container.visible=false;\n    let languages=this.game.settings.Languages\n    for(let i=0;i<languages.length;i++){\n      this.addLanguage(languages[i],);\n      this.buttons[languages[i]].on('pointerup', this.setLanguage);\n    }\n\n    let langArray=Object.values(this.buttons);\n    langArray[this.game.activeLanguage].tint=0xFF0000;\n\n    this.addButton(\"Back\",this.game.data.texts.Back);\n    this.sort();\n  }\n\n  addLanguage(name){\n    this.buttons[name]=new Button(name,this.game.settings.Text.ButtonStyle);\n    this.buttons[name].father=this;\n    this.container.addChild(this.buttons[name]);\n  }\n\n  setLanguage(){\n    this.father.change(this.text);\n  }\n\n  change(text){\n    let languages=this.game.settings.Languages\n    this.buttons[languages[this.game.activeLanguage]].tint=0xFFFFFF;\n    this.game.activeLanguage=this.game.settings.Languages.indexOf(text);\n    this.buttons[languages[this.game.activeLanguage]].tint=0xFF0000;\n    this.modify(\"Back\",this.game.data.texts.Back);\n    this.sort();\n  }\n\n}\nexport default Options;\n","class Help{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.container.visible=false;\n    this.container.interactive=true;\n    this.container.buttonMode=true;\n    }\n\n  create(){\n    let config=this.game.settings;\n\n    this.background=new PIXI.Sprite(PIXI.Texture.from(config.Help[this.game.activeLanguage]));\n    this.container.addChild(this.background);\n    this.center();\n    this.container.on('pointerup', this.mainMenu.bind(this));\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  changeLanguage(){\n    this.background.texture=PIXI.Texture.from(this.game.settings.Help[this.game.activeLanguage]);\n    this.center();\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n}\n\nexport default Help;\n","\nimport tweenManager from 'k8w-pixi-tween';\n\nclass Credits{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.container.visible=false;\n    this.container.interactive=true;\n    this.container.buttonMode=true;\n    }\n\n  create(){\n    let config=this.game.data.credits;\n\n    if(config.Background!==undefined) this.background=new PIXI.Sprite(PIXI.Texture.from(config.Background));\n\n    this.buildText();\n\n    this.structuredText = new PIXI.extras.BitmapText(this.text,config.Style);\n\n    this.container.addChild(this.structuredText);\n\n    this.container.x = this.game.width / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.y=this.game.height;\n    this.tween = PIXI.tweenManager.createTween(this.container);\n    this.tween\n      .from({ y: this.game.height})\n      .to({ y: 0 - this.container.height});\n    this.tween.time = 20000;\n    this.tween.expire=true;\n    this.tween.delay=500;\n    this.tween.on(\"end\", this.mainMenu.bind(this));\n\n    this.container.on('pointerup', this.mainMenu.bind(this));\n  }\n\n  show(){\n    this.container.visible=true;\n    this.tween.start();\n  }\n\n  hide(){\n    this.tween.stop().reset();\n    this.container.visible=false;\n  }\n\n\n  buildText(){\n    let credits=this.game.data.credits;\n\n    this.text=\"\";\n    let i;\n    for (i=0; i < credits.Lines.length; i++) {\n    this.text += credits.Lines[i].Title[this.game.activeLanguage];\n    this.text += \"\\n\";\n    let j;\n\n    for (j = 0; j < credits.Lines[i].Text.length; j++) {\n      this.text += credits.Lines[i].Text[j];\n      this.text += \"\\n\";\n    }\n    this.text += \"\\n\";\n    }\n  }\n\n  update(){\n    PIXI.tweenManager.update();\n  }\n\n  changeLanguage(){\n    this.buildText();\n    this.structuredText.text=this.text;\n  }\n\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n}\n\nexport default Credits;\n","import Menu from './menu.js';\nimport {Infotxt} from './text.js'\n\nclass Confirmation extends Menu{\n  create(){\n    this.hide();\n    let gameTexts=this.game.data.texts;\n    this.addText(\"Warning\",gameTexts.Warning);\n    this.addButton(\"Yes\",gameTexts.Yes);\n    this.addButton(\"No\",gameTexts.No);\n    this.sort();\n  }\n\n  changeLanguage(){\n    //this.modify(\"Warning\",this.game.data.texts.Warning);\n    this.text.text=this.game.data.texts.Warning[this.game.activeLanguage];\n    this.modify(\"Yes\",this.game.data.texts.Yes);\n    this.modify(\"No\",this.game.data.texts.No);\n    this.sort();\n  }\n\n  sort(){\n    this.text.y=0\n    this.text.x=this.game.width/2-this.text.width/2;\n    this.buttons[\"Yes\"].y=this.text.height*1.5;\n    this.buttons[\"Yes\"].x=this.buttons[\"Yes\"].width;\n    this.buttons[\"No\"].y=this.text.height*1.5;\n    this.buttons[\"No\"].x=this.game.width-this.buttons[\"No\"].width*2;\n    this.container.y=this.game.height/2-this.container.height/2;\n  }\n\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n\n  addText(name,text){\n    this.text=new Infotxt(text[this.game.activeLanguage],this.game.settings.Text.ButtonStyle);\n    this.container.addChild(this.text);\n  }\n}\n\nexport default Confirmation;\n","import Scene from './scene.js';\nimport MainMenu from './mainmenu.js'\nimport Options from './options.js'\nimport Help from './help.js'\nimport Credits from './credits.js'\nimport Confirmation from './confirmation.js'\n\nimport 'pixi-sound';\n\nclass Title extends Scene{\n  build(){\n    this.states={};\n\n    //Add Menus\n    this.addState(\"MainMenu\", new MainMenu());\n    this.addState(\"Options\", new Options());\n    this.addState(\"Credits\", new Credits());\n    this.addState(\"Help\", new Help());\n    this.addState(\"Warning\", new Confirmation());\n\n    //Add actions to the menu buttons\n    this.addAction(\"MainMenu\",\"Options\",this.showOptions.bind(this));\n    this.addAction(\"MainMenu\",\"Help\",this.showHelp.bind(this));\n    this.addAction(\"MainMenu\",\"Credits\",this.showCredits.bind(this));\n\n    this.addAction(\"MainMenu\",\"New\",this.checkAdventure.bind(this));\n    this.addAction(\"MainMenu\",\"Continue\",this.loadAdventure.bind(this));\n\n    this.addAction(\"Warning\",\"Yes\",this.newAdventure.bind(this));\n    this.addAction(\"Warning\",\"No\",this.mainMenu.bind(this));\n\n    this.addAction(\"Options\", \"Back\",this.mainMenu.bind(this));\n\n  }\n\n  addAction(name,button,action){\n    this.states[name].buttons[button].on('pointerup',action)\n  }\n\n  addState(name, state, config) {\n      this.states[name] = state;\n\n      //Set game so state can access it\n      state.game = this.game;\n\n      //Create state\n      state.create();\n\n      this.container.addChild(this.states[name].container);\n  }\n\n  showOptions(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Options\"].show();\n  }\n\n  showHelp(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Help\"].show();\n  }\n\n  showCredits(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Credits\"].show();\n    this.game.activeState=this.states[\"Credits\"];\n  }\n\n  mainMenu(){\n    this.game.activeState=null;\n    this.states[\"Credits\"].hide();\n    this.states[\"Options\"].hide();\n    this.states[\"Help\"].hide();\n    this.states[\"Warning\"].hide();\n    this.changeLanguage();\n    this.states[\"MainMenu\"].show();\n\n  }\n\n  changeLanguage(){\n    this.states[\"MainMenu\"].changeLanguage();\n    this.states[\"Credits\"].changeLanguage();\n    this.states[\"Help\"].changeLanguage();\n    this.states[\"Warning\"].changeLanguage();\n  }\n\n  warning(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Warning\"].show();\n  }\n\n  checkAdventure(){\n    if(this.game.storage.progress!==undefined){\n      this.warning();\n    }else{\n      this.newAdventure();\n    }\n  }\n\n  newAdventure(){\n    //Delete any game progress\n    this.game.storage.delete();\n\n    //Set the first scene\n    this.game.setScene(this.game.settings.FirstScene);\n\n    //Here we go\n    this.game.start();\n  }\n\n  loadAdventure(){\n    this.game.storage.load();\n    this.game.setScene(this.game.storage.progress.latestScene);\n    this.game.start();\n  }\n}\n\nexport default Title;\n","//import * as PIXI from 'pixi.js';\nimport Scene from './scene.js';\n\nimport Walkable from 'walkable';\n\nclass GameScene extends Scene{\n  build(){\n    if(this.foreground!==undefined) this.foreground.parentLayer = this.game.layerTop; //Z-order\n    this.background.parentLayer = this.game.layerBottom; //Z-order\n    this.background.interactive=true;\n    this.background.buttonMode=true;\n\n    this.background.on('pointertap',this.getPosition.bind(this));\n\n    //Add obstacles to the scene\n    this.walkable=new Walkable(this.game.width,this.game.height);\n      if(this.config.WalkArea!==undefined){\n        this.walkable.addPolygon(this.config.WalkArea);\n      }\n\n      if(this.config.Obstacles!==undefined){\n        let obstacles=Object.values(this.config.Obstacles);\n        this.config.Obstacles=obstacles;\n        for(let i=0;i<this.config.Obstacles.length;i++){\n          this.walkable.addPolygon(this.config.Obstacles[i]);\n        }\n      }\n\n      //Add objects to the scene\n      let sceneObjects=this.config.Objects;\n      if(sceneObjects){\n        for(let i=0;i<sceneObjects.length;i++){\n          if(this.game.objects[sceneObjects[i]]!==undefined){\n            this.container.addChild(this.game.objects[sceneObjects[i]].sprite);\n          }else{\n            console.log(\"Error:Game object \"+sceneObjects[i]+\" not found\");\n          }\n        }\n      }\n\n      //Add NPCs (non-playable characters) to the scene\n      let sceneChars=this.config.Characters;\n      if(sceneChars){\n        for(let i=0;i<sceneChars.length;i++){\n          if(this.game.npcs[sceneChars[i]]!==undefined){\n            this.container.addChild(this.game.npcs[sceneChars[i]].sprite);\n          }else{\n            console.log(\"Error:Game character \"+sceneChars[i]+\" not found\");\n          }\n        }\n      }\n  }\n\n  getPosition(event){\n    let coord=event.data.getLocalPosition(this.game.app.stage);\n    if(!this.game.player.lock && this.game.activeObject===null){\n      this.game.player.move(coord);\n    }\n  }\n\n  getPath(fromX,fromY,toX,toY){\n    return this.walkable.findPath(fromX, fromY, toX, toY, 0);\n  }\n\n}\n\nexport default GameScene;\n","class CutScene{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.sequenceIndex=0;\n    this.played=false;\n  }\n\n  build(){\n    if(this.config.Video){\n      this.videoData = this.game.files.resources[this.config.Video].data;\n      this.videoEnds=this.end.bind(this);\n      this.videoData.addEventListener('ended',this.videoEnds);\n    }else if(this.config.Sequence){\n      this.image=new PIXI.Sprite(PIXI.Texture.from(this.config.Sequence[this.sequenceIndex].Image));\n      var ratio = Math.min(this.game.width/this.image.width, this.game.height/this.image.height);\n      this.image.scale.set(ratio/2);\n\n      this.container.interactive=true;\n      this.container.buttonMode=true;\n      this.container.on('pointertap',this.next.bind(this));\n\n      this.container.addChild(this.image);\n\n      this.field=new PIXI.extras.BitmapText(this.config.Sequence[this.sequenceIndex].Text[this.game.activeLanguage],this.game.settings.Text.Style);\n      this.field.anchor.set(0.5,0);\n      this.field.x=this.image.width/2;\n      this.field.y=this.image.height+this.field.height/2;\n\n      this.container.addChild(this.field);\n      this.adjust();\n    }\n  }\n\n  show(){\n      if(this.config.Video) {\n        let videoTexture = PIXI.Texture.from(this.videoData);\n      \tthis.videoSprite = new PIXI.Sprite(videoTexture);\n        this.videoSprite.width = this.game.width;\n        this.videoSprite.height = this.game.height;\n        this.videoSprite.interactive=true;\n        this.videoSprite.buttonMode=true;\n        this.videoSprite.on('pointertap',this.end.bind(this));\n        this.container.addChild(this.videoSprite);\n      }else if(this.config.Sequence) {\n        this.sound();\n        this.timeoutID = setTimeout(this.next.bind(this),\n                         this.config.Sequence[this.sequenceIndex].Time*1000);\n      }\n      this.game.app.stage.addChild(this.container);\n      this.game.activeScene.hide();\n      this.game.inventory.hideIcon();\n      this.game.player.hide();\n      if(PIXI.sound.exists(this.game.activeScene.music)) PIXI.sound.pause(this.game.activeScene.music)\n  }\n\n  hide(){\n      this.container.parent.removeChild(this.container);\n  }\n\n  next(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    if(this.sequenceIndex<this.config.Sequence.length-1){\n      this.sequenceIndex+=1;\n      this.field.text=this.config.Sequence[this.sequenceIndex].Text[this.game.activeLanguage];\n      this.image.texture=(PIXI.Texture.from(this.config.Sequence[this.sequenceIndex].Image));\n      this.adjust();\n      this.timeoutID = setTimeout(this.next.bind(this), this.config.Sequence[this.sequenceIndex].Time*1000);\n    }else{\n      this.end();\n    }\n  }\n\n  end(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    if(this.videoData){\n      this.videoData.pause();\n      this.videoData.removeEventListener('ended',this.videoEnds);\n    }\n    this.played=true;\n    PIXI.sound.stopAll();\n    this.hide();\n\n    if(!this.game.finished)\n    {\n      this.game.inventory.showIcon();\n      this.game.player.show();\n      this.game.activeScene.show();\n      if(PIXI.sound.exists(this.game.activeScene.music)) PIXI.sound.play(this.game.activeScene.music,{loop:true})\n    }else{\n      this.game.home();\n    }\n  }\n\n  adjust(){\n    let containerDimension=this.container.y+this.container.height;\n    if(containerDimension>this.game.height) this.container.y-=containerDimension-this.game.height;\n    else this.container.y = (this.game.height - this.container.height) / 2;\n\n    if(this.container.height>this.game.height || this.container.width>this.game.width) this.scale();\n    else{\n      this.container.scale.set(1);\n      this.center();\n    }\n  }\n\n  center(){\n    this.container.x = (this.game.width - this.container.width) / 2;\n    this.container.y = (this.game.height - this.container.height) / 2;\n  }\n\n  scale(){\n    let ratio = Math.min( this.game.width/this.container.width, this.game.height/this.container.height);\n    this.container.scale.set(ratio*0.95);\n    this.center();\n  }\n\n  sound(){\n    if(this.config.Sequence[this.sequenceIndex].Music!==undefined && this.game.playSounds){\n      PIXI.sound.stopAll();\n      if(PIXI.sound.exists(this.config.Sequence[this.sequenceIndex].Music))\n        PIXI.sound.play(this.config.Sequence[this.sequenceIndex].Music,{loop:true});\n    }\n  }\n\n}\n\nexport default CutScene;\n","import * as PolyK from 'polyk';\n\nfunction boxesIntersect(a, b)\n{\n  var ab = a.getBounds();\n  var bb = b.getBounds();\n  return ab.x + ab.width > bb.x && ab.x < bb.x + bb.width && ab.y + ab.height > bb.y && ab.y < bb.y + bb.height;\n}\n\nfunction collision(a, b)\n{\n  let result;\n  if(a!=undefined && b !=undefined){\n    if(a.hitArea) result=PolyK.ContainsPoint(a.hitArea.points,b.x,b.y);\n    else if(b.hitArea) result=PolyK.ContainsPoint(b.hitArea.points,a.x,a.y);\n    else result=boxesIntersect(a,b);\n  }\n\n  return result;\n}\n\nfunction closestPoint(area,coords){\n  let coordX=Math.round(coords.x);\n  let coordY=Math.round(coords.y);\n  let changePosition={};\n  let closestedge=PolyK.ClosestEdge(area,coordX,coordY);\n  changePosition.x=closestedge.point.x-closestedge.norm.x;\n  changePosition.y=closestedge.point.y-closestedge.norm.y;\n  return {x:Math.round(changePosition.x),y:Math.round(changePosition.y)}\n}\n\nfunction checkPath(coords,obstaclesPolys,walkPoly){\n  let coordX=Math.round(coords.x);\n  let coordY=Math.round(coords.y);\n  let changePosition={};\n  let newPos;\n\n  if(!PolyK.ContainsPoint(walkPoly,coordX,coordY))\n  {\n    let closestedge=PolyK.ClosestEdge(walkPoly,coordX,coordY);\n    changePosition.x=closestedge.point.x-closestedge.norm.x;\n    changePosition.y=closestedge.point.y-closestedge.norm.y;\n    newPos={x:Math.round(changePosition.x),y:Math.round(changePosition.y)}\n  }else if(obstaclesPolys!==undefined){\n\n    for(let i=0;i<obstaclesPolys.length ;i++){\n      if(PolyK.ContainsPoint(obstaclesPolys[i],coordX,coordY)){\n        let closestedge=PolyK.ClosestEdge(walkPoly,coordX,coordY);\n        changePosition.x=closestedge.point.x-closestedge.norm.x;\n        changePosition.y=closestedge.point.y-closestedge.norm.y;\n        newPos={x:Math.round(changePosition.x)+1,y:Math.round(changePosition.y)+1};\n        break;\n      }\n    }\n  }\n\n  return newPos;\n}\n\nexport {boxesIntersect,checkPath,collision,closestPoint};\n","import {boxesIntersect,collision,closestPoint} from '../collisions.js';\n\nclass GameObject{\n  constructor(){\n    this.sprite=null;\n    this.game=null;\n    this.action=null;\n  }\n\n  build(){\n    if(this.config.Description===undefined){\n      this.config.Description=this.game.data.texts.NoDescription;\n    }\n    //Configure the sprite's object\n    if(this.config.Texture){\n      //Generate a static object from a texture\n      this.sprite=new PIXI.Sprite.from(PIXI.Texture.from(this.config.Texture));\n\n    }else if(this.config.Area){\n\n      //For invisible objects\n      this.sprite=new PIXI.Sprite.from(PIXI.Texture.EMPTY);\n      this.sprite.hitArea=new PIXI.Polygon(this.config.Area);\n\n    }else if(this.config.Animation){\n\n      //Animated objects\n      let spritesheet=this.game.files.resources[this.config.Animation.Name].spritesheet;\n\n      let frames = [];\n      for (var i = 0; i < spritesheet._frameKeys.length; i++) {\n          frames.push(PIXI.Texture.from(spritesheet._frameKeys[i]));\n      }\n\n      this.sprite=new PIXI.extras.AnimatedSprite(frames);\n      this.animationSpeed=this.config.Animation.Speed;\n      this.play();\n    }\n\n    //Position of the object in the screen\n    if(this.config.Position){\n      this.sprite.x=this.config.Position[0];\n      this.sprite.y=this.config.Position[1];\n    }\n\n    //Size of the object\n    if(this.config.Size){\n      this.sprite.scale.set(this.config.Size)\n    }\n\n    if(this.config.Mirror){\n      this.flip();\n    }\n\n    //Configure the anchor (origin point of the object)\n    if(!this.config.Area)this.sprite.anchor.set(0.5,1);\n\n    //Configure the layer for the z-order\n    if(this.config.Layer===\"Top\") this.sprite.parentLayer=this.game.layerTop;\n    else if(this.config.Layer===\"Bottom\") this.sprite.parentLayer=this.game.layerBottom;\n    else this.sprite.parentLayer = this.game.layer;\n\n    //Is it a door?\n    if(this.config.Door){\n      this.door=true;\n      this.newScene=this.config.Door.To;\n      this.playerPos=this.config.Door.Player;\n    }\nthis.holding=false;\nthis.timeoutID;\n    if(this.config.Lock){\n      this.locked=true;\n    }\n    //Game object events\n    this.sprite.interactive=true;\n    this.sprite.buttonMode=true;\n\n    if(this.config.Area!==undefined){\n      this.sprite.on('pointerdown', this.touchArea.bind(this))\n          .on('pointerup', this.releaseArea.bind(this))\n          .on('pointerupoutside', this.releaseArea.bind(this));\n    }else{\n      this.sprite.on('pointerdown', this.touch.bind(this))\n          .on('pointermove', this.move.bind(this))\n          .on('pointerup', this.release.bind(this))\n          .on('pointerupoutside', this.release.bind(this));\n    }\n\n    if(this.config.Interactive!==undefined) this.setInteraction(this.config.Interactive);\n  }\n\n  hide(){\n    this.sprite.visible=false;\n  }\n\n  show(){\n    this.sprite.visible=true;\n  }\n\n  setpos(x,y){\n    this.sprite.x=x;\n    this.sprite.y=y;\n  }\n\n  flip(){\n    this.sprite.scale.x*=-1;\n  }\n\n  changeTexture(texture){\n    this.sprite.texture=new PIXI.Texture.from(texture)\n  }\n\n  hold(){\n    this.holding=true;\n  }\n  //Invisible object touch begins\n  touchArea(event){\n    if(this.game.activeObject===null && !this.game.player.lock){\n      this.game.activeObject=this;\n      this.interaction = event.data;\n      this.action=null;\n      if(this.timeoutID) clearTimeout(this.timeoutID);\n      this.timeoutID=setTimeout(this.hold.bind(this), this.game.holdTime);\n      this.touchedPos=this.interaction.getLocalPosition(this.game.app.stage);\n    }\n  }\n\n  //Invisible object touch ends\n  releaseArea(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n\n    if(this.interaction){\n      let moveTo=this.interaction.getLocalPosition(this.game.app.stage);\n      if(collision(moveTo,this.sprite)){\n        if(this.interaction.button===2 || this.holding){\n          if(this.door===true ){\n            let newPos=closestPoint(this.config.Area,moveTo);\n            moveTo=newPos;\n          }else if(this.config.Use!==undefined){\n            this.game.activePuzzle=this.game.puzzles[this.config.Use];\n          }\n          this.use();\n        }else{\n         this.look();\n       }\n      }\n\n      if(this.action!==null){\n        this.game.player.tween.once('end',this.action);\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      if(this.game.player.touched) this.game.player.touched=false;\n      this.holding=false;\n      this.interaction = null;\n      this.touchedPos=null;\n    }\n  }\n\n  //Object touch begins\n  touch(event){\n    if(this.game.activeObject===null && !this.game.player.lock){\n      this.game.activeObject=this;\n      this.action=null;\n      this.posX = this.sprite.x;\n      this.posY = this.sprite.y;\n      this.interaction = event.data;\n      this.sprite.alpha = 0.5;\n      this.dragging = true;\n      if(this.timeoutID) clearTimeout(this.timeoutID);\n      this.timeoutID=setTimeout(this.hold.bind(this), 1000);\n      this.oldParent=this.sprite.parent;\n      this.depthGroup=this.sprite.parentLayer;\n      if(this.sprite.parentLayer !== this.game.layerUI) this.sprite.parentLayer = this.game.layerUI;\n    }\n  }\n\n  //Object is being dragged\n  move(){\n    if (this.dragging && !this.locked) {\n      this.sprite.setParent(this.game.app.stage);\n      var newPosition = this.interaction.getLocalPosition(this.sprite.parent);\n      let bounds=this.sprite.getBounds();\n      //We can only move the object inside the stage\n      if(newPosition.x>bounds.width/2 && newPosition.x<this.game.width-bounds.width/2) this.sprite.x = newPosition.x;\n      if(newPosition.y>bounds.height && newPosition.y<this.game.height) this.sprite.y = newPosition.y;\n    }\n  }\n\n  //Object drag/touch ends\n  release(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n\n    if(this.interaction){\n      let moveTo={x:this.posX,y:this.posY};\n      //Check if we take it\n      if(collision(this.sprite,this.game.inventory.icon) && this.config.Take){\n        this.take();\n        //Check if we look it\n      }else if(this.interaction.button===2  || this.holding){\n        if(this.config.Use!==undefined) this.game.activePuzzle=this.game.puzzles[this.config.Use];\n        this.use();\n      }else{\n        this.look();\n      }\n\n      if(this.action!==null){\n        this.game.player.tween.once('end',this.action);\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      if(this.game.player.touched) this.game.player.touched=false;\n\n      this.sprite.x = this.posX;\n      this.sprite.y = this.posY;\n      this.sprite.alpha = 1;\n      this.sprite.parentLayer = this.depthGroup;\n      this.sprite.setParent(this.oldParent);\n\n      this.holding=false;\n      this.interaction = null;\n      this.dragging = false;\n    }\n  }\n\n  //Set player to look this object\n  look(){\n    this.action=this.game.player.look.bind(this.game.player);\n  }\n\n  //Set player to take this object\n  take(){\n    this.action=this.game.player.take.bind(this.game.player);\n  }\n\n  //Set player to use this object\n  use(){\n    this.action=this.game.player.use.bind(this.game.player);\n  }\n\n  //Check collision between objects\n  hit(){\n    let found=null;\n    let i;\n\n    //First check the collision between active scene's objects\n    let objectsArray=this.game.activeScene.config.Objects;\n    if(objectsArray!==undefined){\n      for(i=0;i<objectsArray.length;i++){\n        if(collision(this.sprite,this.game.objects[objectsArray[i]].sprite)\n                     && this.config.Name!==objectsArray[i]){\n          found=objectsArray[i];\n          break;\n        }\n      }\n    }\n\n    //Check if the collision is between inventory objects\n    objectsArray=this.game.inventory.objects;\n\n    for(i=0;i<objectsArray.length;i++){\n      if(collision(this.sprite,this.game.objects[objectsArray[i]].sprite)\n                   && this.config.Name!==objectsArray[i]){\n        found=objectsArray[i];\n        break;\n      }\n    }\n\n    //Check the collision a character\n    let charsArray=this.game.activeScene.config.Characters;\n    if(charsArray!==undefined){\n      for(i=0;i<charsArray.length;i++){\n        if(collision(this.sprite,this.game.npcs[charsArray[i]].sprite)\n                     && this.config.Name!==charsArray[i]){\n          found=charsArray[i];\n          break;\n        }\n      }\n    }\n\n    return found;\n  }\n\n  //Object action is canceled or ended\n  cancel(){\n    this.game.activeObject.action=null;\n    this.game.activeObject=null;\n\n  }\n\n  setInteraction(value){\n    this.sprite.interactive=value;\n  }\n\n  //Add the object to a given scene\n  add(scene){\n    this.game.scenes[scene].container.addChild(this.sprite);\n    this.game.scenes[scene].config.Objects.push(this.config.Name);\n  }\n  //Remove objects from game\n  remove(){\n    this.sprite.parent.removeChild(this.sprite);\n\n    //Check if we remove an object which is in an scene\n    let scenesArray=Object.values(this.game.scenes)\n    let i;\n    let scenesLength=scenesArray.length;\n    for(i=0;i<scenesLength;i++){\n      if(scenesArray[i].config.Objects!==undefined && scenesArray[i].config.Objects.includes(this.config.Name)){\n        let tmpIndex=scenesArray[i].config.Objects.indexOf(this.config.Name);\n        scenesArray[i].config.Objects.splice(tmpIndex,1);\n      }\n    }\n\n    //Check if the object to remove is inside the inventory\n    if(this.game.inventory.objects.includes(this.config.Name)){\n      this.game.inventory.remove(this.config.Name)\n    }\n  }\n\n}\n\nexport default GameObject;\n","import {boxesIntersect,collision} from '../collisions.js';\n\nclass Inventory{\n  constructor(){\n      this.container=new PIXI.Container();\n      this.container.visible=false;\n      this.game=null;\n      this.objects=[];\n\n    }\n\n    build(){\n      this.background=new PIXI.Sprite(PIXI.Texture.from(this.game.settings.Inventory.Background));\n      this.background.width=this.game.width/2;\n      this.background.height=this.game.height/2;\n      this.background.parentLayer = this.game.layerUI;\n      this.container.x = (this.game.width - this.background.width) / 2;\n      this.container.y = (this.game.height - this.background.height) / 2;\n      this.border=10;\n      this.icon=new PIXI.Sprite(PIXI.Texture.from(this.game.settings.Inventory.Icon));\n      this.icon.on('pointertap',this.click.bind(this));\n      this.icon.interactive=true;\n      this.icon.buttonMode=true;\n      this.setIcon(this.game.settings.Inventory.Position);\n      this.container.addChild(this.background);\n      this.icon.parentLayer = this.game.layerUI;\n    }\n\n    show(){\n      this.update();\n      this.container.visible=true;\n    }\n\n    hide(){\n      this.container.visible=false;\n\n    }\n\n    showIcon(){\n      this.icon.visible=true;\n    }\n\n    hideIcon(){\n      this.icon.visible=false;\n\n    }\n\n    setIcon(position){\n      if(position==\"bottom-right\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=this.game.height - this.icon.height;\n      }else if(position==\"top-right\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=0;\n      }else if(position==\"top-left\"){\n        this.icon.x=0;\n        this.icon.y=this.game.height - this.icon.height;\n      }else if(position==\"bottom-top\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=0;\n      }\n    }\n\n    click(){\n      if (this.container.visible) this.hide();\n      else if(!this.game.player.lock) this.show();\n    }\n\n    add(name){\n      this.objects.push(name);\n      this.game.objects[name].sprite.setParent(this.container);\n      this.game.objects[name].sprite.parentLayer=this.game.layerUI;\n      this.game.objects[name].sprite.on('pointermove', this.move.bind(this.game.objects[name]))\n                                    .off('pointerup')\n                                    .off('pointerupoutside')\n                                    .on('pointerup',this.release.bind(this.game.objects[name]))\n                                    .on('pointerupoutside',this.release.bind(this.game.objects[name]));\n      this.update();\n    }\n\n    remove(name)\n    {\n      //Check if object is already in inventory\n      if(this.objects.includes(name)){\n        this.objects.splice(this.objects.indexOf(name),1);\n        this.update();\n      }\n    }\n\n    update(){\n      //Inventory is limited to 25 objects\n      let i;\n      let numObjs=this.objects.length;\n      for(i=0;i<numObjs;i++){\n        let tmpObj=this.game.objects[this.objects[i]].sprite;\n\n        let desiredWidth=this.container.width/5-this.container.width*0.05;\n        let desiredHeight=this.container.height/5-this.container.height*0.05;\n        let ratio = Math.min( desiredWidth/tmpObj.width, desiredHeight/tmpObj.height);\n        tmpObj.width*=ratio;\n        tmpObj.height*=ratio;\n\n        tmpObj.x = ((i % 5) * this.container.width/5+this.border-i)+tmpObj.width/2;\n        tmpObj.y = (Math.floor(i / 5) * this.container.height/5+this.border-i)+tmpObj.height;\n        this.container.width=this.background.width;\n        this.container.height=this.background.height;\n      }\n    }\n\n    move(){\n      if(!boxesIntersect(this.sprite,this.game.inventory.container))\n        this.game.inventory.hide();\n    }\n\n    release(event){\n      if(this.timeoutID) clearTimeout(this.timeoutID);\n      \n      if(this.interaction){\n        let objectHit=this.hit();\n\n        let moveTo={x:this.sprite.x,y:this.sprite.y};\n        //Check if we take it\n        if(!this.holding){\n          this.game.player.say(this.config.Description[this.game.activeLanguage])\n        }else if(this.config.Combine!==undefined && objectHit!==null){\n          if(this.config.Combine.With===objectHit) {\n            this.game.activePuzzle=this.game.puzzles[this.config.Combine.Puzzle];\n          }\n          this.use();\n        }\n\n        if(this.action!==null){\n          this.game.player.tween.once('end',this.action);\n          this.game.player.move(moveTo);\n        }else{\n          this.cancel();\n        }\n\n        this.sprite.x = this.posX;\n        this.sprite.y = this.posY;\n        this.sprite.alpha = 1;\n        this.sprite.setParent(this.oldParent);\n\n        this.interaction = null;\n        this.dragging = false;\n        this.holding=false;\n      }\n    }\n}\n\nexport default Inventory;\n","class Puzzle{\n  constructor(){\n    this.solved=false;\n  }\n\n  resolve(){\n    if(this.game.activeObject!==null) this.game.activeObject.cancel();\n\n    if(!this.solved){\n      if(this.config.ModifyObject){\n        let objectMod=this.game.objects[this.config.ModifyObject.Name];\n        if(this.config.ModifyObject.Description!==undefined) objectMod.config.Description=this.config.ModifyObject.Description;\n        if(this.config.ModifyObject.Door!==undefined) this.createDoor(objectMod)\n        if(this.config.ModifyObject.Position!==undefined) objectMod.setpos(this.config.ModifyObject.Position[0],this.config.ModifyObject.Position[1]);\n        if(this.config.ModifyObject.Mirror) objectMod.flip();\n        if(this.config.ModifyObject.Interactive!==undefined) this.setInteraction(this.config.ModifyObject.Interactive);\n        if(this.config.ModifyObject.Texture!==undefined) this.changeTexture(this.config.ModifyObject.Texture);\n        if(this.config.ModifyObject.Combine!==undefined) objectMod.config.Combine=this.config.ModifyObject.Combine;\n        if(this.config.ModifyObject.Use!==undefined) objectMod.config.Use=this.config.ModifyObject.Use;\n        if(this.config.ModifyObject.Lock!==undefined) objectMod.lock=this.config.ModifyObject.Lock;\n      }\n\n      if(this.config.GetObject!==undefined) this.game.inventory.add(this.config.GetObject);\n\n      if(this.config.AddObject!==undefined){\n        let objectAdd=this.game.objects[this.config.AddObject.Name];\n        objectAdd.add(this.config.AddObject.Scene);\n      }\n\n      if(this.config.RemoveObject!==undefined){\n        let objectRemove=this.game.objects[this.config.RemoveObject];\n        objectRemove.remove();\n\n      }\n\n      if(this.config.RemoveDoor!==undefined){\n        let objectDoor=this.game.objects[this.config.RemoveDoor];\n        objectDoor.door=false;\n      }\n\n      if(this.config.SetDialogue!==undefined){\n        this.game.npcs[this.config.SetDialogue.Character].config.Dialogue=this.config.SetDialogue.Dialogue;\n      }\n\n      if(this.config.Resolve!==undefined)this.game.puzzles[this.config.Resolve].resolve();\n\n      if(this.config.Say && !this.game.silentMode){\n        this.game.player.say(this.config.Say[this.game.activeLanguage]);\n      }else if(this.config.NPCSay && !this.game.silentMode){\n        this.game.npcs[this.config.NPCSay.Name].say(this.config.NPCSay.Text[this.game.activeLanguage]);\n      }else{\n        this.game.player.stop();\n      }\n\n      if(this.config.CutScene!==undefined && !this.game.silentMode){\n        this.game.cutscenes[this.config.CutScene].show();\n      }\n\n      if(this.config.EndGame!==undefined && !this.game.silentMode){\n        this.game.end();\n        if(this.config.EndGame.CutScene!==undefined) this.game.cutscenes[this.config.EndGame.CutScene].show();\n        else this.game.home();\n      }\n\n      this.solved=true;\n\n    }else{\n      this.game.player.stop();\n    }\n\n    this.game.activePuzzle=null;\n  }\n\n  createDoor(target){\n    target.door=true;\n    target.newScene=this.config.ModifyObject.Door.To;\n    target.playerPos=this.config.ModifyObject.Door.Player;\n  }\n}\n\nexport default Puzzle;\n","import dragonBones from 'dragonbones-pixi';\nimport tweenManager from 'k8w-pixi-tween';\nconst dbfactory=dragonBones.dragonBones.PixiFactory.factory;\nimport {checkPath} from '../collisions.js'\n\nclass Character{\n  constructor(){\n    this.game=null;\n    this.state=null;\n    this.lock=false;\n  }\n\n  setup(config){\n    dbfactory.parseDragonBonesData(this.game.files.resources[config.Name+\"Skeleton\"].data);\n    dbfactory.parseTextureAtlasData(this.game.files.resources[config.Name+\"Json\"].data,this.game.files.resources[config.Name+\"Tex\"].texture);\n    this.sprite = dbfactory.buildArmatureDisplay(config.Armature);\n    if(config.Size){\n      this.size=config.Size;\n      this.sprite.scale.set(this.size);\n    }else{\n      this.size=1;\n    }\n    this.tween=PIXI.tweenManager.createTween(this.sprite);\n    this.tween.on('end', this.stop.bind(this));\n    if(config.Animations!=undefined)\n      this.animations=config.Animations;\n    else\n      this.animations={\n        Stand:\"stand\",\n        Walk:\"walk\",\n        Take:\"take\",\n        Use:\"use\",\n        Say:\"speak\"\n      };\n    this.animate(this.animations.Stand);\n    this.state=\"stand\";\n    if(config.Position){\n      this.sprite.x=config.Position[0];\n      this.sprite.y=config.Position[1];\n    }\n    this.sprite.parentLayer = this.game.layer;//Z-order*/\n    this.config=config;\n  }\n\n  hide(){\n    this.sprite.visible=false;\n  }\n\n  show(){\n    this.sprite.visible=true;\n  }\n\n  position(coords){\n    this.sprite.x=coords[0];\n    this.sprite.y=coords[1];\n  }\n\n  move(coords){\n    let obstacles=this.game.activeScene.config.Obstacles;\n    let walkingArea=this.game.activeScene.config.WalkArea;\n    let newPosition=coords;\n    let closestPosition=checkPath(coords,obstacles,walkingArea);\n\n    if(closestPosition){\n      newPosition=closestPosition;\n    }\n\n    let path = new PIXI.tween.TweenPath();\n    let findPath=this.game.activeScene.walkable.findPath(this.sprite.x,this.sprite.y,newPosition.x,newPosition.y,0);\n    if(findPath.length>0){\n      this.tween.stop().clear();\n      this.animate(this.animations.Walk);\n      if(this.sprite.x<newPosition.x) this.sprite.armature.flipX=false;\n      else this.sprite.armature.flipX=true;\n      path.drawShape(new PIXI.Polygon(findPath));\n      this.tween.path=path;\n\n      //Needs improvement\n      let animationTime=Math.abs(this.sprite.x-newPosition.x)*5+Math.abs(this.sprite.y-newPosition.y)*5+findPath.length*100;\n\n      this.tween.time = animationTime;\n      this.tween.speed = 1;\n      this.tween.delay=10;\n      this.tween.start();\n    }\n  }\n\n  update(){\n    PIXI.tweenManager.update();\n    this.scale();\n  }\n\n  scale(){\n    let scaleChar=this.sprite.y/this.game.height*this.size;\n    if(scaleChar<this.game.activeScene.config.Depth) scaleChar=this.game.activeScene.config.Depth;\n    this.sprite.scale.set(scaleChar);\n  }\n\n  stop(){\n    this.animate(this.animations.Stand);\n    this.game.activeState=null;\n    this.lock=false;\n  }\n\n  say(text){\n    this.game.textField.talker=this;\n    //Setup the text to show\n    this.game.textField.setText(text);\n    if(this.config.Color!==undefined) this.game.textField.setColor(Number(this.config.Color));\n    if(this.config.Font!==undefined) this.game.textField.setFont(this.config.Font);\n    else this.game.textField.setFont(this.game.settings.Text.Style.font)\n\n    this.game.textField.show();\n\n    //Animate the character\n    this.animate(this.animations.Say);\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    this.timeoutID=setTimeout(this.game.textField.end.bind(this.game.textField), this.game.textField.timeOut());\n  }\n\n  shutup(){\n    this.animate(this.animations.Stand);\n  }\n\n  animate(animation,times){\n    if(this.sprite.animation.lastAnimationName!==animation)\n      this.sprite.animation.fadeIn(animation,0.25,times);\n  }\n}\n\nexport default Character;\n","import Character from './character.js';\nimport dragonBones from 'dragonbones-pixi';\nconst dbEvents=dragonBones.dragonBones.EventObject;\n\nclass Player extends Character{\n  move(coords){\n    super.move(coords);\n    this.game.activeState=this;\n  }\n\n  say(text){\n    super.say(text);\n    //Lock the player\n    this.lock=true;\n  }\n\n  look(){\n    if(this.game.activeObject!==null){\n      let text=this.game.activeObject.config.Description[this.game.activeLanguage];\n      this.say(text);\n      this.game.activeObject.cancel();\n    }else if(this.game.activeNPC!==null){\n          let text=this.game.activeNPC.config.Description[this.game.activeLanguage];\n          this.say(text);\n          this.game.activeNPC.cancel();\n    }\n  }\n\n  take(){\n    this.lock=true;\n    this.animate(this.animations.Take,1);\n    this.sprite.once(dbEvents.COMPLETE, this.takeEnd, this);\n  }\n\n  takeEnd(){\n    if(this.game.activeObject!==null){\n      let name=this.game.activeObject.config.Name;\n      if(this.game.activeScene!==null){\n        if(this.game.activeScene.config.Objects.includes(name)){\n          let tmpIndex=this.game.activeScene.config.Objects.indexOf(name);\n          this.game.activeScene.config.Objects.splice(tmpIndex,1);\n        }\n      }\n      this.game.inventory.add(name);\n      this.game.activeObject.cancel();\n      this.stop();\n    }\n  }\n\n  use(){\n    this.lock=true;\n    this.animate(this.animations.Use,1);\n    this.sprite.once(dbEvents.COMPLETE, this.useEnd, this);\n  }\n\n  useEnd(){\n    if(this.game.activePuzzle!==null){\n      this.game.activePuzzle.resolve();\n    }else if(this.game.activeObject!==null) {\n      if(this.game.activeObject.door){\n        this.game.setScene(this.game.activeObject.newScene,this.game.activeObject.playerPos);\n        this.stop();\n      }else{\n        this.say(this.game.data.texts.NotUsable[this.game.activeLanguage])\n      }\n      this.game.activeObject.cancel();\n    }\n  }\n\n  talk(){\n    //Player must look in the right direction\n    if(this.sprite.x<this.game.activeNPC.sprite.x){\n      this.sprite.armature.flipX=false;\n      this.game.activeNPC.sprite.armature.flipX=true;\n    }else{\n      this.sprite.armature.flipX=true;\n      this.game.activeNPC.sprite.armature.flipX=false;\n    }\n\n    //Let's talk\n    this.game.activeDialogue.start();\n  }\n\n}\n\nexport default Player;\n","import Character from './character.js';\n\nclass NPC extends Character{\n  build(){\n    this.holding=false;\n    this.pressTimeoutID;\n    this.sprite.interactive=true;\n    this.sprite.buttonMode=true;\n    this.sprite.on('pointerdown', this.touch.bind(this))\n        .on('pointerup', this.release.bind(this))\n        .on('pointerupoutside', this.release.bind(this));\n  }\n\n  hold(){\n    this.holding=true;\n  }\n\n  touch(event){\n    if(this.game.activeNPC===null && !this.game.player.lock){\n      this.game.activeNPC=this;\n      this.action=null;\n      this.interaction = event.data;\n      if(this.pressTimeoutID) clearTimeout(this.pressTimeoutID);\n      this.pressTimeoutID=setTimeout(this.hold.bind(this), this.game.holdTime);\n    }\n  }\n  //Object drag/touch ends\n  release(){\n    if(this.pressTimeoutID) clearTimeout(this.pressTimeoutID);\n    if(this.interaction){\n      let distance=0;\n      if(this.game.player.sprite.x<this.sprite.x) distance=this.sprite.width*-1;\n      else distance=this.sprite.width;\n      let moveTo={x:this.sprite.x+distance,y:this.sprite.y};\n\n      if(this.interaction.button===2  || this.holding){\n        //Check if we talk with the character\n        if(this.config.Dialogue!==undefined){\n          this.game.activeDialogue=this.game.dialogues[this.config.Dialogue];\n          this.action=this.game.player.talk.bind(this.game.player);\n        }\n      }else{\n        this.look();\n      }\n\n      if(this.action!==null){\n        this.game.player.tween.once('end',this.action);\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      if(this.game.player.touched) this.game.player.touched=false;\n\n      this.holding=false;\n      this.interaction = null;\n      this.dragging = false;\n      this.moved=0;\n    }\n  }\n\n  //Set player to look this object\n  look(){\n    this.action=this.game.player.look.bind(this.game.player);\n  }\n\n  //Object action is canceled or ended\n  cancel(){\n    this.game.activeNPC.action=null;\n    this.game.activeNPC=null;\n\n  }\n}\n\nexport default NPC;\n","import {Button} from './text.js'\n\n//Branches dialogue system\nclass Dialogue{\n  constructor(){\n    this.timeoutID=null;\n    this.firstTime=true;\n    this.choice=null;\n    this.branches={};\n  }\n\n  setup(config){\n    this.config=config;\n\n    //Get dialogue branches\n    let i;\n    length=this.config.Branches.length;\n    for(i=0;i<length;i++)\n    {\n      this.branches[this.config.Branches[i].Name]=this.config.Branches[i];\n    }\n\n    this.currentBranch=this.branches[this.config.DefaultBranch];\n  }\n\n  //Executed when we interact with a NPC\n  start(){\n    this.firstTime=false;\n    this.game.player.lock=true;\n    this.game.textField.show();\n    this.game.textField.Choices.get();\n  }\n\n  //Executed everytime we choose an option\n  next(){\n    if(this.choice!==null){\n      let choiceSelected=this.currentBranch.Choices[this.choice];\n      this.game.textField.Choices.hide();\n      this.game.player.say(choiceSelected.Text[this.game.activeLanguage]);\n    }else{\n      this.game.textField.Choices.get();\n    }\n  }\n\n  //Search for a branch with a given name\n  searchBranch(name){\n    let branchFound=-1;\n    let i;\n    let length=this.config.Branches.length\n    for(i=0;i<length;i++)\n         if(this.config.Branches[i].Name===name)\n         {\n             branchFound=i;\n             break;\n         }\n    return branchFound;\n  }\n\n  answer(){\n    let choiceSelected=this.currentBranch.Choices[this.choice];\n    this.game.activeNPC.say(choiceSelected.Answer[this.game.activeLanguage]);\n\n    if(choiceSelected.Link){\n      this.currentBranch=this.branches[choiceSelected.Link];\n    }else if(choiceSelected.Puzzle){\n      choiceSelected.Repeat=false;\n      this.end();\n      this.game.puzzles[choiceSelected.Puzzle].resolve();\n    }else if(choiceSelected.EndDialogue){\n      this.end();\n    }\n\n\n    this.choice=null;\n  }\n\n  //Ends the conversations\n  end(){\n    this.game.activeNPC=null;\n    this.game.activeDialogue=null;\n  }\n\n  timeOut(){\n    this.next();\n  }\n}\n\nexport default Dialogue;\n","import * as PIXI from 'pixi.js';\nimport 'pixi-sound';\nimport 'pixi-layers';\n\nimport Loader from './loader.js';\nimport Storage from './storage.js';\nimport Title from './class/title.js';\nimport GameScene from './class/gamescene.js';\nimport CutScene from './class/cutscene.js';\nimport GameObject from './class/gameobject.js';\nimport Inventory from './class/inventory.js';\nimport Puzzle from './class/puzzle.js';\nimport {TextField} from './class/text.js';\nimport Player from './class/player.js';\nimport NPC from './class/npc.js';\nimport Dialogue from './class/dialogue.js';\n\nclass Game {\n  constructor(config){\n    this.settings={};\n    this.data={\n      scenes:[],\n      cutscenes:[],\n      objects:[],\n      dialogues:[],\n      puzzles:[],\n      credits:[],\n      texts:[]\n    };\n    this.width=config.width;\n    this.height=config.height;\n    this.holdTime=500;\n    this.playSounds = true;\n\n    //Setup the application\n    this.app = new PIXI.Application(\n      config.width,config.height,{\n      antialias: true,\n      autoResize: true,\n      resolution: devicePixelRatio\n    });\n\n    this.app.stage = new PIXI.display.Stage();\n\n    //Change game size when window size changes\n    if(config.autoResize!==undefined) this.app.renderer.autoResize=config.autoResize;\n    else window.addEventListener('resize', this.resize.bind(this));\n\n    //Disable contextmenu for mouse interaction\n    document.addEventListener('contextmenu', e => {\n       e.preventDefault();\n    });\n\n    //We append it to a HTML element or Document body\n    if(config.parent){\n      document.getElementById(config.parent).appendChild(this.app.view)\n    }else{\n      document.body.appendChild(this.app.view);\n    }\n\n    //Load config files\n    this.preload(config.files);\n  }\n\n  //Read JSON configuration files\n  preload(files){\n    //Text to show progress\n    this.progressBar=new PIXI.Graphics();\n    this.progressBar.beginFill(0xDE3249);\n    this.progressBar.drawRect(0, 0, this.width, this.height/50);\n    this.progressBar.endFill();\n    this.progressBar.width=0;\n\n    this.loadingTxt=new PIXI.Text(\"Loading...\", {fill: 'white',\"fontSize\": 50});\n    this.loadingTxt.anchor.set(0.5);\n    this.loadingTxt.x=this.width/2;\n    this.loadingTxt.y=this.height/2;\n\n    this.progressBar.y=this.height/2+this.loadingTxt.height;\n\n    this.app.stage.addChild(this.loadingTxt);\n    this.app.stage.addChild(this.progressBar);\nthis.resize();\n    this.jsons=new Loader();\n    this.jsons.game=this;\n    this.jsons.addJSON(files);\n    this.jsons.load(this.load.bind(this)); //When all config files are loaded, load the game resources.\n  }\n\n  //Load game resources (images,sounds,vids...)\n  load(){\n    this.files=new Loader();\n    this.files.game=this;\n    this.files.addFiles(Object.values(this.jsons.resources));\n    this.files.load(this.setup.bind(this));\n  }\n\n  setup(){\n    this.app.stage.removeChild(this.loadingTxt);\n    this.app.stage.removeChild(this.progressBar);\n\n    //Z-Order\n    this.addZOrder();\n\n    //Adjust to window size\n    this.resize();\n\n    this.scenes={};\n    this.cutscenes={};\n    this.objects={};\n    this.npcs={};\n    this.dialogues={};\n    this.puzzles={};\n\n    this.activeLanguage=0;\n    this.activeScene=null;\n    this.activeObject=null;\n    this.activeNPC=null;\n    this.activePuzzle=null;\n    this.activeDialogue=null;\n\n    this.activeState=null;\n\n    this.finished=false;\n\n    this.storage=new Storage(this);\n\n    this.titleLabel=\"Title\";\n\n\n    if(this.settings.HoldTime!==undefined) this.holdTime=this.settings.HoldTime*1000;\n    if(this.settings.dialogueChoices!==undefined) this.dialogueChoices=this.settings.dialogueChoices;\n    else this.dialogueChoices=3;\n    //Setup title screen\n    this.addScene(this.titleLabel,new Title(),this.settings.TitleScreen);\n\n    //Add game objects\n    let i;\n    let length=this.data.objects.length;\n    for(i=0;i<length;i++)\n    {\n      this.addObject(this.data.objects[i].Name,new GameObject(),this.data.objects[i]);\n    }\n\n    //Non-playable characters\n    length=this.data.npc.length;\n    for(i=0;i<length;i++)\n    {\n      this.addNPC(this.data.npc[i].Name,new NPC(),this.data.npc[i]);\n    }\n\n    //Dialogues\n    length=this.data.dialogues.length;\n    for(i=0;i<length;i++)\n    {\n      this.addDialogue(this.data.dialogues[i].Name,new Dialogue(),this.data.dialogues[i]);\n    }\n\n    //Add game scenes\n    length=this.data.scenes.length;\n    for(i=0;i<length;i++)\n    {\n      this.addScene(this.data.scenes[i].Name,new GameScene(),this.data.scenes[i]);\n    }\n\n    //Add cutscenes\n    length=this.data.cutscenes.length;\n    for(i=0;i<length;i++)\n    {\n      this.addCutscene(this.data.cutscenes[i].Name,new CutScene(),this.data.cutscenes[i]);\n    }\n\n    //Puzzles\n    length=this.data.puzzles.length;\n    for(i=0;i<length;i++)\n    {\n      this.addPuzzle(this.data.puzzles[i].Name,new Puzzle(),this.data.puzzles[i]);\n    }\n\n    //Add Inventory\n    this.addInventory();\n\n    //Add text field\n    this.addTextField();\n\n    //Add player\n    this.addPlayer();\n\n    //Check if there is a saved game\n    this.storage.check();\n\n    //Set Title as the first scene to show\n    this.setScene(this.titleLabel);\n\n    //Game's loop\n    this.app.ticker.add(this.loop.bind(this));\n  }\n\n  loop(dt){\n  //  console.log(this.player.lock) //Test\n    //console.log(this.activeObject); //Test\n    // update current state\n    if (this.activeState != null) {\n        this.activeState.update(dt);\n    }\n  }\n\n  addObject(name, object, config) {\n      this.objects[name] = object;\n\n      //Config the object\n      object.config=config;\n\n      //Set game so object can access it\n      object.game = this;\n\n      //Build object\n      object.build();\n  }\n\n  addScene(name, scene, config) {\n      this.scenes[name] = scene;\n\n      //Config the scene\n      scene.setup(config);\n\n      //Set game so scene can access it\n      scene.game = this;\n\n      //Build scene\n      scene.build();\n  }\n\n  addCutscene(name, cutscene, config) {\n      this.cutscenes[name] = cutscene;\n\n      //Config the scene\n      cutscene.config=config;\n\n      //Set game so scene can access it\n      cutscene.game = this;\n\n      //Build scene\n      cutscene.build();\n  }\n\n  addPuzzle(name, puzzle, config) {\n      this.puzzles[name] = puzzle;\n\n      //Puzzle's config\n      puzzle.config=config;\n\n      //Set game so puzzle can access it\n      puzzle.game = this;\n  }\n\n  setScene(name,playerCoords) {\n\n      //Remove current container\n      if (this.activeScene !== null) {\n          this.app.stage.removeChild(this.activeScene.container);\n      }\n\n      //Set current container\n      this.activeScene = this.scenes[name];\n      //Add our new container\n      this.app.stage.addChild(this.activeScene.container);\n\n      if(playerCoords!==undefined){\n        this.player.sprite.x=playerCoords[0];\n        this.player.sprite.y=playerCoords[1];\n      }\n\n      if(this.activeScene.config.Player!==undefined){\n        if(this.activeScene.config.Player.Position!==undefined){\n          this.player.position(this.activeScene.config.Player.Position);\n        }\n        if(this.activeScene.config.Player.Size!==undefined){\n          this.player.size=this.activeScene.config.Player.Size;\n          this.player.scale();\n        }\n      }\n\n      if(this.activeScene.config.CutScene!==undefined){\n        if(!this.cutscenes[this.activeScene.config.CutScene].played){\n          this.cutscenes[this.activeScene.config.CutScene].show();\n        }\n      }else{\n        // Play sounds\n        if(this.activeScene.music!==undefined && this.playSounds){\n          PIXI.sound.stopAll();\n          if(PIXI.sound.exists(this.activeScene.music))\n            PIXI.sound.play(this.activeScene.music,{loop:true});\n        }\n      }\n\n      //Save game progress\n      if(this.activeScene!==this.scenes[this.titleLabel])\n        this.storage.save();\n\n  }\n\n  addZOrder(){\n    this.BottomGroup= new PIXI.display.Group(0,false);\n    this.sortGroup= new PIXI.display.Group(1, true);\n    this.sortGroup.on('sort', function (sprite) {\n      sprite.zOrder = -sprite.y;\n    });\n    this.TopGroup = new PIXI.display.Group(2,false);\n    this.UIGroup = new PIXI.display.Group(3,false);\n\n    this.layerBottom=new PIXI.display.Layer(this.BottomGroup);\n    this.layer=new PIXI.display.Layer(this.sortGroup);\n    this.layerTop=new PIXI.display.Layer(this.TopGroup);\n    this.layerUI=new PIXI.display.Layer(this.UIGroup);\n\n    this.app.stage.group.enableSort = true;\n    this.app.stage.addChild(this.layerBottom);//Z-order\n    this.app.stage.addChild(this.layer);//Z-order\n    this.app.stage.addChild(this.layerTop);//Z-order\n    this.app.stage.addChild(this.layerUI);//Z-order\n  }\n\n  addInventory(){\n    this.inventory=new Inventory();\n    this.inventory.game=this;\n    this.inventory.build();\n  }\n\n  addPlayer(){\n    this.player=new Player();\n    this.player.game=this;\n    this.data.player.Name=\"player\";\n    this.player.setup(this.data.player);\n  }\n\n  addNPC(name, char, config){\n    this.npcs[name] = char;\n\n    char.game = this;\n\n    char.setup(config);\n\n    char.build();\n  }\n\n  addDialogue(name, dialogue, config){\n    this.dialogues[name] = dialogue;\n\n    dialogue.game = this;\n\n    dialogue.setup(config);\n  }\n\n  addTextField(){\n    this.textField=new TextField();\n    this.textField.game=this;\n    this.textField.build();\n  }\n\n  //Adjust game screen to the window\n  resize() {\n    var w = window.innerWidth;// * window.devicePixelRatio;\n    var h = window.innerHeight;// * window.devicePixelRatio;\n    var ratio = Math.min( w/this.width,  h/this.height);\n    this.app.renderer.resize(this.width*ratio,this.height*ratio);\n    this.app.stage.scale.set(ratio);\n\n  }\n\n  //The magic begins\n  start(){\n    //Show Inventory\n    this.app.stage.addChild(this.inventory.container);\n    this.app.stage.addChild(this.inventory.icon);\n\n    //Show Player\n    this.app.stage.addChild(this.player.sprite);\n\n    //Add Text Field\n    this.app.stage.addChild(this.textField.container);\n  }\n\n  end(){\n    this.finished=true;\n  }\n\n  home(){\n    this.setScene(this.titleLabel);\n  }\n}\n\nexport default Game;\n","import Game from './game';\n\nconsole.log(\"JSGAM 5.0.0 https://github.com/kreezii/jsgam\");\n\n//export default Game;\nexport default Game;\n"],"names":["Loader","constructor","game","onLoad","add","this","update","bind","onError","error","addJSON","files","i","arrayLength","length","name","slice","lastIndexOf","addFiles","data","Settings","settings","Scenes","scenes","concat","Cutscenes","cutscenes","Objects","objects","Dialogues","dialogues","Puzzles","puzzles","Credits","credits","Texts","texts","Sounds","soundSrc","j","tmpSound","Src","Name","Vids","fixVidLoad","vidSrc","tmpVid","Animations","animSrc","tmpAnim","Backgrounds","bgSrc","tmpBg","Player","Texture","Json","Skeleton","player","Characters","npcSrc","npc","PIXI","sound","utils","extensions","splice","indexOf","loaders","Resource","setExtensionXhrType","undefined","setExtensionLoadType","LOAD_TYPE","VIDEO","percent","Math","floor","progress","progressBar","width","resource","console","log","Storage","save","puzzlesSolved","Object","values","forEach","puzzle","solved","includes","config","push","dialoguesDisabled","dialogue","branches","branch","Choices","choice","index","disabled","Dialogue","Branch","cutscenesPlayed","cutscene","played","language","activeLanguage","activeScene","sprite","x","y","inventory","setItem","load","disable","Index","silentMode","resolve","item","thisItem","scene","tmpIndex","playerPos","delete","localForage","clear","check","storage","getItem","then","value","changeLanguage","states","enable","catch","err","Scene","container","Container","setup","background","Sprite","from","Background","anchor","set","addChild","Foreground","foreground","music","Music","dt","hide","visible","show","Button","text","style","interactive","buttonMode","extras","BitmapText","Infotxt","Phrases","option","let","dialogueChoices","Text","ButtonStyle","on","onTap","height","activeChoice","activeDialogue","currentBranch","alpha","Repeat","next","get","options","sort","parent","scale","center","ratio","min","pivot","TextField","build","parentLayer","layerUI","WHITE","size","Size","tint","Style","skip","Position","setPosition","end","talker","shutup","answer","setText","stop","activeObject","cancel","clearTimeout","timeoutID","position","newText","adjustText","countWords","str","split","timeOut","time","Speed","setColor","colour","setFont","newFont","font","Menu","buttons","addButton","modify","arrayButtons","resize","MainMenu","create","gameTexts","NewGame","Continue","Options","Help","languages","Languages","addLanguage","setLanguage","Back","father","change","mainMenu","texture","buildText","structuredText","tween","tweenManager","createTween","to","expire","delay","start","reset","Lines","Title","Confirmation","addText","Warning","Yes","No","addState","addAction","showOptions","showHelp","showCredits","checkAdventure","loadAdventure","newAdventure","button","action","state","activeState","warning","setScene","FirstScene","latestScene","GameScene","layerTop","layerBottom","getPosition","walkable","Walkable","WalkArea","addPolygon","Obstacles","obstacles","sceneObjects","sceneChars","npcs","event","coord","getLocalPosition","app","stage","lock","move","getPath","fromX","fromY","toX","toY","findPath","CutScene","sequenceIndex","boxesIntersect","a","b","ab","getBounds","bb","collision","result","hitArea","PolyK","points","Video","videoData","resources","videoEnds","addEventListener","Sequence","image","Image","field","adjust","videoTexture","videoSprite","setTimeout","Time","hideIcon","exists","pause","removeChild","removeEventListener","stopAll","finished","home","showIcon","play","containerDimension","playSounds","GameObject","Description","NoDescription","Area","EMPTY","Polygon","Animation","spritesheet","frames","_frameKeys","AnimatedSprite","animationSpeed","Mirror","flip","Layer","layer","Door","door","newScene","To","holding","Lock","locked","touchArea","releaseArea","touch","release","Interactive","setInteraction","setpos","changeTexture","hold","interaction","holdTime","touchedPos","moveTo","area","coords","coordX","round","coordY","changePosition","closestedge","point","norm","Use","activePuzzle","use","look","once","touched","posX","posY","dragging","oldParent","depthGroup","setParent","newPosition","bounds","icon","Take","take","hit","found","objectsArray","charsArray","remove","scenesArray","scenesLength","Inventory","border","Icon","click","setIcon","off","numObjs","tmpObj","objectHit","Combine","With","Puzzle","say","ModifyObject","objectMod","createDoor","GetObject","AddObject","RemoveObject","RemoveDoor","SetDialogue","Character","Resolve","Say","NPCSay","EndGame","target","const","dbfactory","dragonBones","PixiFactory","factory","parseDragonBonesData","parseTextureAtlasData","buildArmatureDisplay","Armature","animations","animate","Stand","closestPosition","obstaclesPolys","walkPoly","newPos","checkPath","path","TweenPath","Walk","armature","flipX","drawShape","animationTime","abs","speed","scaleChar","Depth","textField","Color","Number","Font","animation","times","lastAnimationName","fadeIn","dbEvents","EventObject","activeNPC","COMPLETE","takeEnd","useEnd","NotUsable","talk","NPC","pressTimeoutID","moved","firstTime","Branches","DefaultBranch","choiceSelected","searchBranch","branchFound","Answer","Link","EndDialogue","Game","devicePixelRatio","Stage","autoResize","renderer","window","e","preventDefault","document","getElementById","appendChild","view","body","preload","beginFill","drawRect","endFill","loadingTxt","jsons","addZOrder","titleLabel","HoldTime","addScene","TitleScreen","addObject","addNPC","addDialogue","addCutscene","addPuzzle","addInventory","addTextField","addPlayer","ticker","loop","object","playerCoords","BottomGroup","Group","sortGroup","zOrder","TopGroup","UIGroup","group","enableSort","char","w","innerWidth","h","innerHeight"],"mappings":"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"}