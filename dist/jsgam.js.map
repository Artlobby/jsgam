{"version":3,"file":"jsgam.js","sources":["../src/loader.js","../src/storage.js","../src/sound.js","../src/class/scene.js","../src/class/text.js","../src/class/menu.js","../src/class/mainmenu.js","../src/class/options.js","../src/class/help.js","../src/class/credits.js","../src/class/confirmation.js","../src/class/title.js","../src/class/gamescene.js","../src/class/cutscene.js","../src/collisions.js","../src/class/gameobject.js","../src/class/inventory.js","../src/class/puzzle.js","../src/class/character.js","../src/class/player.js","../src/class/npc.js","../src/class/dialogue.js","../src/class/logo.js","../src/game.js","../src/index.js"],"sourcesContent":["import {Howl} from 'howler';\n\nclass Loader extends PIXI.loaders.Loader{\n  constructor(){\n    super();\n    this.game=null;\n    this.onLoad.add(this.update.bind(this));\n    this.onError.add(this.error.bind(this));\n    this.use(this.howlerMiddleware.bind(this));\n  }\n\n  howlerMiddleware(resource,next){\n    if (resource && [\"wav\", \"ogg\", \"mp3\"].includes(resource.extension)) {\n      const options = JSON.parse(JSON.stringify(resource.metadata));\n      options.src = [resource.url];\n      resource.sound = new Howl(options);\n      next();\n    }else next();\n  }\n\n  //Add config files to loader\n  addJSON(files){\n    let i;\n    let arrayLength=files.length;\n\n    for(i=0;i<arrayLength;i++){\n      let name=files[i].slice(files[i].lastIndexOf(\"/\")+1,files[i].lastIndexOf(\".\"));\n      this.add(name,files[i]);\n    }\n  }\n\n  //Add resource files to loader and settings to game\n  addFiles(files){\n    let i;\n    let length=files.length\n    for(i=0;i<length;i++){\n      //Add config files to setup the game\n      if(files[i].data.Settings) this.game.settings=files[i].data.Settings;\n      if(files[i].data.Scenes) this.game.data.scenes=this.game.data.scenes.concat(files[i].data.Scenes);\n      if(files[i].data.Cutscenes) this.game.data.cutscenes=this.game.data.cutscenes.concat(files[i].data.Cutscenes);\n      if(files[i].data.Objects) this.game.data.objects=this.game.data.objects.concat(files[i].data.Objects);\n      if(files[i].data.Dialogues) this.game.data.dialogues=this.game.data.dialogues.concat(files[i].data.Dialogues);\n      if(files[i].data.Puzzles) this.game.data.puzzles=this.game.data.puzzles.concat(files[i].data.Puzzles);\n      if(files[i].data.Credits) this.game.data.credits=files[i].data.Credits;\n      if(files[i].data.Texts) this.game.data.texts=files[i].data.Texts;\n      if(files[i].data.Voices) this.game.data.voices=this.game.data.voices.concat(files[i].data.Voices);\n      if(files[i].data.Music) this.game.data.music=this.game.data.music.concat(files[i].data.Music);\n      if(files[i].data.Sounds) this.game.data.sounds=this.game.data.sounds.concat(files[i].data.Sounds);\n\n      //Look for sound files\n      if(files[i].data.Sounds){\n        let soundSrc=files[i].data.Sounds;\n        for(let j=0;j<soundSrc.length;j++){\n           let tmpSound=soundSrc[j].Src;\n           if(tmpSound!==null) this.add(soundSrc[j].Name,tmpSound);\n        }\n       }\n\n       //Look for music files\n       if(files[i].data.Music){\n         let musicSrc=files[i].data.Music;\n         for(let j=0;j<musicSrc.length;j++){\n            let tmpMusic=musicSrc[j].Src;\n            if(tmpMusic!==null) this.add(musicSrc[j].Name,tmpMusic);\n         }\n        }\n\n       //Look for voice files\n       if(files[i].data.Voices){\n         let voiceSrc=files[i].data.Voices;\n         for(let j=0;j<voiceSrc.length;j++){\n            let tmpVoice=voiceSrc[j].Src;\n            if(tmpVoice!==null) this.add(voiceSrc[j].Name,tmpVoice);\n         }\n        }\n\n       //Look for video files\n       if(files[i].data.Vids)\n       {\n         let vidSrc=files[i].data.Vids;\n         for(let i=0;i<vidSrc.length;i++){\n           let tmpVid=vidSrc[i].Src;\n           if(tmpVid!==null) this.add(vidSrc[i].Name,tmpVid);\n         }\n       }\n\n       //Load Animations\n       if(files[i].data.Animations)\n       {\n         let animSrc=files[i].data.Animations;\n         for(let i=0;i<animSrc.length;i++){\n           let tmpAnim=animSrc[i].Src;\n           if(tmpAnim!==null) this.add(animSrc[i].Name,tmpAnim);\n         }\n       }\n\n       //Load Backgrounds if don't use texture atlas for backgrounds\n       if(files[i].data.Backgrounds){\n         let bgSrc=files[i].data.Animations;\n         for(let i=0;i<bgSrc.length;i++){\n           let tmpBg=bgSrc[i].Src;\n           if(tmpBg!==null) this.add(bgSrc[i].Name,tmpBg);\n         }\n       }\n\n       //Look for player files\n       if(files[i].data.Player){\n         this.add('playerTex', files[i].data.Player.Texture)\n             .add('playerJson', files[i].data.Player.Json)\n             .add('playerSkeleton', files[i].data.Player.Skeleton);\n         this.game.data.player=files[i].data.Player;\n       }\n\n       //Look for NPC files\n       if(files[i].data.Characters){\n         let npcSrc=files[i].data.Characters;\n         for(let i=0;i<npcSrc.length;i++){\n            this.add(npcSrc[i].Name+\"Tex\", npcSrc[i].Texture)\n            .add(npcSrc[i].Name+'Json', npcSrc[i].Json)\n            .add(npcSrc[i].Name+'Skeleton', npcSrc[i].Skeleton);\n          }\n          this.game.data.npc=files[i].data.Characters;\n        }\n    }\n  }\n\n  //Loading progress\n  update(){\n    let percent=Math.floor(this.progress);\n    this.game.progressBar.width=(this.game.width/100)*percent;\n    //this.game.loadingTxt.text=\"Loading... \"+ percent+\"%\";\n  }\n\n  //File failed to load\n  error(resource){\n    console.log(resource);\n  }\n\n}\n\nexport default Loader;\n","import localForage from 'localforage';\n\nexport default class Storage{\n  constructor(game){\n    this.game=game;\n  }\n\n  //Save adventure progress\n  save(){\n    //Get solved puzzles\n    let puzzlesSolved=[];\n    let puzzleArray=Object.values(this.game.puzzles)\n\n    puzzleArray.forEach(function(puzzle){\n      if(puzzle.solved && !puzzlesSolved.includes(puzzle.config.Name))\n        puzzlesSolved.push(puzzle.config.Name)\n    });\n\n    //Get dialogues\n    let dialoguesDisabled=[];\n    let dialogueArray=Object.values(this.game.dialogues);\n\n\n    dialogueArray.forEach(function(dialogue){\n      let branches=Object.values(dialogue.branches);\n\n      branches.forEach(function(branch){\n\n        branch.Choices.forEach(function(choice,index){\n          if(choice.disabled){\n            let disabledOption={\n              Dialogue:dialogue.config.Name,\n              Branch:branch.Name,\n              Index:index\n            }\n            dialoguesDisabled.push(disabledOption);\n          }\n        });\n      });\n\n    });\n\n    //Get player cutscenes\n    let cutscenesPlayed=[];\n    let cutscenesArray=Object.values(this.game.cutscenes);\n    cutscenesArray.forEach(function(cutscene){\n      if(cutscene.played) cutscenesPlayed.push(cutscene.config.Name);\n    });\n\n    //Store the progress\n    this.progress={\n      language:this.game.activeLanguage,\n      latestScene:this.game.activeScene.config.Name,\n      playerPos:[this.game.player.sprite.x,this.game.player.sprite.y],\n      inventory:this.game.inventory.objects,\n      puzzles:puzzlesSolved,\n      dialogues:dialoguesDisabled,\n      cutscenes:cutscenesPlayed\n    }\n\n    //Save object to local storage\n    localForage.setItem('JSGAM_Storage', this.progress);\n  }\n\n  //Load adventure progress\n  load(){\n    let game=this.game;\n\n    //Disable dialogues finished\n    this.progress.dialogues.forEach(function(disable){\n      game.dialogues[disable.Dialogue].branches[disable.Branch].Choices[disable.Index].disabled=true;\n    });\n\n    //Disable cutscenes played\n    this.progress.cutscenes.forEach(function(name){\n      game.cutscenes[name].played=true;\n    });\n\n    this.game.silentMode=true;\n    //Resolve puzzles already done\n    this.progress.puzzles.forEach(function(name){\n      game.puzzles[name].resolve();\n    });\n    \n    //Load objects in inventory\n    this.progress.inventory.forEach(function(item){\n\n      //Add object to inventory\n      game.inventory.add(item);\n\n      //Remove objects from scenes configurations\n      let thisItem=item;\n      let sceneArray=Object.values(game.scenes);\n      sceneArray.forEach(function(scene){\n        if(scene.config.Objects!==undefined && scene.config.Objects.includes(thisItem)){\n          let tmpIndex=scene.config.Objects.indexOf(thisItem);\n          scene.config.Objects.splice(tmpIndex,1);\n        }\n      })\n\n    });\n    this.game.silentMode=false\n\n    //Add player to latest Position\n    this.game.player.sprite.x=this.progress.playerPos[0];\n    this.game.player.sprite.y=this.progress.playerPos[1];\n\n  }\n\n  //Clear local storage\n  delete(){\n    localForage.clear();\n  }\n\n  check(){\n    let storage=this;\n\n    localForage.getItem('JSGAM_Storage').then(function(value) {\n      // This code runs once the value has been loaded\n      // from the offline store.\n      if(value!==null){\n        storage.progress=value;\n        storage.game.activeLanguage=value.language;\n        storage.game.scenes[\"Title\"].changeLanguage();\n        storage.game.scenes[\"Title\"].states[\"MainMenu\"].enable(\"Continue\");\n      }\n    }).catch(function(err) {\n        // This code runs if there were any errors\n        console.log(err);\n    });\n  }\n}\n","export default class Sound{\n  constructor(){\n    this.game=null;\n    this.source=null;\n    this.sprite=null;\n  }\n\n  play(loop,src){\n    this.source.volume(1);\n    if(loop!==undefined && loop!==null) this.source.loop(true);\n    if(src!==undefined && src!==null) this.sprite=this.source.play(src);\n    else this.source.play();\n  }\n\n  stop(){\n    if(this.sprite!==null){\n      this.source.once('fade', this.onFade.bind(this),this.sprite);\n      this.source.fade(1,0,1000,this.sprite);\n    }\n    else{\n      this.source.once('fade', this.onFade.bind(this));\n      this.source.fade(1,0,1000);\n    }\n  }\n\n  onFade(){\n    if(this.sprite!==null){\n      this.source.stop(this.sprite);\n      this.source.volume(1,this.sprite);\n      this.sprite=null;\n    }else{\n      this.source.stop();\n      this.source.volume(1);\n    }\n  }\n\n  duration(){\n    let length=null;\n    if(this.sprite!==null) length=this.source.duration(this.sprite);\n    else length=this.source.duration();\n    return length;\n  }\n\n}\n","class Scene{\n  constructor(){\n    this.container = new PIXI.Container();\n    this.game=null;\n  }\n\n  setup(config){\n    this.background=new PIXI.Sprite(PIXI.Texture.from(config.Background));\n    this.background.anchor.set(0);\n    this.container.addChild(this.background);\n    if(config.Foreground!==undefined)\n    {\n      this.foreground=new PIXI.Sprite(PIXI.Texture.from(config.Foreground));\n      this.foreground.anchor.set(0);\n      this.container.addChild(this.foreground);\n    }\n    this.music=config.Music;\n    this.config=config;\n  }\n\n  update(dt) {\n\n  }\n  hide(){\n    this.container.visible=false;\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n}\n\nexport default Scene;\n","class Button extends PIXI.extras.BitmapText{\n    constructor(text,style){\n      super(text,style);\n      this.interactive=true;\n      this.buttonMode=true;\n    }\n}\n\nclass Infotxt extends PIXI.extras.BitmapText{\n    constructor(text,style){\n      super(text,style);\n    }\n}\n\n\nclass Phrases{\n  constructor(config){\n    this.container=new PIXI.Container();\n    this.hide();\n    this.game=config;\n    this.option=[];\n\n    for(let i=0;i<this.game.dialogueChoices;i++){\n      this.option[i]=new Button(\"Option\",this.game.settings.Text.ButtonStyle);\n      this.option[i].game=this.game;\n      this.option[i].anchor.set(0.5,0);\n      this.option[i].on('pointertap', this.onTap.bind(this.option[i]));\n      this.option[i].index=i;\n      this.container.addChild(this.option[i]);\n      this.option[i].x=this.container.width/2;\n      if(i>0)this.option[i].y=this.option[i-1].y+this.option[i-1].height;\n    }\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  onTap(){\n    let activeChoice=this.game.activeDialogue.currentBranch.Choices;\n\n    if(this.alpha==1){\n      this.game.activeDialogue.choice=this.index;\n      if(activeChoice[this.index].Repeat==false) activeChoice[this.index].disabled=true;\n      this.game.activeDialogue.next();\n    }\n  }\n\n  get(){\n    this.clear();\n    let options=this.game.activeDialogue.currentBranch.Choices;\n    for(let i=0;i<options.length;i++){\n      if(options[i].disabled){\n        this.option[i].alpha=0.5;\n      }else this.option[i].alpha=1;\n      this.option[i].visible=true;\n      this.option[i].text=options[i].Text[this.game.activeLanguage];\n    }\n    this.sort();\n    this.show();\n  }\n\n  clear(){\n    for(let i=0;i<this.option.length;i++){\n      this.option[i].visible=false;\n    }\n  }\n\n  sort(){\n    for(let i=0;i<this.option.length;i++){\n      this.option[i].x=this.container.width/2;\n    }\n    if(this.container.width>this.container.parent.width || this.container.height>this.container.parent.height){\n      this.scale();\n    }\n    this.center();\n  }\n\n  scale(){\n    let ratio = Math.min( this.game.width/this.container.width,  this.container.parent.height/this.container.height);\n    this.container.scale.set(ratio*0.95)\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n  //  this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n  //  this.container.pivot.y = this.container.height / 2;\n  }\n}\n\nclass TextField{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.Avatar=null;\n    this.Background=null;\n    this.Text=null;\n    this.container.visible=false;\n  }\n\n  build(){\n    this.container.parentLayer = this.game.layerUI;\n    this.Background=new PIXI.Sprite(PIXI.Texture.WHITE);\n\n    let size=4;\n    if(this.game.settings.Text.Size!==undefined){\n      if(this.game.settings.Text.Size===\"fourth\") size=4;\n      else if(this.game.settings.Text.Size===\"half\") size=2;\n    }\n    this.Background.width=this.game.width;\n    this.Background.height=this.game.height/size;\n\n    this.Background.tint='black';\n    this.Background.alpha=0.5;\n\n    this.Avatar=new PIXI.Sprite(PIXI.Texture.from(this.game.data.player.Avatar));\n    let ratio=this.Avatar.width / this.Avatar.height;\n    this.Avatar.height=this.Background.height;\n    this.Avatar.width=this.Avatar.height*ratio*0.95;\n\n    this.Text=new Button(\"\", this.game.settings.Text.Style);\n    this.Text.x=this.Avatar.width*1.05;\n  //  this.Text.anchor.set(0.5,0);\n    this.Text.maxWidth=this.game.width-this.Avatar.width;\n\n    this.Text.y=0;\n    this.Text.on('pointertap',this.skip.bind(this));\n\n    this.Choices=new Phrases(this.game);\n\n    this.container.addChild(this.Background);\n    this.container.addChild(this.Avatar);\n    this.container.addChild(this.Text);\n    this.container.addChild(this.Choices.container);\n\n    //this.Text.x=this.container.width/2;\n    this.Choices.sort();\n    if(this.game.settings.Text.Position!==undefined) this.setPosition(this.game.settings.Text.Position);\n  }\n\n  show(){\n    this.Text.visible=true;\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  end(){\n    if(this.game.activeDialogue!==null){\n      this.talker.shutup();\n      if(this.game.activeDialogue.choice!==null) this.game.activeDialogue.answer();\n      else{\n        this.Text.visible=false;\n        this.Avatar.visible=false;\n        this.Choices.get();\n      }\n\n    }else{\n      this.setText(\"\");\n      this.hide();\n      this.talker.shutup();\n      this.game.player.stop();\n      if(this.game.activeObject!==null) this.game.activeObject.cancel();\n    }\n  }\n\n  skip(){\n    this.end();\n    if(this.talker) clearTimeout(this.talker.timeoutID);\n  }\n\n  setPosition(position){\n    if(position===\"top\"){\n      this.container.x=0;\n      this.container.y=0;\n    }else if(position===\"bottom\"){\n      this.container.x=0;\n      this.container.y=this.game.height-this.container.height;\n    }\n  }\n\n  setText(newText){\n    this.Text.text=newText;\n    if(this.Text.width>this.container.width || this.Text.height>this.container.height){\n      this.adjustText();\n    }\n  }\n\n  adjustText(){\n    let ratio = Math.min( this.container.width/this.Text.width,  this.container.height/this.Text.height);\n    this.container.scale.set(ratio*0.95);\n  }\n\n  //Get words number of the text\n  countWords(str) {\n   return str.split(\" \").length;\n  }\n\n  //Calculate how many seconds we show the text\n  timeOut(){\n    let time;\n    if(this.game.activeVoice!==null) time=this.game.voices[this.game.activeVoice].duration();\n    else if(this.game.settings.Text.Speed!==undefined) time=this.game.settings.Text.Speed;\n    else time=this.countWords(this.Text.text)/3;\n\n    //Time must be at least 1 second\n    if(time<1) time=1;\n\n    return time*1000;\n  }\n\n  setColor(colour){\n    this.Text.tint=colour;\n  }\n\n  setFont(newFont){\n    this.Text.font=newFont;\n  }\n\n  setAvatar(newAvi){\n    this.Avatar.visible=true;\n    this.Avatar.texture=(PIXI.Texture.from(newAvi));\n  }\n\n  hideAvatar(){\n    this.Avatar.visible=false;\n  }\n\n}\n\nexport {Button,TextField,Infotxt};\n","import {Button} from './text.js'\n\nclass Menu{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.game=null;\n    this.buttons={};\n    }\n\n  addButton(name,text){\n    this.buttons[name]=new Button(text[this.game.activeLanguage],this.game.settings.Text.ButtonStyle);\n    this.container.addChild(this.buttons[name]);\n  }\n\n  modify(name,text){\n    this.buttons[name].text=text[this.game.activeLanguage];\n  }\n\n  disable(name){\n    this.buttons[name].alpha=0.5;\n    this.buttons[name].interactive=false;\n  }\n\n  enable(name){\n    this.buttons[name].alpha=1.0;\n    this.buttons[name].interactive=true;\n  }\n\n  sort(){\n    let i;\n    let arrayButtons=Object.values(this.buttons);\n    let length=arrayButtons.length;\n    arrayButtons[0].y=0;\n    for(i=1;i<length;i++)\n    {\n      arrayButtons[i].y=arrayButtons[i-1].y+arrayButtons[i-1].height*1.5;\n      arrayButtons[i].x=this.container.width/2-arrayButtons[i].width/2;\n    }\n\n    this.center();\n  //  this.resize();\n  }\n\n  resize(){\n    let ratio = Math.min( this.game.width/this.container.width,  this.game.height/this.container.height);\n    //console.log(ratio)\n    this.container.scale.set(ratio*0.95);\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n\n}\nexport default Menu;\n","import Menu from './menu.js';\n\nclass MainMenu extends Menu{\n  create(){\n      let gameTexts=this.game.data.texts;\n      this.addButton(\"New\",gameTexts.NewGame);\n      this.addButton(\"Continue\",gameTexts.Continue);\n      this.addButton(\"Options\",gameTexts.Options);\n      this.addButton(\"Help\",gameTexts.Help);\n      this.addButton(\"Credits\",gameTexts.Credits);\n\n      this.disable(\"Continue\");\n\n      this.sort();\n    }\n\n  changeLanguage(){\n    this.modify(\"New\",this.game.data.texts.NewGame);\n    this.modify(\"Continue\",this.game.data.texts.Continue);\n    this.modify(\"Options\",this.game.data.texts.Options);\n    this.modify(\"Help\",this.game.data.texts.Help);\n    this.modify(\"Credits\",this.game.data.texts.Credits);\n\n    this.sort();\n  }\n\n}\nexport default MainMenu;\n","import Menu from './menu.js';\nimport {Button} from './text.js';\n\nclass Options extends Menu{\n  create(){\n    this.container.visible=false;\n    let languages=this.game.settings.Languages\n    for(let i=0;i<languages.length;i++){\n      this.addLanguage(languages[i],);\n      this.buttons[languages[i]].on('pointerup', this.setLanguage);\n    }\n\n    let langArray=Object.values(this.buttons);\n    langArray[this.game.activeLanguage].tint=0xFF0000;\n\n    this.addButton(\"Back\",this.game.data.texts.Back);\n    this.sort();\n  }\n\n  addLanguage(name){\n    this.buttons[name]=new Button(name,this.game.settings.Text.ButtonStyle);\n    this.buttons[name].father=this;\n    this.container.addChild(this.buttons[name]);\n  }\n\n  setLanguage(){\n    this.father.change(this.text);\n  }\n\n  change(text){\n    let languages=this.game.settings.Languages\n    this.buttons[languages[this.game.activeLanguage]].tint=0xFFFFFF;\n    this.game.activeLanguage=this.game.settings.Languages.indexOf(text);\n    this.buttons[languages[this.game.activeLanguage]].tint=0xFF0000;\n    this.modify(\"Back\",this.game.data.texts.Back);\n    this.sort();\n  }\n\n}\nexport default Options;\n","class Help{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.container.visible=false;\n    this.container.interactive=true;\n    this.container.buttonMode=true;\n    }\n\n  create(){\n    let config=this.game.settings;\n\n    this.background=new PIXI.Sprite(PIXI.Texture.from(config.Help[this.game.activeLanguage]));\n    this.container.addChild(this.background);\n    this.center();\n    this.container.on('pointerup', this.mainMenu.bind(this));\n  }\n\n  show(){\n    this.container.visible=true;\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n  changeLanguage(){\n    this.background.texture=PIXI.Texture.from(this.game.settings.Help[this.game.activeLanguage]);\n    this.center();\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n}\n\nexport default Help;\n","import { TweenMax } from \"gsap\";\nimport PixiPlugin from \"gsap/PixiPlugin\";\n\nclass Credits{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.container.visible=false;\n    this.container.interactive=true;\n    this.container.buttonMode=true;\n    }\n\n  create(){\n    let config=this.game.data.credits;\n\n    if(config.Background!==undefined){\n      this.background=new PIXI.Sprite(PIXI.Texture.from(config.Background));\n      this.container.addChild(this.background);\n    }\n\n    this.buildText();\n    this.speed=null;\n\n    if(this.game.data.credits.Time!==undefined){\n      this.speed=this.game.data.credits.Time;\n    }else{\n      this.speed=20;\n    }\n\n    this.structuredText = new PIXI.extras.BitmapText(this.text,config.Style);\n    this.tween=null;\n    this.container.addChild(this.structuredText);\n\n    this.container.x = this.game.width / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.y=this.game.height;\n    this.container.on('pointerup', this.mainMenu.bind(this));\n  }\n\n  show(){\n    this.container.visible=true;\n    this.animate();\n  }\n\n  animate(){\n    TweenMax.set(this.container,{y: this.game.height});\n    this.tween=TweenMax.to(this.container, 20, {y: 0 - this.container.height,onComplete:this.mainMenu.bind(this)});\n  }\n\n  hide(){\n    this.container.visible=false;\n  }\n\n\n  buildText(){\n    let credits=this.game.data.credits;\n\n    this.text=\"\";\n    let i;\n    for (i=0; i < credits.Lines.length; i++) {\n    this.text += credits.Lines[i].Title[this.game.activeLanguage];\n    this.text += \"\\n\";\n    let j;\n\n    for (j = 0; j < credits.Lines[i].Text.length; j++) {\n      this.text += credits.Lines[i].Text[j];\n      this.text += \"\\n\";\n    }\n    this.text += \"\\n\";\n    }\n  }\n\n  update(){\n    //PIXI.tweenManager.update();\n  }\n\n  changeLanguage(){\n    this.buildText();\n    this.structuredText.text=this.text;\n  }\n\n  mainMenu(){\n    this.tween.kill();\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n}\n\nexport default Credits;\n","import Menu from './menu.js';\nimport {Infotxt} from './text.js'\n\nclass Confirmation extends Menu{\n  create(){\n    this.hide();\n    let gameTexts=this.game.data.texts;\n    this.addText(\"Warning\",gameTexts.Warning);\n    this.addButton(\"Yes\",gameTexts.Yes);\n    this.addButton(\"No\",gameTexts.No);\n    this.sort();\n  }\n\n  changeLanguage(){\n    //this.modify(\"Warning\",this.game.data.texts.Warning);\n    this.text.text=this.game.data.texts.Warning[this.game.activeLanguage];\n    this.modify(\"Yes\",this.game.data.texts.Yes);\n    this.modify(\"No\",this.game.data.texts.No);\n    this.sort();\n  }\n\n  sort(){\n    this.text.y=0\n    this.text.x=this.game.width/2-this.text.width/2;\n    this.buttons[\"Yes\"].y=this.text.height*1.5;\n    this.buttons[\"Yes\"].x=this.buttons[\"Yes\"].width;\n    this.buttons[\"No\"].y=this.text.height*1.5;\n    this.buttons[\"No\"].x=this.game.width-this.buttons[\"No\"].width*2;\n    this.container.y=this.game.height/2-this.container.height/2;\n  }\n\n  mainMenu(){\n    this.game.scenes[\"Title\"].mainMenu();\n  }\n\n  addText(name,text){\n    this.text=new Infotxt(text[this.game.activeLanguage],this.game.settings.Text.ButtonStyle);\n    this.container.addChild(this.text);\n  }\n}\n\nexport default Confirmation;\n","import Scene from './scene.js';\nimport MainMenu from './mainmenu.js'\nimport Options from './options.js'\nimport Help from './help.js'\nimport Credits from './credits.js'\nimport Confirmation from './confirmation.js'\n\nclass Title extends Scene{\n  build(){\n    this.states={};\n\n    //Add Menus\n    this.addState(\"MainMenu\", new MainMenu());\n    this.addState(\"Options\", new Options());\n    this.addState(\"Credits\", new Credits());\n    this.addState(\"Help\", new Help());\n    this.addState(\"Warning\", new Confirmation());\n\n    //Add actions to the menu buttons\n    this.addAction(\"MainMenu\",\"Options\",this.showOptions.bind(this));\n    this.addAction(\"MainMenu\",\"Help\",this.showHelp.bind(this));\n    this.addAction(\"MainMenu\",\"Credits\",this.showCredits.bind(this));\n\n    this.addAction(\"MainMenu\",\"New\",this.checkAdventure.bind(this));\n    this.addAction(\"MainMenu\",\"Continue\",this.loadAdventure.bind(this));\n\n    this.addAction(\"Warning\",\"Yes\",this.newAdventure.bind(this));\n    this.addAction(\"Warning\",\"No\",this.mainMenu.bind(this));\n\n    this.addAction(\"Options\", \"Back\",this.mainMenu.bind(this));\n\n  }\n\n  addAction(name,button,action){\n    this.states[name].buttons[button].on('pointerup',action)\n  }\n\n  addState(name, state, config) {\n      this.states[name] = state;\n\n      //Set game so state can access it\n      state.game = this.game;\n\n      //Create state\n      state.create();\n\n      this.container.addChild(this.states[name].container);\n  }\n\n  showOptions(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Options\"].show();\n  }\n\n  showHelp(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Help\"].show();\n  }\n\n  showCredits(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Credits\"].show();\n  }\n\n  mainMenu(){\n    this.states[\"Credits\"].hide();\n    this.states[\"Options\"].hide();\n    this.states[\"Help\"].hide();\n    this.states[\"Warning\"].hide();\n    this.changeLanguage();\n    this.states[\"MainMenu\"].show();\n\n  }\n\n  changeLanguage(){\n    this.states[\"MainMenu\"].changeLanguage();\n    this.states[\"Credits\"].changeLanguage();\n    this.states[\"Help\"].changeLanguage();\n    this.states[\"Warning\"].changeLanguage();\n  }\n\n  warning(){\n    this.states[\"MainMenu\"].hide();\n    this.states[\"Warning\"].show();\n  }\n\n  checkAdventure(){\n    if(this.game.storage.progress!==undefined){\n      this.warning();\n    }else{\n      this.newAdventure();\n    }\n  }\n\n  newAdventure(){\n    //Delete any game progress\n    this.game.storage.delete();\n\n    //Set the first scene\n    this.game.changeScene(this.game.settings.FirstScene);\n\n    //Here we go\n    this.game.start();\n\n  }\n\n  loadAdventure(){\n    this.game.storage.load();\n    this.game.changeScene(this.game.storage.progress.latestScene);\n    this.game.start();\n  }\n}\n\nexport default Title;\n","//import * as PIXI from 'pixi.js';\nimport Scene from './scene.js';\n\nimport Walkable from 'walkable';\n\nclass GameScene extends Scene{\n  build(){\n    if(this.foreground!==undefined) this.foreground.parentLayer = this.game.layerTop; //Z-order\n    this.background.parentLayer = this.game.layerBottom; //Z-order\n    this.background.interactive=true;\n    this.background.buttonMode=true;\n\n    this.background.on('pointertap',this.getPosition.bind(this));\n\n    //Add obstacles to the scene\n    this.walkable=new Walkable(this.game.width,this.game.height);\n      if(this.config.WalkArea!==undefined){\n        this.walkable.addPolygon(this.config.WalkArea);\n      }\n\n      if(this.config.Obstacles!==undefined){\n        let obstacles=Object.values(this.config.Obstacles);\n        this.config.Obstacles=obstacles;\n        for(let i=0;i<this.config.Obstacles.length;i++){\n          this.walkable.addPolygon(this.config.Obstacles[i]);\n        }\n      }\n\n      //Add objects to the scene\n      let sceneObjects=this.config.Objects;\n      if(sceneObjects){\n        for(let i=0;i<sceneObjects.length;i++){\n          if(this.game.objects[sceneObjects[i]]!==undefined){\n            this.container.addChild(this.game.objects[sceneObjects[i]].sprite);\n          }else{\n            console.log(\"Error:Game object \"+sceneObjects[i]+\" not found\");\n          }\n        }\n      }\n\n      //Add NPCs (non-playable characters) to the scene\n      let sceneChars=this.config.Characters;\n      if(sceneChars){\n        for(let i=0;i<sceneChars.length;i++){\n          if(this.game.npcs[sceneChars[i]]!==undefined){\n            this.container.addChild(this.game.npcs[sceneChars[i]].sprite);\n          }else{\n            console.log(\"Error:Game character \"+sceneChars[i]+\" not found\");\n          }\n        }\n      }\n  }\n\n  getPosition(event){\n    let coord=event.data.getLocalPosition(this.game.app.stage);\n    if(!this.game.player.lock && this.game.activeObject===null && this.game.activeNPC===null){\n      this.game.player.move(coord);\n    }\n  }\n\n  getPath(fromX,fromY,toX,toY){\n    return this.walkable.findPath(fromX, fromY, toX, toY, 0);\n  }\n\n}\n\nexport default GameScene;\n","import { TweenMax } from \"gsap\";\nimport PixiPlugin from \"gsap/PixiPlugin\";\n\nclass CutScene{\n  constructor(){\n    this.container=new PIXI.Container();\n    this.music=null;\n    this.voice=null;\n    this.sequenceIndex=0;\n    this.played=false;\n  }\n\n  build(){\n    if(this.config.Video){\n      this.videoData = this.game.files.resources[this.config.Video].data;\n      this.videoEnds=this.end.bind(this);\n      this.videoData.addEventListener('ended',this.videoEnds);\n    }else if(this.config.Sequence){\n      this.tween=null;\n      this.image=new PIXI.Sprite(PIXI.Texture.from(this.config.Sequence[this.sequenceIndex].Image));\n      this.image.anchor.set(0.5,0);\n      this.container.interactive=true;\n      this.container.buttonMode=true;\n      this.container.on('pointertap',this.next.bind(this));\n      this.container.addChild(this.image);\n      this.field=new PIXI.extras.BitmapText(this.config.Sequence[this.sequenceIndex].Text[this.game.activeLanguage],this.game.settings.Text.Style);\n      this.field.anchor.set(0.5,1);\n      this.field.maxWidth=this.game.width;\n      this.container.addChild(this.field);\n    }\n  }\n\n  show(){\n    if(this.config.Video) {\n      let videoTexture = PIXI.Texture.from(this.videoData);\n    \tthis.videoSprite = new PIXI.Sprite(videoTexture);\n      this.videoSprite.width = this.game.width;\n      this.videoSprite.height = this.game.height;\n      this.videoSprite.interactive=true;\n      this.videoSprite.buttonMode=true;\n      this.videoSprite.on('pointertap',this.end.bind(this));\n      this.container.addChild(this.videoSprite);\n    }else if(this.config.Sequence) {\n      this.adjust();\n      this.setMusic();\n      this.setVoice();\n    }\n    this.game.app.stage.addChild(this.container);\n    this.fadeIn();\n\n  }\n\n  hide(){\n      this.container.parent.removeChild(this.container);\n  }\n\n  next(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    if(this.sequenceIndex<this.config.Sequence.length-1){\n      this.sequenceIndex+=1;\n      this.field.text=this.config.Sequence[this.sequenceIndex].Text[this.game.activeLanguage];\n      this.image.texture=(PIXI.Texture.from(this.config.Sequence[this.sequenceIndex].Image));\n      this.adjust();\n      this.setMusic();\n      this.setVoice();\n      this.fadeIn();\n    }else{\n      this.end();\n    }\n  }\n\n  fadeIn(){\n    if(this.tween) this.tween.kill();\n    this.tween=TweenMax.fromTo(this.container, 1, {alpha:0}, {alpha:1, onComplete:this.timer.bind(this)});\n  }\n\n  timer(){\n    this.timeoutID = setTimeout(this.fadeOut.bind(this), this.config.Sequence[this.sequenceIndex].Time*1000);\n  }\n\n  fadeOut(){\n    if(this.tween) this.tween.kill();\n    this.tween=TweenMax.fromTo(this.container, 1, {alpha:1}, {alpha:0, onComplete:this.next.bind(this)});\n  }\n\n  end(){\n    this.game.activeCutscene=null;\n    if(this.videoData){\n      this.videoData.pause();\n      this.videoData.removeEventListener('ended',this.videoEnds);\n    }\n\n    if(this.tween) this.tween.kill();\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n\n    if(this.music!==null){\n      //this.game.sound.stop(this.music);\n      this.game.music[this.music].stop();\n    }\n\n    this.played=true;\n    this.hide();\n\n    if(!this.game.finished)\n    {\n      this.game.resume();\n    }else{\n      this.game.home();\n    }\n  }\n\n  adjust(){\n    let ratio=this.image.width / this.image.height;\n    this.image.height=this.game.height-this.field.height;\n    this.image.width=this.image.height*ratio;\n\n    this.image.x=this.game.width/2;\n    this.field.x=this.game.width/2;\n    this.field.y=this.game.height;\n\n    if(this.container.width>this.game.width || this.container.height>this.game.height){\n      this.scale();\n    }\n    this.center();\n  }\n\n  center(){\n    this.container.x = this.game.width / 2;\n    this.container.y = this.game.height  / 2;\n    this.container.pivot.x = this.container.width / 2;\n    this.container.pivot.y = this.container.height / 2;\n  }\n\n  scale(){\n    let ratio = Math.min( this.game.width/this.container.width, this.game.height/this.container.height);\n    this.container.scale.set(ratio);\n  }\n\n  setMusic(){\n    if(this.config.Sequence[this.sequenceIndex].Music!==undefined && this.game.playSounds){\n      if(this.music!==null){\n        this.game.music[this.music].stop();\n      }\n\n      this.music=this.config.Sequence[this.sequenceIndex].Music;\n      this.game.music[this.music].play(true);\n    }\n  }\n\n  setVoice(){\n    if(this.voice!==null){\n      this.game.voices[this.config.VoiceSet].stop();\n      this.voice=null;\n    }\n\n    if(this.config.Sequence[this.sequenceIndex].Voice!==undefined && this.game.playSounds){\n      this.voice=this.config.Sequence[this.sequenceIndex].Voice[this.game.activeLanguage];\n      this.game.voices[this.config.VoiceSet].play(null,this.voice);\n    }\n  }\n\n}\n\nexport default CutScene;\n","import * as PolyK from 'polyk';\n\nfunction boxesIntersect(a, b)\n{\n  var ab = a.getBounds();\n  var bb = b.getBounds();\n  return ab.x + ab.width > bb.x && ab.x < bb.x + bb.width && ab.y + ab.height > bb.y && ab.y < bb.y + bb.height;\n}\n\nfunction collision(a, b)\n{\n  let result;\n  if(a!=undefined && b !=undefined){\n    if(a.hitArea) result=PolyK.ContainsPoint(a.hitArea.points,b.x,b.y);\n    else if(b.hitArea) result=PolyK.ContainsPoint(b.hitArea.points,a.x,a.y);\n    else result=boxesIntersect(a,b);\n  }\n\n  return result;\n}\n\nfunction closestPoint(area,coords){\n  let coordX=Math.round(coords.x);\n  let coordY=Math.round(coords.y);\n  let changePosition={};\n  let closestedge=PolyK.ClosestEdge(area,coordX,coordY);\n  changePosition.x=closestedge.point.x-closestedge.norm.x;\n  changePosition.y=closestedge.point.y-closestedge.norm.y;\n  return {x:Math.round(changePosition.x),y:Math.round(changePosition.y)}\n}\n\nfunction checkPath(coords,obstaclesPolys,walkPoly){\n  let coordX=Math.round(coords.x);\n  let coordY=Math.round(coords.y);\n  let changePosition={};\n  let newPos;\n\n  if(!PolyK.ContainsPoint(walkPoly,coordX,coordY))\n  {\n    let closestedge=PolyK.ClosestEdge(walkPoly,coordX,coordY);\n    changePosition.x=closestedge.point.x-closestedge.norm.x;\n    changePosition.y=closestedge.point.y-closestedge.norm.y;\n    newPos={x:Math.round(changePosition.x),y:Math.round(changePosition.y)}\n  }else if(obstaclesPolys!==undefined){\n\n    for(let i=0;i<obstaclesPolys.length ;i++){\n      if(PolyK.ContainsPoint(obstaclesPolys[i],coordX,coordY)){\n        let closestedge=PolyK.ClosestEdge(walkPoly,coordX,coordY);\n        changePosition.x=closestedge.point.x-closestedge.norm.x;\n        changePosition.y=closestedge.point.y-closestedge.norm.y;\n        newPos={x:Math.round(changePosition.x)+1,y:Math.round(changePosition.y)+1};\n        break;\n      }\n    }\n  }\n\n  return newPos;\n}\n\nexport {boxesIntersect,checkPath,collision,closestPoint};\n","import {boxesIntersect,collision,closestPoint} from '../collisions.js';\n\nclass GameObject{\n  constructor(){\n    this.sprite=null;\n    this.game=null;\n    this.action=null;\n  }\n\n  build(){\n    if(this.config.Description===undefined){\n      this.config.Description=this.game.data.texts.NoDescription;\n    }\n    //Configure the sprite's object\n    if(this.config.Texture){\n      //Generate a static object from a texture\n      this.sprite=new PIXI.Sprite.from(PIXI.Texture.from(this.config.Texture));\n\n    }else if(this.config.Area){\n\n      //For invisible objects\n      this.sprite=new PIXI.Sprite.from(PIXI.Texture.EMPTY);\n      this.sprite.hitArea=new PIXI.Polygon(this.config.Area);\n\n    }else if(this.config.Animation){\n\n      //Animated objects\n      let spritesheet=this.game.files.resources[this.config.Animation.Name].spritesheet;\n\n      let frames = [];\n      for (var i = 0; i < spritesheet._frameKeys.length; i++) {\n          frames.push(PIXI.Texture.from(spritesheet._frameKeys[i]));\n      }\n\n      this.sprite=new PIXI.extras.AnimatedSprite(frames);\n      this.animationSpeed=this.config.Animation.Speed;\n      this.play();\n    }\n\n    //Position of the object in the screen\n    if(this.config.Position){\n      this.sprite.x=this.config.Position[0];\n      this.sprite.y=this.config.Position[1];\n    }\n\n    //Size of the object\n    if(this.config.Size){\n      this.sprite.scale.set(this.config.Size)\n    }\n\n    if(this.config.Mirror){\n      this.flip();\n    }\n\n    //Configure the anchor (origin point of the object)\n    if(!this.config.Area)this.sprite.anchor.set(0.5,1);\n\n    //Configure the layer for the z-order\n    if(this.config.Layer===\"Top\") this.sprite.parentLayer=this.game.layerTop;\n    else if(this.config.Layer===\"Bottom\") this.sprite.parentLayer=this.game.layerBottom;\n    else this.sprite.parentLayer = this.game.layer;\n\n    //Is it a door?\n    if(this.config.Door){\n      this.door=true;\n      this.newScene=this.config.Door.To;\n      this.playerPos=this.config.Door.Player;\n    }\nthis.holding=false;\nthis.timeoutID;\n    if(this.config.Lock){\n      this.locked=true;\n    }\n    //Game object events\n    this.sprite.interactive=true;\n    this.sprite.buttonMode=true;\n\n    if(this.config.Area!==undefined){\n      this.sprite.on('pointerdown', this.touchArea.bind(this))\n          .on('pointerup', this.releaseArea.bind(this))\n          .on('pointerupoutside', this.releaseArea.bind(this));\n    }else{\n      this.sprite.on('pointerdown', this.touch.bind(this))\n          .on('pointermove', this.move.bind(this))\n          .on('pointerup', this.release.bind(this))\n          .on('pointerupoutside', this.release.bind(this));\n    }\n\n    if(this.config.Interactive!==undefined) this.setInteraction(this.config.Interactive);\n  }\n\n  hide(){\n    this.sprite.visible=false;\n  }\n\n  show(){\n    this.sprite.visible=true;\n  }\n\n  setpos(x,y){\n    this.sprite.x=x;\n    this.sprite.y=y;\n  }\n\n  flip(){\n    this.sprite.scale.x*=-1;\n  }\n\n  changeTexture(texture){\n    this.sprite.texture=new PIXI.Texture.from(texture)\n  }\n\n  hold(){\n    this.holding=true;\n  }\n  //Invisible object touch begins\n  touchArea(event){\n    if(this.game.activeObject===null && !this.game.player.lock){\n      this.game.activeObject=this;\n      this.interaction = event.data;\n      this.action=null;\n      if(this.timeoutID) clearTimeout(this.timeoutID);\n      this.timeoutID=setTimeout(this.hold.bind(this), this.game.holdTime);\n      this.touchedPos=this.interaction.getLocalPosition(this.game.app.stage);\n    }\n  }\n\n  //Invisible object touch ends\n  releaseArea(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n\n    if(this.interaction){\n      let moveTo=this.interaction.getLocalPosition(this.game.app.stage);\n      if(collision(moveTo,this.sprite)){\n        if(this.interaction.button===2 || this.holding){\n          if(this.door===true ){\n            let newPos=closestPoint(this.config.Area,moveTo);\n            moveTo=newPos;\n          }else if(this.config.Use!==undefined){\n            this.game.activePuzzle=this.game.puzzles[this.config.Use];\n          }\n          this.action=\"Use\";\n        }else{\n          this.action=\"Look\";\n       }\n      }\n\n      if(this.action!==null){\n        this.game.player.endAction=this.action;\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      if(this.game.player.touched) this.game.player.touched=false;\n      this.holding=false;\n      this.interaction = null;\n      this.touchedPos=null;\n    }\n  }\n\n  //Object touch begins\n  touch(event){\n    if(this.game.activeObject===null && !this.game.player.lock){\n      this.game.activeObject=this;\n      this.action=null;\n      this.posX = this.sprite.x;\n      this.posY = this.sprite.y;\n      this.interaction = event.data;\n      this.sprite.alpha = 0.5;\n      this.dragging = true;\n      if(this.timeoutID) clearTimeout(this.timeoutID);\n      this.timeoutID=setTimeout(this.hold.bind(this), 1000);\n      this.oldParent=this.sprite.parent;\n      this.depthGroup=this.sprite.parentLayer;\n      if(this.sprite.parentLayer !== this.game.layerUI) this.sprite.parentLayer = this.game.layerUI;\n    }\n  }\n\n  //Object is being dragged\n  move(){\n    if (this.dragging && !this.locked) {\n      this.sprite.setParent(this.game.app.stage);\n      var newPosition = this.interaction.getLocalPosition(this.sprite.parent);\n      let bounds=this.sprite.getBounds();\n      //We can only move the object inside the stage\n      if(newPosition.x>bounds.width/2 && newPosition.x<this.game.width-bounds.width/2) this.sprite.x = newPosition.x;\n      if(newPosition.y>bounds.height && newPosition.y<this.game.height) this.sprite.y = newPosition.y;\n    }\n  }\n\n  //Object drag/touch ends\n  release(){\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n\n    if(this.interaction){\n      let moveTo={x:this.posX,y:this.posY};\n      //Check if we take it\n      if(collision(this.sprite,this.game.inventory.icon) && this.config.Take){\n        this.action=\"Take\";\n        //Check if we look it\n      }else if(this.interaction.button===2  || this.holding){\n        if(this.config.Use!==undefined) this.game.activePuzzle=this.game.puzzles[this.config.Use];\n        this.action=\"Use\";\n      }else{\n        this.action=\"Look\";\n      }\n\n      if(this.action!==null){\n        this.game.player.endAction=this.action;\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      if(this.game.player.touched) this.game.player.touched=false;\n\n      this.sprite.x = this.posX;\n      this.sprite.y = this.posY;\n      this.sprite.alpha = 1;\n      this.sprite.parentLayer = this.depthGroup;\n      this.sprite.setParent(this.oldParent);\n\n      this.holding=false;\n      this.interaction = null;\n      this.dragging = false;\n    }\n  }\n\n  //Check collision between objects\n  hit(){\n    let found=null;\n    let i;\n\n    //First check the collision between active scene's objects\n    let objectsArray=this.game.activeScene.config.Objects;\n    if(objectsArray!==undefined){\n      for(i=0;i<objectsArray.length;i++){\n        if(collision(this.sprite,this.game.objects[objectsArray[i]].sprite)\n                     && this.config.Name!==objectsArray[i]){\n          found=objectsArray[i];\n          break;\n        }\n      }\n    }\n\n    //Check if the collision is between inventory objects\n    objectsArray=this.game.inventory.objects;\n\n    for(i=0;i<objectsArray.length;i++){\n      if(collision(this.sprite,this.game.objects[objectsArray[i]].sprite)\n                   && this.config.Name!==objectsArray[i]){\n        found=objectsArray[i];\n        break;\n      }\n    }\n\n    //Check the collision a character\n    let charsArray=this.game.activeScene.config.Characters;\n    if(charsArray!==undefined){\n      for(i=0;i<charsArray.length;i++){\n        if(collision(this.sprite,this.game.npcs[charsArray[i]].sprite)\n                     && this.config.Name!==charsArray[i]){\n          found=charsArray[i];\n          break;\n        }\n      }\n    }\n\n    return found;\n  }\n\n  //Object action is canceled or ended\n  cancel(){\n    this.game.activeObject.action=null;\n    this.game.activeObject=null;\n\n  }\n\n  setInteraction(value){\n    this.sprite.interactive=value;\n  }\n\n  //Add the object to a given scene\n  add(scene){\n    this.game.scenes[scene].container.addChild(this.sprite);\n    this.game.scenes[scene].config.Objects.push(this.config.Name);\n  }\n  //Remove objects from game\n  remove(){\n    this.sprite.parent.removeChild(this.sprite);\n\n    //Check if we remove an object which is in an scene\n    let scenesArray=Object.values(this.game.scenes)\n    let i;\n    let scenesLength=scenesArray.length;\n    for(i=0;i<scenesLength;i++){\n      if(scenesArray[i].config.Objects!==undefined && scenesArray[i].config.Objects.includes(this.config.Name)){\n        let tmpIndex=scenesArray[i].config.Objects.indexOf(this.config.Name);\n        scenesArray[i].config.Objects.splice(tmpIndex,1);\n      }\n    }\n\n    //Check if the object to remove is inside the inventory\n    if(this.game.inventory.objects.includes(this.config.Name)){\n      this.game.inventory.remove(this.config.Name)\n    }\n  }\n\n}\n\nexport default GameObject;\n","import {boxesIntersect,collision} from '../collisions.js';\n\nclass Inventory{\n  constructor(){\n      this.container=new PIXI.Container();\n      this.container.visible=false;\n      this.game=null;\n      this.objects=[];\n\n    }\n\n    build(){\n      this.background=new PIXI.Sprite(PIXI.Texture.from(this.game.settings.Inventory.Background));\n      this.background.width=this.game.width/2;\n      this.background.height=this.game.height/2;\n      this.background.parentLayer = this.game.layerUI;\n      this.container.x = (this.game.width - this.background.width) / 2;\n      this.container.y = (this.game.height - this.background.height) / 2;\n      this.border=10;\n      this.icon=new PIXI.Sprite(PIXI.Texture.from(this.game.settings.Inventory.Icon));\n      this.icon.on('pointertap',this.click.bind(this));\n      this.icon.interactive=true;\n      this.icon.buttonMode=true;\n      this.setIcon(this.game.settings.Inventory.Position);\n      this.container.addChild(this.background);\n      this.icon.parentLayer = this.game.layerUI;\n\n      //Hidden by default\n      this.hide();\n      this.hideIcon();\n    }\n\n    show(){\n      this.update();\n      this.container.visible=true;\n    }\n\n    hide(){\n      this.container.visible=false;\n\n    }\n\n    showIcon(){\n      this.icon.visible=true;\n    }\n\n    hideIcon(){\n      this.icon.visible=false;\n\n    }\n\n    setIcon(position){\n      if(position==\"bottom-right\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=this.game.height - this.icon.height;\n      }else if(position==\"top-right\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=0;\n      }else if(position==\"top-left\"){\n        this.icon.x=0;\n        this.icon.y=this.game.height - this.icon.height;\n      }else if(position==\"bottom-top\"){\n        this.icon.x=this.game.width - this.icon.width;\n        this.icon.y=0;\n      }\n    }\n\n    click(){\n      if (this.container.visible) this.hide();\n      else if(!this.game.player.lock) this.show();\n    }\n\n    add(name){\n      this.objects.push(name);\n      this.game.objects[name].sprite.setParent(this.container);\n      this.game.objects[name].sprite.parentLayer=this.game.layerUI;\n      this.game.objects[name].sprite.on('pointermove', this.move.bind(this.game.objects[name]))\n                                    .off('pointerup')\n                                    .off('pointerupoutside')\n                                    .on('pointerup',this.release.bind(this.game.objects[name]))\n                                    .on('pointerupoutside',this.release.bind(this.game.objects[name]));\n      this.update();\n    }\n\n    remove(name)\n    {\n      //Check if object is already in inventory\n      if(this.objects.includes(name)){\n        this.objects.splice(this.objects.indexOf(name),1);\n        this.update();\n      }\n    }\n\n    update(){\n      //Inventory is limited to 25 objects\n      let i;\n      let numObjs=this.objects.length;\n      for(i=0;i<numObjs;i++){\n        let tmpObj=this.game.objects[this.objects[i]].sprite;\n\n        let desiredWidth=this.container.width/5-this.container.width*0.05;\n        let desiredHeight=this.container.height/5-this.container.height*0.05;\n        let ratio = Math.min( desiredWidth/tmpObj.width, desiredHeight/tmpObj.height);\n        tmpObj.width*=ratio;\n        tmpObj.height*=ratio;\n\n        tmpObj.x = ((i % 5) * this.container.width/5+this.border-i)+tmpObj.width/2;\n        tmpObj.y = (Math.floor(i / 5) * this.container.height/5+this.border-i)+tmpObj.height;\n        this.container.width=this.background.width;\n        this.container.height=this.background.height;\n      }\n    }\n\n    move(){\n      if(!boxesIntersect(this.sprite,this.game.inventory.container))\n        this.game.inventory.hide();\n    }\n\n    release(event){\n      if(this.timeoutID) clearTimeout(this.timeoutID);\n\n      if(this.interaction){\n        let objectHit=this.hit();\n\n        let moveTo={x:this.sprite.x,y:this.sprite.y};\n        //Check if we take it\n        if(!this.holding){\n          let voice=undefined;\n          if(this.config.VoiceDescription!==undefined){\n            voice=this.config.VoiceDescription[this.game.activeLanguage];\n          }\n          this.game.player.say(this.config.Description[this.game.activeLanguage],voice);\n\n        }else if(this.config.Combine!==undefined && objectHit!==null){\n          if(this.config.Combine.With===objectHit) {\n            this.game.activePuzzle=this.game.puzzles[this.config.Combine.Puzzle];\n          }\n          this.action=\"Use\";\n        }\n\n        if(this.action!==null){\n          this.game.player.endAction=this.action;\n          this.game.player.move(moveTo);\n        }else{\n          this.cancel();\n        }\n\n        this.sprite.x = this.posX;\n        this.sprite.y = this.posY;\n        this.sprite.alpha = 1;\n        this.sprite.setParent(this.oldParent);\n\n        this.interaction = null;\n        this.dragging = false;\n        this.holding=false;\n      }\n    }\n}\n\nexport default Inventory;\n","class Puzzle{\n  constructor(){\n    this.solved=false;\n  }\n\n  resolve(){\n    if(this.game.activeObject!==null) this.game.activeObject.cancel();\n\n    if(!this.solved){\n      if(this.config.ModifyObject){\n        let objectMod=this.game.objects[this.config.ModifyObject.Name];\n        if(this.config.ModifyObject.Description!==undefined) objectMod.config.Description=this.config.ModifyObject.Description;\n        if(this.config.ModifyObject.Door!==undefined) this.createDoor(objectMod)\n        if(this.config.ModifyObject.Position!==undefined) objectMod.setpos(this.config.ModifyObject.Position[0],this.config.ModifyObject.Position[1]);\n        if(this.config.ModifyObject.Mirror) objectMod.flip();\n        if(this.config.ModifyObject.Interactive!==undefined) this.setInteraction(this.config.ModifyObject.Interactive);\n        if(this.config.ModifyObject.Texture!==undefined) this.changeTexture(this.config.ModifyObject.Texture);\n        if(this.config.ModifyObject.Combine!==undefined) objectMod.config.Combine=this.config.ModifyObject.Combine;\n        if(this.config.ModifyObject.Use!==undefined) objectMod.config.Use=this.config.ModifyObject.Use;\n        if(this.config.ModifyObject.Lock!==undefined) objectMod.lock=this.config.ModifyObject.Lock;\n      }\n\n      if(this.config.GetObject!==undefined) this.game.inventory.add(this.config.GetObject);\n\n      if(this.config.AddObject!==undefined){\n        let objectAdd=this.game.objects[this.config.AddObject.Name];\n        objectAdd.add(this.config.AddObject.Scene);\n      }\n\n      if(this.config.RemoveObject!==undefined){\n        let objectRemove=this.game.objects[this.config.RemoveObject];\n        objectRemove.remove();\n\n      }\n\n      if(this.config.RemoveDoor!==undefined){\n        let objectDoor=this.game.objects[this.config.RemoveDoor];\n        objectDoor.door=false;\n      }\n\n      if(this.config.SetDialogue!==undefined){\n        this.game.npcs[this.config.SetDialogue.Character].config.Dialogue=this.config.SetDialogue.Dialogue;\n      }\n\n      if(this.config.Resolve!==undefined)this.game.puzzles[this.config.Resolve].resolve();\n\n      if(this.config.Say && !this.game.silentMode){\n        this.game.player.say(this.config.Say[this.game.activeLanguage]);\n      }else if(this.config.NPCSay && !this.game.silentMode){\n        this.game.npcs[this.config.NPCSay.Name].say(this.config.NPCSay.Text[this.game.activeLanguage]);\n      }else{\n        this.game.player.stop();\n      }\n\n      if(this.config.Sound!==undefined && !this.game.silentMode){\n          if(this.config.Sound.Source!==undefined) this.game.sounds[this.config.Sound.Name].play(null,this.config.Sound.Source);\n          else this.game.sounds[this.config.Sound.Name].play();\n      }\n\n      if(this.config.CutScene!==undefined && !this.game.silentMode && this.game.playSounds){\n        this.game.activeCutscene=this.game.cutscenes[this.config.CutScene];\n        this.game.pause();\n        this.game.activeCutscene.show();\n      }\n\n      if(this.config.EndGame!==undefined && !this.game.silentMode){\n        this.game.end();\n        if(this.config.EndGame.CutScene!==undefined){\n           this.game.activeCutscene=this.game.cutscenes[this.config.EndGame.CutScene];\n           this.game.pause();\n           this.game.activeCutscene.show();\n        }\n        else this.game.home();\n      }\n\n      this.solved=true;\n\n    }else{\n      this.game.player.stop();\n    }\n\n    this.game.activePuzzle=null;\n  }\n\n  createDoor(target){\n    target.door=true;\n    target.newScene=this.config.ModifyObject.Door.To;\n    target.playerPos=this.config.ModifyObject.Door.Player;\n  }\n}\n\nexport default Puzzle;\n","import dragonBones from 'pixi-dragonbones';\nconst dbfactory=dragonBones.PixiFactory.factory;\nimport {checkPath} from '../collisions.js'\n\nimport { TweenMax } from \"gsap\";\nimport PixiPlugin from \"gsap/PixiPlugin\";\n\nclass Character{\n  constructor(){\n    this.game=null;\n    this.state=null;\n    this.lock=false;\n    this.endAction=null;\n  }\n\n  setup(config){\n    dbfactory.parseDragonBonesData(this.game.files.resources[config.Name+\"Skeleton\"].data);\n    dbfactory.parseTextureAtlasData(this.game.files.resources[config.Name+\"Json\"].data,this.game.files.resources[config.Name+\"Tex\"].texture);\n    this.sprite = dbfactory.buildArmatureDisplay(config.Armature);\n    if(config.Size!==undefined){\n      this.size=config.Size;\n      this.sprite.scale.set(this.size);\n    }else{\n      this.size=1;\n    }\n    this.tween=null;\n    if(config.Animations!=undefined)\n      this.animations=config.Animations;\n    else\n      this.animations={\n        Stand:\"stand\",\n        Walk:\"walk\",\n        Take:\"take\",\n        Use:\"use\",\n        Say:\"speak\"\n      };\n    this.animate(this.animations.Stand);\n    this.state=\"stand\";\n    if(config.Position){\n      this.sprite.x=config.Position[0];\n      this.sprite.y=config.Position[1];\n    }\n    this.sprite.parentLayer = this.game.layer;//Z-order*/\n    this.config=config;\n  }\n\n  hide(){\n    this.sprite.visible=false;\n  }\n\n  show(){\n    this.sprite.visible=true;\n  }\n\n  width(){\n    return this.sprite.getBounds().width;\n  }\n\n  position(coords){\n    this.sprite.x=coords[0];\n    this.sprite.y=coords[1];\n  }\n\n  move(coords){\n    let obstacles=this.game.activeScene.config.Obstacles;\n    let walkingArea=this.game.activeScene.config.WalkArea;\n    let newPosition=coords;\n    let closestPosition=checkPath(coords,obstacles,walkingArea);\n\n    if(closestPosition){\n      newPosition=closestPosition;\n    }\n\n    let findPath=this.game.activeScene.walkable.findPath(this.sprite.x,this.sprite.y,newPosition.x,newPosition.y,0);\n    let i;\n    let finalPath=[];\n    for(i=0;i<findPath.length;i++){\n      finalPath.push({x:findPath[i],y:findPath[i+1]})\n      i++;\n    }\n\n    if(finalPath.length>0){\n      let animationTime=Math.abs(this.sprite.x-newPosition.x)+Math.abs(this.sprite.y-newPosition.y);\n      animationTime=animationTime/(this.game.width+this.game.height);\n      animationTime*=10;\n      if(this.config.Speed!==undefined) animationTime/=this.config.Speed;\n\n      this.animate(this.animations.Walk);\n      if(this.sprite.x<newPosition.x) this.sprite.armature.flipX=false;\n      else this.sprite.armature.flipX=true;\n\n      this.game.activeState=this;\n\n      if(this.tween!==null) this.tween.kill();\n      this.tween=TweenMax.to(this.sprite, animationTime, {bezier:finalPath, ease:Linear.easeNone,onComplete:this.stop.bind(this)});\n    }\n  }\n\n  update(){\n    this.scale();\n  }\n\n  scale(){\n    let scaleChar=this.sprite.y/this.game.height*this.size;\n    if(scaleChar<this.game.activeScene.config.Depth) scaleChar=this.game.activeScene.config.Depth;\n    this.sprite.scale.set(scaleChar);\n  }\n\n  stop(){\n    this.animate(this.animations.Stand);\n    this.game.activeState=null;\n    this.lock=false;\n    if(this.endAction!==null){\n      if(this.endAction===\"Look\") this.look();\n      else if(this.endAction===\"Take\") this.take();\n      else if(this.endAction===\"Use\") this.use();\n      else if(this.endAction===\"Talk\") this.talk();\n      this.endAction=null;\n    }\n  }\n\n  say(text,voice){\n    this.game.textField.talker=this;\n    //Setup the text to show\n    this.game.textField.setText(text);\n    this.game.textField.setAvatar(this.config.Avatar);\n    if(this.config.Color!==undefined) this.game.textField.setColor(Number(this.config.Color));\n    if(this.config.Font!==undefined) this.game.textField.setFont(this.config.Font);\n    else this.game.textField.setFont(this.game.settings.Text.Style.font)\n\n    //Play voice if it's defined\n    if(voice!==undefined && this.config.VoiceSet!=undefined){\n      this.game.activeVoice=this.config.VoiceSet;\n      this.game.voices[this.config.VoiceSet].play(null,voice);\n    }\n\n    this.game.textField.show();\n    //Animate the character\n    this.animate(this.animations.Say);\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    this.timeoutID=setTimeout(this.game.textField.end.bind(this.game.textField), this.game.textField.timeOut());\n  }\n\n  shutup(){\n    if(this.game.activeVoice!=null){\n      this.game.voices[this.config.VoiceSet].stop();\n      this.game.activeVoice=null\n    }\n    this.animate(this.animations.Stand);\n  }\n\n  animate(animation,times){\n    if(this.sprite.animation.lastAnimationName!==animation)\n      this.sprite.animation.fadeIn(animation,0.25,times);\n  }\n}\n\nexport default Character;\n","import Character from './character.js';\nimport dragonBones from 'dragonbones-pixi';\nconst dbEvents=dragonBones.dragonBones.EventObject;\nimport {closestPoint} from '../collisions.js';\n\nclass Player extends Character{\n  setup(config){\n    super.setup(config);\n\n    //Hidden by default\n    this.hide();\n  }\n\n  checkDirection(target){\n    //Player must look in the right direction\n    if(target.config.Area===undefined){\n      if(this.sprite.x<target.sprite.x){\n        this.sprite.armature.flipX=false;\n      }else{\n        this.sprite.armature.flipX=true;\n      }\n    }\n  }\n\n  say(text,voice){\n    super.say(text,voice);\n    //Lock the player\n    this.lock=true;\n  }\n\n  look(){\n    if(this.game.activeObject!==null){\n      this.checkDirection(this.game.activeObject);\n      let text=this.game.activeObject.config.Description[this.game.activeLanguage];\n      let voice=undefined;\n      if(this.game.activeObject.config.VoiceDescription!==undefined){\n        voice=this.game.activeObject.config.VoiceDescription[this.game.activeLanguage];\n      }\n      this.say(text,voice);\n      this.game.activeObject.cancel();\n    }else if(this.game.activeNPC!==null){\n      this.checkDirection(this.game.activeNPC);\n          let text=this.game.activeNPC.config.Description[this.game.activeLanguage];\n          this.say(text);\n          this.game.activeNPC.cancel();\n    }\n  }\n\n  take(){\n    this.lock=true;\n    this.animate(this.animations.Take,1);\n    this.sprite.once(dbEvents.COMPLETE, this.takeEnd, this);\n  }\n\n  takeEnd(){\n    if(this.game.activeObject!==null){\n      let name=this.game.activeObject.config.Name;\n      if(this.game.activeScene!==null){\n        if(this.game.activeScene.config.Objects.includes(name)){\n          let tmpIndex=this.game.activeScene.config.Objects.indexOf(name);\n          this.game.activeScene.config.Objects.splice(tmpIndex,1);\n        }\n      }\n      this.game.inventory.add(name);\n      this.game.activeObject.cancel();\n      this.stop();\n    }\n  }\n\n  use(){\n    this.lock=true;\n    this.animate(this.animations.Use,1);\n    this.sprite.once(dbEvents.COMPLETE, this.useEnd, this);\n  }\n\n  useEnd(){\n    if(this.game.activePuzzle!==null){\n      this.game.activePuzzle.resolve();\n    }else if(this.game.activeObject!==null) {\n      if(this.game.activeObject.door){\n        this.game.changeScene(this.game.activeObject.newScene,\n          this.game.activeObject.playerPos);\n        this.stop();\n      }else{\n        this.say(this.game.data.texts.NotUsable[this.game.activeLanguage])\n      }\n      this.game.activeObject.cancel();\n    }\n  }\n\n  talk(){\n    //Player must look in the right direction\n    if(this.sprite.x<this.game.activeNPC.sprite.x){\n      this.sprite.armature.flipX=false;\n      if(this.game.activeNPC.config.Mirror!==undefined) this.game.activeNPC.sprite.armature.flipX=true;\n      else this.game.activeNPC.sprite.armature.flipX=false;\n    }else{\n      this.sprite.armature.flipX=true;\n      if(this.game.activeNPC.config.Mirror!==undefined) this.game.activeNPC.sprite.armature.flipX=false;\n      else this.game.activeNPC.sprite.armature.flipX=true;\n    }\n\n    //Let's talk\n    this.game.activeDialogue.start();\n  }\n\n}\n\nexport default Player;\n","import Character from './character.js';\n\nclass NPC extends Character{\n  build(){\n    if(this.config.Mirror!==undefined) this.sprite.armature.flipX=true;\n    this.holding=false;\n    this.pressTimeoutID;\n    this.sprite.interactive=true;\n    this.sprite.buttonMode=true;\n    this.sprite.on('pointerdown', this.touch.bind(this))\n        .on('pointerup', this.release.bind(this))\n        .on('pointerupoutside', this.release.bind(this));\n  }\n\n  hold(){\n    this.holding=true;\n  }\n\n  touch(event){\n    if(this.game.activeNPC===null && !this.game.player.lock){\n      this.game.activeNPC=this;\n      this.action=null;\n      this.interaction = event.data;\n      if(this.pressTimeoutID) clearTimeout(this.pressTimeoutID);\n      this.pressTimeoutID=setTimeout(this.hold.bind(this), this.game.holdTime);\n    }\n  }\n  //Object drag/touch ends\n  release(){\n    if(this.pressTimeoutID) clearTimeout(this.pressTimeoutID);\n    if(this.interaction){\n      let distance=this.width();\n      if(this.game.player.sprite.x<this.sprite.x) distance*=-1;\n    /*  if(this.game.player.sprite.x<this.sprite.x) distance=this.sprite.getBounds().width*-1;\n      else distance=this.sprite.getBounds().width+this.game.player.sprite;*/\n      let moveTo={x:this.sprite.x+distance,y:this.sprite.y};\n\n      if(this.interaction.button===2  || this.holding){\n        //Check if we talk with the character\n        if(this.config.Dialogue!==undefined){\n          this.game.activeDialogue=this.game.dialogues[this.config.Dialogue];\n          this.action=\"Talk\";\n        }\n      }else{\n        this.action=\"Look\";\n      }\n\n      if(this.action!==null){\n        this.game.player.endAction=this.action;\n        this.game.player.move(moveTo);\n      }else{\n        this.cancel();\n      }\n\n      if(this.game.player.touched) this.game.player.touched=false;\n\n      this.holding=false;\n      this.interaction = null;\n      this.dragging = false;\n      this.moved=0;\n    }\n  }\n\n  //Set player to look this object\n  look(){\n    this.action=this.game.player.look.bind(this.game.player);\n  }\n\n  //Object action is canceled or ended\n  cancel(){\n    this.game.activeNPC.action=null;\n    this.game.activeNPC=null;\n\n  }\n}\n\nexport default NPC;\n","import {Button} from './text.js'\n\n//Branches dialogue system\nclass Dialogue{\n  constructor(){\n    this.timeoutID=null;\n    this.firstTime=true;\n    this.choice=null;\n    this.branches={};\n  }\n\n  setup(config){\n    this.config=config;\n\n    //Get dialogue branches\n    let i;\n    length=this.config.Branches.length;\n    for(i=0;i<length;i++)\n    {\n      this.branches[this.config.Branches[i].Name]=this.config.Branches[i];\n    }\n\n    this.currentBranch=this.branches[this.config.DefaultBranch];\n  }\n\n  //Executed when we interact with a NPC\n  start(){\n    this.firstTime=false;\n    this.game.player.lock=true;\n    this.game.textField.show();\n    this.game.textField.hideAvatar();\n    this.game.textField.Choices.get();\n  }\n\n  //Executed everytime we choose an option\n  next(){\n    if(this.choice!==null){\n      let choiceSelected=this.currentBranch.Choices[this.choice];\n      this.game.textField.Choices.hide();\n      let voice=undefined;\n      if(choiceSelected.Voice!==undefined){\n        voice=choiceSelected.Voice[this.game.activeLanguage];\n      }\n      this.game.player.say(choiceSelected.Text[this.game.activeLanguage],voice);\n    }else{\n      this.game.textField.hideAvatar();\n      this.game.textField.Choices.get();\n    }\n  }\n\n  //Search for a branch with a given name\n  searchBranch(name){\n    let branchFound=-1;\n    let i;\n    let length=this.config.Branches.length\n    for(i=0;i<length;i++)\n         if(this.config.Branches[i].Name===name)\n         {\n             branchFound=i;\n             break;\n         }\n    return branchFound;\n  }\n\n  answer(){\n    let choiceSelected=this.currentBranch.Choices[this.choice];\n    let voice=undefined;\n    if(choiceSelected.AnswerVoice!==undefined){\n      voice=choiceSelected.AnswerVoice[this.game.activeLanguage];\n    }\n    this.game.activeNPC.say(choiceSelected.Answer[this.game.activeLanguage],voice);\n\n    if(choiceSelected.Link){\n      this.currentBranch=this.branches[choiceSelected.Link];\n    }else if(choiceSelected.Puzzle){\n      choiceSelected.Repeat=false;\n      this.end();\n      this.game.puzzles[choiceSelected.Puzzle].resolve();\n    }else if(choiceSelected.EndDialogue){\n      this.end();\n    }\n\n\n    this.choice=null;\n  }\n\n  //Ends the conversations\n  end(){\n    this.game.activeNPC=null;\n    this.game.activeDialogue=null;\n  }\n\n  timeOut(){\n    this.next();\n  }\n}\n\nexport default Dialogue;\n","import { TweenMax } from \"gsap\";\nimport PixiPlugin from \"gsap/PixiPlugin\";\n\nclass Logo{\n  constructor(game){\n    this.game=game;\n    this.index=0;\n    this.timeoutID=null;\n    this.tween=null;\n    this.image=new PIXI.Sprite(\n      PIXI.Texture.from(this.game.settings.Logos[this.index]));\n    this.image.anchor.set(0.5,0.5)\n    this.image.position.set(this.game.width/2,this.game.height/2)\n    this.image.interactive=true;\n    this.image.buttonMode=true;\n    this.image.on('pointertap',this.fadeOut.bind(this));\n    this.image.alpha=0;\n  }\n\n  show(){\n    this.game.app.stage.addChild(this.image);\n    this.fadeIn();\n  }\n\n  fadeIn(){\n    if(this.tween) this.tween.kill();\n    this.tween=TweenMax.set(this.image,{alpha:0});\n    this.tween=TweenMax.fromTo(this.image, 1, {alpha:0}, {alpha:1, onComplete:this.timer.bind(this)});\n  }\n\n  timer(){\n    this.timeoutID = setTimeout(this.fadeOut.bind(this), 3*1000);\n  }\n\n  fadeOut(){\n    this.image.interactive=false;\n    if(this.tween) this.tween.kill();\n    this.tween=TweenMax.fromTo(this.image, 1, {alpha:1}, {alpha:0, onComplete:this.next.bind(this)});\n  }\n\n  next(){\n    this.image.interactive=true;\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    this.index++;\n    if(this.game.settings.Logos[this.index]!==undefined)\n    {\n      this.image.texture=(PIXI.Texture.from\n        (this.game.settings.Logos[this.index]));\n      this.fadeIn();\n    }\n    else this.end();\n  }\n\n  end(){\n\n    if(this.timeoutID) clearTimeout(this.timeoutID);\n    if(this.tween) this.tween.kill();\n    this.game.app.stage.removeChild(this.image);\n\n    //Set Title as the first scene to show\n    this.game.setScene(this.game.titleLabel);\n    this.game.fadeIn();\n  }\n}\n\nexport default Logo;\n","import * as PIXI from 'pixi.js';\nimport 'pixi-layers';\nimport { TweenMax } from \"gsap\";\nimport PixiPlugin from \"gsap/PixiPlugin\";\n\nimport Loader from './loader.js';\nimport Storage from './storage.js';\nimport Sound from './sound.js';\nimport Title from './class/title.js';\nimport GameScene from './class/gamescene.js';\nimport CutScene from './class/cutscene.js';\nimport GameObject from './class/gameobject.js';\nimport Inventory from './class/inventory.js';\nimport Puzzle from './class/puzzle.js';\nimport {TextField} from './class/text.js';\nimport Player from './class/player.js';\nimport NPC from './class/npc.js';\nimport Dialogue from './class/dialogue.js';\nimport Logo from './class/logo.js';\n\nclass Game {\n  constructor(config){\n    this.settings={};\n    this.data={\n      scenes:[],\n      cutscenes:[],\n      objects:[],\n      dialogues:[],\n      puzzles:[],\n      credits:[],\n      texts:[],\n      music:[],\n      voices:[],\n      sounds:[]\n    };\n    this.width=config.width;\n    this.height=config.height;\n    this.holdTime=500;\n    this.playSounds = true;\n\n    //Setup the application\n    this.app = new PIXI.Application(\n      config.width,config.height,{\n      antialias: true,\n      autoResize: true,\n      resolution: devicePixelRatio\n    });\n\n    this.app.stage = new PIXI.display.Stage();\n\n    //Change game size when window size changes\n    if(config.autoResize!==undefined) this.app.renderer.autoResize=config.autoResize;\n    else window.addEventListener('resize', this.resize.bind(this));\n\n    //Disable contextmenu for mouse interaction\n    document.addEventListener('contextmenu', e => {\n       e.preventDefault();\n    });\n\n    //We append it to a HTML element or Document body\n    if(config.parent){\n      document.getElementById(config.parent).appendChild(this.app.view)\n    }else{\n      document.body.appendChild(this.app.view);\n    }\n\n    //Load config files\n    this.preload(config.files);\n  }\n\n  //Read JSON configuration files\n  preload(files){\n    //Text to show progress\n    this.progressBar=new PIXI.Graphics();\n    this.progressBar.beginFill(0xDE3249);\n    this.progressBar.drawRect(0, 0, this.width, this.height/50);\n    this.progressBar.endFill();\n    this.progressBar.width=0;\n\n    this.loadingTxt=new PIXI.Text(\"Loading...\", {fill: 'white',\"fontSize\": 50});\n    this.loadingTxt.anchor.set(0.5);\n    this.loadingTxt.x=this.width/2;\n    this.loadingTxt.y=this.height/2;\n\n    this.progressBar.y=this.height-this.loadingTxt.height;\n\n    this.app.stage.addChild(this.loadingTxt);\n    this.app.stage.addChild(this.progressBar);\n    this.resize();\n    this.jsons=new Loader();\n    this.jsons.game=this;\n    this.jsons.addJSON(files);\n    this.jsons.load(this.load.bind(this)); //When all config files are loaded, load the game resources.\n  }\n\n  //Load game resources (images,sounds,vids...)\n  load(){\n    this.files=new Loader();\n    this.files.game=this;\n    this.files.addFiles(Object.values(this.jsons.resources));\n    this.files.load(this.setup.bind(this));\n  }\n\n  setup(){\n    this.app.stage.removeChild(this.loadingTxt);\n    this.app.stage.removeChild(this.progressBar);\n\n    //Z-Order\n    this.addZOrder();\n\n    //Adjust to window size\n    this.resize();\n\n    this.tween=null;\n    this.logo=null;\n\n    this.scenes={};\n    this.cutscenes={};\n    this.objects={};\n    this.npcs={};\n    this.dialogues={};\n    this.puzzles={};\n    this.music={};\n    this.sounds={};\n    this.voices={};\n\n\n    this.activeLanguage=0;\n    this.activeScene=null;\n    this.activeObject=null;\n    this.activeNPC=null;\n    this.activePuzzle=null;\n    this.activeDialogue=null;\n    this.activeCutscene=null;\n    this.activeVoice=null;\n\n    this.activeState=null;\n\n    this.finished=false;\n\n    this.storage=new Storage(this);\n    this.logo=new Logo(this);\n  //  this.sound=new SoundManager(this);\n\n    this.titleLabel=\"Title\";\n\n\n    if(this.settings.HoldTime!==undefined) this.holdTime=this.settings.HoldTime*1000;\n    if(this.settings.dialogueChoices!==undefined) this.dialogueChoices=this.settings.dialogueChoices;\n    else this.dialogueChoices=3;\n\n    //Setup title screen\n    this.addScene(this.titleLabel,new Title(),this.settings.TitleScreen);\n\n    //Add sounds,music and voices\n    let i;\n    let length=this.data.music.length;\n    for(i=0;i<length;i++)\n    {\n      this.addMusic(this.data.music[i].Name,new Sound(),this.data.music[i]);\n    }\n\n    length=this.data.sounds.length;\n    for(i=0;i<length;i++)\n    {\n      this.addSound(this.data.sounds[i].Name,new Sound(),this.data.sounds[i]);\n    }\n\n    length=this.data.voices.length;\n    for(i=0;i<length;i++)\n    {\n      this.addVoice(this.data.voices[i].Name,new Sound(),this.data.voices[i]);\n    }\n\n\n    //Add game objects\n    length=this.data.objects.length;\n    for(i=0;i<length;i++)\n    {\n      this.addObject(this.data.objects[i].Name,new GameObject(),this.data.objects[i]);\n    }\n\n    //Non-playable characters\n    length=this.data.npc.length;\n    for(i=0;i<length;i++)\n    {\n      this.addNPC(this.data.npc[i].Name,new NPC(),this.data.npc[i]);\n    }\n\n    //Dialogues\n    length=this.data.dialogues.length;\n    for(i=0;i<length;i++)\n    {\n      this.addDialogue(this.data.dialogues[i].Name,new Dialogue(),this.data.dialogues[i]);\n    }\n\n    //Add game scenes\n    length=this.data.scenes.length;\n    for(i=0;i<length;i++)\n    {\n      this.addScene(this.data.scenes[i].Name,new GameScene(),this.data.scenes[i]);\n    }\n\n    //Add cutscenes\n    length=this.data.cutscenes.length;\n    for(i=0;i<length;i++)\n    {\n      this.addCutscene(this.data.cutscenes[i].Name,new CutScene(),this.data.cutscenes[i]);\n    }\n\n    //Puzzles\n    length=this.data.puzzles.length;\n    for(i=0;i<length;i++)\n    {\n      this.addPuzzle(this.data.puzzles[i].Name,new Puzzle(),this.data.puzzles[i]);\n    }\n\n    //Add Inventory\n    this.addInventory();\n\n    //Add text field\n    this.addTextField();\n\n    //Add player\n    this.addPlayer();\n\n    //Check if there is a saved game\n    this.storage.check();\n\n    this.addBlackScreen();\n\n    //Game's loop\n    this.app.ticker.add(this.loop.bind(this));\n\n    this.logo.show();\n\n  }\n\n  loop(dt){\n    // update current state\n    if (this.activeState != null) {\n        this.activeState.update(dt);\n    }\n  }\n\n  addMusic(name, music, config) {\n      this.music[name] = music;\n\n      //Music parameters\n      music.config=config;\n\n      //Set game so music can access it\n      music.game = this;\n\n      music.source=this.files.resources[name].sound;\n  }\n\n  addSound(name, sound, config) {\n      this.sounds[name] = sound;\n\n      //Music parameters\n      sound.config=config;\n\n      //Set game so music can access it\n      sound.game = this;\n\n      sound.source=this.files.resources[name].sound;\n\n      if(config.Sprites) sound.source._sprite=config.Sprites;\n  }\n\n  addVoice(name, voice, config) {\n      this.voices[name] = voice;\n\n      //Music parameters\n      voice.config=config;\n\n      //Set game so music can access it\n      voice.game = this;\n\n      voice.source=this.files.resources[name].sound;\n\n      voice.source._sprite=config.Sprites;\n  }\n\n  addObject(name, object, config) {\n      this.objects[name] = object;\n\n      //Config the object\n      object.config=config;\n\n      //Set game so object can access it\n      object.game = this;\n\n      //Build object\n      object.build();\n  }\n\n  addScene(name, scene, config) {\n      this.scenes[name] = scene;\n\n      //Config the scene\n      scene.setup(config);\n\n      //Set game so scene can access it\n      scene.game = this;\n\n      //Build scene\n      scene.build();\n  }\n\n  addCutscene(name, cutscene, config) {\n      this.cutscenes[name] = cutscene;\n\n      //Config the scene\n      cutscene.config=config;\n\n      //Set game so scene can access it\n      cutscene.game = this;\n\n      //Build scene\n      cutscene.build();\n  }\n\n  addPuzzle(name, puzzle, config) {\n      this.puzzles[name] = puzzle;\n\n      //Puzzle's config\n      puzzle.config=config;\n\n      //Set game so puzzle can access it\n      puzzle.game = this;\n  }\n\n  addZOrder(){\n    this.BottomGroup= new PIXI.display.Group(0,false);\n    this.sortGroup= new PIXI.display.Group(1, true);\n    this.sortGroup.on('sort', function (sprite) {\n      sprite.zOrder = -sprite.y;\n    });\n    this.TopGroup = new PIXI.display.Group(2,false);\n    this.UIGroup = new PIXI.display.Group(3,false);\n\n    this.layerBottom=new PIXI.display.Layer(this.BottomGroup);\n    this.layer=new PIXI.display.Layer(this.sortGroup);\n    this.layerTop=new PIXI.display.Layer(this.TopGroup);\n    this.layerUI=new PIXI.display.Layer(this.UIGroup);\n\n    this.app.stage.group.enableSort = true;\n    this.app.stage.addChild(this.layerBottom);//Z-order\n    this.app.stage.addChild(this.layer);//Z-order\n    this.app.stage.addChild(this.layerTop);//Z-order\n    this.app.stage.addChild(this.layerUI);//Z-order\n  }\n\n  addInventory(){\n    this.inventory=new Inventory();\n    this.inventory.game=this;\n    this.inventory.build();\n  }\n\n  addPlayer(){\n    this.player=new Player();\n    this.player.game=this;\n    this.data.player.Name=\"player\";\n    this.player.setup(this.data.player);\n  }\n\n  addNPC(name, char, config){\n    this.npcs[name] = char;\n\n    char.game = this;\n\n    char.setup(config);\n\n    char.build();\n  }\n\n  addDialogue(name, dialogue, config){\n    this.dialogues[name] = dialogue;\n\n    dialogue.game = this;\n\n    dialogue.setup(config);\n  }\n\n  addTextField(){\n    this.textField=new TextField();\n    this.textField.game=this;\n    this.textField.build();\n  }\n\n  //Used for fade between screens\n  addBlackScreen(){\n    this.blackScreen=new PIXI.Sprite(PIXI.Texture.WHITE);\n    this.blackScreen.width=this.width;\n    this.blackScreen.height=this.height;\n    this.blackScreen.tint=0x000000;\n    this.blackScreen.parentLayer = this.layerUI;\n  }\n\n  //Adjust game screen to the window\n  resize() {\n    var w = window.innerWidth;// * window.devicePixelRatio;\n    var h = window.innerHeight;// * window.devicePixelRatio;\n    var ratio = Math.min( w/this.width,  h/this.height);\n    this.app.renderer.resize(this.width*ratio,this.height*ratio);\n    this.app.stage.scale.set(ratio);\n\n  }\n\n  //The magic begins\n  start(){\n    //Show Inventory\n    this.app.stage.addChild(this.inventory.container);\n    this.app.stage.addChild(this.inventory.icon);\n\n    //Show Player\n    this.app.stage.addChild(this.player.sprite);\n\n    //Add Text Field\n    this.app.stage.addChild(this.textField.container);\n  }\n\n  pause(){\n    this.activeScene.hide();\n    this.inventory.hide();\n    this.inventory.hideIcon();\n    this.player.hide();\n    if(this.activeScene.music!==undefined){\n      this.music[this.activeScene.music].stop();\n    }\n  }\n\n  resume(){\n    this.inventory.showIcon();\n    this.player.show();\n    this.activeScene.show();\n    this.fadeIn();\n  }\n\n  end(){\n    this.finished=true;\n  }\n\n  home(){\n    location.reload();\n  }\n\n  setScene(name,playerCoords) {\n    //Remove current container\n    if (this.activeScene !== null) {\n        this.app.stage.removeChild(this.activeScene.container);\n    }\n\n    //Set current container\n    this.activeScene = this.scenes[name];\n\n    //Player parameters\n    if(playerCoords!==undefined){\n      this.player.sprite.x=playerCoords[0];\n      this.player.sprite.y=playerCoords[1];\n    }\n\n    if(this.activeScene.config.Player!==undefined){\n      if(this.activeScene.config.Player.Position!==undefined){\n        this.player.position(this.activeScene.config.Player.Position);\n      }\n      if(this.activeScene.config.Player.Size!==undefined){\n        this.player.size=this.activeScene.config.Player.Size;\n        this.player.scale();\n      }\n    }\n    //Save game progress\n    if(this.activeScene!==this.scenes[this.titleLabel])\n      this.storage.save();\n  }\n\n  changeScene(name,playerCoords){\n    //Music\n    if(this.activeScene.music!==undefined){\n      //this.sound.stop(this.activeScene.music);\n      this.music[this.activeScene.music].stop();\n    }\n    this.app.stage.addChild(this.blackScreen);\n    if(this.tween) this.tween.kill();\n    this.tween=TweenMax.set(this.blackScreen, {alpha:0});\n    this.tween=TweenMax.fromTo(this.blackScreen, 1,\n      {alpha:0},\n      {alpha:1, onComplete:this.fadeOutEnd.bind(this),\n        onCompleteParams:[name,playerCoords]});\n  }\n\n  fadeIn(){\n    //Add our new container\n    this.app.stage.addChild(this.activeScene.container);\n\n    this.app.stage.addChild(this.blackScreen);\n\n    if(this.tween) this.tween.kill();\n    this.tween=TweenMax.set(this.blackScreen, {alpha:1});\n    this.tween=TweenMax.fromTo(this.blackScreen, 1,\n      {alpha:1},\n      {alpha:0, onComplete:this.fadeInEnd.bind(this)}\n    );\n  }\n\n  fadeInEnd(){\n    this.app.stage.removeChild(this.blackScreen);\n    //Music\n    if(this.activeScene.music!==undefined && this.playSounds){\n      //this.sound.play(this.activeScene.music);\n      this.music[this.activeScene.music].play(true);\n    }\n  }\n\n  fadeOutEnd(name,playerCoords){\n    this.setScene(name,playerCoords);\n    //Check Cutscenes\n    if(this.activeScene.config.CutScene!==undefined &&\n      !this.cutscenes[this.activeScene.config.CutScene].played){\n        this.activeCutscene=this.cutscenes[this.activeScene.config.CutScene];\n      //  this.pause();\n        this.activeCutscene.show();\n    }else{\n      this.resume();\n    }\n\n    this.app.stage.removeChild(this.blackScreen);\n  }\n}\n\nexport default Game;\n","import Game from './game';\n\nconsole.log(\"JSGAM 5.0.0 https://github.com/kreezii/jsgam\");\n\n//export default Game;\nexport default Game;\n"],"names":["Loader","constructor","game","onLoad","add","this","update","bind","onError","error","use","howlerMiddleware","resource","next","includes","extension","options","JSON","parse","stringify","metadata","src","url","sound","Howl","addJSON","files","i","arrayLength","length","name","slice","lastIndexOf","addFiles","data","Settings","settings","Scenes","scenes","concat","Cutscenes","cutscenes","Objects","objects","Dialogues","dialogues","Puzzles","puzzles","Credits","credits","Texts","texts","Voices","voices","Music","music","Sounds","sounds","soundSrc","j","tmpSound","Src","Name","musicSrc","tmpMusic","voiceSrc","tmpVoice","Vids","vidSrc","tmpVid","Animations","animSrc","tmpAnim","Backgrounds","bgSrc","tmpBg","Player","Texture","Json","Skeleton","player","Characters","npcSrc","npc","percent","Math","floor","progress","progressBar","width","console","log","PIXI","loaders","Storage","save","puzzlesSolved","Object","values","forEach","puzzle","solved","config","push","dialoguesDisabled","dialogue","branches","branch","Choices","choice","index","disabled","Dialogue","Branch","cutscenesPlayed","cutscene","played","language","activeLanguage","activeScene","sprite","x","y","inventory","setItem","load","disable","Index","silentMode","resolve","item","thisItem","scene","undefined","tmpIndex","indexOf","splice","playerPos","delete","localForage","clear","check","storage","getItem","then","value","changeLanguage","states","enable","catch","err","Sound","source","play","loop","volume","stop","once","onFade","fade","duration","Scene","container","Container","setup","background","Sprite","from","Background","anchor","set","addChild","Foreground","foreground","dt","hide","visible","show","Button","text","style","interactive","buttonMode","extras","BitmapText","Infotxt","Phrases","option","let","dialogueChoices","Text","ButtonStyle","on","onTap","height","activeChoice","activeDialogue","currentBranch","alpha","Repeat","get","sort","parent","scale","center","ratio","min","pivot","TextField","Avatar","build","parentLayer","layerUI","WHITE","size","Size","tint","Style","maxWidth","skip","Position","setPosition","end","talker","shutup","answer","setText","activeObject","cancel","clearTimeout","timeoutID","position","newText","adjustText","countWords","str","split","timeOut","time","activeVoice","Speed","setColor","colour","setFont","newFont","font","setAvatar","newAvi","texture","hideAvatar","Menu","buttons","addButton","modify","arrayButtons","resize","MainMenu","create","gameTexts","NewGame","Continue","Options","Help","languages","Languages","addLanguage","setLanguage","Back","father","change","mainMenu","buildText","speed","Time","structuredText","tween","animate","TweenMax","to","Lines","Title","kill","Confirmation","addText","Warning","Yes","No","addState","addAction","showOptions","showHelp","showCredits","checkAdventure","loadAdventure","newAdventure","button","action","state","warning","changeScene","FirstScene","start","latestScene","GameScene","layerTop","layerBottom","getPosition","walkable","Walkable","WalkArea","addPolygon","Obstacles","obstacles","sceneObjects","sceneChars","npcs","event","coord","getLocalPosition","app","stage","lock","activeNPC","move","getPath","fromX","fromY","toX","toY","findPath","CutScene","voice","sequenceIndex","boxesIntersect","a","b","ab","getBounds","bb","collision","result","hitArea","PolyK","points","Video","videoData","resources","videoEnds","addEventListener","Sequence","image","Image","field","videoTexture","videoSprite","adjust","setMusic","setVoice","fadeIn","removeChild","fromTo","timer","setTimeout","fadeOut","activeCutscene","pause","removeEventListener","finished","home","resume","playSounds","VoiceSet","Voice","GameObject","Description","NoDescription","Area","EMPTY","Polygon","Animation","spritesheet","frames","_frameKeys","AnimatedSprite","animationSpeed","Mirror","flip","Layer","layer","Door","door","newScene","To","holding","Lock","locked","touchArea","releaseArea","touch","release","Interactive","setInteraction","setpos","changeTexture","hold","interaction","holdTime","touchedPos","moveTo","area","coords","coordX","round","coordY","changePosition","closestedge","point","norm","Use","activePuzzle","endAction","touched","posX","posY","dragging","oldParent","depthGroup","setParent","newPosition","bounds","icon","Take","hit","found","objectsArray","charsArray","remove","scenesArray","scenesLength","Inventory","border","Icon","click","setIcon","hideIcon","showIcon","off","numObjs","tmpObj","objectHit","Combine","With","Puzzle","VoiceDescription","say","ModifyObject","objectMod","createDoor","GetObject","AddObject","RemoveObject","RemoveDoor","SetDialogue","Character","Resolve","Say","NPCSay","Source","EndGame","target","const","dbfactory","dragonBones","PixiFactory","factory","parseDragonBonesData","parseTextureAtlasData","buildArmatureDisplay","Armature","animations","Stand","closestPosition","obstaclesPolys","walkPoly","newPos","checkPath","finalPath","animationTime","abs","Walk","armature","flipX","activeState","ease","Linear","easeNone","scaleChar","Depth","look","take","talk","textField","Color","Number","Font","animation","times","lastAnimationName","dbEvents","EventObject","checkDirection","COMPLETE","takeEnd","useEnd","NotUsable","NPC","pressTimeoutID","distance","moved","firstTime","Branches","DefaultBranch","choiceSelected","searchBranch","branchFound","AnswerVoice","Answer","Link","EndDialogue","Logo","Logos","setScene","titleLabel","Game","devicePixelRatio","Stage","autoResize","renderer","window","e","preventDefault","document","getElementById","appendChild","view","body","preload","beginFill","drawRect","endFill","loadingTxt","jsons","addZOrder","logo","HoldTime","addScene","TitleScreen","addMusic","addSound","addVoice","addObject","addNPC","addDialogue","addCutscene","addPuzzle","addInventory","addTextField","addPlayer","addBlackScreen","ticker","Sprites","_sprite","object","BottomGroup","Group","sortGroup","zOrder","TopGroup","UIGroup","group","enableSort","char","blackScreen","w","innerWidth","h","innerHeight","location","reload","playerCoords","fadeOutEnd","onCompleteParams","fadeInEnd"],"mappings":"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"}